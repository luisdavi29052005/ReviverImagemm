function Sk(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Qh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Ik(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var nm={exports:{}},lu={},rm={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function Pk(){if(Vw)return Re;Vw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function x(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function P(F,Z,ye){this.props=F,this.context=Z,this.refs=C,this.updater=ye||b}P.prototype.isReactComponent={},P.prototype.setState=function(F,Z){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Z,"setState")},P.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function U(){}U.prototype=P.prototype;function H(F,Z,ye){this.props=F,this.context=Z,this.refs=C,this.updater=ye||b}var z=H.prototype=new U;z.constructor=H,k(z,P.prototype),z.isPureReactComponent=!0;var X=Array.isArray,J=Object.prototype.hasOwnProperty,ie={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function S(F,Z,ye){var Ae,Ce={},Ve=null,ze=null;if(Z!=null)for(Ae in Z.ref!==void 0&&(ze=Z.ref),Z.key!==void 0&&(Ve=""+Z.key),Z)J.call(Z,Ae)&&!D.hasOwnProperty(Ae)&&(Ce[Ae]=Z[Ae]);var qe=arguments.length-2;if(qe===1)Ce.children=ye;else if(1<qe){for(var Ye=Array(qe),Rt=0;Rt<qe;Rt++)Ye[Rt]=arguments[Rt+2];Ce.children=Ye}if(F&&F.defaultProps)for(Ae in qe=F.defaultProps,qe)Ce[Ae]===void 0&&(Ce[Ae]=qe[Ae]);return{$$typeof:n,type:F,key:Ve,ref:ze,props:Ce,_owner:ie.current}}function A(F,Z){return{$$typeof:n,type:F.type,key:Z,ref:F.ref,props:F.props,_owner:F._owner}}function j(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function M(F){var Z={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ye){return Z[ye]})}var $=/\/+/g;function N(F,Z){return typeof F=="object"&&F!==null&&F.key!=null?M(""+F.key):Z.toString(36)}function Ke(F,Z,ye,Ae,Ce){var Ve=typeof F;(Ve==="undefined"||Ve==="boolean")&&(F=null);var ze=!1;if(F===null)ze=!0;else switch(Ve){case"string":case"number":ze=!0;break;case"object":switch(F.$$typeof){case n:case e:ze=!0}}if(ze)return ze=F,Ce=Ce(ze),F=Ae===""?"."+N(ze,0):Ae,X(Ce)?(ye="",F!=null&&(ye=F.replace($,"$&/")+"/"),Ke(Ce,Z,ye,"",function(Rt){return Rt})):Ce!=null&&(j(Ce)&&(Ce=A(Ce,ye+(!Ce.key||ze&&ze.key===Ce.key?"":(""+Ce.key).replace($,"$&/")+"/")+F)),Z.push(Ce)),1;if(ze=0,Ae=Ae===""?".":Ae+":",X(F))for(var qe=0;qe<F.length;qe++){Ve=F[qe];var Ye=Ae+N(Ve,qe);ze+=Ke(Ve,Z,ye,Ye,Ce)}else if(Ye=x(F),typeof Ye=="function")for(F=Ye.call(F),qe=0;!(Ve=F.next()).done;)Ve=Ve.value,Ye=Ae+N(Ve,qe++),ze+=Ke(Ve,Z,ye,Ye,Ce);else if(Ve==="object")throw Z=String(F),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return ze}function _t(F,Z,ye){if(F==null)return F;var Ae=[],Ce=0;return Ke(F,Ae,"","",function(Ve){return Z.call(ye,Ve,Ce++)}),Ae}function wt(F){if(F._status===-1){var Z=F._result;Z=Z(),Z.then(function(ye){(F._status===0||F._status===-1)&&(F._status=1,F._result=ye)},function(ye){(F._status===0||F._status===-1)&&(F._status=2,F._result=ye)}),F._status===-1&&(F._status=0,F._result=Z)}if(F._status===1)return F._result.default;throw F._result}var Te={current:null},G={transition:null},ue={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:G,ReactCurrentOwner:ie};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:_t,forEach:function(F,Z,ye){_t(F,function(){Z.apply(this,arguments)},ye)},count:function(F){var Z=0;return _t(F,function(){Z++}),Z},toArray:function(F){return _t(F,function(Z){return Z})||[]},only:function(F){if(!j(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Re.Component=P,Re.Fragment=t,Re.Profiler=s,Re.PureComponent=H,Re.StrictMode=r,Re.Suspense=d,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Re.act=ae,Re.cloneElement=function(F,Z,ye){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ae=k({},F.props),Ce=F.key,Ve=F.ref,ze=F._owner;if(Z!=null){if(Z.ref!==void 0&&(Ve=Z.ref,ze=ie.current),Z.key!==void 0&&(Ce=""+Z.key),F.type&&F.type.defaultProps)var qe=F.type.defaultProps;for(Ye in Z)J.call(Z,Ye)&&!D.hasOwnProperty(Ye)&&(Ae[Ye]=Z[Ye]===void 0&&qe!==void 0?qe[Ye]:Z[Ye])}var Ye=arguments.length-2;if(Ye===1)Ae.children=ye;else if(1<Ye){qe=Array(Ye);for(var Rt=0;Rt<Ye;Rt++)qe[Rt]=arguments[Rt+2];Ae.children=qe}return{$$typeof:n,type:F.type,key:Ce,ref:Ve,props:Ae,_owner:ze}},Re.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},Re.createElement=S,Re.createFactory=function(F){var Z=S.bind(null,F);return Z.type=F,Z},Re.createRef=function(){return{current:null}},Re.forwardRef=function(F){return{$$typeof:c,render:F}},Re.isValidElement=j,Re.lazy=function(F){return{$$typeof:m,_payload:{_status:-1,_result:F},_init:wt}},Re.memo=function(F,Z){return{$$typeof:f,type:F,compare:Z===void 0?null:Z}},Re.startTransition=function(F){var Z=G.transition;G.transition={};try{F()}finally{G.transition=Z}},Re.unstable_act=ae,Re.useCallback=function(F,Z){return Te.current.useCallback(F,Z)},Re.useContext=function(F){return Te.current.useContext(F)},Re.useDebugValue=function(){},Re.useDeferredValue=function(F){return Te.current.useDeferredValue(F)},Re.useEffect=function(F,Z){return Te.current.useEffect(F,Z)},Re.useId=function(){return Te.current.useId()},Re.useImperativeHandle=function(F,Z,ye){return Te.current.useImperativeHandle(F,Z,ye)},Re.useInsertionEffect=function(F,Z){return Te.current.useInsertionEffect(F,Z)},Re.useLayoutEffect=function(F,Z){return Te.current.useLayoutEffect(F,Z)},Re.useMemo=function(F,Z){return Te.current.useMemo(F,Z)},Re.useReducer=function(F,Z,ye){return Te.current.useReducer(F,Z,ye)},Re.useRef=function(F){return Te.current.useRef(F)},Re.useState=function(F){return Te.current.useState(F)},Re.useSyncExternalStore=function(F,Z,ye){return Te.current.useSyncExternalStore(F,Z,ye)},Re.useTransition=function(){return Te.current.useTransition()},Re.version="18.3.1",Re}var Lw;function oc(){return Lw||(Lw=1,rm.exports=Pk()),rm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function kk(){if(Uw)return lu;Uw=1;var n=oc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,f){var m,v={},x=null,b=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(b=d.ref);for(m in d)r.call(d,m)&&!o.hasOwnProperty(m)&&(v[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)v[m]===void 0&&(v[m]=d[m]);return{$$typeof:e,type:c,key:x,ref:b,props:v,_owner:s.current}}return lu.Fragment=t,lu.jsx=l,lu.jsxs=l,lu}var Fw;function Ak(){return Fw||(Fw=1,nm.exports=kk()),nm.exports}var y=Ak(),L=oc();const Lu=Qh(L),Ck=Sk({__proto__:null,default:Lu},[L]);var Bd={},sm={exports:{}},yn={},im={exports:{}},om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function Rk(){return $w||($w=1,function(n){function e(G,ue){var ae=G.length;G.push(ue);e:for(;0<ae;){var F=ae-1>>>1,Z=G[F];if(0<s(Z,ue))G[F]=ue,G[ae]=Z,ae=F;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ue=G[0],ae=G.pop();if(ae!==ue){G[0]=ae;e:for(var F=0,Z=G.length,ye=Z>>>1;F<ye;){var Ae=2*(F+1)-1,Ce=G[Ae],Ve=Ae+1,ze=G[Ve];if(0>s(Ce,ae))Ve<Z&&0>s(ze,Ce)?(G[F]=ze,G[Ve]=ae,F=Ve):(G[F]=Ce,G[Ae]=ae,F=Ae);else if(Ve<Z&&0>s(ze,ae))G[F]=ze,G[Ve]=ae,F=Ve;else break e}}return ue}function s(G,ue){var ae=G.sortIndex-ue.sortIndex;return ae!==0?ae:G.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],f=[],m=1,v=null,x=3,b=!1,k=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(G){for(var ue=t(f);ue!==null;){if(ue.callback===null)r(f);else if(ue.startTime<=G)r(f),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=t(f)}}function X(G){if(C=!1,z(G),!k)if(t(d)!==null)k=!0,wt(J);else{var ue=t(f);ue!==null&&Te(X,ue.startTime-G)}}function J(G,ue){k=!1,C&&(C=!1,U(S),S=-1),b=!0;var ae=x;try{for(z(ue),v=t(d);v!==null&&(!(v.expirationTime>ue)||G&&!M());){var F=v.callback;if(typeof F=="function"){v.callback=null,x=v.priorityLevel;var Z=F(v.expirationTime<=ue);ue=n.unstable_now(),typeof Z=="function"?v.callback=Z:v===t(d)&&r(d),z(ue)}else r(d);v=t(d)}if(v!==null)var ye=!0;else{var Ae=t(f);Ae!==null&&Te(X,Ae.startTime-ue),ye=!1}return ye}finally{v=null,x=ae,b=!1}}var ie=!1,D=null,S=-1,A=5,j=-1;function M(){return!(n.unstable_now()-j<A)}function $(){if(D!==null){var G=n.unstable_now();j=G;var ue=!0;try{ue=D(!0,G)}finally{ue?N():(ie=!1,D=null)}}else ie=!1}var N;if(typeof H=="function")N=function(){H($)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,_t=Ke.port2;Ke.port1.onmessage=$,N=function(){_t.postMessage(null)}}else N=function(){P($,0)};function wt(G){D=G,ie||(ie=!0,N())}function Te(G,ue){S=P(function(){G(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){k||b||(k=!0,wt(J))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(G){switch(x){case 1:case 2:case 3:var ue=3;break;default:ue=x}var ae=x;x=ue;try{return G()}finally{x=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,ue){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ae=x;x=G;try{return ue()}finally{x=ae}},n.unstable_scheduleCallback=function(G,ue,ae){var F=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?F+ae:F):ae=F,G){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ae+Z,G={id:m++,callback:ue,priorityLevel:G,startTime:ae,expirationTime:Z,sortIndex:-1},ae>F?(G.sortIndex=ae,e(f,G),t(d)===null&&G===t(f)&&(C?(U(S),S=-1):C=!0,Te(X,ae-F))):(G.sortIndex=Z,e(d,G),k||b||(k=!0,wt(J))),G},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(G){var ue=x;return function(){var ae=x;x=ue;try{return G.apply(this,arguments)}finally{x=ae}}}}(om)),om}var Bw;function Nk(){return Bw||(Bw=1,im.exports=Rk()),im.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function Dk(){if(zw)return yn;zw=1;var n=oc(),e=Nk();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function x(i){return d.call(v,i)?!0:d.call(m,i)?!1:f.test(i)?v[i]=!0:(m[i]=!0,!1)}function b(i,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,a,u,p){if(a===null||typeof a>"u"||b(i,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function C(i,a,u,p,g,w,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=w,this.removeEmptyString=T}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];P[a]=new C(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function H(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(U,H);P[a]=new C(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(U,H);P[a]=new C(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(U,H);P[a]=new C(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function z(i,a,u,p){var g=P.hasOwnProperty(a)?P[a]:null;(g!==null?g.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,u,g,p)&&(u=null),p||g===null?x(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,p=g.attributeNamespace,u===null?i.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?i.setAttributeNS(p,a,u):i.setAttribute(a,u))))}var X=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),ie=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),M=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),_t=Symbol.for("react.memo"),wt=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),G=Symbol.iterator;function ue(i){return i===null||typeof i!="object"?null:(i=G&&i[G]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,F;function Z(i){if(F===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+i}var ye=!1;function Ae(i,a){if(!i||ye)return"";ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(K){var p=K}Reflect.construct(i,[],a)}else{try{a.call()}catch(K){p=K}i.call(a.prototype)}else{try{throw Error()}catch(K){p=K}i()}}catch(K){if(K&&p&&typeof K.stack=="string"){for(var g=K.stack.split(`
`),w=p.stack.split(`
`),T=g.length-1,R=w.length-1;1<=T&&0<=R&&g[T]!==w[R];)R--;for(;1<=T&&0<=R;T--,R--)if(g[T]!==w[R]){if(T!==1||R!==1)do if(T--,R--,0>R||g[T]!==w[R]){var O=`
`+g[T].replace(" at new "," at ");return i.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",i.displayName)),O}while(1<=T&&0<=R);break}}}finally{ye=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?Z(i):""}function Ce(i){switch(i.tag){case 5:return Z(i.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Ve(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case ie:return"Portal";case A:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case Ke:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case j:return(i._context.displayName||"Context")+".Provider";case $:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case _t:return a=i.displayName||null,a!==null?a:Ve(i.type)||"Memo";case wt:a=i._payload,i=i._init;try{return Ve(i(a))}catch{}}return null}function ze(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(a);case 8:return a===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function qe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ye(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Rt(i){var a=Ye(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,w=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){p=""+T,w.call(this,T)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(T){p=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function $r(i){i._valueTracker||(i._valueTracker=Rt(i))}function bo(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return i&&(p=Ye(i)?i.checked?"true":"false":i.value),i=p,i!==u?(a.setValue(i),!0):!1}function xs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function xi(i,a){var u=a.checked;return ae({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function So(i,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=qe(a.value!=null?a.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function pl(i,a){a=a.checked,a!=null&&z(i,"checked",a,!1)}function ml(i,a){pl(i,a);var u=qe(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Io(i,a.type,u):a.hasOwnProperty("defaultValue")&&Io(i,a.type,qe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Pc(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Io(i,a,u){(a!=="number"||xs(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Br=Array.isArray;function zr(i,a,u,p){if(i=i.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=a.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&p&&(i[u].defaultSelected=!0)}else{for(u=""+qe(u),a=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,p&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function gl(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Po(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Br(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:qe(u)}}function ko(i,a){var u=qe(a.value),p=qe(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function yl(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function St(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?St(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var qr,vl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,g){MSApp.execUnsafeLocalFunction(function(){return i(a,u,p,g)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(qr=qr||document.createElement("div"),qr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=qr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Es(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ti=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(i){Ti.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Ei[a]=Ei[i]})});function _l(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Ei.hasOwnProperty(i)&&Ei[i]?(""+a).trim():a+"px"}function wl(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=_l(u,a[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,g):i[u]=g}}var xl=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function El(i,a){if(a){if(xl[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Tl(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bi=null;function Ao(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Co=null,Nn=null,mr=null;function Ro(i){if(i=Gl(i)){if(typeof Co!="function")throw Error(t(280));var a=i.stateNode;a&&(a=rd(a),Co(i.stateNode,i.type,a))}}function gr(i){Nn?mr?mr.push(i):mr=[i]:Nn=i}function bl(){if(Nn){var i=Nn,a=mr;if(mr=Nn=null,Ro(i),a)for(i=0;i<a.length;i++)Ro(a[i])}}function Si(i,a){return i(a)}function Sl(){}var Wr=!1;function Il(i,a,u){if(Wr)return i(a,u);Wr=!0;try{return Si(i,a,u)}finally{Wr=!1,(Nn!==null||mr!==null)&&(Sl(),bl())}}function ft(i,a){var u=i.stateNode;if(u===null)return null;var p=rd(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var No=!1;if(c)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){No=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{No=!1}function Ii(i,a,u,p,g,w,T,R,O){var K=Array.prototype.slice.call(arguments,3);try{a.apply(u,K)}catch(ne){this.onError(ne)}}var Pi=!1,Do=null,Hn=!1,Pl=null,Cf={onError:function(i){Pi=!0,Do=i}};function jo(i,a,u,p,g,w,T,R,O){Pi=!1,Do=null,Ii.apply(Cf,arguments)}function kc(i,a,u,p,g,w,T,R,O){if(jo.apply(this,arguments),Pi){if(Pi){var K=Do;Pi=!1,Do=null}else throw Error(t(198));Hn||(Hn=!0,Pl=K)}}function Gn(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,a.flags&4098&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function ki(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Kn(i){if(Gn(i)!==i)throw Error(t(188))}function Ac(i){var a=i.alternate;if(!a){if(a=Gn(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,p=a;;){var g=u.return;if(g===null)break;var w=g.alternate;if(w===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===u)return Kn(g),i;if(w===p)return Kn(g),a;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=w;else{for(var T=!1,R=g.child;R;){if(R===u){T=!0,u=g,p=w;break}if(R===p){T=!0,p=g,u=w;break}R=R.sibling}if(!T){for(R=w.child;R;){if(R===u){T=!0,u=w,p=g;break}if(R===p){T=!0,p=w,u=g;break}R=R.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function kl(i){return i=Ac(i),i!==null?Oo(i):null}function Oo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Oo(i);if(a!==null)return a;i=i.sibling}return null}var Mo=e.unstable_scheduleCallback,Al=e.unstable_cancelCallback,Cc=e.unstable_shouldYield,Rf=e.unstable_requestPaint,Xe=e.unstable_now,Rc=e.unstable_getCurrentPriorityLevel,Ai=e.unstable_ImmediatePriority,Ts=e.unstable_UserBlockingPriority,Dn=e.unstable_NormalPriority,Cl=e.unstable_LowPriority,Nc=e.unstable_IdlePriority,Ci=null,wn=null;function Dc(i){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Ci,i,void 0,(i.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:Oc,Rl=Math.log,jc=Math.LN2;function Oc(i){return i>>>=0,i===0?32:31-(Rl(i)/jc|0)|0}var Vo=64,Lo=4194304;function bs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ri(i,a){var u=i.pendingLanes;if(u===0)return 0;var p=0,g=i.suspendedLanes,w=i.pingedLanes,T=u&268435455;if(T!==0){var R=T&~g;R!==0?p=bs(R):(w&=T,w!==0&&(p=bs(w)))}else T=u&~g,T!==0?p=bs(T):w!==0&&(p=bs(w));if(p===0)return 0;if(a!==0&&a!==p&&!(a&g)&&(g=p&-p,w=a&-a,g>=w||g===16&&(w&4194240)!==0))return a;if(p&4&&(p|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)u=31-sn(a),g=1<<u,p|=i[u],a&=~g;return p}function Nf(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hr(i,a){for(var u=i.suspendedLanes,p=i.pingedLanes,g=i.expirationTimes,w=i.pendingLanes;0<w;){var T=31-sn(w),R=1<<T,O=g[T];O===-1?(!(R&u)||R&p)&&(g[T]=Nf(R,a)):O<=a&&(i.expiredLanes|=R),w&=~R}}function xn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ni(){var i=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),i}function Ss(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function Is(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-sn(a),i[a]=u}function Qe(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-sn(u),w=1<<g;a[g]=0,p[g]=-1,i[g]=-1,u&=~w}}function Ps(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var p=31-sn(u),g=1<<p;g&a|i[p]&a&&(i[p]|=a),u&=~g}}var je=0;function ks(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Mc,Uo,Vc,Lc,Uc,Nl=!1,yr=[],Ut=null,Qn=null,Yn=null,As=new Map,jn=new Map,vr=[],Df="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(i,a){switch(i){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":As.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":jn.delete(a.pointerId)}}function cn(i,a,u,p,g,w){return i===null||i.nativeEvent!==w?(i={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[g]},a!==null&&(a=Gl(a),a!==null&&Uo(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function jf(i,a,u,p,g){switch(a){case"focusin":return Ut=cn(Ut,i,a,u,p,g),!0;case"dragenter":return Qn=cn(Qn,i,a,u,p,g),!0;case"mouseover":return Yn=cn(Yn,i,a,u,p,g),!0;case"pointerover":var w=g.pointerId;return As.set(w,cn(As.get(w)||null,i,a,u,p,g)),!0;case"gotpointercapture":return w=g.pointerId,jn.set(w,cn(jn.get(w)||null,i,a,u,p,g)),!0}return!1}function $c(i){var a=Vi(i.target);if(a!==null){var u=Gn(a);if(u!==null){if(a=u.tag,a===13){if(a=ki(u),a!==null){i.blockedOn=a,Uc(i.priority,function(){Vc(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Gr(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Fo(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);bi=p,u.target.dispatchEvent(p),bi=null}else return a=Gl(u),a!==null&&Uo(a),i.blockedOn=u,!1;a.shift()}return!0}function Di(i,a,u){Gr(i)&&u.delete(a)}function Bc(){Nl=!1,Ut!==null&&Gr(Ut)&&(Ut=null),Qn!==null&&Gr(Qn)&&(Qn=null),Yn!==null&&Gr(Yn)&&(Yn=null),As.forEach(Di),jn.forEach(Di)}function Xn(i,a){i.blockedOn===a&&(i.blockedOn=null,Nl||(Nl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bc)))}function Jn(i){function a(g){return Xn(g,i)}if(0<yr.length){Xn(yr[0],i);for(var u=1;u<yr.length;u++){var p=yr[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Ut!==null&&Xn(Ut,i),Qn!==null&&Xn(Qn,i),Yn!==null&&Xn(Yn,i),As.forEach(a),jn.forEach(a),u=0;u<vr.length;u++)p=vr[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<vr.length&&(u=vr[0],u.blockedOn===null);)$c(u),u.blockedOn===null&&vr.shift()}var Kr=X.ReactCurrentBatchConfig,Cs=!0;function it(i,a,u,p){var g=je,w=Kr.transition;Kr.transition=null;try{je=1,Dl(i,a,u,p)}finally{je=g,Kr.transition=w}}function Of(i,a,u,p){var g=je,w=Kr.transition;Kr.transition=null;try{je=4,Dl(i,a,u,p)}finally{je=g,Kr.transition=w}}function Dl(i,a,u,p){if(Cs){var g=Fo(i,a,u,p);if(g===null)Hf(i,a,p,ji,u),Fc(i,p);else if(jf(g,i,a,u,p))p.stopPropagation();else if(Fc(i,p),a&4&&-1<Df.indexOf(i)){for(;g!==null;){var w=Gl(g);if(w!==null&&Mc(w),w=Fo(i,a,u,p),w===null&&Hf(i,a,p,ji,u),w===g)break;g=w}g!==null&&p.stopPropagation()}else Hf(i,a,p,null,u)}}var ji=null;function Fo(i,a,u,p){if(ji=null,i=Ao(p),i=Vi(i),i!==null)if(a=Gn(i),a===null)i=null;else if(u=a.tag,u===13){if(i=ki(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return ji=i,null}function jl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rc()){case Ai:return 1;case Ts:return 4;case Dn:case Cl:return 16;case Nc:return 536870912;default:return 16}default:return 16}}var En=null,$o=null,dn=null;function Ol(){if(dn)return dn;var i,a=$o,u=a.length,p,g="value"in En?En.value:En.textContent,w=g.length;for(i=0;i<u&&a[i]===g[i];i++);var T=u-i;for(p=1;p<=T&&a[u-p]===g[w-p];p++);return dn=g.slice(i,1<p?1-p:void 0)}function Bo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function _r(){return!0}function Ml(){return!1}function Ft(i){function a(u,p,g,w,T){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(u=i[R],this[R]=u?u(w):w[R]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?_r:Ml,this.isPropagationStopped=Ml,this}return ae(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),a}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=Ft(Zn),wr=ae({},Zn,{view:0,detail:0}),Mf=Ft(wr),qo,Qr,Rs,Oi=ae({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Rs&&(Rs&&i.type==="mousemove"?(qo=i.screenX-Rs.screenX,Qr=i.screenY-Rs.screenY):Qr=qo=0,Rs=i),qo)},movementY:function(i){return"movementY"in i?i.movementY:Qr}}),Wo=Ft(Oi),Vl=ae({},Oi,{dataTransfer:0}),zc=Ft(Vl),Ho=ae({},wr,{relatedTarget:0}),Go=Ft(Ho),qc=ae({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Yr=Ft(qc),Wc=ae({},Zn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Hc=Ft(Wc),Gc=ae({},Zn,{data:0}),Ll=Ft(Gc),Ko={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},on={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qc(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Kc[i])?!!a[i]:!1}function xr(){return Qc}var h=ae({},wr,{key:function(i){if(i.key){var a=Ko[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Bo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?on[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(i){return i.type==="keypress"?Bo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Bo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_=Ft(h),E=ae({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Ft(E),B=ae({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),Q=Ft(B),le=ae({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Ft(le),Pt=ae({},Oi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Ft(Pt),Nt=[9,13,27,32],xt=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Tn=c&&"TextEvent"in window&&!On,Mi=c&&(!xt||On&&8<On&&11>=On),Qo=" ",Rv=!1;function Nv(i,a){switch(i){case"keyup":return Nt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Yo=!1;function EP(i,a){switch(i){case"compositionend":return Dv(a);case"keypress":return a.which!==32?null:(Rv=!0,Qo);case"textInput":return i=a.data,i===Qo&&Rv?null:i;default:return null}}function TP(i,a){if(Yo)return i==="compositionend"||!xt&&Nv(i,a)?(i=Ol(),dn=$o=En=null,Yo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Mi&&a.locale!=="ko"?null:a.data;default:return null}}var bP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!bP[i.type]:a==="textarea"}function Ov(i,a,u,p){gr(p),a=ed(a,"onChange"),0<a.length&&(u=new zo("onChange","change",null,u,p),i.push({event:u,listeners:a}))}var Ul=null,Fl=null;function SP(i){Zv(i,0)}function Yc(i){var a=ta(i);if(bo(a))return i}function IP(i,a){if(i==="change")return a}var Mv=!1;if(c){var Vf;if(c){var Lf="oninput"in document;if(!Lf){var Vv=document.createElement("div");Vv.setAttribute("oninput","return;"),Lf=typeof Vv.oninput=="function"}Vf=Lf}else Vf=!1;Mv=Vf&&(!document.documentMode||9<document.documentMode)}function Lv(){Ul&&(Ul.detachEvent("onpropertychange",Uv),Fl=Ul=null)}function Uv(i){if(i.propertyName==="value"&&Yc(Fl)){var a=[];Ov(a,Fl,i,Ao(i)),Il(SP,a)}}function PP(i,a,u){i==="focusin"?(Lv(),Ul=a,Fl=u,Ul.attachEvent("onpropertychange",Uv)):i==="focusout"&&Lv()}function kP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yc(Fl)}function AP(i,a){if(i==="click")return Yc(a)}function CP(i,a){if(i==="input"||i==="change")return Yc(a)}function RP(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var er=typeof Object.is=="function"?Object.is:RP;function $l(i,a){if(er(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!d.call(a,g)||!er(i[g],a[g]))return!1}return!0}function Fv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $v(i,a){var u=Fv(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=a&&p>=a)return{node:u,offset:a-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Fv(u)}}function Bv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Bv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function zv(){for(var i=window,a=xs();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=xs(i.document)}return a}function Uf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function NP(i){var a=zv(),u=i.focusedElem,p=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&Bv(u.ownerDocument.documentElement,u)){if(p!==null&&Uf(u)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,w=Math.min(p.start,g);p=p.end===void 0?w:Math.min(p.end,g),!i.extend&&w>p&&(g=p,p=w,w=g),g=$v(u,w);var T=$v(u,p);g&&T&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),w>p?(i.addRange(a),i.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var DP=c&&"documentMode"in document&&11>=document.documentMode,Xo=null,Ff=null,Bl=null,$f=!1;function qv(i,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;$f||Xo==null||Xo!==xs(p)||(p=Xo,"selectionStart"in p&&Uf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Bl&&$l(Bl,p)||(Bl=p,p=ed(Ff,"onSelect"),0<p.length&&(a=new zo("onSelect","select",null,a,u),i.push({event:a,listeners:p}),a.target=Xo)))}function Xc(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Jo={animationend:Xc("Animation","AnimationEnd"),animationiteration:Xc("Animation","AnimationIteration"),animationstart:Xc("Animation","AnimationStart"),transitionend:Xc("Transition","TransitionEnd")},Bf={},Wv={};c&&(Wv=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function Jc(i){if(Bf[i])return Bf[i];if(!Jo[i])return i;var a=Jo[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in Wv)return Bf[i]=a[u];return i}var Hv=Jc("animationend"),Gv=Jc("animationiteration"),Kv=Jc("animationstart"),Qv=Jc("transitionend"),Yv=new Map,Xv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(i,a){Yv.set(i,a),o(a,[i])}for(var zf=0;zf<Xv.length;zf++){var qf=Xv[zf],jP=qf.toLowerCase(),OP=qf[0].toUpperCase()+qf.slice(1);Ns(jP,"on"+OP)}Ns(Hv,"onAnimationEnd"),Ns(Gv,"onAnimationIteration"),Ns(Kv,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(Qv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MP=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function Jv(i,a,u){var p=i.type||"unknown-event";i.currentTarget=u,kc(p,a,void 0,i),i.currentTarget=null}function Zv(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],g=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var T=p.length-1;0<=T;T--){var R=p[T],O=R.instance,K=R.currentTarget;if(R=R.listener,O!==w&&g.isPropagationStopped())break e;Jv(g,R,K),w=O}else for(T=0;T<p.length;T++){if(R=p[T],O=R.instance,K=R.currentTarget,R=R.listener,O!==w&&g.isPropagationStopped())break e;Jv(g,R,K),w=O}}}if(Hn)throw i=Pl,Hn=!1,Pl=null,i}function et(i,a){var u=a[Jf];u===void 0&&(u=a[Jf]=new Set);var p=i+"__bubble";u.has(p)||(e_(a,i,2,!1),u.add(p))}function Wf(i,a,u){var p=0;a&&(p|=4),e_(u,i,p,a)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function ql(i){if(!i[Zc]){i[Zc]=!0,r.forEach(function(u){u!=="selectionchange"&&(MP.has(u)||Wf(u,!1,i),Wf(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Zc]||(a[Zc]=!0,Wf("selectionchange",!1,a))}}function e_(i,a,u,p){switch(jl(a)){case 1:var g=it;break;case 4:g=Of;break;default:g=Dl}u=g.bind(null,a,u,i),g=void 0,!No||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),p?g!==void 0?i.addEventListener(a,u,{capture:!0,passive:g}):i.addEventListener(a,u,!0):g!==void 0?i.addEventListener(a,u,{passive:g}):i.addEventListener(a,u,!1)}function Hf(i,a,u,p,g){var w=p;if(!(a&1)&&!(a&2)&&p!==null)e:for(;;){if(p===null)return;var T=p.tag;if(T===3||T===4){var R=p.stateNode.containerInfo;if(R===g||R.nodeType===8&&R.parentNode===g)break;if(T===4)for(T=p.return;T!==null;){var O=T.tag;if((O===3||O===4)&&(O=T.stateNode.containerInfo,O===g||O.nodeType===8&&O.parentNode===g))return;T=T.return}for(;R!==null;){if(T=Vi(R),T===null)return;if(O=T.tag,O===5||O===6){p=w=T;continue e}R=R.parentNode}}p=p.return}Il(function(){var K=w,ne=Ao(u),se=[];e:{var te=Yv.get(i);if(te!==void 0){var ce=zo,fe=i;switch(i){case"keypress":if(Bo(u)===0)break e;case"keydown":case"keyup":ce=_;break;case"focusin":fe="focus",ce=Go;break;case"focusout":fe="blur",ce=Go;break;case"beforeblur":case"afterblur":ce=Go;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Q;break;case Hv:case Gv:case Kv:ce=Yr;break;case Qv:ce=We;break;case"scroll":ce=Mf;break;case"wheel":ce=Le;break;case"copy":case"cut":case"paste":ce=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=I}var pe=(a&4)!==0,pt=!pe&&i==="scroll",q=pe?te!==null?te+"Capture":null:te;pe=[];for(var V=K,W;V!==null;){W=V;var oe=W.stateNode;if(W.tag===5&&oe!==null&&(W=oe,q!==null&&(oe=ft(V,q),oe!=null&&pe.push(Wl(V,oe,W)))),pt)break;V=V.return}0<pe.length&&(te=new ce(te,fe,null,u,ne),se.push({event:te,listeners:pe}))}}if(!(a&7)){e:{if(te=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",te&&u!==bi&&(fe=u.relatedTarget||u.fromElement)&&(Vi(fe)||fe[Xr]))break e;if((ce||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ce?(fe=u.relatedTarget||u.toElement,ce=K,fe=fe?Vi(fe):null,fe!==null&&(pt=Gn(fe),fe!==pt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ce=null,fe=K),ce!==fe)){if(pe=Wo,oe="onMouseLeave",q="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(pe=I,oe="onPointerLeave",q="onPointerEnter",V="pointer"),pt=ce==null?te:ta(ce),W=fe==null?te:ta(fe),te=new pe(oe,V+"leave",ce,u,ne),te.target=pt,te.relatedTarget=W,oe=null,Vi(ne)===K&&(pe=new pe(q,V+"enter",fe,u,ne),pe.target=W,pe.relatedTarget=pt,oe=pe),pt=oe,ce&&fe)t:{for(pe=ce,q=fe,V=0,W=pe;W;W=Zo(W))V++;for(W=0,oe=q;oe;oe=Zo(oe))W++;for(;0<V-W;)pe=Zo(pe),V--;for(;0<W-V;)q=Zo(q),W--;for(;V--;){if(pe===q||q!==null&&pe===q.alternate)break t;pe=Zo(pe),q=Zo(q)}pe=null}else pe=null;ce!==null&&t_(se,te,ce,pe,!1),fe!==null&&pt!==null&&t_(se,pt,fe,pe,!0)}}e:{if(te=K?ta(K):window,ce=te.nodeName&&te.nodeName.toLowerCase(),ce==="select"||ce==="input"&&te.type==="file")var ge=IP;else if(jv(te))if(Mv)ge=CP;else{ge=kP;var _e=PP}else(ce=te.nodeName)&&ce.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ge=AP);if(ge&&(ge=ge(i,K))){Ov(se,ge,u,ne);break e}_e&&_e(i,te,K),i==="focusout"&&(_e=te._wrapperState)&&_e.controlled&&te.type==="number"&&Io(te,"number",te.value)}switch(_e=K?ta(K):window,i){case"focusin":(jv(_e)||_e.contentEditable==="true")&&(Xo=_e,Ff=K,Bl=null);break;case"focusout":Bl=Ff=Xo=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,qv(se,u,ne);break;case"selectionchange":if(DP)break;case"keydown":case"keyup":qv(se,u,ne)}var we;if(xt)e:{switch(i){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Yo?Nv(i,u)&&(be="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(be="onCompositionStart");be&&(Mi&&u.locale!=="ko"&&(Yo||be!=="onCompositionStart"?be==="onCompositionEnd"&&Yo&&(we=Ol()):(En=ne,$o="value"in En?En.value:En.textContent,Yo=!0)),_e=ed(K,be),0<_e.length&&(be=new Ll(be,i,null,u,ne),se.push({event:be,listeners:_e}),we?be.data=we:(we=Dv(u),we!==null&&(be.data=we)))),(we=Tn?EP(i,u):TP(i,u))&&(K=ed(K,"onBeforeInput"),0<K.length&&(ne=new Ll("onBeforeInput","beforeinput",null,u,ne),se.push({event:ne,listeners:K}),ne.data=we))}Zv(se,a)})}function Wl(i,a,u){return{instance:i,listener:a,currentTarget:u}}function ed(i,a){for(var u=a+"Capture",p=[];i!==null;){var g=i,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=ft(i,u),w!=null&&p.unshift(Wl(i,w,g)),w=ft(i,a),w!=null&&p.push(Wl(i,w,g))),i=i.return}return p}function Zo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function t_(i,a,u,p,g){for(var w=a._reactName,T=[];u!==null&&u!==p;){var R=u,O=R.alternate,K=R.stateNode;if(O!==null&&O===p)break;R.tag===5&&K!==null&&(R=K,g?(O=ft(u,w),O!=null&&T.unshift(Wl(u,O,R))):g||(O=ft(u,w),O!=null&&T.push(Wl(u,O,R)))),u=u.return}T.length!==0&&i.push({event:a,listeners:T})}var VP=/\r\n?/g,LP=/\u0000|\uFFFD/g;function n_(i){return(typeof i=="string"?i:""+i).replace(VP,`
`).replace(LP,"")}function td(i,a,u){if(a=n_(a),n_(i)!==a&&u)throw Error(t(425))}function nd(){}var Gf=null,Kf=null;function Qf(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Yf=typeof setTimeout=="function"?setTimeout:void 0,UP=typeof clearTimeout=="function"?clearTimeout:void 0,r_=typeof Promise=="function"?Promise:void 0,FP=typeof queueMicrotask=="function"?queueMicrotask:typeof r_<"u"?function(i){return r_.resolve(null).then(i).catch($P)}:Yf;function $P(i){setTimeout(function(){throw i})}function Xf(i,a){var u=a,p=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){i.removeChild(g),Jn(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);Jn(a)}function Ds(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function s_(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var ea=Math.random().toString(36).slice(2),Er="__reactFiber$"+ea,Hl="__reactProps$"+ea,Xr="__reactContainer$"+ea,Jf="__reactEvents$"+ea,BP="__reactListeners$"+ea,zP="__reactHandles$"+ea;function Vi(i){var a=i[Er];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Xr]||u[Er]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=s_(i);i!==null;){if(u=i[Er])return u;i=s_(i)}return a}i=u,u=i.parentNode}return null}function Gl(i){return i=i[Er]||i[Xr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ta(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function rd(i){return i[Hl]||null}var Zf=[],na=-1;function js(i){return{current:i}}function tt(i){0>na||(i.current=Zf[na],Zf[na]=null,na--)}function Je(i,a){na++,Zf[na]=i.current,i.current=a}var Os={},Kt=js(Os),hn=js(!1),Li=Os;function ra(i,a){var u=i.type.contextTypes;if(!u)return Os;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in u)g[w]=a[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function fn(i){return i=i.childContextTypes,i!=null}function sd(){tt(hn),tt(Kt)}function i_(i,a,u){if(Kt.current!==Os)throw Error(t(168));Je(Kt,a),Je(hn,u)}function o_(i,a,u){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in a))throw Error(t(108,ze(i)||"Unknown",g));return ae({},u,p)}function id(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Os,Li=Kt.current,Je(Kt,i),Je(hn,hn.current),!0}function a_(i,a,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=o_(i,a,Li),p.__reactInternalMemoizedMergedChildContext=i,tt(hn),tt(Kt),Je(Kt,i)):tt(hn),Je(hn,u)}var Jr=null,od=!1,ep=!1;function l_(i){Jr===null?Jr=[i]:Jr.push(i)}function qP(i){od=!0,l_(i)}function Ms(){if(!ep&&Jr!==null){ep=!0;var i=0,a=je;try{var u=Jr;for(je=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}Jr=null,od=!1}catch(g){throw Jr!==null&&(Jr=Jr.slice(i+1)),Mo(Ai,Ms),g}finally{je=a,ep=!1}}return null}var sa=[],ia=0,ad=null,ld=0,Mn=[],Vn=0,Ui=null,Zr=1,es="";function Fi(i,a){sa[ia++]=ld,sa[ia++]=ad,ad=i,ld=a}function u_(i,a,u){Mn[Vn++]=Zr,Mn[Vn++]=es,Mn[Vn++]=Ui,Ui=i;var p=Zr;i=es;var g=32-sn(p)-1;p&=~(1<<g),u+=1;var w=32-sn(a)+g;if(30<w){var T=g-g%5;w=(p&(1<<T)-1).toString(32),p>>=T,g-=T,Zr=1<<32-sn(a)+g|u<<g|p,es=w+i}else Zr=1<<w|u<<g|p,es=i}function tp(i){i.return!==null&&(Fi(i,1),u_(i,1,0))}function np(i){for(;i===ad;)ad=sa[--ia],sa[ia]=null,ld=sa[--ia],sa[ia]=null;for(;i===Ui;)Ui=Mn[--Vn],Mn[Vn]=null,es=Mn[--Vn],Mn[Vn]=null,Zr=Mn[--Vn],Mn[Vn]=null}var bn=null,Sn=null,ot=!1,tr=null;function c_(i,a){var u=$n(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function d_(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,bn=i,Sn=Ds(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,bn=i,Sn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Ui!==null?{id:Zr,overflow:es}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=$n(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,bn=i,Sn=null,!0):!1;default:return!1}}function rp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function sp(i){if(ot){var a=Sn;if(a){var u=a;if(!d_(i,a)){if(rp(i))throw Error(t(418));a=Ds(u.nextSibling);var p=bn;a&&d_(i,a)?c_(p,u):(i.flags=i.flags&-4097|2,ot=!1,bn=i)}}else{if(rp(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,bn=i}}}function h_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;bn=i}function ud(i){if(i!==bn)return!1;if(!ot)return h_(i),ot=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Qf(i.type,i.memoizedProps)),a&&(a=Sn)){if(rp(i))throw f_(),Error(t(418));for(;a;)c_(i,a),a=Ds(a.nextSibling)}if(h_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){Sn=Ds(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}Sn=null}}else Sn=bn?Ds(i.stateNode.nextSibling):null;return!0}function f_(){for(var i=Sn;i;)i=Ds(i.nextSibling)}function oa(){Sn=bn=null,ot=!1}function ip(i){tr===null?tr=[i]:tr.push(i)}var WP=X.ReactCurrentBatchConfig;function Kl(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var g=p,w=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(T){var R=g.refs;T===null?delete R[w]:R[w]=T},a._stringRef=w,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function cd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function p_(i){var a=i._init;return a(i._payload)}function m_(i){function a(q,V){if(i){var W=q.deletions;W===null?(q.deletions=[V],q.flags|=16):W.push(V)}}function u(q,V){if(!i)return null;for(;V!==null;)a(q,V),V=V.sibling;return null}function p(q,V){for(q=new Map;V!==null;)V.key!==null?q.set(V.key,V):q.set(V.index,V),V=V.sibling;return q}function g(q,V){return q=qs(q,V),q.index=0,q.sibling=null,q}function w(q,V,W){return q.index=W,i?(W=q.alternate,W!==null?(W=W.index,W<V?(q.flags|=2,V):W):(q.flags|=2,V)):(q.flags|=1048576,V)}function T(q){return i&&q.alternate===null&&(q.flags|=2),q}function R(q,V,W,oe){return V===null||V.tag!==6?(V=Yp(W,q.mode,oe),V.return=q,V):(V=g(V,W),V.return=q,V)}function O(q,V,W,oe){var ge=W.type;return ge===D?ne(q,V,W.props.children,oe,W.key):V!==null&&(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===wt&&p_(ge)===V.type)?(oe=g(V,W.props),oe.ref=Kl(q,V,W),oe.return=q,oe):(oe=jd(W.type,W.key,W.props,null,q.mode,oe),oe.ref=Kl(q,V,W),oe.return=q,oe)}function K(q,V,W,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==W.containerInfo||V.stateNode.implementation!==W.implementation?(V=Xp(W,q.mode,oe),V.return=q,V):(V=g(V,W.children||[]),V.return=q,V)}function ne(q,V,W,oe,ge){return V===null||V.tag!==7?(V=Ki(W,q.mode,oe,ge),V.return=q,V):(V=g(V,W),V.return=q,V)}function se(q,V,W){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Yp(""+V,q.mode,W),V.return=q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case J:return W=jd(V.type,V.key,V.props,null,q.mode,W),W.ref=Kl(q,null,V),W.return=q,W;case ie:return V=Xp(V,q.mode,W),V.return=q,V;case wt:var oe=V._init;return se(q,oe(V._payload),W)}if(Br(V)||ue(V))return V=Ki(V,q.mode,W,null),V.return=q,V;cd(q,V)}return null}function te(q,V,W,oe){var ge=V!==null?V.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return ge!==null?null:R(q,V,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case J:return W.key===ge?O(q,V,W,oe):null;case ie:return W.key===ge?K(q,V,W,oe):null;case wt:return ge=W._init,te(q,V,ge(W._payload),oe)}if(Br(W)||ue(W))return ge!==null?null:ne(q,V,W,oe,null);cd(q,W)}return null}function ce(q,V,W,oe,ge){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return q=q.get(W)||null,R(V,q,""+oe,ge);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case J:return q=q.get(oe.key===null?W:oe.key)||null,O(V,q,oe,ge);case ie:return q=q.get(oe.key===null?W:oe.key)||null,K(V,q,oe,ge);case wt:var _e=oe._init;return ce(q,V,W,_e(oe._payload),ge)}if(Br(oe)||ue(oe))return q=q.get(W)||null,ne(V,q,oe,ge,null);cd(V,oe)}return null}function fe(q,V,W,oe){for(var ge=null,_e=null,we=V,be=V=0,Ot=null;we!==null&&be<W.length;be++){we.index>be?(Ot=we,we=null):Ot=we.sibling;var $e=te(q,we,W[be],oe);if($e===null){we===null&&(we=Ot);break}i&&we&&$e.alternate===null&&a(q,we),V=w($e,V,be),_e===null?ge=$e:_e.sibling=$e,_e=$e,we=Ot}if(be===W.length)return u(q,we),ot&&Fi(q,be),ge;if(we===null){for(;be<W.length;be++)we=se(q,W[be],oe),we!==null&&(V=w(we,V,be),_e===null?ge=we:_e.sibling=we,_e=we);return ot&&Fi(q,be),ge}for(we=p(q,we);be<W.length;be++)Ot=ce(we,q,be,W[be],oe),Ot!==null&&(i&&Ot.alternate!==null&&we.delete(Ot.key===null?be:Ot.key),V=w(Ot,V,be),_e===null?ge=Ot:_e.sibling=Ot,_e=Ot);return i&&we.forEach(function(Ws){return a(q,Ws)}),ot&&Fi(q,be),ge}function pe(q,V,W,oe){var ge=ue(W);if(typeof ge!="function")throw Error(t(150));if(W=ge.call(W),W==null)throw Error(t(151));for(var _e=ge=null,we=V,be=V=0,Ot=null,$e=W.next();we!==null&&!$e.done;be++,$e=W.next()){we.index>be?(Ot=we,we=null):Ot=we.sibling;var Ws=te(q,we,$e.value,oe);if(Ws===null){we===null&&(we=Ot);break}i&&we&&Ws.alternate===null&&a(q,we),V=w(Ws,V,be),_e===null?ge=Ws:_e.sibling=Ws,_e=Ws,we=Ot}if($e.done)return u(q,we),ot&&Fi(q,be),ge;if(we===null){for(;!$e.done;be++,$e=W.next())$e=se(q,$e.value,oe),$e!==null&&(V=w($e,V,be),_e===null?ge=$e:_e.sibling=$e,_e=$e);return ot&&Fi(q,be),ge}for(we=p(q,we);!$e.done;be++,$e=W.next())$e=ce(we,q,be,$e.value,oe),$e!==null&&(i&&$e.alternate!==null&&we.delete($e.key===null?be:$e.key),V=w($e,V,be),_e===null?ge=$e:_e.sibling=$e,_e=$e);return i&&we.forEach(function(bk){return a(q,bk)}),ot&&Fi(q,be),ge}function pt(q,V,W,oe){if(typeof W=="object"&&W!==null&&W.type===D&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case J:e:{for(var ge=W.key,_e=V;_e!==null;){if(_e.key===ge){if(ge=W.type,ge===D){if(_e.tag===7){u(q,_e.sibling),V=g(_e,W.props.children),V.return=q,q=V;break e}}else if(_e.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===wt&&p_(ge)===_e.type){u(q,_e.sibling),V=g(_e,W.props),V.ref=Kl(q,_e,W),V.return=q,q=V;break e}u(q,_e);break}else a(q,_e);_e=_e.sibling}W.type===D?(V=Ki(W.props.children,q.mode,oe,W.key),V.return=q,q=V):(oe=jd(W.type,W.key,W.props,null,q.mode,oe),oe.ref=Kl(q,V,W),oe.return=q,q=oe)}return T(q);case ie:e:{for(_e=W.key;V!==null;){if(V.key===_e)if(V.tag===4&&V.stateNode.containerInfo===W.containerInfo&&V.stateNode.implementation===W.implementation){u(q,V.sibling),V=g(V,W.children||[]),V.return=q,q=V;break e}else{u(q,V);break}else a(q,V);V=V.sibling}V=Xp(W,q.mode,oe),V.return=q,q=V}return T(q);case wt:return _e=W._init,pt(q,V,_e(W._payload),oe)}if(Br(W))return fe(q,V,W,oe);if(ue(W))return pe(q,V,W,oe);cd(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,V!==null&&V.tag===6?(u(q,V.sibling),V=g(V,W),V.return=q,q=V):(u(q,V),V=Yp(W,q.mode,oe),V.return=q,q=V),T(q)):u(q,V)}return pt}var aa=m_(!0),g_=m_(!1),dd=js(null),hd=null,la=null,op=null;function ap(){op=la=hd=null}function lp(i){var a=dd.current;tt(dd),i._currentValue=a}function up(i,a,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===u)break;i=i.return}}function ua(i,a){hd=i,op=la=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&a&&(pn=!0),i.firstContext=null)}function Ln(i){var a=i._currentValue;if(op!==i)if(i={context:i,memoizedValue:a,next:null},la===null){if(hd===null)throw Error(t(308));la=i,hd.dependencies={lanes:0,firstContext:i}}else la=la.next=i;return a}var $i=null;function cp(i){$i===null?$i=[i]:$i.push(i)}function y_(i,a,u,p){var g=a.interleaved;return g===null?(u.next=u,cp(a)):(u.next=g.next,g.next=u),a.interleaved=u,ts(i,p)}function ts(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Vs=!1;function dp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v_(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ns(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Ls(i,a,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,Fe&2){var g=p.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),p.pending=a,ts(i,u)}return g=p.interleaved,g===null?(a.next=a,cp(p)):(a.next=g.next,g.next=a),p.interleaved=a,ts(i,u)}function fd(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Ps(i,u)}}function __(i,a){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?g=w=T:w=w.next=T,u=u.next}while(u!==null);w===null?g=w=a:w=w.next=a}else g=w=a;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function pd(i,a,u,p){var g=i.updateQueue;Vs=!1;var w=g.firstBaseUpdate,T=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var O=R,K=O.next;O.next=null,T===null?w=K:T.next=K,T=O;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,R=ne.lastBaseUpdate,R!==T&&(R===null?ne.firstBaseUpdate=K:R.next=K,ne.lastBaseUpdate=O))}if(w!==null){var se=g.baseState;T=0,ne=K=O=null,R=w;do{var te=R.lane,ce=R.eventTime;if((p&te)===te){ne!==null&&(ne=ne.next={eventTime:ce,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var fe=i,pe=R;switch(te=a,ce=u,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){se=fe.call(ce,se,te);break e}se=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,te=typeof fe=="function"?fe.call(ce,se,te):fe,te==null)break e;se=ae({},se,te);break e;case 2:Vs=!0}}R.callback!==null&&R.lane!==0&&(i.flags|=64,te=g.effects,te===null?g.effects=[R]:te.push(R))}else ce={eventTime:ce,lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ne===null?(K=ne=ce,O=se):ne=ne.next=ce,T|=te;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;te=R,R=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);if(ne===null&&(O=se),g.baseState=O,g.firstBaseUpdate=K,g.lastBaseUpdate=ne,a=g.shared.interleaved,a!==null){g=a;do T|=g.lane,g=g.next;while(g!==a)}else w===null&&(g.shared.lanes=0);qi|=T,i.lanes=T,i.memoizedState=se}}function w_(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var Ql={},Tr=js(Ql),Yl=js(Ql),Xl=js(Ql);function Bi(i){if(i===Ql)throw Error(t(174));return i}function hp(i,a){switch(Je(Xl,a),Je(Yl,i),Je(Tr,Ql),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:It(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=It(a,i)}tt(Tr),Je(Tr,a)}function ca(){tt(Tr),tt(Yl),tt(Xl)}function x_(i){Bi(Xl.current);var a=Bi(Tr.current),u=It(a,i.type);a!==u&&(Je(Yl,i),Je(Tr,u))}function fp(i){Yl.current===i&&(tt(Tr),tt(Yl))}var at=js(0);function md(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var pp=[];function mp(){for(var i=0;i<pp.length;i++)pp[i]._workInProgressVersionPrimary=null;pp.length=0}var gd=X.ReactCurrentDispatcher,gp=X.ReactCurrentBatchConfig,zi=0,lt=null,kt=null,Dt=null,yd=!1,Jl=!1,Zl=0,HP=0;function Qt(){throw Error(t(321))}function yp(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!er(i[u],a[u]))return!1;return!0}function vp(i,a,u,p,g,w){if(zi=w,lt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,gd.current=i===null||i.memoizedState===null?YP:XP,i=u(p,g),Jl){w=0;do{if(Jl=!1,Zl=0,25<=w)throw Error(t(301));w+=1,Dt=kt=null,a.updateQueue=null,gd.current=JP,i=u(p,g)}while(Jl)}if(gd.current=wd,a=kt!==null&&kt.next!==null,zi=0,Dt=kt=lt=null,yd=!1,a)throw Error(t(300));return i}function _p(){var i=Zl!==0;return Zl=0,i}function br(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?lt.memoizedState=Dt=i:Dt=Dt.next=i,Dt}function Un(){if(kt===null){var i=lt.alternate;i=i!==null?i.memoizedState:null}else i=kt.next;var a=Dt===null?lt.memoizedState:Dt.next;if(a!==null)Dt=a,kt=i;else{if(i===null)throw Error(t(310));kt=i,i={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Dt===null?lt.memoizedState=Dt=i:Dt=Dt.next=i}return Dt}function eu(i,a){return typeof a=="function"?a(i):a}function wp(i){var a=Un(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=kt,g=p.baseQueue,w=u.pending;if(w!==null){if(g!==null){var T=g.next;g.next=w.next,w.next=T}p.baseQueue=g=w,u.pending=null}if(g!==null){w=g.next,p=p.baseState;var R=T=null,O=null,K=w;do{var ne=K.lane;if((zi&ne)===ne)O!==null&&(O=O.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),p=K.hasEagerState?K.eagerState:i(p,K.action);else{var se={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};O===null?(R=O=se,T=p):O=O.next=se,lt.lanes|=ne,qi|=ne}K=K.next}while(K!==null&&K!==w);O===null?T=p:O.next=R,er(p,a.memoizedState)||(pn=!0),a.memoizedState=p,a.baseState=T,a.baseQueue=O,u.lastRenderedState=p}if(i=u.interleaved,i!==null){g=i;do w=g.lane,lt.lanes|=w,qi|=w,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function xp(i){var a=Un(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,g=u.pending,w=a.memoizedState;if(g!==null){u.pending=null;var T=g=g.next;do w=i(w,T.action),T=T.next;while(T!==g);er(w,a.memoizedState)||(pn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,p]}function E_(){}function T_(i,a){var u=lt,p=Un(),g=a(),w=!er(p.memoizedState,g);if(w&&(p.memoizedState=g,pn=!0),p=p.queue,Ep(I_.bind(null,u,p,i),[i]),p.getSnapshot!==a||w||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,tu(9,S_.bind(null,u,p,g,a),void 0,null),jt===null)throw Error(t(349));zi&30||b_(u,a,g)}return g}function b_(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=lt.updateQueue,a===null?(a={lastEffect:null,stores:null},lt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function S_(i,a,u,p){a.value=u,a.getSnapshot=p,P_(a)&&k_(i)}function I_(i,a,u){return u(function(){P_(a)&&k_(i)})}function P_(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!er(i,u)}catch{return!0}}function k_(i){var a=ts(i,1);a!==null&&ir(a,i,1,-1)}function A_(i){var a=br();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:i},a.queue=i,i=i.dispatch=QP.bind(null,lt,i),[a.memoizedState,i]}function tu(i,a,u,p){return i={tag:i,create:a,destroy:u,deps:p,next:null},a=lt.updateQueue,a===null?(a={lastEffect:null,stores:null},lt.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,a.lastEffect=i)),i}function C_(){return Un().memoizedState}function vd(i,a,u,p){var g=br();lt.flags|=i,g.memoizedState=tu(1|a,u,void 0,p===void 0?null:p)}function _d(i,a,u,p){var g=Un();p=p===void 0?null:p;var w=void 0;if(kt!==null){var T=kt.memoizedState;if(w=T.destroy,p!==null&&yp(p,T.deps)){g.memoizedState=tu(a,u,w,p);return}}lt.flags|=i,g.memoizedState=tu(1|a,u,w,p)}function R_(i,a){return vd(8390656,8,i,a)}function Ep(i,a){return _d(2048,8,i,a)}function N_(i,a){return _d(4,2,i,a)}function D_(i,a){return _d(4,4,i,a)}function j_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function O_(i,a,u){return u=u!=null?u.concat([i]):null,_d(4,4,j_.bind(null,a,i),u)}function Tp(){}function M_(i,a){var u=Un();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&yp(a,p[1])?p[0]:(u.memoizedState=[i,a],i)}function V_(i,a){var u=Un();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&yp(a,p[1])?p[0]:(i=i(),u.memoizedState=[i,a],i)}function L_(i,a,u){return zi&21?(er(u,a)||(u=Ni(),lt.lanes|=u,qi|=u,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,pn=!0),i.memoizedState=u)}function GP(i,a){var u=je;je=u!==0&&4>u?u:4,i(!0);var p=gp.transition;gp.transition={};try{i(!1),a()}finally{je=u,gp.transition=p}}function U_(){return Un().memoizedState}function KP(i,a,u){var p=Bs(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},F_(i))$_(a,u);else if(u=y_(i,a,u,p),u!==null){var g=ln();ir(u,i,p,g),B_(u,a,p)}}function QP(i,a,u){var p=Bs(i),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(F_(i))$_(a,g);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var T=a.lastRenderedState,R=w(T,u);if(g.hasEagerState=!0,g.eagerState=R,er(R,T)){var O=a.interleaved;O===null?(g.next=g,cp(a)):(g.next=O.next,O.next=g),a.interleaved=g;return}}catch{}finally{}u=y_(i,a,g,p),u!==null&&(g=ln(),ir(u,i,p,g),B_(u,a,p))}}function F_(i){var a=i.alternate;return i===lt||a!==null&&a===lt}function $_(i,a){Jl=yd=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function B_(i,a,u){if(u&4194240){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Ps(i,u)}}var wd={readContext:Ln,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},YP={readContext:Ln,useCallback:function(i,a){return br().memoizedState=[i,a===void 0?null:a],i},useContext:Ln,useEffect:R_,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,vd(4194308,4,j_.bind(null,a,i),u)},useLayoutEffect:function(i,a){return vd(4194308,4,i,a)},useInsertionEffect:function(i,a){return vd(4,2,i,a)},useMemo:function(i,a){var u=br();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var p=br();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=KP.bind(null,lt,i),[p.memoizedState,i]},useRef:function(i){var a=br();return i={current:i},a.memoizedState=i},useState:A_,useDebugValue:Tp,useDeferredValue:function(i){return br().memoizedState=i},useTransition:function(){var i=A_(!1),a=i[0];return i=GP.bind(null,i[1]),br().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var p=lt,g=br();if(ot){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),jt===null)throw Error(t(349));zi&30||b_(p,a,u)}g.memoizedState=u;var w={value:u,getSnapshot:a};return g.queue=w,R_(I_.bind(null,p,w,i),[i]),p.flags|=2048,tu(9,S_.bind(null,p,w,u,a),void 0,null),u},useId:function(){var i=br(),a=jt.identifierPrefix;if(ot){var u=es,p=Zr;u=(p&~(1<<32-sn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=Zl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=HP++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},XP={readContext:Ln,useCallback:M_,useContext:Ln,useEffect:Ep,useImperativeHandle:O_,useInsertionEffect:N_,useLayoutEffect:D_,useMemo:V_,useReducer:wp,useRef:C_,useState:function(){return wp(eu)},useDebugValue:Tp,useDeferredValue:function(i){var a=Un();return L_(a,kt.memoizedState,i)},useTransition:function(){var i=wp(eu)[0],a=Un().memoizedState;return[i,a]},useMutableSource:E_,useSyncExternalStore:T_,useId:U_,unstable_isNewReconciler:!1},JP={readContext:Ln,useCallback:M_,useContext:Ln,useEffect:Ep,useImperativeHandle:O_,useInsertionEffect:N_,useLayoutEffect:D_,useMemo:V_,useReducer:xp,useRef:C_,useState:function(){return xp(eu)},useDebugValue:Tp,useDeferredValue:function(i){var a=Un();return kt===null?a.memoizedState=i:L_(a,kt.memoizedState,i)},useTransition:function(){var i=xp(eu)[0],a=Un().memoizedState;return[i,a]},useMutableSource:E_,useSyncExternalStore:T_,useId:U_,unstable_isNewReconciler:!1};function nr(i,a){if(i&&i.defaultProps){a=ae({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function bp(i,a,u,p){a=i.memoizedState,u=u(p,a),u=u==null?a:ae({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var xd={isMounted:function(i){return(i=i._reactInternals)?Gn(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var p=ln(),g=Bs(i),w=ns(p,g);w.payload=a,u!=null&&(w.callback=u),a=Ls(i,w,g),a!==null&&(ir(a,i,g,p),fd(a,i,g))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var p=ln(),g=Bs(i),w=ns(p,g);w.tag=1,w.payload=a,u!=null&&(w.callback=u),a=Ls(i,w,g),a!==null&&(ir(a,i,g,p),fd(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=ln(),p=Bs(i),g=ns(u,p);g.tag=2,a!=null&&(g.callback=a),a=Ls(i,g,p),a!==null&&(ir(a,i,p,u),fd(a,i,p))}};function z_(i,a,u,p,g,w,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,T):a.prototype&&a.prototype.isPureReactComponent?!$l(u,p)||!$l(g,w):!0}function q_(i,a,u){var p=!1,g=Os,w=a.contextType;return typeof w=="object"&&w!==null?w=Ln(w):(g=fn(a)?Li:Kt.current,p=a.contextTypes,w=(p=p!=null)?ra(i,g):Os),a=new a(u,w),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=xd,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=w),a}function W_(i,a,u,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==i&&xd.enqueueReplaceState(a,a.state,null)}function Sp(i,a,u,p){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},dp(i);var w=a.contextType;typeof w=="object"&&w!==null?g.context=Ln(w):(w=fn(a)?Li:Kt.current,g.context=ra(i,w)),g.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(bp(i,a,w,u),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&xd.enqueueReplaceState(g,g.state,null),pd(i,u,g,p),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function da(i,a){try{var u="",p=a;do u+=Ce(p),p=p.return;while(p);var g=u}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:a,stack:g,digest:null}}function Ip(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function Pp(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var ZP=typeof WeakMap=="function"?WeakMap:Map;function H_(i,a,u){u=ns(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){kd||(kd=!0,Bp=p),Pp(i,a)},u}function G_(i,a,u){u=ns(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;u.payload=function(){return p(g)},u.callback=function(){Pp(i,a)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Pp(i,a),typeof p!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),u}function K_(i,a,u){var p=i.pingCache;if(p===null){p=i.pingCache=new ZP;var g=new Set;p.set(a,g)}else g=p.get(a),g===void 0&&(g=new Set,p.set(a,g));g.has(u)||(g.add(u),i=fk.bind(null,i,a,u),a.then(i,i))}function Q_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function Y_(i,a,u,p,g){return i.mode&1?(i.flags|=65536,i.lanes=g,i):(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ns(-1,1),a.tag=2,Ls(u,a,1))),u.lanes|=1),i)}var ek=X.ReactCurrentOwner,pn=!1;function an(i,a,u,p){a.child=i===null?g_(a,null,u,p):aa(a,i.child,u,p)}function X_(i,a,u,p,g){u=u.render;var w=a.ref;return ua(a,g),p=vp(i,a,u,p,w,g),u=_p(),i!==null&&!pn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,rs(i,a,g)):(ot&&u&&tp(a),a.flags|=1,an(i,a,p,g),a.child)}function J_(i,a,u,p,g){if(i===null){var w=u.type;return typeof w=="function"&&!Qp(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=w,Z_(i,a,w,p,g)):(i=jd(u.type,null,p,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(w=i.child,!(i.lanes&g)){var T=w.memoizedProps;if(u=u.compare,u=u!==null?u:$l,u(T,p)&&i.ref===a.ref)return rs(i,a,g)}return a.flags|=1,i=qs(w,p),i.ref=a.ref,i.return=a,a.child=i}function Z_(i,a,u,p,g){if(i!==null){var w=i.memoizedProps;if($l(w,p)&&i.ref===a.ref)if(pn=!1,a.pendingProps=p=w,(i.lanes&g)!==0)i.flags&131072&&(pn=!0);else return a.lanes=i.lanes,rs(i,a,g)}return kp(i,a,u,p,g)}function ew(i,a,u){var p=a.pendingProps,g=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(fa,In),In|=u;else{if(!(u&1073741824))return i=w!==null?w.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Je(fa,In),In|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,Je(fa,In),In|=p}else w!==null?(p=w.baseLanes|u,a.memoizedState=null):p=u,Je(fa,In),In|=p;return an(i,a,g,u),a.child}function tw(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function kp(i,a,u,p,g){var w=fn(u)?Li:Kt.current;return w=ra(a,w),ua(a,g),u=vp(i,a,u,p,w,g),p=_p(),i!==null&&!pn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,rs(i,a,g)):(ot&&p&&tp(a),a.flags|=1,an(i,a,u,g),a.child)}function nw(i,a,u,p,g){if(fn(u)){var w=!0;id(a)}else w=!1;if(ua(a,g),a.stateNode===null)Td(i,a),q_(a,u,p),Sp(a,u,p,g),p=!0;else if(i===null){var T=a.stateNode,R=a.memoizedProps;T.props=R;var O=T.context,K=u.contextType;typeof K=="object"&&K!==null?K=Ln(K):(K=fn(u)?Li:Kt.current,K=ra(a,K));var ne=u.getDerivedStateFromProps,se=typeof ne=="function"||typeof T.getSnapshotBeforeUpdate=="function";se||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==p||O!==K)&&W_(a,T,p,K),Vs=!1;var te=a.memoizedState;T.state=te,pd(a,p,T,g),O=a.memoizedState,R!==p||te!==O||hn.current||Vs?(typeof ne=="function"&&(bp(a,u,ne,p),O=a.memoizedState),(R=Vs||z_(a,u,R,p,te,O,K))?(se||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=O),T.props=p,T.state=O,T.context=K,p=R):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{T=a.stateNode,v_(i,a),R=a.memoizedProps,K=a.type===a.elementType?R:nr(a.type,R),T.props=K,se=a.pendingProps,te=T.context,O=u.contextType,typeof O=="object"&&O!==null?O=Ln(O):(O=fn(u)?Li:Kt.current,O=ra(a,O));var ce=u.getDerivedStateFromProps;(ne=typeof ce=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==se||te!==O)&&W_(a,T,p,O),Vs=!1,te=a.memoizedState,T.state=te,pd(a,p,T,g);var fe=a.memoizedState;R!==se||te!==fe||hn.current||Vs?(typeof ce=="function"&&(bp(a,u,ce,p),fe=a.memoizedState),(K=Vs||z_(a,u,K,p,te,fe,O)||!1)?(ne||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,fe,O),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,fe,O)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||R===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=fe),T.props=p,T.state=fe,T.context=O,p=K):(typeof T.componentDidUpdate!="function"||R===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),p=!1)}return Ap(i,a,u,p,w,g)}function Ap(i,a,u,p,g,w){tw(i,a);var T=(a.flags&128)!==0;if(!p&&!T)return g&&a_(a,u,!1),rs(i,a,w);p=a.stateNode,ek.current=a;var R=T&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&T?(a.child=aa(a,i.child,null,w),a.child=aa(a,null,R,w)):an(i,a,R,w),a.memoizedState=p.state,g&&a_(a,u,!0),a.child}function rw(i){var a=i.stateNode;a.pendingContext?i_(i,a.pendingContext,a.pendingContext!==a.context):a.context&&i_(i,a.context,!1),hp(i,a.containerInfo)}function sw(i,a,u,p,g){return oa(),ip(g),a.flags|=256,an(i,a,u,p),a.child}var Cp={dehydrated:null,treeContext:null,retryLane:0};function Rp(i){return{baseLanes:i,cachePool:null,transitions:null}}function iw(i,a,u){var p=a.pendingProps,g=at.current,w=!1,T=(a.flags&128)!==0,R;if((R=T)||(R=i!==null&&i.memoizedState===null?!1:(g&2)!==0),R?(w=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Je(at,g&1),i===null)return sp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(a.mode&1?i.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(T=p.children,i=p.fallback,w?(p=a.mode,w=a.child,T={mode:"hidden",children:T},!(p&1)&&w!==null?(w.childLanes=0,w.pendingProps=T):w=Od(T,p,0,null),i=Ki(i,p,u,null),w.return=a,i.return=a,w.sibling=i,a.child=w,a.child.memoizedState=Rp(u),a.memoizedState=Cp,i):Np(a,T));if(g=i.memoizedState,g!==null&&(R=g.dehydrated,R!==null))return tk(i,a,T,p,R,g,u);if(w){w=p.fallback,T=a.mode,g=i.child,R=g.sibling;var O={mode:"hidden",children:p.children};return!(T&1)&&a.child!==g?(p=a.child,p.childLanes=0,p.pendingProps=O,a.deletions=null):(p=qs(g,O),p.subtreeFlags=g.subtreeFlags&14680064),R!==null?w=qs(R,w):(w=Ki(w,T,u,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,T=i.child.memoizedState,T=T===null?Rp(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},w.memoizedState=T,w.childLanes=i.childLanes&~u,a.memoizedState=Cp,p}return w=i.child,i=w.sibling,p=qs(w,{mode:"visible",children:p.children}),!(a.mode&1)&&(p.lanes=u),p.return=a,p.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=p,a.memoizedState=null,p}function Np(i,a){return a=Od({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Ed(i,a,u,p){return p!==null&&ip(p),aa(a,i.child,null,u),i=Np(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function tk(i,a,u,p,g,w,T){if(u)return a.flags&256?(a.flags&=-257,p=Ip(Error(t(422))),Ed(i,a,T,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(w=p.fallback,g=a.mode,p=Od({mode:"visible",children:p.children},g,0,null),w=Ki(w,g,T,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,a.mode&1&&aa(a,i.child,null,T),a.child.memoizedState=Rp(T),a.memoizedState=Cp,w);if(!(a.mode&1))return Ed(i,a,T,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var R=p.dgst;return p=R,w=Error(t(419)),p=Ip(w,p,void 0),Ed(i,a,T,p)}if(R=(T&i.childLanes)!==0,pn||R){if(p=jt,p!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(p.suspendedLanes|T)?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,ts(i,g),ir(p,i,g,-1))}return Kp(),p=Ip(Error(t(421))),Ed(i,a,T,p)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=pk.bind(null,i),g._reactRetry=a,null):(i=w.treeContext,Sn=Ds(g.nextSibling),bn=a,ot=!0,tr=null,i!==null&&(Mn[Vn++]=Zr,Mn[Vn++]=es,Mn[Vn++]=Ui,Zr=i.id,es=i.overflow,Ui=a),a=Np(a,p.children),a.flags|=4096,a)}function ow(i,a,u){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),up(i.return,a,u)}function Dp(i,a,u,p,g){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=g)}function aw(i,a,u){var p=a.pendingProps,g=p.revealOrder,w=p.tail;if(an(i,a,p.children,u),p=at.current,p&2)p=p&1|2,a.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ow(i,u,a);else if(i.tag===19)ow(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Je(at,p),!(a.mode&1))a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)i=u.alternate,i!==null&&md(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),Dp(a,!1,g,u,w);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&md(i)===null){a.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Dp(a,!0,u,null,w);break;case"together":Dp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Td(i,a){!(a.mode&1)&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function rs(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),qi|=a.lanes,!(u&a.childLanes))return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=qs(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=qs(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function nk(i,a,u){switch(a.tag){case 3:rw(a),oa();break;case 5:x_(a);break;case 1:fn(a.type)&&id(a);break;case 4:hp(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,g=a.memoizedProps.value;Je(dd,p._currentValue),p._currentValue=g;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(Je(at,at.current&1),a.flags|=128,null):u&a.child.childLanes?iw(i,a,u):(Je(at,at.current&1),i=rs(i,a,u),i!==null?i.sibling:null);Je(at,at.current&1);break;case 19:if(p=(u&a.childLanes)!==0,i.flags&128){if(p)return aw(i,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Je(at,at.current),p)break;return null;case 22:case 23:return a.lanes=0,ew(i,a,u)}return rs(i,a,u)}var lw,jp,uw,cw;lw=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},jp=function(){},uw=function(i,a,u,p){var g=i.memoizedProps;if(g!==p){i=a.stateNode,Bi(Tr.current);var w=null;switch(u){case"input":g=xi(i,g),p=xi(i,p),w=[];break;case"select":g=ae({},g,{value:void 0}),p=ae({},p,{value:void 0}),w=[];break;case"textarea":g=gl(i,g),p=gl(i,p),w=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=nd)}El(u,p);var T;u=null;for(K in g)if(!p.hasOwnProperty(K)&&g.hasOwnProperty(K)&&g[K]!=null)if(K==="style"){var R=g[K];for(T in R)R.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(s.hasOwnProperty(K)?w||(w=[]):(w=w||[]).push(K,null));for(K in p){var O=p[K];if(R=g!=null?g[K]:void 0,p.hasOwnProperty(K)&&O!==R&&(O!=null||R!=null))if(K==="style")if(R){for(T in R)!R.hasOwnProperty(T)||O&&O.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in O)O.hasOwnProperty(T)&&R[T]!==O[T]&&(u||(u={}),u[T]=O[T])}else u||(w||(w=[]),w.push(K,u)),u=O;else K==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,R=R?R.__html:void 0,O!=null&&R!==O&&(w=w||[]).push(K,O)):K==="children"?typeof O!="string"&&typeof O!="number"||(w=w||[]).push(K,""+O):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(s.hasOwnProperty(K)?(O!=null&&K==="onScroll"&&et("scroll",i),w||R===O||(w=[])):(w=w||[]).push(K,O))}u&&(w=w||[]).push("style",u);var K=w;(a.updateQueue=K)&&(a.flags|=4)}},cw=function(i,a,u,p){u!==p&&(a.flags|=4)};function nu(i,a){if(!ot)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Yt(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(a)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=p,i.childLanes=u,a}function rk(i,a,u){var p=a.pendingProps;switch(np(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(a),null;case 1:return fn(a.type)&&sd(),Yt(a),null;case 3:return p=a.stateNode,ca(),tt(hn),tt(Kt),mp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(ud(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,tr!==null&&(Wp(tr),tr=null))),jp(i,a),Yt(a),null;case 5:fp(a);var g=Bi(Xl.current);if(u=a.type,i!==null&&a.stateNode!=null)uw(i,a,u,p,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return Yt(a),null}if(i=Bi(Tr.current),ud(a)){p=a.stateNode,u=a.type;var w=a.memoizedProps;switch(p[Er]=a,p[Hl]=w,i=(a.mode&1)!==0,u){case"dialog":et("cancel",p),et("close",p);break;case"iframe":case"object":case"embed":et("load",p);break;case"video":case"audio":for(g=0;g<zl.length;g++)et(zl[g],p);break;case"source":et("error",p);break;case"img":case"image":case"link":et("error",p),et("load",p);break;case"details":et("toggle",p);break;case"input":So(p,w),et("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},et("invalid",p);break;case"textarea":Po(p,w),et("invalid",p)}El(u,w),g=null;for(var T in w)if(w.hasOwnProperty(T)){var R=w[T];T==="children"?typeof R=="string"?p.textContent!==R&&(w.suppressHydrationWarning!==!0&&td(p.textContent,R,i),g=["children",R]):typeof R=="number"&&p.textContent!==""+R&&(w.suppressHydrationWarning!==!0&&td(p.textContent,R,i),g=["children",""+R]):s.hasOwnProperty(T)&&R!=null&&T==="onScroll"&&et("scroll",p)}switch(u){case"input":$r(p),Pc(p,w,!0);break;case"textarea":$r(p),yl(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=nd)}p=g,a.updateQueue=p,p!==null&&(a.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=St(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=T.createElement(u,{is:p.is}):(i=T.createElement(u),u==="select"&&(T=i,p.multiple?T.multiple=!0:p.size&&(T.size=p.size))):i=T.createElementNS(i,u),i[Er]=a,i[Hl]=p,lw(i,a,!1,!1),a.stateNode=i;e:{switch(T=Tl(u,p),u){case"dialog":et("cancel",i),et("close",i),g=p;break;case"iframe":case"object":case"embed":et("load",i),g=p;break;case"video":case"audio":for(g=0;g<zl.length;g++)et(zl[g],i);g=p;break;case"source":et("error",i),g=p;break;case"img":case"image":case"link":et("error",i),et("load",i),g=p;break;case"details":et("toggle",i),g=p;break;case"input":So(i,p),g=xi(i,p),et("invalid",i);break;case"option":g=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},g=ae({},p,{value:void 0}),et("invalid",i);break;case"textarea":Po(i,p),g=gl(i,p),et("invalid",i);break;default:g=p}El(u,g),R=g;for(w in R)if(R.hasOwnProperty(w)){var O=R[w];w==="style"?wl(i,O):w==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&vl(i,O)):w==="children"?typeof O=="string"?(u!=="textarea"||O!=="")&&Es(i,O):typeof O=="number"&&Es(i,""+O):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?O!=null&&w==="onScroll"&&et("scroll",i):O!=null&&z(i,w,O,T))}switch(u){case"input":$r(i),Pc(i,p,!1);break;case"textarea":$r(i),yl(i);break;case"option":p.value!=null&&i.setAttribute("value",""+qe(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?zr(i,!!p.multiple,w,!1):p.defaultValue!=null&&zr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=nd)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Yt(a),null;case 6:if(i&&a.stateNode!=null)cw(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=Bi(Xl.current),Bi(Tr.current),ud(a)){if(p=a.stateNode,u=a.memoizedProps,p[Er]=a,(w=p.nodeValue!==u)&&(i=bn,i!==null))switch(i.tag){case 3:td(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&td(p.nodeValue,u,(i.mode&1)!==0)}w&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Er]=a,a.stateNode=p}return Yt(a),null;case 13:if(tt(at),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&Sn!==null&&a.mode&1&&!(a.flags&128))f_(),oa(),a.flags|=98560,w=!1;else if(w=ud(a),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Er]=a}else oa(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Yt(a),w=!1}else tr!==null&&(Wp(tr),tr=null),w=!0;if(!w)return a.flags&65536?a:null}return a.flags&128?(a.lanes=u,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,a.mode&1&&(i===null||at.current&1?At===0&&(At=3):Kp())),a.updateQueue!==null&&(a.flags|=4),Yt(a),null);case 4:return ca(),jp(i,a),i===null&&ql(a.stateNode.containerInfo),Yt(a),null;case 10:return lp(a.type._context),Yt(a),null;case 17:return fn(a.type)&&sd(),Yt(a),null;case 19:if(tt(at),w=a.memoizedState,w===null)return Yt(a),null;if(p=(a.flags&128)!==0,T=w.rendering,T===null)if(p)nu(w,!1);else{if(At!==0||i!==null&&i.flags&128)for(i=a.child;i!==null;){if(T=md(i),T!==null){for(a.flags|=128,nu(w,!1),p=T.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)w=u,i=p,w.flags&=14680066,T=w.alternate,T===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=T.childLanes,w.lanes=T.lanes,w.child=T.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=T.memoizedProps,w.memoizedState=T.memoizedState,w.updateQueue=T.updateQueue,w.type=T.type,i=T.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Je(at,at.current&1|2),a.child}i=i.sibling}w.tail!==null&&Xe()>pa&&(a.flags|=128,p=!0,nu(w,!1),a.lanes=4194304)}else{if(!p)if(i=md(T),i!==null){if(a.flags|=128,p=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),nu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!T.alternate&&!ot)return Yt(a),null}else 2*Xe()-w.renderingStartTime>pa&&u!==1073741824&&(a.flags|=128,p=!0,nu(w,!1),a.lanes=4194304);w.isBackwards?(T.sibling=a.child,a.child=T):(u=w.last,u!==null?u.sibling=T:a.child=T,w.last=T)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=Xe(),a.sibling=null,u=at.current,Je(at,p?u&1|2:u&1),a):(Yt(a),null);case 22:case 23:return Gp(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&a.mode&1?In&1073741824&&(Yt(a),a.subtreeFlags&6&&(a.flags|=8192)):Yt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function sk(i,a){switch(np(a),a.tag){case 1:return fn(a.type)&&sd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ca(),tt(hn),tt(Kt),mp(),i=a.flags,i&65536&&!(i&128)?(a.flags=i&-65537|128,a):null;case 5:return fp(a),null;case 13:if(tt(at),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));oa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return tt(at),null;case 4:return ca(),null;case 10:return lp(a.type._context),null;case 22:case 23:return Gp(),null;case 24:return null;default:return null}}var bd=!1,Xt=!1,ik=typeof WeakSet=="function"?WeakSet:Set,he=null;function ha(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){dt(i,a,p)}else u.current=null}function Op(i,a,u){try{u()}catch(p){dt(i,a,p)}}var dw=!1;function ok(i,a){if(Gf=Cs,i=zv(),Uf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var T=0,R=-1,O=-1,K=0,ne=0,se=i,te=null;t:for(;;){for(var ce;se!==u||g!==0&&se.nodeType!==3||(R=T+g),se!==w||p!==0&&se.nodeType!==3||(O=T+p),se.nodeType===3&&(T+=se.nodeValue.length),(ce=se.firstChild)!==null;)te=se,se=ce;for(;;){if(se===i)break t;if(te===u&&++K===g&&(R=T),te===w&&++ne===p&&(O=T),(ce=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=ce}u=R===-1||O===-1?null:{start:R,end:O}}else u=null}u=u||{start:0,end:0}}else u=null;for(Kf={focusedElem:i,selectionRange:u},Cs=!1,he=a;he!==null;)if(a=he,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,he=i;else for(;he!==null;){a=he;try{var fe=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,pt=fe.memoizedState,q=a.stateNode,V=q.getSnapshotBeforeUpdate(a.elementType===a.type?pe:nr(a.type,pe),pt);q.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var W=a.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){dt(a,a.return,oe)}if(i=a.sibling,i!==null){i.return=a.return,he=i;break}he=a.return}return fe=dw,dw=!1,fe}function ru(i,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&i)===i){var w=g.destroy;g.destroy=void 0,w!==void 0&&Op(a,u,w)}g=g.next}while(g!==p)}}function Sd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function Mp(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function hw(i){var a=i.alternate;a!==null&&(i.alternate=null,hw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Er],delete a[Hl],delete a[Jf],delete a[BP],delete a[zP])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function fw(i){return i.tag===5||i.tag===3||i.tag===4}function pw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||fw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vp(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=nd));else if(p!==4&&(i=i.child,i!==null))for(Vp(i,a,u),i=i.sibling;i!==null;)Vp(i,a,u),i=i.sibling}function Lp(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Lp(i,a,u),i=i.sibling;i!==null;)Lp(i,a,u),i=i.sibling}var $t=null,rr=!1;function Us(i,a,u){for(u=u.child;u!==null;)mw(i,a,u),u=u.sibling}function mw(i,a,u){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Ci,u)}catch{}switch(u.tag){case 5:Xt||ha(u,a);case 6:var p=$t,g=rr;$t=null,Us(i,a,u),$t=p,rr=g,$t!==null&&(rr?(i=$t,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):$t.removeChild(u.stateNode));break;case 18:$t!==null&&(rr?(i=$t,u=u.stateNode,i.nodeType===8?Xf(i.parentNode,u):i.nodeType===1&&Xf(i,u),Jn(i)):Xf($t,u.stateNode));break;case 4:p=$t,g=rr,$t=u.stateNode.containerInfo,rr=!0,Us(i,a,u),$t=p,rr=g;break;case 0:case 11:case 14:case 15:if(!Xt&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var w=g,T=w.destroy;w=w.tag,T!==void 0&&(w&2||w&4)&&Op(u,a,T),g=g.next}while(g!==p)}Us(i,a,u);break;case 1:if(!Xt&&(ha(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(R){dt(u,a,R)}Us(i,a,u);break;case 21:Us(i,a,u);break;case 22:u.mode&1?(Xt=(p=Xt)||u.memoizedState!==null,Us(i,a,u),Xt=p):Us(i,a,u);break;default:Us(i,a,u)}}function gw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new ik),a.forEach(function(p){var g=mk.bind(null,i,p);u.has(p)||(u.add(p),p.then(g,g))})}}function sr(i,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var w=i,T=a,R=T;e:for(;R!==null;){switch(R.tag){case 5:$t=R.stateNode,rr=!1;break e;case 3:$t=R.stateNode.containerInfo,rr=!0;break e;case 4:$t=R.stateNode.containerInfo,rr=!0;break e}R=R.return}if($t===null)throw Error(t(160));mw(w,T,g),$t=null,rr=!1;var O=g.alternate;O!==null&&(O.return=null),g.return=null}catch(K){dt(g,a,K)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)yw(a,i),a=a.sibling}function yw(i,a){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(sr(a,i),Sr(i),p&4){try{ru(3,i,i.return),Sd(3,i)}catch(pe){dt(i,i.return,pe)}try{ru(5,i,i.return)}catch(pe){dt(i,i.return,pe)}}break;case 1:sr(a,i),Sr(i),p&512&&u!==null&&ha(u,u.return);break;case 5:if(sr(a,i),Sr(i),p&512&&u!==null&&ha(u,u.return),i.flags&32){var g=i.stateNode;try{Es(g,"")}catch(pe){dt(i,i.return,pe)}}if(p&4&&(g=i.stateNode,g!=null)){var w=i.memoizedProps,T=u!==null?u.memoizedProps:w,R=i.type,O=i.updateQueue;if(i.updateQueue=null,O!==null)try{R==="input"&&w.type==="radio"&&w.name!=null&&pl(g,w),Tl(R,T);var K=Tl(R,w);for(T=0;T<O.length;T+=2){var ne=O[T],se=O[T+1];ne==="style"?wl(g,se):ne==="dangerouslySetInnerHTML"?vl(g,se):ne==="children"?Es(g,se):z(g,ne,se,K)}switch(R){case"input":ml(g,w);break;case"textarea":ko(g,w);break;case"select":var te=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var ce=w.value;ce!=null?zr(g,!!w.multiple,ce,!1):te!==!!w.multiple&&(w.defaultValue!=null?zr(g,!!w.multiple,w.defaultValue,!0):zr(g,!!w.multiple,w.multiple?[]:"",!1))}g[Hl]=w}catch(pe){dt(i,i.return,pe)}}break;case 6:if(sr(a,i),Sr(i),p&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,w=i.memoizedProps;try{g.nodeValue=w}catch(pe){dt(i,i.return,pe)}}break;case 3:if(sr(a,i),Sr(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Jn(a.containerInfo)}catch(pe){dt(i,i.return,pe)}break;case 4:sr(a,i),Sr(i);break;case 13:sr(a,i),Sr(i),g=i.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||($p=Xe())),p&4&&gw(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(Xt=(K=Xt)||ne,sr(a,i),Xt=K):sr(a,i),Sr(i),p&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!ne&&i.mode&1)for(he=i,ne=i.child;ne!==null;){for(se=he=ne;he!==null;){switch(te=he,ce=te.child,te.tag){case 0:case 11:case 14:case 15:ru(4,te,te.return);break;case 1:ha(te,te.return);var fe=te.stateNode;if(typeof fe.componentWillUnmount=="function"){p=te,u=te.return;try{a=p,fe.props=a.memoizedProps,fe.state=a.memoizedState,fe.componentWillUnmount()}catch(pe){dt(p,u,pe)}}break;case 5:ha(te,te.return);break;case 22:if(te.memoizedState!==null){ww(se);continue}}ce!==null?(ce.return=te,he=ce):ww(se)}ne=ne.sibling}e:for(ne=null,se=i;;){if(se.tag===5){if(ne===null){ne=se;try{g=se.stateNode,K?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(R=se.stateNode,O=se.memoizedProps.style,T=O!=null&&O.hasOwnProperty("display")?O.display:null,R.style.display=_l("display",T))}catch(pe){dt(i,i.return,pe)}}}else if(se.tag===6){if(ne===null)try{se.stateNode.nodeValue=K?"":se.memoizedProps}catch(pe){dt(i,i.return,pe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===i)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===i)break e;for(;se.sibling===null;){if(se.return===null||se.return===i)break e;ne===se&&(ne=null),se=se.return}ne===se&&(ne=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:sr(a,i),Sr(i),p&4&&gw(i);break;case 21:break;default:sr(a,i),Sr(i)}}function Sr(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(fw(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Es(g,""),p.flags&=-33);var w=pw(i);Lp(i,w,g);break;case 3:case 4:var T=p.stateNode.containerInfo,R=pw(i);Vp(i,R,T);break;default:throw Error(t(161))}}catch(O){dt(i,i.return,O)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function ak(i,a,u){he=i,vw(i)}function vw(i,a,u){for(var p=(i.mode&1)!==0;he!==null;){var g=he,w=g.child;if(g.tag===22&&p){var T=g.memoizedState!==null||bd;if(!T){var R=g.alternate,O=R!==null&&R.memoizedState!==null||Xt;R=bd;var K=Xt;if(bd=T,(Xt=O)&&!K)for(he=g;he!==null;)T=he,O=T.child,T.tag===22&&T.memoizedState!==null?xw(g):O!==null?(O.return=T,he=O):xw(g);for(;w!==null;)he=w,vw(w),w=w.sibling;he=g,bd=R,Xt=K}_w(i)}else g.subtreeFlags&8772&&w!==null?(w.return=g,he=w):_w(i)}}function _w(i){for(;he!==null;){var a=he;if(a.flags&8772){var u=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Xt||Sd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!Xt)if(u===null)p.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:nr(a.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&w_(a,w,p);break;case 3:var T=a.updateQueue;if(T!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}w_(a,T,u)}break;case 5:var R=a.stateNode;if(u===null&&a.flags&4){u=R;var O=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&u.focus();break;case"img":O.src&&(u.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var K=a.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var se=ne.dehydrated;se!==null&&Jn(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Xt||a.flags&512&&Mp(a)}catch(te){dt(a,a.return,te)}}if(a===i){he=null;break}if(u=a.sibling,u!==null){u.return=a.return,he=u;break}he=a.return}}function ww(i){for(;he!==null;){var a=he;if(a===i){he=null;break}var u=a.sibling;if(u!==null){u.return=a.return,he=u;break}he=a.return}}function xw(i){for(;he!==null;){var a=he;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Sd(4,a)}catch(O){dt(a,u,O)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var g=a.return;try{p.componentDidMount()}catch(O){dt(a,g,O)}}var w=a.return;try{Mp(a)}catch(O){dt(a,w,O)}break;case 5:var T=a.return;try{Mp(a)}catch(O){dt(a,T,O)}}}catch(O){dt(a,a.return,O)}if(a===i){he=null;break}var R=a.sibling;if(R!==null){R.return=a.return,he=R;break}he=a.return}}var lk=Math.ceil,Id=X.ReactCurrentDispatcher,Up=X.ReactCurrentOwner,Fn=X.ReactCurrentBatchConfig,Fe=0,jt=null,Et=null,Bt=0,In=0,fa=js(0),At=0,su=null,qi=0,Pd=0,Fp=0,iu=null,mn=null,$p=0,pa=1/0,ss=null,kd=!1,Bp=null,Fs=null,Ad=!1,$s=null,Cd=0,ou=0,zp=null,Rd=-1,Nd=0;function ln(){return Fe&6?Xe():Rd!==-1?Rd:Rd=Xe()}function Bs(i){return i.mode&1?Fe&2&&Bt!==0?Bt&-Bt:WP.transition!==null?(Nd===0&&(Nd=Ni()),Nd):(i=je,i!==0||(i=window.event,i=i===void 0?16:jl(i.type)),i):1}function ir(i,a,u,p){if(50<ou)throw ou=0,zp=null,Error(t(185));Is(i,u,p),(!(Fe&2)||i!==jt)&&(i===jt&&(!(Fe&2)&&(Pd|=u),At===4&&zs(i,Bt)),gn(i,p),u===1&&Fe===0&&!(a.mode&1)&&(pa=Xe()+500,od&&Ms()))}function gn(i,a){var u=i.callbackNode;Hr(i,a);var p=Ri(i,i===jt?Bt:0);if(p===0)u!==null&&Al(u),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(u!=null&&Al(u),a===1)i.tag===0?qP(Tw.bind(null,i)):l_(Tw.bind(null,i)),FP(function(){!(Fe&6)&&Ms()}),u=null;else{switch(ks(p)){case 1:u=Ai;break;case 4:u=Ts;break;case 16:u=Dn;break;case 536870912:u=Nc;break;default:u=Dn}u=Rw(u,Ew.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function Ew(i,a){if(Rd=-1,Nd=0,Fe&6)throw Error(t(327));var u=i.callbackNode;if(ma()&&i.callbackNode!==u)return null;var p=Ri(i,i===jt?Bt:0);if(p===0)return null;if(p&30||p&i.expiredLanes||a)a=Dd(i,p);else{a=p;var g=Fe;Fe|=2;var w=Sw();(jt!==i||Bt!==a)&&(ss=null,pa=Xe()+500,Hi(i,a));do try{dk();break}catch(R){bw(i,R)}while(!0);ap(),Id.current=w,Fe=g,Et!==null?a=0:(jt=null,Bt=0,a=At)}if(a!==0){if(a===2&&(g=xn(i),g!==0&&(p=g,a=qp(i,g))),a===1)throw u=su,Hi(i,0),zs(i,p),gn(i,Xe()),u;if(a===6)zs(i,p);else{if(g=i.current.alternate,!(p&30)&&!uk(g)&&(a=Dd(i,p),a===2&&(w=xn(i),w!==0&&(p=w,a=qp(i,w))),a===1))throw u=su,Hi(i,0),zs(i,p),gn(i,Xe()),u;switch(i.finishedWork=g,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Gi(i,mn,ss);break;case 3:if(zs(i,p),(p&130023424)===p&&(a=$p+500-Xe(),10<a)){if(Ri(i,0)!==0)break;if(g=i.suspendedLanes,(g&p)!==p){ln(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Yf(Gi.bind(null,i,mn,ss),a);break}Gi(i,mn,ss);break;case 4:if(zs(i,p),(p&4194240)===p)break;for(a=i.eventTimes,g=-1;0<p;){var T=31-sn(p);w=1<<T,T=a[T],T>g&&(g=T),p&=~w}if(p=g,p=Xe()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*lk(p/1960))-p,10<p){i.timeoutHandle=Yf(Gi.bind(null,i,mn,ss),p);break}Gi(i,mn,ss);break;case 5:Gi(i,mn,ss);break;default:throw Error(t(329))}}}return gn(i,Xe()),i.callbackNode===u?Ew.bind(null,i):null}function qp(i,a){var u=iu;return i.current.memoizedState.isDehydrated&&(Hi(i,a).flags|=256),i=Dd(i,a),i!==2&&(a=mn,mn=u,a!==null&&Wp(a)),i}function Wp(i){mn===null?mn=i:mn.push.apply(mn,i)}function uk(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],w=g.getSnapshot;g=g.value;try{if(!er(w(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function zs(i,a){for(a&=~Fp,a&=~Pd,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-sn(a),p=1<<u;i[u]=-1,a&=~p}}function Tw(i){if(Fe&6)throw Error(t(327));ma();var a=Ri(i,0);if(!(a&1))return gn(i,Xe()),null;var u=Dd(i,a);if(i.tag!==0&&u===2){var p=xn(i);p!==0&&(a=p,u=qp(i,p))}if(u===1)throw u=su,Hi(i,0),zs(i,a),gn(i,Xe()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Gi(i,mn,ss),gn(i,Xe()),null}function Hp(i,a){var u=Fe;Fe|=1;try{return i(a)}finally{Fe=u,Fe===0&&(pa=Xe()+500,od&&Ms())}}function Wi(i){$s!==null&&$s.tag===0&&!(Fe&6)&&ma();var a=Fe;Fe|=1;var u=Fn.transition,p=je;try{if(Fn.transition=null,je=1,i)return i()}finally{je=p,Fn.transition=u,Fe=a,!(Fe&6)&&Ms()}}function Gp(){In=fa.current,tt(fa)}function Hi(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,UP(u)),Et!==null)for(u=Et.return;u!==null;){var p=u;switch(np(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&sd();break;case 3:ca(),tt(hn),tt(Kt),mp();break;case 5:fp(p);break;case 4:ca();break;case 13:tt(at);break;case 19:tt(at);break;case 10:lp(p.type._context);break;case 22:case 23:Gp()}u=u.return}if(jt=i,Et=i=qs(i.current,null),Bt=In=a,At=0,su=null,Fp=Pd=qi=0,mn=iu=null,$i!==null){for(a=0;a<$i.length;a++)if(u=$i[a],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,w=u.pending;if(w!==null){var T=w.next;w.next=g,p.next=T}u.pending=p}$i=null}return i}function bw(i,a){do{var u=Et;try{if(ap(),gd.current=wd,yd){for(var p=lt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}yd=!1}if(zi=0,Dt=kt=lt=null,Jl=!1,Zl=0,Up.current=null,u===null||u.return===null){At=1,su=a,Et=null;break}e:{var w=i,T=u.return,R=u,O=a;if(a=Bt,R.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var K=O,ne=R,se=ne.tag;if(!(ne.mode&1)&&(se===0||se===11||se===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ce=Q_(T);if(ce!==null){ce.flags&=-257,Y_(ce,T,R,w,a),ce.mode&1&&K_(w,K,a),a=ce,O=K;var fe=a.updateQueue;if(fe===null){var pe=new Set;pe.add(O),a.updateQueue=pe}else fe.add(O);break e}else{if(!(a&1)){K_(w,K,a),Kp();break e}O=Error(t(426))}}else if(ot&&R.mode&1){var pt=Q_(T);if(pt!==null){!(pt.flags&65536)&&(pt.flags|=256),Y_(pt,T,R,w,a),ip(da(O,R));break e}}w=O=da(O,R),At!==4&&(At=2),iu===null?iu=[w]:iu.push(w),w=T;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var q=H_(w,O,a);__(w,q);break e;case 1:R=O;var V=w.type,W=w.stateNode;if(!(w.flags&128)&&(typeof V.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Fs===null||!Fs.has(W)))){w.flags|=65536,a&=-a,w.lanes|=a;var oe=G_(w,R,a);__(w,oe);break e}}w=w.return}while(w!==null)}Pw(u)}catch(ge){a=ge,Et===u&&u!==null&&(Et=u=u.return);continue}break}while(!0)}function Sw(){var i=Id.current;return Id.current=wd,i===null?wd:i}function Kp(){(At===0||At===3||At===2)&&(At=4),jt===null||!(qi&268435455)&&!(Pd&268435455)||zs(jt,Bt)}function Dd(i,a){var u=Fe;Fe|=2;var p=Sw();(jt!==i||Bt!==a)&&(ss=null,Hi(i,a));do try{ck();break}catch(g){bw(i,g)}while(!0);if(ap(),Fe=u,Id.current=p,Et!==null)throw Error(t(261));return jt=null,Bt=0,At}function ck(){for(;Et!==null;)Iw(Et)}function dk(){for(;Et!==null&&!Cc();)Iw(Et)}function Iw(i){var a=Cw(i.alternate,i,In);i.memoizedProps=i.pendingProps,a===null?Pw(i):Et=a,Up.current=null}function Pw(i){var a=i;do{var u=a.alternate;if(i=a.return,a.flags&32768){if(u=sk(u,a),u!==null){u.flags&=32767,Et=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{At=6,Et=null;return}}else if(u=rk(u,a,In),u!==null){Et=u;return}if(a=a.sibling,a!==null){Et=a;return}Et=a=i}while(a!==null);At===0&&(At=5)}function Gi(i,a,u){var p=je,g=Fn.transition;try{Fn.transition=null,je=1,hk(i,a,u,p)}finally{Fn.transition=g,je=p}return null}function hk(i,a,u,p){do ma();while($s!==null);if(Fe&6)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if(Qe(i,w),i===jt&&(Et=jt=null,Bt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Ad||(Ad=!0,Rw(Dn,function(){return ma(),null})),w=(u.flags&15990)!==0,u.subtreeFlags&15990||w){w=Fn.transition,Fn.transition=null;var T=je;je=1;var R=Fe;Fe|=4,Up.current=null,ok(i,u),yw(u,i),NP(Kf),Cs=!!Gf,Kf=Gf=null,i.current=u,ak(u),Rf(),Fe=R,je=T,Fn.transition=w}else i.current=u;if(Ad&&(Ad=!1,$s=i,Cd=g),w=i.pendingLanes,w===0&&(Fs=null),Dc(u.stateNode),gn(i,Xe()),a!==null)for(p=i.onRecoverableError,u=0;u<a.length;u++)g=a[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(kd)throw kd=!1,i=Bp,Bp=null,i;return Cd&1&&i.tag!==0&&ma(),w=i.pendingLanes,w&1?i===zp?ou++:(ou=0,zp=i):ou=0,Ms(),null}function ma(){if($s!==null){var i=ks(Cd),a=Fn.transition,u=je;try{if(Fn.transition=null,je=16>i?16:i,$s===null)var p=!1;else{if(i=$s,$s=null,Cd=0,Fe&6)throw Error(t(331));var g=Fe;for(Fe|=4,he=i.current;he!==null;){var w=he,T=w.child;if(he.flags&16){var R=w.deletions;if(R!==null){for(var O=0;O<R.length;O++){var K=R[O];for(he=K;he!==null;){var ne=he;switch(ne.tag){case 0:case 11:case 15:ru(8,ne,w)}var se=ne.child;if(se!==null)se.return=ne,he=se;else for(;he!==null;){ne=he;var te=ne.sibling,ce=ne.return;if(hw(ne),ne===K){he=null;break}if(te!==null){te.return=ce,he=te;break}he=ce}}}var fe=w.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var pt=pe.sibling;pe.sibling=null,pe=pt}while(pe!==null)}}he=w}}if(w.subtreeFlags&2064&&T!==null)T.return=w,he=T;else e:for(;he!==null;){if(w=he,w.flags&2048)switch(w.tag){case 0:case 11:case 15:ru(9,w,w.return)}var q=w.sibling;if(q!==null){q.return=w.return,he=q;break e}he=w.return}}var V=i.current;for(he=V;he!==null;){T=he;var W=T.child;if(T.subtreeFlags&2064&&W!==null)W.return=T,he=W;else e:for(T=V;he!==null;){if(R=he,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:Sd(9,R)}}catch(ge){dt(R,R.return,ge)}if(R===T){he=null;break e}var oe=R.sibling;if(oe!==null){oe.return=R.return,he=oe;break e}he=R.return}}if(Fe=g,Ms(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Ci,i)}catch{}p=!0}return p}finally{je=u,Fn.transition=a}}return!1}function kw(i,a,u){a=da(u,a),a=H_(i,a,1),i=Ls(i,a,1),a=ln(),i!==null&&(Is(i,1,a),gn(i,a))}function dt(i,a,u){if(i.tag===3)kw(i,i,u);else for(;a!==null;){if(a.tag===3){kw(a,i,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Fs===null||!Fs.has(p))){i=da(u,i),i=G_(a,i,1),a=Ls(a,i,1),i=ln(),a!==null&&(Is(a,1,i),gn(a,i));break}}a=a.return}}function fk(i,a,u){var p=i.pingCache;p!==null&&p.delete(a),a=ln(),i.pingedLanes|=i.suspendedLanes&u,jt===i&&(Bt&u)===u&&(At===4||At===3&&(Bt&130023424)===Bt&&500>Xe()-$p?Hi(i,0):Fp|=u),gn(i,a)}function Aw(i,a){a===0&&(i.mode&1?(a=Lo,Lo<<=1,!(Lo&130023424)&&(Lo=4194304)):a=1);var u=ln();i=ts(i,a),i!==null&&(Is(i,a,u),gn(i,u))}function pk(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Aw(i,u)}function mk(i,a){var u=0;switch(i.tag){case 13:var p=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),Aw(i,u)}var Cw;Cw=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||hn.current)pn=!0;else{if(!(i.lanes&u)&&!(a.flags&128))return pn=!1,nk(i,a,u);pn=!!(i.flags&131072)}else pn=!1,ot&&a.flags&1048576&&u_(a,ld,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Td(i,a),i=a.pendingProps;var g=ra(a,Kt.current);ua(a,u),g=vp(null,a,p,i,g,u);var w=_p();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,fn(p)?(w=!0,id(a)):w=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,dp(a),g.updater=xd,a.stateNode=g,g._reactInternals=a,Sp(a,p,i,u),a=Ap(null,a,p,!0,w,u)):(a.tag=0,ot&&w&&tp(a),an(null,a,g,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Td(i,a),i=a.pendingProps,g=p._init,p=g(p._payload),a.type=p,g=a.tag=yk(p),i=nr(p,i),g){case 0:a=kp(null,a,p,i,u);break e;case 1:a=nw(null,a,p,i,u);break e;case 11:a=X_(null,a,p,i,u);break e;case 14:a=J_(null,a,p,nr(p.type,i),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:nr(p,g),kp(i,a,p,g,u);case 1:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:nr(p,g),nw(i,a,p,g,u);case 3:e:{if(rw(a),i===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,g=w.element,v_(i,a),pd(a,p,null,u);var T=a.memoizedState;if(p=T.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){g=da(Error(t(423)),a),a=sw(i,a,p,u,g);break e}else if(p!==g){g=da(Error(t(424)),a),a=sw(i,a,p,u,g);break e}else for(Sn=Ds(a.stateNode.containerInfo.firstChild),bn=a,ot=!0,tr=null,u=g_(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(oa(),p===g){a=rs(i,a,u);break e}an(i,a,p,u)}a=a.child}return a;case 5:return x_(a),i===null&&sp(a),p=a.type,g=a.pendingProps,w=i!==null?i.memoizedProps:null,T=g.children,Qf(p,g)?T=null:w!==null&&Qf(p,w)&&(a.flags|=32),tw(i,a),an(i,a,T,u),a.child;case 6:return i===null&&sp(a),null;case 13:return iw(i,a,u);case 4:return hp(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=aa(a,null,p,u):an(i,a,p,u),a.child;case 11:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:nr(p,g),X_(i,a,p,g,u);case 7:return an(i,a,a.pendingProps,u),a.child;case 8:return an(i,a,a.pendingProps.children,u),a.child;case 12:return an(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,g=a.pendingProps,w=a.memoizedProps,T=g.value,Je(dd,p._currentValue),p._currentValue=T,w!==null)if(er(w.value,T)){if(w.children===g.children&&!hn.current){a=rs(i,a,u);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var R=w.dependencies;if(R!==null){T=w.child;for(var O=R.firstContext;O!==null;){if(O.context===p){if(w.tag===1){O=ns(-1,u&-u),O.tag=2;var K=w.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?O.next=O:(O.next=ne.next,ne.next=O),K.pending=O}}w.lanes|=u,O=w.alternate,O!==null&&(O.lanes|=u),up(w.return,u,a),R.lanes|=u;break}O=O.next}}else if(w.tag===10)T=w.type===a.type?null:w.child;else if(w.tag===18){if(T=w.return,T===null)throw Error(t(341));T.lanes|=u,R=T.alternate,R!==null&&(R.lanes|=u),up(T,u,a),T=w.sibling}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===a){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}an(i,a,g.children,u),a=a.child}return a;case 9:return g=a.type,p=a.pendingProps.children,ua(a,u),g=Ln(g),p=p(g),a.flags|=1,an(i,a,p,u),a.child;case 14:return p=a.type,g=nr(p,a.pendingProps),g=nr(p.type,g),J_(i,a,p,g,u);case 15:return Z_(i,a,a.type,a.pendingProps,u);case 17:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:nr(p,g),Td(i,a),a.tag=1,fn(p)?(i=!0,id(a)):i=!1,ua(a,u),q_(a,p,g),Sp(a,p,g,u),Ap(null,a,p,!0,i,u);case 19:return aw(i,a,u);case 22:return ew(i,a,u)}throw Error(t(156,a.tag))};function Rw(i,a){return Mo(i,a)}function gk(i,a,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(i,a,u,p){return new gk(i,a,u,p)}function Qp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function yk(i){if(typeof i=="function")return Qp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===$)return 11;if(i===_t)return 14}return 2}function qs(i,a){var u=i.alternate;return u===null?(u=$n(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function jd(i,a,u,p,g,w){var T=2;if(p=i,typeof i=="function")Qp(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case D:return Ki(u.children,g,w,a);case S:T=8,g|=8;break;case A:return i=$n(12,u,a,g|2),i.elementType=A,i.lanes=w,i;case N:return i=$n(13,u,a,g),i.elementType=N,i.lanes=w,i;case Ke:return i=$n(19,u,a,g),i.elementType=Ke,i.lanes=w,i;case Te:return Od(u,g,w,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:T=10;break e;case M:T=9;break e;case $:T=11;break e;case _t:T=14;break e;case wt:T=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=$n(T,u,a,g),a.elementType=i,a.type=p,a.lanes=w,a}function Ki(i,a,u,p){return i=$n(7,i,p,a),i.lanes=u,i}function Od(i,a,u,p){return i=$n(22,i,p,a),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function Yp(i,a,u){return i=$n(6,i,null,a),i.lanes=u,i}function Xp(i,a,u){return a=$n(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function vk(i,a,u,p,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ss(0),this.expirationTimes=Ss(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ss(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Jp(i,a,u,p,g,w,T,R,O){return i=new vk(i,a,u,R,O),a===1?(a=1,w===!0&&(a|=8)):a=0,w=$n(3,null,null,a),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},dp(w),i}function _k(i,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:p==null?null:""+p,children:i,containerInfo:a,implementation:u}}function Nw(i){if(!i)return Os;i=i._reactInternals;e:{if(Gn(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(fn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(fn(u))return o_(i,u,a)}return a}function Dw(i,a,u,p,g,w,T,R,O){return i=Jp(u,p,!0,i,g,w,T,R,O),i.context=Nw(null),u=i.current,p=ln(),g=Bs(u),w=ns(p,g),w.callback=a??null,Ls(u,w,g),i.current.lanes=g,Is(i,g,p),gn(i,p),i}function Md(i,a,u,p){var g=a.current,w=ln(),T=Bs(g);return u=Nw(u),a.context===null?a.context=u:a.pendingContext=u,a=ns(w,T),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=Ls(g,a,T),i!==null&&(ir(i,g,T,w),fd(i,g,T)),T}function Vd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function jw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Zp(i,a){jw(i,a),(i=i.alternate)&&jw(i,a)}function wk(){return null}var Ow=typeof reportError=="function"?reportError:function(i){console.error(i)};function em(i){this._internalRoot=i}Ld.prototype.render=em.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Md(i,a,null,null)},Ld.prototype.unmount=em.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Wi(function(){Md(null,i,null,null)}),a[Xr]=null}};function Ld(i){this._internalRoot=i}Ld.prototype.unstable_scheduleHydration=function(i){if(i){var a=Lc();i={blockedOn:null,target:i,priority:a};for(var u=0;u<vr.length&&a!==0&&a<vr[u].priority;u++);vr.splice(u,0,i),u===0&&$c(i)}};function tm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ud(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Mw(){}function xk(i,a,u,p,g){if(g){if(typeof p=="function"){var w=p;p=function(){var K=Vd(T);w.call(K)}}var T=Dw(a,p,i,0,null,!1,!1,"",Mw);return i._reactRootContainer=T,i[Xr]=T.current,ql(i.nodeType===8?i.parentNode:i),Wi(),T}for(;g=i.lastChild;)i.removeChild(g);if(typeof p=="function"){var R=p;p=function(){var K=Vd(O);R.call(K)}}var O=Jp(i,0,!1,null,null,!1,!1,"",Mw);return i._reactRootContainer=O,i[Xr]=O.current,ql(i.nodeType===8?i.parentNode:i),Wi(function(){Md(a,O,u,p)}),O}function Fd(i,a,u,p,g){var w=u._reactRootContainer;if(w){var T=w;if(typeof g=="function"){var R=g;g=function(){var O=Vd(T);R.call(O)}}Md(a,T,i,g)}else T=xk(u,a,i,g,p);return Vd(T)}Mc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=bs(a.pendingLanes);u!==0&&(Ps(a,u|1),gn(a,Xe()),!(Fe&6)&&(pa=Xe()+500,Ms()))}break;case 13:Wi(function(){var p=ts(i,1);if(p!==null){var g=ln();ir(p,i,1,g)}}),Zp(i,1)}},Uo=function(i){if(i.tag===13){var a=ts(i,134217728);if(a!==null){var u=ln();ir(a,i,134217728,u)}Zp(i,134217728)}},Vc=function(i){if(i.tag===13){var a=Bs(i),u=ts(i,a);if(u!==null){var p=ln();ir(u,i,a,p)}Zp(i,a)}},Lc=function(){return je},Uc=function(i,a){var u=je;try{return je=i,a()}finally{je=u}},Co=function(i,a,u){switch(a){case"input":if(ml(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==i&&p.form===i.form){var g=rd(p);if(!g)throw Error(t(90));bo(p),ml(p,g)}}}break;case"textarea":ko(i,u);break;case"select":a=u.value,a!=null&&zr(i,!!u.multiple,a,!1)}},Si=Hp,Sl=Wi;var Ek={usingClientEntryPoint:!1,Events:[Gl,ta,rd,gr,bl,Hp]},au={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tk={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=kl(i),i===null?null:i.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||wk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{Ci=$d.inject(Tk),wn=$d}catch{}}return yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ek,yn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tm(a))throw Error(t(200));return _k(i,a,null,u)},yn.createRoot=function(i,a){if(!tm(i))throw Error(t(299));var u=!1,p="",g=Ow;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Jp(i,1,!1,null,null,u,!1,p,g),i[Xr]=a.current,ql(i.nodeType===8?i.parentNode:i),new em(a)},yn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=kl(a),i=i===null?null:i.stateNode,i},yn.flushSync=function(i){return Wi(i)},yn.hydrate=function(i,a,u){if(!Ud(a))throw Error(t(200));return Fd(null,i,a,!0,u)},yn.hydrateRoot=function(i,a,u){if(!tm(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,w="",T=Ow;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),a=Dw(a,null,i,1,u??null,g,!1,w,T),i[Xr]=a.current,ql(i),p)for(i=0;i<p.length;i++)u=p[i],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new Ld(a)},yn.render=function(i,a,u){if(!Ud(a))throw Error(t(200));return Fd(null,i,a,!1,u)},yn.unmountComponentAtNode=function(i){if(!Ud(i))throw Error(t(40));return i._reactRootContainer?(Wi(function(){Fd(null,null,i,!1,function(){i._reactRootContainer=null,i[Xr]=null})}),!0):!1},yn.unstable_batchedUpdates=Hp,yn.unstable_renderSubtreeIntoContainer=function(i,a,u,p){if(!Ud(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Fd(i,a,u,!1,p)},yn.version="18.3.1-next-f1338f8080-20240426",yn}var qw;function kT(){if(qw)return sm.exports;qw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sm.exports=Dk(),sm.exports}var Ww;function jk(){if(Ww)return Bd;Ww=1;var n=kT();return Bd.createRoot=n.createRoot,Bd.hydrateRoot=n.hydrateRoot,Bd}var Ok=jk();const Mk=Qh(Ok);kT();/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Uu.apply(this,arguments)}var ni;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ni||(ni={}));const Hw="popstate";function Vk(n){n===void 0&&(n={});function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return zm("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:wh(s)}return Uk(e,t,null,n)}function yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function AT(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Lk(){return Math.random().toString(36).substr(2,8)}function Gw(n,e){return{usr:n.state,key:n.key,idx:e}}function zm(n,e,t,r){return t===void 0&&(t=null),Uu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?tl(e):e,{state:t,key:e&&e.key||r||Lk()})}function wh(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function tl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Uk(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c=ni.Pop,d=null,f=m();f==null&&(f=0,l.replaceState(Uu({},l.state,{idx:f}),""));function m(){return(l.state||{idx:null}).idx}function v(){c=ni.Pop;let P=m(),U=P==null?null:P-f;f=P,d&&d({action:c,location:C.location,delta:U})}function x(P,U){c=ni.Push;let H=zm(C.location,P,U);f=m()+1;let z=Gw(H,f),X=C.createHref(H);try{l.pushState(z,"",X)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;s.location.assign(X)}o&&d&&d({action:c,location:C.location,delta:1})}function b(P,U){c=ni.Replace;let H=zm(C.location,P,U);f=m();let z=Gw(H,f),X=C.createHref(H);l.replaceState(z,"",X),o&&d&&d({action:c,location:C.location,delta:0})}function k(P){let U=s.location.origin!=="null"?s.location.origin:s.location.href,H=typeof P=="string"?P:wh(P);return H=H.replace(/ $/,"%20"),yt(U,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,U)}let C={get action(){return c},get location(){return n(s,l)},listen(P){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Hw,v),d=P,()=>{s.removeEventListener(Hw,v),d=null}},createHref(P){return e(s,P)},createURL:k,encodeLocation(P){let U=k(P);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:x,replace:b,go(P){return l.go(P)}};return C}var Kw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Kw||(Kw={}));function Fk(n,e,t){return t===void 0&&(t="/"),$k(n,e,t)}function $k(n,e,t,r){let s=typeof e=="string"?tl(e):e,o=zg(s.pathname||"/",t);if(o==null)return null;let l=CT(n);Bk(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let f=eA(o);c=Xk(l[d],f)}return c}function CT(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(o,l,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(yt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=si([r,d.relativePath]),m=t.concat(d);o.children&&o.children.length>0&&(yt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),CT(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:Qk(f,o.index),routesMeta:m})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let d of RT(o.path))s(o,l,d)}),e}function RT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=RT(r.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&c.push(...l),c.map(d=>n.startsWith("/")&&d===""?"/":d)}function Bk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Yk(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const zk=/^:[\w-]+$/,qk=3,Wk=2,Hk=1,Gk=10,Kk=-2,Qw=n=>n==="*";function Qk(n,e){let t=n.split("/"),r=t.length;return t.some(Qw)&&(r+=Kk),e&&(r+=Wk),t.filter(s=>!Qw(s)).reduce((s,o)=>s+(zk.test(o)?qk:o===""?Hk:Gk),r)}function Yk(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function Xk(n,e,t){let{routesMeta:r}=n,s={},o="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",v=Jk({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),x=d.route;if(!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:si([o,v.pathname]),pathnameBase:sA(si([o,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(o=si([o,v.pathnameBase]))}return l}function Jk(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Zk(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((f,m,v)=>{let{paramName:x,isOptional:b}=m;if(x==="*"){let C=c[v]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const k=c[v];return b&&!k?f[x]=void 0:f[x]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function Zk(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),AT(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function eA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return AT(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function zg(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function tA(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?tl(n):n;return{pathname:t?t.startsWith("/")?t:nA(t,e):e,search:iA(r),hash:oA(s)}}function nA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function am(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qg(n,e){let t=rA(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Wg(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=tl(n):(s=Uu({},n),yt(!s.pathname||!s.pathname.includes("?"),am("?","pathname","search",s)),yt(!s.pathname||!s.pathname.includes("#"),am("#","pathname","hash",s)),yt(!s.search||!s.search.includes("#"),am("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;s.pathname=x.join("/")}c=v>=0?e[v]:"/"}let d=tA(s,c),f=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}const si=n=>n.join("/").replace(/\/\/+/g,"/"),sA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),iA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,oA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function aA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const NT=["post","put","patch","delete"];new Set(NT);const lA=["get",...NT];new Set(lA);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fu.apply(this,arguments)}const Hg=L.createContext(null),uA=L.createContext(null),mi=L.createContext(null),Yh=L.createContext(null),gi=L.createContext({outlet:null,matches:[],isDataRoute:!1}),DT=L.createContext(null);function cA(n,e){let{relative:t}=e===void 0?{}:e;nl()||yt(!1);let{basename:r,navigator:s}=L.useContext(mi),{hash:o,pathname:l,search:c}=OT(n,{relative:t}),d=l;return r!=="/"&&(d=l==="/"?r:si([r,l])),s.createHref({pathname:d,search:c,hash:o})}function nl(){return L.useContext(Yh)!=null}function rl(){return nl()||yt(!1),L.useContext(Yh).location}function jT(n){L.useContext(mi).static||L.useLayoutEffect(n)}function Rn(){let{isDataRoute:n}=L.useContext(gi);return n?TA():dA()}function dA(){nl()||yt(!1);let n=L.useContext(Hg),{basename:e,future:t,navigator:r}=L.useContext(mi),{matches:s}=L.useContext(gi),{pathname:o}=rl(),l=JSON.stringify(qg(s,t.v7_relativeSplatPath)),c=L.useRef(!1);return jT(()=>{c.current=!0}),L.useCallback(function(f,m){if(m===void 0&&(m={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let v=Wg(f,JSON.parse(l),o,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:si([e,v.pathname])),(m.replace?r.replace:r.push)(v,m.state,m)},[e,r,l,o,n])}function OT(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=L.useContext(mi),{matches:s}=L.useContext(gi),{pathname:o}=rl(),l=JSON.stringify(qg(s,r.v7_relativeSplatPath));return L.useMemo(()=>Wg(n,JSON.parse(l),o,t==="path"),[n,l,o,t])}function hA(n,e){return fA(n,e)}function fA(n,e,t,r){nl()||yt(!1);let{navigator:s,static:o}=L.useContext(mi),{matches:l}=L.useContext(gi),c=l[l.length-1],d=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let m=rl(),v;if(e){var x;let U=typeof e=="string"?tl(e):e;f==="/"||(x=U.pathname)!=null&&x.startsWith(f)||yt(!1),v=U}else v=m;let b=v.pathname||"/",k=b;if(f!=="/"){let U=f.replace(/^\//,"").split("/");k="/"+b.replace(/^\//,"").split("/").slice(U.length).join("/")}let C=Fk(n,{pathname:k}),P=vA(C&&C.map(U=>Object.assign({},U,{params:Object.assign({},d,U.params),pathname:si([f,s.encodeLocation?s.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?f:si([f,s.encodeLocation?s.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),l,t,r);return e&&P?L.createElement(Yh.Provider,{value:{location:Fu({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:ni.Pop}},P):P}function pA(){let n=EA(),e=aA(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:s},t):null,null)}const mA=L.createElement(pA,null);class gA extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?L.createElement(gi.Provider,{value:this.props.routeContext},L.createElement(DT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yA(n){let{routeContext:e,match:t,children:r}=n,s=L.useContext(Hg);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(gi.Provider,{value:e},r)}function vA(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=(s=t)==null?void 0:s.errors;if(c!=null){let m=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);m>=0||yt(!1),l=l.slice(0,Math.min(l.length,m+1))}let d=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let v=l[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=m),v.route.id){let{loaderData:x,errors:b}=t,k=v.route.loader&&x[v.route.id]===void 0&&(!b||b[v.route.id]===void 0);if(v.route.lazy||k){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((m,v,x)=>{let b,k=!1,C=null,P=null;t&&(b=c&&v.route.id?c[v.route.id]:void 0,C=v.route.errorElement||mA,d&&(f<0&&x===0?(bA("route-fallback"),k=!0,P=null):f===x&&(k=!0,P=v.route.hydrateFallbackElement||null)));let U=e.concat(l.slice(0,x+1)),H=()=>{let z;return b?z=C:k?z=P:v.route.Component?z=L.createElement(v.route.Component,null):v.route.element?z=v.route.element:z=m,L.createElement(yA,{match:v,routeContext:{outlet:m,matches:U,isDataRoute:t!=null},children:z})};return t&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?L.createElement(gA,{location:t.location,revalidation:t.revalidation,component:C,error:b,children:H(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):H()},null)}var MT=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(MT||{}),xh=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(xh||{});function _A(n){let e=L.useContext(Hg);return e||yt(!1),e}function wA(n){let e=L.useContext(uA);return e||yt(!1),e}function xA(n){let e=L.useContext(gi);return e||yt(!1),e}function VT(n){let e=xA(),t=e.matches[e.matches.length-1];return t.route.id||yt(!1),t.route.id}function EA(){var n;let e=L.useContext(DT),t=wA(xh.UseRouteError),r=VT(xh.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function TA(){let{router:n}=_A(MT.UseNavigateStable),e=VT(xh.UseNavigateStable),t=L.useRef(!1);return jT(()=>{t.current=!0}),L.useCallback(function(s,o){o===void 0&&(o={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Fu({fromRouteId:e},o)))},[n,e])}const Yw={};function bA(n,e,t){Yw[n]||(Yw[n]=!0)}function SA(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function IA(n){let{to:e,replace:t,state:r,relative:s}=n;nl()||yt(!1);let{future:o,static:l}=L.useContext(mi),{matches:c}=L.useContext(gi),{pathname:d}=rl(),f=Rn(),m=Wg(e,qg(c,o.v7_relativeSplatPath),d,s==="path"),v=JSON.stringify(m);return L.useEffect(()=>f(JSON.parse(v),{replace:t,state:r,relative:s}),[f,v,s,t,r]),null}function Xi(n){yt(!1)}function PA(n){let{basename:e="/",children:t=null,location:r,navigationType:s=ni.Pop,navigator:o,static:l=!1,future:c}=n;nl()&&yt(!1);let d=e.replace(/^\/*/,"/"),f=L.useMemo(()=>({basename:d,navigator:o,static:l,future:Fu({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);typeof r=="string"&&(r=tl(r));let{pathname:m="/",search:v="",hash:x="",state:b=null,key:k="default"}=r,C=L.useMemo(()=>{let P=zg(m,d);return P==null?null:{location:{pathname:P,search:v,hash:x,state:b,key:k},navigationType:s}},[d,m,v,x,b,k,s]);return C==null?null:L.createElement(mi.Provider,{value:f},L.createElement(Yh.Provider,{children:t,value:C}))}function kA(n){let{children:e,location:t}=n;return hA(qm(e),t)}new Promise(()=>{});function qm(n,e){e===void 0&&(e=[]);let t=[];return L.Children.forEach(n,(r,s)=>{if(!L.isValidElement(r))return;let o=[...e,s];if(r.type===L.Fragment){t.push.apply(t,qm(r.props.children,o));return}r.type!==Xi&&yt(!1),!r.props.index||!r.props.children||yt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=qm(r.props.children,o)),t.push(l)}),t}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wm(){return Wm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wm.apply(this,arguments)}function AA(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function CA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function RA(n,e){return n.button===0&&(!e||e==="_self")&&!CA(n)}function Hm(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function NA(n,e){let t=Hm(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(o=>{t.append(s,o)})}),t}const DA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jA="6";try{window.__reactRouterVersion=jA}catch{}const OA="startTransition",Xw=Ck[OA];function MA(n){let{basename:e,children:t,future:r,window:s}=n,o=L.useRef();o.current==null&&(o.current=Vk({window:s,v5Compat:!0}));let l=o.current,[c,d]=L.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},m=L.useCallback(v=>{f&&Xw?Xw(()=>d(v)):d(v)},[d,f]);return L.useLayoutEffect(()=>l.listen(m),[l,m]),L.useEffect(()=>SA(r),[r]),L.createElement(PA,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:r})}const VA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=L.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:o,replace:l,state:c,target:d,to:f,preventScrollReset:m,viewTransition:v}=e,x=AA(e,DA),{basename:b}=L.useContext(mi),k,C=!1;if(typeof f=="string"&&LA.test(f)&&(k=f,VA))try{let z=new URL(window.location.href),X=f.startsWith("//")?new URL(z.protocol+f):new URL(f),J=zg(X.pathname,b);X.origin===z.origin&&J!=null?f=J+X.search+X.hash:C=!0}catch{}let P=cA(f,{relative:s}),U=UA(f,{replace:l,state:c,target:d,preventScrollReset:m,relative:s,viewTransition:v});function H(z){r&&r(z),z.defaultPrevented||U(z)}return L.createElement("a",Wm({},x,{href:k||P,onClick:C||o?r:H,ref:t,target:d}))});var Jw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Jw||(Jw={}));var Zw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Zw||(Zw={}));function UA(n,e){let{target:t,replace:r,state:s,preventScrollReset:o,relative:l,viewTransition:c}=e===void 0?{}:e,d=Rn(),f=rl(),m=OT(n,{relative:l});return L.useCallback(v=>{if(RA(v,t)){v.preventDefault();let x=r!==void 0?r:wh(f)===wh(m);d(n,{replace:x,state:s,preventScrollReset:o,relative:l,viewTransition:c})}},[f,d,m,r,s,t,n,o,l,c])}function FA(n){let e=L.useRef(Hm(n)),t=L.useRef(!1),r=rl(),s=L.useMemo(()=>NA(r.search,t.current?null:e.current),[r.search]),o=Rn(),l=L.useCallback((c,d)=>{const f=Hm(typeof c=="function"?c(s):c);t.current=!0,o("?"+f,d)},[o,s]);return[s,l]}var e0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},$A=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},UT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,m=o>>2,v=(o&3)<<4|c>>4;let x=(c&15)<<2|f>>6,b=f&63;d||(b=64,l||(x=64)),r.push(t[m],t[v],t[x],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(LT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):$A(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||f==null||v==null)throw new BA;const x=o<<2|c>>4;if(r.push(x),f!==64){const b=c<<4&240|f>>2;if(r.push(b),v!==64){const k=f<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zA=function(n){const e=LT(n);return UT.encodeByteArray(e,!0)},Eh=function(n){return zA(n).replace(/\./g,"")},FT=function(n){try{return UT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=()=>qA().__FIREBASE_DEFAULTS__,HA=()=>{if(typeof process>"u"||typeof e0>"u")return;const n=e0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&FT(n[1]);return e&&JSON.parse(e)},Xh=()=>{try{return WA()||HA()||GA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$T=n=>{var e,t;return(t=(e=Xh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},BT=n=>{const e=$T(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},zT=()=>{var n;return(n=Xh())===null||n===void 0?void 0:n.config},qT=n=>{var e;return(e=Xh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KA=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Eh(JSON.stringify(t)),Eh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function YA(){var n;const e=(n=Xh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ZA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eC(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tC(){return!YA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nC(){try{return typeof indexedDB=="object"}catch{return!1}}function rC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="FirebaseError";class Fr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=sC,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ac.prototype.create)}}class ac{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?iC(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Fr(s,c,r)}}function iC(n,e){return n.replace(oC,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const oC=/\{\$([^}]+)}/g;function aC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Th(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(t0(o)&&t0(l)){if(!Th(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function t0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function yu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function lC(n,e){const t=new uC(n,e);return t.subscribe.bind(t)}class uC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");cC(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=lm),s.error===void 0&&(s.error=lm),s.complete===void 0&&(s.complete=lm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(n){return n&&n._delegate?n._delegate:n}class li{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new KA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fC(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ji){return this.instances.has(e)}getOptions(e=Ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ji){return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hC(n){return n===Ji?void 0:n}function fC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const mC={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},gC=Me.INFO,yC={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},vC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=yC[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gg{constructor(e){this.name=e,this._logLevel=gC,this._logHandler=vC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const _C=(n,e)=>e.some(t=>n instanceof t);let n0,r0;function wC(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xC(){return r0||(r0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HT=new WeakMap,Gm=new WeakMap,GT=new WeakMap,um=new WeakMap,Kg=new WeakMap;function EC(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(ii(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&HT.set(t,n)}).catch(()=>{}),Kg.set(e,n),e}function TC(n){if(Gm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Gm.set(n,e)}let Km={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Gm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ii(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bC(n){Km=n(Km)}function SC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cm(this),e,...t);return GT.set(r,e.sort?e.sort():[e]),ii(r)}:xC().includes(n)?function(...e){return n.apply(cm(this),e),ii(HT.get(this))}:function(...e){return ii(n.apply(cm(this),e))}}function IC(n){return typeof n=="function"?SC(n):(n instanceof IDBTransaction&&TC(n),_C(n,wC())?new Proxy(n,Km):n)}function ii(n){if(n instanceof IDBRequest)return EC(n);if(um.has(n))return um.get(n);const e=IC(n);return e!==n&&(um.set(n,e),Kg.set(e,n)),e}const cm=n=>Kg.get(n);function PC(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=ii(l);return r&&l.addEventListener("upgradeneeded",d=>{r(ii(l.result),d.oldVersion,d.newVersion,ii(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const kC=["get","getKey","getAll","getAllKeys","count"],AC=["put","add","delete","clear"],dm=new Map;function s0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=AC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||kC.includes(t)))return;const o=async function(l,...c){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),s&&d.done]))[0]};return dm.set(e,o),o}bC(n=>({...n,get:(e,t,r)=>s0(e,t)||n.get(e,t,r),has:(e,t)=>!!s0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function RC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qm="@firebase/app",i0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Gg("@firebase/app"),NC="@firebase/app-compat",DC="@firebase/analytics-compat",jC="@firebase/analytics",OC="@firebase/app-check-compat",MC="@firebase/app-check",VC="@firebase/auth",LC="@firebase/auth-compat",UC="@firebase/database",FC="@firebase/data-connect",$C="@firebase/database-compat",BC="@firebase/functions",zC="@firebase/functions-compat",qC="@firebase/installations",WC="@firebase/installations-compat",HC="@firebase/messaging",GC="@firebase/messaging-compat",KC="@firebase/performance",QC="@firebase/performance-compat",YC="@firebase/remote-config",XC="@firebase/remote-config-compat",JC="@firebase/storage",ZC="@firebase/storage-compat",eR="@firebase/firestore",tR="@firebase/vertexai-preview",nR="@firebase/firestore-compat",rR="firebase",sR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="[DEFAULT]",iR={[Qm]:"fire-core",[NC]:"fire-core-compat",[jC]:"fire-analytics",[DC]:"fire-analytics-compat",[MC]:"fire-app-check",[OC]:"fire-app-check-compat",[VC]:"fire-auth",[LC]:"fire-auth-compat",[UC]:"fire-rtdb",[FC]:"fire-data-connect",[$C]:"fire-rtdb-compat",[BC]:"fire-fn",[zC]:"fire-fn-compat",[qC]:"fire-iid",[WC]:"fire-iid-compat",[HC]:"fire-fcm",[GC]:"fire-fcm-compat",[KC]:"fire-perf",[QC]:"fire-perf-compat",[YC]:"fire-rc",[XC]:"fire-rc-compat",[JC]:"fire-gcs",[ZC]:"fire-gcs-compat",[eR]:"fire-fst",[nR]:"fire-fst-compat",[tR]:"fire-vertex","fire-js":"fire-js",[rR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,oR=new Map,Xm=new Map;function o0(n,e){try{n.container.addComponent(e)}catch(t){ps.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function co(n){const e=n.name;if(Xm.has(e))return ps.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,n);for(const t of bh.values())o0(t,n);for(const t of oR.values())o0(t,n);return!0}function Jh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ur(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new ac("app","Firebase",aR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=sR;function KT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ym,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw oi.create("bad-app-name",{appName:String(s)});if(t||(t=zT()),!t)throw oi.create("no-options");const o=bh.get(s);if(o){if(Th(t,o.options)&&Th(r,o.config))return o;throw oi.create("duplicate-app",{appName:s})}const l=new pC(s);for(const d of Xm.values())l.addComponent(d);const c=new lR(t,r,l);return bh.set(s,c),c}function Qg(n=Ym){const e=bh.get(n);if(!e&&n===Ym&&zT())return KT();if(!e)throw oi.create("no-app",{appName:n});return e}function Cr(n,e,t){var r;let s=(r=iR[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ps.warn(c.join(" "));return}co(new li(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebase-heartbeat-database",cR=1,$u="firebase-heartbeat-store";let hm=null;function QT(){return hm||(hm=PC(uR,cR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($u)}catch(t){console.warn(t)}}}}).catch(n=>{throw oi.create("idb-open",{originalErrorMessage:n.message})})),hm}async function dR(n){try{const t=(await QT()).transaction($u),r=await t.objectStore($u).get(YT(n));return await t.done,r}catch(e){if(e instanceof Fr)ps.warn(e.message);else{const t=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ps.warn(t.message)}}}async function a0(n,e){try{const r=(await QT()).transaction($u,"readwrite");await r.objectStore($u).put(e,YT(n)),await r.done}catch(t){if(t instanceof Fr)ps.warn(t.message);else{const r=oi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ps.warn(r.message)}}}function YT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=1024,fR=30*24*60*60*1e3;class pR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=l0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=fR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ps.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=l0(),{heartbeatsToSend:r,unsentEntries:s}=mR(this._heartbeatsCache.heartbeats),o=Eh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ps.warn(t),""}}}function l0(){return new Date().toISOString().substring(0,10)}function mR(n,e=hR){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),u0(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),u0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class gR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nC()?rC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return a0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return a0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function u0(n){return Eh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n){co(new li("platform-logger",e=>new CC(e),"PRIVATE")),co(new li("heartbeat",e=>new pR(e),"PRIVATE")),Cr(Qm,i0,n),Cr(Qm,i0,"esm2017"),Cr("fire-js","")}yR("");function Yg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function XT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vR=XT,JT=new ac("auth","Firebase",XT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Gg("@firebase/auth");function _R(n,...e){Sh.logLevel<=Me.WARN&&Sh.warn(`Auth (${yo}): ${n}`,...e)}function ah(n,...e){Sh.logLevel<=Me.ERROR&&Sh.error(`Auth (${yo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(n,...e){throw Jg(n,...e)}function dr(n,...e){return Jg(n,...e)}function Xg(n,e,t){const r=Object.assign(Object.assign({},vR()),{[e]:t});return new ac("auth","Firebase",r).create(e,{appName:n.name})}function us(n){return Xg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wR(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&qn(n,"argument-error"),Xg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return JT.create(n,...e)}function Ee(n,e,...t){if(!n)throw Jg(e,...t)}function os(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ah(e),new Error(e)}function ms(n,e){n||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function xR(){return c0()==="http:"||c0()==="https:"}function c0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xR()||JA()||"connection"in navigator)?navigator.onLine:!0}function TR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ms(t>e,"Short delay should be less than long delay!"),this.isMobile=QA()||ZA()}get(){return ER()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(n,e){ms(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new uc(3e4,6e4);function _s(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ws(n,e,t,r,s={}){return eb(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=lc(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:d},o);return XA()||(f.referrerPolicy="no-referrer"),ZT.fetch()(tb(n,n.config.apiHost,t,c),f)})}async function eb(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},bR),e);try{const s=new PR(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw zd(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw zd(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw zd(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw zd(n,"user-disabled",l);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Xg(n,m,f);qn(n,m)}}catch(s){if(s instanceof Fr)throw s;qn(n,"network-request-failed",{message:String(s)})}}async function cc(n,e,t,r,s={}){const o=await ws(n,e,t,r,s);return"mfaPendingCredential"in o&&qn(n,"multi-factor-auth-required",{_serverResponse:o}),o}function tb(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Zg(n.config,s):`${n.config.apiScheme}://${s}`}function IR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(dr(this.auth,"network-request-failed")),SR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=dr(n,e,r);return s.customData._tokenResponse=t,s}function d0(n){return n!==void 0&&n.enterprise!==void 0}class kR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return IR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function AR(n,e){return ws(n,"GET","/v2/recaptchaConfig",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(n,e){return ws(n,"POST","/v1/accounts:delete",e)}async function nb(n,e){return ws(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RR(n,e=!1){const t=Ct(n),r=await t.getIdToken(e),s=ey(r);Ee(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Iu(fm(s.auth_time)),issuedAtTime:Iu(fm(s.iat)),expirationTime:Iu(fm(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function fm(n){return Number(n)*1e3}function ey(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ah("JWT malformed, contained fewer than 3 sections"),null;try{const s=FT(t);return s?JSON.parse(s):(ah("Failed to decode base64 JWT payload"),null)}catch(s){return ah("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function h0(n){const e=ey(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Fr&&NR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function NR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Bu(n,nb(t,{idToken:r}));Ee(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?rb(o.providerUserInfo):[],c=OR(n.providerData,l),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Zm(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function jR(n){const e=Ct(n);await Ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OR(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function rb(n){return n.map(e=>{var{providerId:t}=e,r=Yg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,e){const t=await eb(n,{},async()=>{const r=lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=tb(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ZT.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function VR(n,e){return ws(n,"POST","/v2/accounts:revokeToken",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=h0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await MR(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Ma;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ee(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ee(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ma,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class as{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=Yg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Bu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RR(this,e)}reload(){return jR(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new as(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ih(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(us(this.auth));const e=await this.getIdToken();return await Bu(this,CR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,c,d,f,m;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,x=(s=t.email)!==null&&s!==void 0?s:void 0,b=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(l=t.photoURL)!==null&&l!==void 0?l:void 0,C=(c=t.tenantId)!==null&&c!==void 0?c:void 0,P=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,U=(f=t.createdAt)!==null&&f!==void 0?f:void 0,H=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:z,emailVerified:X,isAnonymous:J,providerData:ie,stsTokenManager:D}=t;Ee(z&&D,e,"internal-error");const S=Ma.fromJSON(this.name,D);Ee(typeof z=="string",e,"internal-error"),Hs(v,e.name),Hs(x,e.name),Ee(typeof X=="boolean",e,"internal-error"),Ee(typeof J=="boolean",e,"internal-error"),Hs(b,e.name),Hs(k,e.name),Hs(C,e.name),Hs(P,e.name),Hs(U,e.name),Hs(H,e.name);const A=new as({uid:z,auth:e,email:x,emailVerified:X,displayName:v,isAnonymous:J,photoURL:k,phoneNumber:b,tenantId:C,stsTokenManager:S,createdAt:U,lastLoginAt:H});return ie&&Array.isArray(ie)&&(A.providerData=ie.map(j=>Object.assign({},j))),P&&(A._redirectEventId=P),A}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ma;s.updateFromServerResponse(t);const o=new as({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ih(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ee(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?rb(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new Ma;c.updateFromIdToken(r);const d=new as({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Zm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;function ls(n){ms(n instanceof Function,"Expected a class definition");let e=f0.get(n);return e?(ms(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,f0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sb.type="NONE";const p0=sb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(n,e,t){return`firebase:${n}:${e}:${t}`}class Va{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=lh(this.userKey,s.apiKey,o),this.fullPersistenceKey=lh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?as._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Va(ls(p0),e,r);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||ls(p0);const l=lh(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const m=await f._get(l);if(m){const v=as._fromJSON(e,m);f!==o&&(c=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Va(o,e,r):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Va(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ib(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cb(e))return"Blackberry";if(db(e))return"Webos";if(ob(e))return"Safari";if((e.includes("chrome/")||ab(e))&&!e.includes("edge/"))return"Chrome";if(ub(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ib(n=rn()){return/firefox\//i.test(n)}function ob(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ab(n=rn()){return/crios\//i.test(n)}function lb(n=rn()){return/iemobile/i.test(n)}function ub(n=rn()){return/android/i.test(n)}function cb(n=rn()){return/blackberry/i.test(n)}function db(n=rn()){return/webos/i.test(n)}function ty(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LR(n=rn()){var e;return ty(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UR(){return eC()&&document.documentMode===10}function hb(n=rn()){return ty(n)||ub(n)||db(n)||cb(n)||/windows phone/i.test(n)||lb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(n,e=[]){let t;switch(n){case"Browser":t=m0(rn());break;case"Worker":t=`${m0(rn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(n,e={}){return ws(n,"GET","/v2/passwordPolicy",_s(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=6;class zR{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:BR,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g0(this),this.idTokenSubscription=new g0(this),this.beforeStateQueue=new FR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ls(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Va.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nb(this,{idToken:e}),r=await as._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ur(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ih(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(us(this));const t=e?Ct(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $R(this),t=new zR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ac("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await VR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ls(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await Va.create(this,[ls(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&_R(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function yi(n){return Ct(n)}class g0{constructor(e){this.auth=e,this.observer=null,this.addObserver=lC(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WR(n){Zh=n}function pb(n){return Zh.loadJS(n)}function HR(){return Zh.recaptchaEnterpriseScript}function GR(){return Zh.gapiScript}function KR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const QR="recaptcha-enterprise",YR="NO_RECAPTCHA";class XR{constructor(e){this.type=QR,this.auth=yi(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{AR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new kR(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{c(d)})})}function s(o,l,c){const d=window.grecaptcha;d0(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(YR)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&d0(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=HR();d.length!==0&&(d+=c),pb(d).then(()=>{s(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function y0(n,e,t,r=!1){const s=new XR(n);let o;try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function eg(n,e,t,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await y0(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await y0(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n,e){const t=Jh(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Th(o,e??{}))return s;qn(s,"already-initialized")}return t.initialize({options:e})}function ZR(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ls);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eN(n,e,t){const r=yi(n);Ee(r._canInitEmulator,r,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=mb(e),{host:l,port:c}=tN(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),nN()}function mb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tN(n){const e=mb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:v0(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:v0(l)}}}function v0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,t){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}async function rN(n,e){return ws(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(n,e){return cc(n,"POST","/v1/accounts:signInWithPassword",_s(n,e))}async function iN(n,e){return ws(n,"POST","/v1/accounts:sendOobCode",_s(n,e))}async function oN(n,e){return iN(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(n,e){return cc(n,"POST","/v1/accounts:signInWithEmailLink",_s(n,e))}async function lN(n,e){return cc(n,"POST","/v1/accounts:signInWithEmailLink",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends ny{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new zu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new zu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eg(e,t,"signInWithPassword",sN);case"emailLink":return aN(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eg(e,r,"signUpPassword",rN);case"emailLink":return lN(e,{idToken:t,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(n,e){return cc(n,"POST","/v1/accounts:signInWithIdp",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="http://localhost";class ho extends ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=Yg(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new ho(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return La(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,La(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,La(e,t)}buildRequest(){const e={requestUri:uN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dN(n){const e=gu(yu(n)).link,t=e?gu(yu(e)).deep_link_id:null,r=gu(yu(n)).deep_link_id;return(r?gu(yu(r)).link:null)||r||t||e||n}class ry{constructor(e){var t,r,s,o,l,c;const d=gu(yu(e)),f=(t=d.apiKey)!==null&&t!==void 0?t:null,m=(r=d.oobCode)!==null&&r!==void 0?r:null,v=cN((s=d.mode)!==null&&s!==void 0?s:null);Ee(f&&m&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=m,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=dN(e);try{return new ry(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(){this.providerId=sl.PROVIDER_ID}static credential(e,t){return zu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ry.parseLink(t);return Ee(r,"argument-error"),zu._fromEmailAndCode(e,r.code,r.tenantId)}}sl.PROVIDER_ID="password";sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends sy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends dc{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.FACEBOOK_SIGN_IN_METHOD="facebook.com";Js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ho._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Pr.credential(t,r)}catch{return null}}}Pr.GOOGLE_SIGN_IN_METHOD="google.com";Pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends dc{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.GITHUB_SIGN_IN_METHOD="github.com";Zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends dc{constructor(){super("twitter.com")}static credential(e,t){return ho._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ei.credential(t,r)}catch{return null}}}ei.TWITTER_SIGN_IN_METHOD="twitter.com";ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(n,e){return cc(n,"POST","/v1/accounts:signUp",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await as._fromIdTokenResponse(e,r,s),l=_0(r);return new fo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=_0(r);return new fo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function _0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph extends Fr{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ph.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Ph(e,t,r,s)}}function gb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ph._fromErrorAndOperation(n,o,e,r):o})}async function fN(n,e,t=!1){const r=await Bu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(n,e,t=!1){const{auth:r}=n;if(ur(r.app))return Promise.reject(us(r));const s="reauthenticate";try{const o=await Bu(n,gb(r,s,e,n),t);Ee(o.idToken,r,"internal-error");const l=ey(o.idToken);Ee(l,r,"internal-error");const{sub:c}=l;return Ee(n.uid===c,r,"user-mismatch"),fo._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(n,e,t=!1){if(ur(n.app))return Promise.reject(us(n));const r="signIn",s=await gb(n,r,e),o=await fo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function mN(n,e){return yb(yi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(n){const e=yi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gN(n,e,t){if(ur(n.app))return Promise.reject(us(n));const r=yi(n),l=await eg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hN).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&vb(n),d}),c=await fo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function yN(n,e,t){return ur(n.app)?Promise.reject(us(n)):mN(Ct(n),sl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vb(n),r})}async function vN(n,e){const t=Ct(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await oN(t.auth,s);o!==n.email&&await n.reload()}function _N(n,e,t,r){return Ct(n).onIdTokenChanged(e,t,r)}function wN(n,e,t){return Ct(n).beforeAuthStateChanged(e,t)}function xN(n,e,t,r){return Ct(n).onAuthStateChanged(e,t,r)}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=1e3,TN=10;class wb extends _b{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);UR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,TN):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},EN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wb.type="LOCAL";const bN=wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends _b{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xb.type="SESSION";const Eb=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ef(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async f=>f(t.origin,o)),d=await SN(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const f=iy("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const x=v;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(x.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function PN(n){Rr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function kN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function CN(){return Tb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="firebaseLocalStorageDb",RN=1,Ah="firebaseLocalStorage",Sb="fbase_key";class hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tf(n,e){return n.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function NN(){const n=indexedDB.deleteDatabase(bb);return new hc(n).toPromise()}function tg(){const n=indexedDB.open(bb,RN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ah,{keyPath:Sb})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ah)?e(r):(r.close(),await NN(),e(await tg()))})})}async function w0(n,e,t){const r=tf(n,!0).put({[Sb]:e,value:t});return new hc(r).toPromise()}async function DN(n,e){const t=tf(n,!1).get(e),r=await new hc(t).toPromise();return r===void 0?null:r.value}function x0(n,e){const t=tf(n,!0).delete(e);return new hc(t).toPromise()}const jN=800,ON=3;class Ib{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ON)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ef._getInstance(CN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await kN(),!this.activeServiceWorker)return;this.sender=new IN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tg();return await w0(e,kh,"1"),await x0(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>w0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>DN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>x0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=tf(s,!1).getAll();return new hc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ib.type="LOCAL";const MN=Ib;new uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n,e){return e?ls(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy extends ny{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return La(e,this._buildIdpRequest())}_linkToIdToken(e,t){return La(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return La(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VN(n){return yb(n.auth,new oy(n),n.bypassAuthState)}function LN(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),pN(t,new oy(n),n.bypassAuthState)}async function UN(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),fN(t,new oy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VN;case"linkViaPopup":case"linkViaRedirect":return UN;case"reauthViaPopup":case"reauthViaRedirect":return LN;default:qn(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new uc(2e3,1e4);async function Ab(n,e,t){if(ur(n.app))return Promise.reject(dr(n,"operation-not-supported-in-this-environment"));const r=yi(n);wR(n,e,sy);const s=Pb(r,t);return new io(r,"signInViaPopup",e,s).executeNotNull()}class io extends kb{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=iy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FN.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="pendingRedirect",uh=new Map;class BN extends kb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=uh.get(this.auth._key());if(!e){try{const r=await zN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}uh.set(this.auth._key(),e)}return this.bypassAuthState||uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zN(n,e){const t=HN(e),r=WN(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function qN(n,e){uh.set(n._key(),e)}function WN(n){return ls(n._redirectPersistence)}function HN(n){return lh($N,n.config.apiKey,n.name)}async function GN(n,e,t=!1){if(ur(n.app))return Promise.reject(us(n));const r=yi(n),s=Pb(r,e),l=await new BN(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=10*60*1e3;class QN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Cb(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(dr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KN&&this.cachedEventUids.clear(),this.cachedEventUids.has(E0(e))}saveEventToCache(e){this.cachedEventUids.add(E0(e)),this.lastProcessedEventTime=Date.now()}}function E0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Cb({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cb(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(n,e={}){return ws(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZN=/^https?/;async function e2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await XN(n);for(const t of e)try{if(t2(t))return}catch{}qn(n,"unauthorized-domain")}function t2(n){const e=Jm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!ZN.test(t))return!1;if(JN.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new uc(3e4,6e4);function T0(){const n=Rr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function r2(n){return new Promise((e,t)=>{var r,s,o;function l(){T0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T0(),t(dr(n,"network-request-failed"))},timeout:n2.get()})}if(!((s=(r=Rr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Rr().gapi)===null||o===void 0)&&o.load)l();else{const c=KR("iframefcb");return Rr()[c]=()=>{gapi.load?l():t(dr(n,"network-request-failed"))},pb(`${GR()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw ch=null,e})}let ch=null;function s2(n){return ch=ch||r2(n),ch}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=new uc(5e3,15e3),o2="__/auth/iframe",a2="emulator/auth/iframe",l2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c2(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zg(e,a2):`https://${n.config.authDomain}/${o2}`,r={apiKey:e.apiKey,appName:n.name,v:yo},s=u2.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${lc(r).slice(1)}`}async function d2(n){const e=await s2(n),t=Rr().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:c2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l2,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=dr(n,"network-request-failed"),c=Rr().setTimeout(()=>{o(l)},i2.get());function d(){Rr().clearTimeout(c),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f2=500,p2=600,m2="_blank",g2="http://localhost";class b0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function y2(n,e,t,r=f2,s=p2){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},h2),{width:r.toString(),height:s.toString(),top:o,left:l}),f=rn().toLowerCase();t&&(c=ab(f)?m2:t),ib(f)&&(e=e||g2,d.scrollbars="yes");const m=Object.entries(d).reduce((x,[b,k])=>`${x}${b}=${k},`,"");if(LR(f)&&c!=="_self")return v2(e||"",c),new b0(null);const v=window.open(e||"",c,m);Ee(v,n,"popup-blocked");try{v.focus()}catch{}return new b0(v)}function v2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="__/auth/handler",w2="emulator/auth/handler",x2=encodeURIComponent("fac");async function S0(n,e,t,r,s,o){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:yo,eventId:s};if(e instanceof sy){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",aC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,v]of Object.entries({}))l[m]=v}if(e instanceof dc){const m=e.getScopes().filter(v=>v!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await n._getAppCheckToken(),f=d?`#${x2}=${encodeURIComponent(d)}`:"";return`${E2(n)}?${lc(c).slice(1)}${f}`}function E2({config:n}){return n.emulator?Zg(n,w2):`https://${n.authDomain}/${_2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="webStorageSupport";class T2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Eb,this._completeRedirectFn=GN,this._overrideRedirectResult=qN}async _openPopup(e,t,r,s){var o;ms((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await S0(e,t,r,Jm(),s);return y2(e,l,iy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await S0(e,t,r,Jm(),s);return PN(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(ms(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await d2(e),r=new QN(e);return t.register("authEvent",s=>(Ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pm,{type:pm},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[pm];l!==void 0&&t(!!l),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=e2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hb()||ob()||ty()}}const b2=T2;var I0="@firebase/auth",P0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P2(n){co(new li("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ee(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fb(n)},f=new qR(r,s,o,d);return ZR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),co(new li("auth-internal",e=>{const t=yi(e.getProvider("auth").getImmediate());return(r=>new S2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(I0,P0,I2(n)),Cr(I0,P0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=5*60,A2=qT("authIdTokenMaxAge")||k2;let k0=null;const C2=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>A2)return;const s=t==null?void 0:t.token;k0!==s&&(k0=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function R2(n=Qg()){const e=Jh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=JR(n,{popupRedirectResolver:b2,persistence:[MN,bN,Eb]}),r=qT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=C2(o.toString());wN(t,l,()=>l(t.currentUser)),_N(t,c=>l(c))}}const s=$T("auth");return s&&eN(t,`http://${s}`),t}function N2(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}WR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=dr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",N2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P2("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function D2(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{f(r.next(m))}catch(v){l(v)}}function d(m){try{f(r.throw(m))}catch(v){l(v)}}function f(m){m.done?o(m.value):s(m.value).then(c,d)}f((r=r.apply(n,[])).next())})}function j2(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(m){return d([f,m])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,s=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(m){f=[6,m],s=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ca=function(){return Ca=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ca.apply(this,arguments)},Rb=function(n){return{loading:n==null,value:n}},O2=function(){return function(n,e){switch(e.type){case"error":return Ca(Ca({},n),{error:e.error,loading:!1,value:void 0});case"reset":return Rb(e.defaultValue);case"value":return Ca(Ca({},n),{error:void 0,loading:!1,value:e.value});default:return n}}},M2=function(n){var e=n?n():void 0,t=L.useReducer(O2(),Rb(e)),r=t[0],s=t[1],o=L.useCallback(function(){var d=n?n():void 0;s({type:"reset",defaultValue:d})},[n]),l=L.useCallback(function(d){s({type:"error",error:d})},[]),c=L.useCallback(function(d){s({type:"value",value:d})},[]);return L.useMemo(function(){return{error:r.error,loading:r.loading,reset:o,setError:l,setValue:c,value:r.value}},[r.error,r.loading,o,l,c,r.value])},il=function(n,e){var t=M2(function(){return n.currentUser}),r=t.error,s=t.loading,o=t.setError,l=t.setValue,c=t.value;return L.useEffect(function(){var d=xN(n,function(f){return D2(void 0,void 0,void 0,function(){var m;return j2(this,function(v){switch(v.label){case 0:return[3,4];case 1:return v.trys.push([1,3,,4]),[4,e.onUserChanged(f)];case 2:return v.sent(),[3,4];case 3:return m=v.sent(),o(m),[3,4];case 4:return l(f),[2]}})})},o);return function(){d()}},[n]),[c,s,r]},V2="firebase",L2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(V2,L2,"app");var A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lo,Nb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function A(){}A.prototype=S.prototype,D.D=S.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(j,M,$){for(var N=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)N[Ke-2]=arguments[Ke];return S.prototype[M].apply(j,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,S,A){A||(A=0);var j=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)j[M]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(M=0;16>M;++M)j[M]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=D.g[0],A=D.g[1],M=D.g[2];var $=D.g[3],N=S+($^A&(M^$))+j[0]+3614090360&4294967295;S=A+(N<<7&4294967295|N>>>25),N=$+(M^S&(A^M))+j[1]+3905402710&4294967295,$=S+(N<<12&4294967295|N>>>20),N=M+(A^$&(S^A))+j[2]+606105819&4294967295,M=$+(N<<17&4294967295|N>>>15),N=A+(S^M&($^S))+j[3]+3250441966&4294967295,A=M+(N<<22&4294967295|N>>>10),N=S+($^A&(M^$))+j[4]+4118548399&4294967295,S=A+(N<<7&4294967295|N>>>25),N=$+(M^S&(A^M))+j[5]+1200080426&4294967295,$=S+(N<<12&4294967295|N>>>20),N=M+(A^$&(S^A))+j[6]+2821735955&4294967295,M=$+(N<<17&4294967295|N>>>15),N=A+(S^M&($^S))+j[7]+4249261313&4294967295,A=M+(N<<22&4294967295|N>>>10),N=S+($^A&(M^$))+j[8]+1770035416&4294967295,S=A+(N<<7&4294967295|N>>>25),N=$+(M^S&(A^M))+j[9]+2336552879&4294967295,$=S+(N<<12&4294967295|N>>>20),N=M+(A^$&(S^A))+j[10]+4294925233&4294967295,M=$+(N<<17&4294967295|N>>>15),N=A+(S^M&($^S))+j[11]+2304563134&4294967295,A=M+(N<<22&4294967295|N>>>10),N=S+($^A&(M^$))+j[12]+1804603682&4294967295,S=A+(N<<7&4294967295|N>>>25),N=$+(M^S&(A^M))+j[13]+4254626195&4294967295,$=S+(N<<12&4294967295|N>>>20),N=M+(A^$&(S^A))+j[14]+2792965006&4294967295,M=$+(N<<17&4294967295|N>>>15),N=A+(S^M&($^S))+j[15]+1236535329&4294967295,A=M+(N<<22&4294967295|N>>>10),N=S+(M^$&(A^M))+j[1]+4129170786&4294967295,S=A+(N<<5&4294967295|N>>>27),N=$+(A^M&(S^A))+j[6]+3225465664&4294967295,$=S+(N<<9&4294967295|N>>>23),N=M+(S^A&($^S))+j[11]+643717713&4294967295,M=$+(N<<14&4294967295|N>>>18),N=A+($^S&(M^$))+j[0]+3921069994&4294967295,A=M+(N<<20&4294967295|N>>>12),N=S+(M^$&(A^M))+j[5]+3593408605&4294967295,S=A+(N<<5&4294967295|N>>>27),N=$+(A^M&(S^A))+j[10]+38016083&4294967295,$=S+(N<<9&4294967295|N>>>23),N=M+(S^A&($^S))+j[15]+3634488961&4294967295,M=$+(N<<14&4294967295|N>>>18),N=A+($^S&(M^$))+j[4]+3889429448&4294967295,A=M+(N<<20&4294967295|N>>>12),N=S+(M^$&(A^M))+j[9]+568446438&4294967295,S=A+(N<<5&4294967295|N>>>27),N=$+(A^M&(S^A))+j[14]+3275163606&4294967295,$=S+(N<<9&4294967295|N>>>23),N=M+(S^A&($^S))+j[3]+4107603335&4294967295,M=$+(N<<14&4294967295|N>>>18),N=A+($^S&(M^$))+j[8]+1163531501&4294967295,A=M+(N<<20&4294967295|N>>>12),N=S+(M^$&(A^M))+j[13]+2850285829&4294967295,S=A+(N<<5&4294967295|N>>>27),N=$+(A^M&(S^A))+j[2]+4243563512&4294967295,$=S+(N<<9&4294967295|N>>>23),N=M+(S^A&($^S))+j[7]+1735328473&4294967295,M=$+(N<<14&4294967295|N>>>18),N=A+($^S&(M^$))+j[12]+2368359562&4294967295,A=M+(N<<20&4294967295|N>>>12),N=S+(A^M^$)+j[5]+4294588738&4294967295,S=A+(N<<4&4294967295|N>>>28),N=$+(S^A^M)+j[8]+2272392833&4294967295,$=S+(N<<11&4294967295|N>>>21),N=M+($^S^A)+j[11]+1839030562&4294967295,M=$+(N<<16&4294967295|N>>>16),N=A+(M^$^S)+j[14]+4259657740&4294967295,A=M+(N<<23&4294967295|N>>>9),N=S+(A^M^$)+j[1]+2763975236&4294967295,S=A+(N<<4&4294967295|N>>>28),N=$+(S^A^M)+j[4]+1272893353&4294967295,$=S+(N<<11&4294967295|N>>>21),N=M+($^S^A)+j[7]+4139469664&4294967295,M=$+(N<<16&4294967295|N>>>16),N=A+(M^$^S)+j[10]+3200236656&4294967295,A=M+(N<<23&4294967295|N>>>9),N=S+(A^M^$)+j[13]+681279174&4294967295,S=A+(N<<4&4294967295|N>>>28),N=$+(S^A^M)+j[0]+3936430074&4294967295,$=S+(N<<11&4294967295|N>>>21),N=M+($^S^A)+j[3]+3572445317&4294967295,M=$+(N<<16&4294967295|N>>>16),N=A+(M^$^S)+j[6]+76029189&4294967295,A=M+(N<<23&4294967295|N>>>9),N=S+(A^M^$)+j[9]+3654602809&4294967295,S=A+(N<<4&4294967295|N>>>28),N=$+(S^A^M)+j[12]+3873151461&4294967295,$=S+(N<<11&4294967295|N>>>21),N=M+($^S^A)+j[15]+530742520&4294967295,M=$+(N<<16&4294967295|N>>>16),N=A+(M^$^S)+j[2]+3299628645&4294967295,A=M+(N<<23&4294967295|N>>>9),N=S+(M^(A|~$))+j[0]+4096336452&4294967295,S=A+(N<<6&4294967295|N>>>26),N=$+(A^(S|~M))+j[7]+1126891415&4294967295,$=S+(N<<10&4294967295|N>>>22),N=M+(S^($|~A))+j[14]+2878612391&4294967295,M=$+(N<<15&4294967295|N>>>17),N=A+($^(M|~S))+j[5]+4237533241&4294967295,A=M+(N<<21&4294967295|N>>>11),N=S+(M^(A|~$))+j[12]+1700485571&4294967295,S=A+(N<<6&4294967295|N>>>26),N=$+(A^(S|~M))+j[3]+2399980690&4294967295,$=S+(N<<10&4294967295|N>>>22),N=M+(S^($|~A))+j[10]+4293915773&4294967295,M=$+(N<<15&4294967295|N>>>17),N=A+($^(M|~S))+j[1]+2240044497&4294967295,A=M+(N<<21&4294967295|N>>>11),N=S+(M^(A|~$))+j[8]+1873313359&4294967295,S=A+(N<<6&4294967295|N>>>26),N=$+(A^(S|~M))+j[15]+4264355552&4294967295,$=S+(N<<10&4294967295|N>>>22),N=M+(S^($|~A))+j[6]+2734768916&4294967295,M=$+(N<<15&4294967295|N>>>17),N=A+($^(M|~S))+j[13]+1309151649&4294967295,A=M+(N<<21&4294967295|N>>>11),N=S+(M^(A|~$))+j[4]+4149444226&4294967295,S=A+(N<<6&4294967295|N>>>26),N=$+(A^(S|~M))+j[11]+3174756917&4294967295,$=S+(N<<10&4294967295|N>>>22),N=M+(S^($|~A))+j[2]+718787259&4294967295,M=$+(N<<15&4294967295|N>>>17),N=A+($^(M|~S))+j[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+$&4294967295}r.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var A=S-this.blockSize,j=this.B,M=this.h,$=0;$<S;){if(M==0)for(;$<=A;)s(this,D,$),$+=this.blockSize;if(typeof D=="string"){for(;$<S;)if(j[M++]=D.charCodeAt($++),M==this.blockSize){s(this,j),M=0;break}}else for(;$<S;)if(j[M++]=D[$++],M==this.blockSize){s(this,j),M=0;break}}this.h=M,this.o+=S},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var A=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=A&255,A/=256;for(this.u(D),D=Array(16),S=A=0;4>S;++S)for(var j=0;32>j;j+=8)D[A++]=this.g[S]>>>j&255;return D};function o(D,S){var A=c;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=S(D)}function l(D,S){this.h=S;for(var A=[],j=!0,M=D.length-1;0<=M;M--){var $=D[M]|0;j&&$==S||(A[M]=$,j=!1)}this.g=A}var c={};function d(D){return-128<=D&&128>D?o(D,function(S){return new l([S|0],0>S?-1:0)}):new l([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return v;if(0>D)return P(f(-D));for(var S=[],A=1,j=0;D>=A;j++)S[j]=D/A|0,A*=4294967296;return new l(S,0)}function m(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return P(m(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(S,8)),j=v,M=0;M<D.length;M+=8){var $=Math.min(8,D.length-M),N=parseInt(D.substring(M,M+$),S);8>$?($=f(Math.pow(S,$)),j=j.j($).add(f(N))):(j=j.j(A),j=j.add(f(N)))}return j}var v=d(0),x=d(1),b=d(16777216);n=l.prototype,n.m=function(){if(C(this))return-P(this).m();for(var D=0,S=1,A=0;A<this.g.length;A++){var j=this.i(A);D+=(0<=j?j:4294967296+j)*S,S*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(C(this))return"-"+P(this).toString(D);for(var S=f(Math.pow(D,6)),A=this,j="";;){var M=X(A,S).g;A=U(A,M.j(S));var $=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=M,k(A))return $+j;for(;6>$.length;)$="0"+$;j=$+j}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function C(D){return D.h==-1}n.l=function(D){return D=U(this,D),C(D)?-1:k(D)?0:1};function P(D){for(var S=D.g.length,A=[],j=0;j<S;j++)A[j]=~D.g[j];return new l(A,~D.h).add(x)}n.abs=function(){return C(this)?P(this):this},n.add=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],j=0,M=0;M<=S;M++){var $=j+(this.i(M)&65535)+(D.i(M)&65535),N=($>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);j=N>>>16,$&=65535,N&=65535,A[M]=N<<16|$}return new l(A,A[A.length-1]&-2147483648?-1:0)};function U(D,S){return D.add(P(S))}n.j=function(D){if(k(this)||k(D))return v;if(C(this))return C(D)?P(this).j(P(D)):P(P(this).j(D));if(C(D))return P(this.j(P(D)));if(0>this.l(b)&&0>D.l(b))return f(this.m()*D.m());for(var S=this.g.length+D.g.length,A=[],j=0;j<2*S;j++)A[j]=0;for(j=0;j<this.g.length;j++)for(var M=0;M<D.g.length;M++){var $=this.i(j)>>>16,N=this.i(j)&65535,Ke=D.i(M)>>>16,_t=D.i(M)&65535;A[2*j+2*M]+=N*_t,H(A,2*j+2*M),A[2*j+2*M+1]+=$*_t,H(A,2*j+2*M+1),A[2*j+2*M+1]+=N*Ke,H(A,2*j+2*M+1),A[2*j+2*M+2]+=$*Ke,H(A,2*j+2*M+2)}for(j=0;j<S;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=S;j<2*S;j++)A[j]=0;return new l(A,0)};function H(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function z(D,S){this.g=D,this.h=S}function X(D,S){if(k(S))throw Error("division by zero");if(k(D))return new z(v,v);if(C(D))return S=X(P(D),S),new z(P(S.g),P(S.h));if(C(S))return S=X(D,P(S)),new z(P(S.g),S.h);if(30<D.g.length){if(C(D)||C(S))throw Error("slowDivide_ only works with positive integers.");for(var A=x,j=S;0>=j.l(D);)A=J(A),j=J(j);var M=ie(A,1),$=ie(j,1);for(j=ie(j,2),A=ie(A,2);!k(j);){var N=$.add(j);0>=N.l(D)&&(M=M.add(A),$=N),j=ie(j,1),A=ie(A,1)}return S=U(D,M.j(S)),new z(M,S)}for(M=v;0<=D.l(S);){for(A=Math.max(1,Math.floor(D.m()/S.m())),j=Math.ceil(Math.log(A)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),$=f(A),N=$.j(S);C(N)||0<N.l(D);)A-=j,$=f(A),N=$.j(S);k($)&&($=x),M=M.add($),D=U(D,N)}return new z(M,D)}n.A=function(D){return X(this,D).h},n.and=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],j=0;j<S;j++)A[j]=this.i(j)&D.i(j);return new l(A,this.h&D.h)},n.or=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],j=0;j<S;j++)A[j]=this.i(j)|D.i(j);return new l(A,this.h|D.h)},n.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],j=0;j<S;j++)A[j]=this.i(j)^D.i(j);return new l(A,this.h^D.h)};function J(D){for(var S=D.g.length+1,A=[],j=0;j<S;j++)A[j]=D.i(j)<<1|D.i(j-1)>>>31;return new l(A,D.h)}function ie(D,S){var A=S>>5;S%=32;for(var j=D.g.length-A,M=[],$=0;$<j;$++)M[$]=0<S?D.i($+A)>>>S|D.i($+A+1)<<32-S:D.i($+A);return new l(M,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Nb=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,lo=l}).apply(typeof A0<"u"?A0:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Db,vu,jb,dh,ng,Ob,Mb,Vb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(h,_){if(_)e:{var E=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var B=h[I];if(!(B in E))break e;E=E[B]}h=h[h.length-1],I=E[h],_=_(I),_!=I&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function o(h,_){h instanceof String&&(h+="");var E=0,I=!1,B={next:function(){if(!I&&E<h.length){var Q=E++;return{value:_(Q,h[Q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}s("Array.prototype.values",function(h){return h||function(){return o(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),h.apply(_,B)}}return function(){return h.apply(_,arguments)}}function x(h,_,E){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,x.apply(null,arguments)}function b(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function k(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(I,B,Q){for(var le=Array(arguments.length-2),We=2;We<arguments.length;We++)le[We-2]=arguments[We];return _.prototype[B].apply(I,le)}}function C(h){const _=h.length;if(0<_){const E=Array(_);for(let I=0;I<_;I++)E[I]=h[I];return E}return[]}function P(h,_){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(d(I)){const B=h.length||0,Q=I.length||0;h.length=B+Q;for(let le=0;le<Q;le++)h[B+le]=I[le]}else h.push(I)}}class U{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function H(h){return/^[\s\xa0]*$/.test(h)}function z(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function X(h){return X[" "](h),h}X[" "]=function(){};var J=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ie(h,_,E){for(const I in h)_.call(E,h[I],I,h)}function D(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function S(h){const _={};for(const E in h)_[E]=h[E];return _}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,_){let E,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(E in I)h[E]=I[E];for(let Q=0;Q<A.length;Q++)E=A[Q],Object.prototype.hasOwnProperty.call(I,E)&&(h[E]=I[E])}}function M(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function $(h){c.setTimeout(()=>{throw h},0)}function N(){var h=ue;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Ke{constructor(){this.h=this.g=null}add(_,E){const I=_t.get();I.set(_,E),this.h?this.h.next=I:this.g=I,this.h=I}}var _t=new U(()=>new wt,h=>h.reset());class wt{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,G=!1,ue=new Ke,ae=()=>{const h=c.Promise.resolve(void 0);Te=()=>{h.then(F)}};var F=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){$(E)}var _=_t;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}G=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,_),c.removeEventListener("test",E,_)}catch{}return h}();function Ce(h,_){if(ye.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(J){e:{try{X(_.nodeName);var B=!0;break e}catch{}B=!1}B||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ve[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ce.aa.h.call(this)}}k(Ce,ye);var Ve={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Ye(h,_,E,I,B){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!I,this.ha=B,this.key=++qe,this.da=this.fa=!1}function Rt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function $r(h){this.src=h,this.g={},this.h=0}$r.prototype.add=function(h,_,E,I,B){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var le=xs(h,_,I,B);return-1<le?(_=h[le],E||(_.fa=!1)):(_=new Ye(_,this.src,Q,!!I,B),_.fa=E,h.push(_)),_};function bo(h,_){var E=_.type;if(E in h.g){var I=h.g[E],B=Array.prototype.indexOf.call(I,_,void 0),Q;(Q=0<=B)&&Array.prototype.splice.call(I,B,1),Q&&(Rt(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function xs(h,_,E,I){for(var B=0;B<h.length;++B){var Q=h[B];if(!Q.da&&Q.listener==_&&Q.capture==!!E&&Q.ha==I)return B}return-1}var xi="closure_lm_"+(1e6*Math.random()|0),So={};function pl(h,_,E,I,B){if(Array.isArray(_)){for(var Q=0;Q<_.length;Q++)pl(h,_[Q],E,I,B);return null}return E=yl(E),h&&h[ze]?h.K(_,E,f(I)?!!I.capture:!1,B):ml(h,_,E,!1,I,B)}function ml(h,_,E,I,B,Q){if(!_)throw Error("Invalid event type");var le=f(B)?!!B.capture:!!B,We=Po(h);if(We||(h[xi]=We=new $r(h)),E=We.add(_,E,I,le,Q),E.proxy)return E;if(I=Pc(),E.proxy=I,I.src=h,I.listener=E,h.addEventListener)Ae||(B=le),B===void 0&&(B=!1),h.addEventListener(_.toString(),I,B);else if(h.attachEvent)h.attachEvent(zr(_.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Pc(){function h(E){return _.call(h.src,h.listener,E)}const _=gl;return h}function Io(h,_,E,I,B){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)Io(h,_[Q],E,I,B);else I=f(I)?!!I.capture:!!I,E=yl(E),h&&h[ze]?(h=h.i,_=String(_).toString(),_ in h.g&&(Q=h.g[_],E=xs(Q,E,I,B),-1<E&&(Rt(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete h.g[_],h.h--)))):h&&(h=Po(h))&&(_=h.g[_.toString()],h=-1,_&&(h=xs(_,E,I,B)),(E=-1<h?_[h]:null)&&Br(E))}function Br(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ze])bo(_.i,h);else{var E=h.type,I=h.proxy;_.removeEventListener?_.removeEventListener(E,I,h.capture):_.detachEvent?_.detachEvent(zr(E),I):_.addListener&&_.removeListener&&_.removeListener(I),(E=Po(_))?(bo(E,h),E.h==0&&(E.src=null,_[xi]=null)):Rt(h)}}}function zr(h){return h in So?So[h]:So[h]="on"+h}function gl(h,_){if(h.da)h=!0;else{_=new Ce(_,this);var E=h.listener,I=h.ha||h.src;h.fa&&Br(h),h=E.call(I,_)}return h}function Po(h){return h=h[xi],h instanceof $r?h:null}var ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function yl(h){return typeof h=="function"?h:(h[ko]||(h[ko]=function(_){return h.handleEvent(_)}),h[ko])}function St(){Z.call(this),this.i=new $r(this),this.M=this,this.F=null}k(St,Z),St.prototype[ze]=!0,St.prototype.removeEventListener=function(h,_,E,I){Io(this,h,_,E,I)};function It(h,_){var E,I=h.F;if(I)for(E=[];I;I=I.F)E.push(I);if(h=h.M,I=_.type||_,typeof _=="string")_=new ye(_,h);else if(_ instanceof ye)_.target=_.target||h;else{var B=_;_=new ye(I,h),j(_,B)}if(B=!0,E)for(var Q=E.length-1;0<=Q;Q--){var le=_.g=E[Q];B=qr(le,I,!0,_)&&B}if(le=_.g=h,B=qr(le,I,!0,_)&&B,B=qr(le,I,!1,_)&&B,E)for(Q=0;Q<E.length;Q++)le=_.g=E[Q],B=qr(le,I,!1,_)&&B}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],I=0;I<E.length;I++)Rt(E[I]);delete h.g[_],h.h--}}this.F=null},St.prototype.K=function(h,_,E,I){return this.i.add(String(h),_,!1,E,I)},St.prototype.L=function(h,_,E,I){return this.i.add(String(h),_,!0,E,I)};function qr(h,_,E,I){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var B=!0,Q=0;Q<_.length;++Q){var le=_[Q];if(le&&!le.da&&le.capture==E){var We=le.listener,Pt=le.ha||le.src;le.fa&&bo(h.i,le),B=We.call(Pt,I)!==!1&&B}}return B&&!I.defaultPrevented}function vl(h,_,E){if(typeof h=="function")E&&(h=x(h,E));else if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:c.setTimeout(h,_||0)}function Es(h){h.g=vl(()=>{h.g=null,h.i&&(h.i=!1,Es(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ei extends Z{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Es(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(h){Z.call(this),this.h=h,this.g={}}k(Ti,Z);var _l=[];function wl(h){ie(h.g,function(_,E){this.g.hasOwnProperty(E)&&Br(_)},h),h.g={}}Ti.prototype.N=function(){Ti.aa.N.call(this),wl(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xl=c.JSON.stringify,El=c.JSON.parse,Tl=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function bi(){}bi.prototype.h=null;function Ao(h){return h.h||(h.h=h.i())}function Co(){}var Nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mr(){ye.call(this,"d")}k(mr,ye);function Ro(){ye.call(this,"c")}k(Ro,ye);var gr={},bl=null;function Si(){return bl=bl||new St}gr.La="serverreachability";function Sl(h){ye.call(this,gr.La,h)}k(Sl,ye);function Wr(h){const _=Si();It(_,new Sl(_))}gr.STAT_EVENT="statevent";function Il(h,_){ye.call(this,gr.STAT_EVENT,h),this.stat=_}k(Il,ye);function ft(h){const _=Si();It(_,new Il(_,h))}gr.Ma="timingevent";function No(h,_){ye.call(this,gr.Ma,h),this.size=_}k(No,ye);function Wn(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Ii(){this.g=!0}Ii.prototype.xa=function(){this.g=!1};function Pi(h,_,E,I,B,Q){h.info(function(){if(h.g)if(Q)for(var le="",We=Q.split("&"),Pt=0;Pt<We.length;Pt++){var Le=We[Pt].split("=");if(1<Le.length){var Nt=Le[0];Le=Le[1];var xt=Nt.split("_");le=2<=xt.length&&xt[1]=="type"?le+(Nt+"="+Le+"&"):le+(Nt+"=redacted&")}}else le=null;else le=Q;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+_+`
`+E+`
`+le})}function Do(h,_,E,I,B,Q,le){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+_+`
`+E+`
`+Q+" "+le})}function Hn(h,_,E,I){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Cf(h,E)+(I?" "+I:"")})}function Pl(h,_){h.info(function(){return"TIMEOUT: "+_})}Ii.prototype.info=function(){};function Cf(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var I=E[h];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var Q=B[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var le=1;le<B.length;le++)B[le]=""}}}}return xl(E)}catch{return _}}var jo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gn;function ki(){}k(ki,bi),ki.prototype.g=function(){return new XMLHttpRequest},ki.prototype.i=function(){return{}},Gn=new ki;function Kn(h,_,E,I){this.j=h,this.i=_,this.l=E,this.R=I||1,this.U=new Ti(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ac}function Ac(){this.i=null,this.g="",this.h=!1}var kl={},Oo={};function Mo(h,_,E){h.L=1,h.v=Ps(xn(_)),h.m=E,h.P=!0,Al(h,null)}function Al(h,_){h.F=Date.now(),Xe(h),h.A=xn(h.v);var E=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),As(E.i,"t",I),h.C=0,E=h.j.J,h.h=new Ac,h.g=Gc(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Ei(x(h.Y,h,h.g),h.O)),_=h.U,E=h.g,I=h.ca;var B="readystatechange";Array.isArray(B)||(B&&(_l[0]=B.toString()),B=_l);for(var Q=0;Q<B.length;Q++){var le=pl(E,B[Q],I||_.handleEvent,!1,_.h||_);if(!le)break;_.g[le.key]=le}_=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Wr(),Pi(h.i,h.u,h.A,h.l,h.R,h.m)}Kn.prototype.ca=function(h){h=h.target;const _=this.M;_&&dn(h)==3?_.j():this.Y(h)},Kn.prototype.Y=function(h){try{if(h==this.g)e:{const xt=dn(this.g);var _=this.g.Ba();const On=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||Ol(this.g)))){this.J||xt!=4||_==7||(_==8||0>=On?Wr(3):Wr(2)),Ai(this);var E=this.g.Z();this.X=E;t:if(Cc(this)){var I=Ol(this.g);h="";var B=I.length,Q=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dn(this),Ts(this);var le="";break t}this.h.i=new c.TextDecoder}for(_=0;_<B;_++)this.h.h=!0,h+=this.h.i.decode(I[_],{stream:!(Q&&_==B-1)});I.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=E==200,Do(this.i,this.u,this.A,this.l,this.R,xt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Pt=this.g;if((We=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(We)){var Le=We;break t}}Le=null}if(E=Le)Hn(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cl(this,E);else{this.o=!1,this.s=3,ft(12),Dn(this),Ts(this);break e}}if(this.P){E=!0;let Tn;for(;!this.J&&this.C<le.length;)if(Tn=Rf(this,le),Tn==Oo){xt==4&&(this.s=4,ft(14),E=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==kl){this.s=4,ft(15),Hn(this.i,this.l,le,"[Invalid Chunk]"),E=!1;break}else Hn(this.i,this.l,Tn,null),Cl(this,Tn);if(Cc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||le.length!=0||this.h.h||(this.s=1,ft(16),E=!1),this.o=this.o&&E,!E)Hn(this.i,this.l,le,"[Invalid Chunked Response]"),Dn(this),Ts(this);else if(0<le.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Vl(Nt),Nt.M=!0,ft(11))}}else Hn(this.i,this.l,le,null),Cl(this,le);xt==4&&Dn(this),this.o&&!this.J&&(xt==4?Go(this.j,this):(this.o=!1,Xe(this)))}else Bo(this.g),E==400&&0<le.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Dn(this),Ts(this)}}}catch{}finally{}};function Cc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Rf(h,_){var E=h.C,I=_.indexOf(`
`,E);return I==-1?Oo:(E=Number(_.substring(E,I)),isNaN(E)?kl:(I+=1,I+E>_.length?Oo:(_=_.slice(I,I+E),h.C=I+E,_)))}Kn.prototype.cancel=function(){this.J=!0,Dn(this)};function Xe(h){h.S=Date.now()+h.I,Rc(h,h.I)}function Rc(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Wn(x(h.ba,h),_)}function Ai(h){h.B&&(c.clearTimeout(h.B),h.B=null)}Kn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Pl(this.i,this.A),this.L!=2&&(Wr(),ft(17)),Dn(this),this.s=2,Ts(this)):Rc(this,this.S-h)};function Ts(h){h.j.G==0||h.J||Go(h.j,h)}function Dn(h){Ai(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,wl(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Cl(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||sn(E.h,h))){if(!h.K&&sn(E.h,h)&&E.G==3){try{var I=E.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Ho(E),Zn(E);else break e;Wo(E),ft(18)}}else E.za=B[1],0<E.za-E.T&&37500>B[2]&&E.F&&E.v==0&&!E.C&&(E.C=Wn(x(E.Za,E),6e3));if(1>=Dc(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Yr(E,11)}else if((h.K||E.g==h)&&Ho(E),!H(_))for(B=E.Da.g.parse(_),_=0;_<B.length;_++){let Le=B[_];if(E.T=Le[0],Le=Le[1],E.G==2)if(Le[0]=="c"){E.K=Le[1],E.ia=Le[2];const Nt=Le[3];Nt!=null&&(E.la=Nt,E.j.info("VER="+E.la));const xt=Le[4];xt!=null&&(E.Aa=xt,E.j.info("SVER="+E.Aa));const On=Le[5];On!=null&&typeof On=="number"&&0<On&&(I=1.5*On,E.L=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const Tn=h.g;if(Tn){const Mi=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mi){var Q=I.h;Q.g||Mi.indexOf("spdy")==-1&&Mi.indexOf("quic")==-1&&Mi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Rl(Q,Q.h),Q.h=null))}if(I.D){const Qo=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(I.ya=Qo,Qe(I.I,I.D,Qo))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),I=E;var le=h;if(I.qa=Hc(I,I.J?I.ia:null,I.W),le.K){jc(I.h,le);var We=le,Pt=I.L;Pt&&(We.I=Pt),We.B&&(Ai(We),Xe(We)),I.g=le}else Oi(I);0<E.i.length&&wr(E)}else Le[0]!="stop"&&Le[0]!="close"||Yr(E,7);else E.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Yr(E,7):Ft(E):Le[0]!="noop"&&E.l&&E.l.ta(Le),E.v=0)}}Wr(4)}catch{}}var Nc=class{constructor(h,_){this.g=h,this.map=_}};function Ci(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Dc(h){return h.h?1:h.g?h.g.size:0}function sn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Rl(h,_){h.g?h.g.add(_):h.h=_}function jc(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ci.prototype.cancel=function(){if(this.i=Oc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Oc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return C(h.i)}function Vo(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var _=[],E=h.length,I=0;I<E;I++)_.push(h[I]);return _}_=[],E=0;for(I in h)_[E++]=h[I];return _}function Lo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const I in h)_[E++]=I;return _}}}function bs(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=Lo(h),I=Vo(h),B=I.length,Q=0;Q<B;Q++)_.call(void 0,I[Q],E&&E[Q],h)}var Ri=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nf(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var I=h[E].indexOf("="),B=null;if(0<=I){var Q=h[E].substring(0,I);B=h[E].substring(I+1)}else Q=h[E];_(Q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Hr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Hr){this.h=h.h,Ni(this,h.j),this.o=h.o,this.g=h.g,Ss(this,h.s),this.l=h.l;var _=h.i,E=new yr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Is(this,E),this.m=h.m}else h&&(_=String(h).match(Ri))?(this.h=!1,Ni(this,_[1]||"",!0),this.o=je(_[2]||""),this.g=je(_[3]||"",!0),Ss(this,_[4]),this.l=je(_[5]||"",!0),Is(this,_[6]||"",!0),this.m=je(_[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}Hr.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ks(_,Uo,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ks(_,Uo,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(ks(E,E.charAt(0)=="/"?Lc:Vc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",ks(E,Nl)),h.join("")};function xn(h){return new Hr(h)}function Ni(h,_,E){h.j=E?je(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Ss(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Is(h,_,E){_ instanceof yr?(h.i=_,vr(h.i,h.h)):(E||(_=ks(_,Uc)),h.i=new yr(_,h.h))}function Qe(h,_,E){h.i.set(_,E)}function Ps(h){return Qe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function je(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ks(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,Mc),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Mc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Uo=/[#\/\?@]/g,Vc=/[#\?:]/g,Lc=/[#\?]/g,Uc=/[#\?@]/g,Nl=/#/g;function yr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Ut(h){h.g||(h.g=new Map,h.h=0,h.i&&Nf(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=yr.prototype,n.add=function(h,_){Ut(this),this.i=null,h=jn(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function Qn(h,_){Ut(h),_=jn(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Yn(h,_){return Ut(h),_=jn(h,_),h.g.has(_)}n.forEach=function(h,_){Ut(this),this.g.forEach(function(E,I){E.forEach(function(B){h.call(_,B,I,this)},this)},this)},n.na=function(){Ut(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let I=0;I<_.length;I++){const B=h[I];for(let Q=0;Q<B.length;Q++)E.push(_[I])}return E},n.V=function(h){Ut(this);let _=[];if(typeof h=="string")Yn(this,h)&&(_=_.concat(this.g.get(jn(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Ut(this),this.i=null,h=jn(this,h),Yn(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function As(h,_,E){Qn(h,_),0<E.length&&(h.i=null,h.g.set(jn(h,_),C(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var I=_[E];const Q=encodeURIComponent(String(I)),le=this.V(I);for(I=0;I<le.length;I++){var B=Q;le[I]!==""&&(B+="="+encodeURIComponent(String(le[I]))),h.push(B)}}return this.i=h.join("&")};function jn(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function vr(h,_){_&&!h.j&&(Ut(h),h.i=null,h.g.forEach(function(E,I){var B=I.toLowerCase();I!=B&&(Qn(this,I),As(this,B,E))},h)),h.j=_}function Df(h,_){const E=new Ii;if(c.Image){const I=new Image;I.onload=b(cn,E,"TestLoadImage: loaded",!0,_,I),I.onerror=b(cn,E,"TestLoadImage: error",!1,_,I),I.onabort=b(cn,E,"TestLoadImage: abort",!1,_,I),I.ontimeout=b(cn,E,"TestLoadImage: timeout",!1,_,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else _(!1)}function Fc(h,_){const E=new Ii,I=new AbortController,B=setTimeout(()=>{I.abort(),cn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:I.signal}).then(Q=>{clearTimeout(B),Q.ok?cn(E,"TestPingServer: ok",!0,_):cn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(B),cn(E,"TestPingServer: error",!1,_)})}function cn(h,_,E,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(E)}catch{}}function jf(){this.g=new Tl}function $c(h,_,E){const I=E||"";try{bs(h,function(B,Q){let le=B;f(B)&&(le=xl(B)),_.push(I+Q+"="+encodeURIComponent(le))})}catch(B){throw _.push(I+"type="+encodeURIComponent("_badmap")),B}}function Gr(h){this.l=h.Ub||null,this.j=h.eb||!1}k(Gr,bi),Gr.prototype.g=function(){return new Di(this.l,this.j)},Gr.prototype.i=function(h){return function(){return h}}({});function Di(h,_){St.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Di,St),n=Di.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Jn(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||c).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xn(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Xn(this):Jn(this),this.readyState==3&&Bc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Xn(this))},n.Qa=function(h){this.g&&(this.response=h,Xn(this))},n.ga=function(){this.g&&Xn(this)};function Xn(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Jn(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function Jn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Kr(h){let _="";return ie(h,function(E,I){_+=I,_+=":",_+=E,_+=`\r
`}),_}function Cs(h,_,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=Kr(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):Qe(h,_,E))}function it(h){St.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(it,St);var Of=/^https?$/i,Dl=["POST","PUT"];n=it.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gn.g(),this.v=this.o?Ao(this.o):Ao(Gn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Q){ji(this,Q);return}if(h=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)E.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Q of I.keys())E.set(Q,I.get(Q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Dl,_,void 0))||I||B||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of E)this.g.setRequestHeader(Q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$o(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){ji(this,Q)}};function ji(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Fo(h),En(h)}function Fo(h){h.A||(h.A=!0,It(h,"complete"),It(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,It(this,"complete"),It(this,"abort"),En(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),En(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jl(this):this.bb())},n.bb=function(){jl(this)};function jl(h){if(h.h&&typeof l<"u"&&(!h.v[1]||dn(h)!=4||h.Z()!=2)){if(h.u&&dn(h)==4)vl(h.Ea,0,h);else if(It(h,"readystatechange"),dn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var I;if(I=le===0){var B=String(h.D).match(Ri)[1]||null;!B&&c.self&&c.self.location&&(B=c.self.location.protocol.slice(0,-1)),I=!Of.test(B?B.toLowerCase():"")}E=I}if(E)It(h,"complete"),It(h,"success");else{h.m=6;try{var Q=2<dn(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",Fo(h)}}finally{En(h)}}}}function En(h,_){if(h.g){$o(h);const E=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||It(h,"ready");try{E.onreadystatechange=I}catch{}}}function $o(h){h.I&&(c.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function dn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),El(_)}};function Ol(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bo(h){const _={};h=(h.g&&2<=dn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(H(h[I]))continue;var E=M(h[I]);const B=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=_[B]||[];_[B]=Q,Q.push(E)}D(_,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _r(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Ml(h){this.Aa=0,this.i=[],this.j=new Ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_r("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_r("baseRetryDelayMs",5e3,h),this.cb=_r("retryDelaySeedMs",1e4,h),this.Wa=_r("forwardChannelMaxRetries",2,h),this.wa=_r("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ci(h&&h.concurrentRequestLimit),this.Da=new jf,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ml.prototype,n.la=8,n.G=1,n.connect=function(h,_,E,I){ft(0),this.W=h,this.H=_||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=Hc(this,null,this.W),wr(this)};function Ft(h){if(zo(h),h.G==3){var _=h.U++,E=xn(h.I);if(Qe(E,"SID",h.K),Qe(E,"RID",_),Qe(E,"TYPE","terminate"),Qr(h,E),_=new Kn(h,h.j,_),_.L=2,_.v=Ps(xn(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=_.v,E=!0),E||(_.g=Gc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Xe(_)}Wc(h)}function Zn(h){h.g&&(Vl(h),h.g.cancel(),h.g=null)}function zo(h){Zn(h),h.u&&(c.clearTimeout(h.u),h.u=null),Ho(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function wr(h){if(!wn(h.h)&&!h.s){h.s=!0;var _=h.Ga;Te||ae(),G||(Te(),G=!0),ue.add(_,h),h.B=0}}function Mf(h,_){return Dc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Wn(x(h.Ga,h,_),qc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new Kn(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=S(Q),j(Q,this.S)):Q=this.S),this.m!==null||this.O||(B.H=Q,Q=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Rs(this,B,_),E=xn(this.I),Qe(E,"RID",h),Qe(E,"CVER",22),this.D&&Qe(E,"X-HTTP-Session-Id",this.D),Qr(this,E),Q&&(this.O?_="headers="+encodeURIComponent(String(Kr(Q)))+"&"+_:this.m&&Cs(E,this.m,Q)),Rl(this.h,B),this.Ua&&Qe(E,"TYPE","init"),this.P?(Qe(E,"$req",_),Qe(E,"SID","null"),B.T=!0,Mo(B,E,null)):Mo(B,E,_),this.G=2}}else this.G==3&&(h?qo(this,h):this.i.length==0||wn(this.h)||qo(this))};function qo(h,_){var E;_?E=_.l:E=h.U++;const I=xn(h.I);Qe(I,"SID",h.K),Qe(I,"RID",E),Qe(I,"AID",h.T),Qr(h,I),h.m&&h.o&&Cs(I,h.m,h.o),E=new Kn(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Rs(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Rl(h.h,E),Mo(E,I,_)}function Qr(h,_){h.H&&ie(h.H,function(E,I){Qe(_,I,E)}),h.l&&bs({},function(E,I){Qe(_,I,E)})}function Rs(h,_,E){E=Math.min(h.i.length,E);var I=h.l?x(h.l.Na,h.l,h):null;e:{var B=h.i;let Q=-1;for(;;){const le=["count="+E];Q==-1?0<E?(Q=B[0].g,le.push("ofs="+Q)):Q=0:le.push("ofs="+Q);let We=!0;for(let Pt=0;Pt<E;Pt++){let Le=B[Pt].g;const Nt=B[Pt].map;if(Le-=Q,0>Le)Q=Math.max(0,B[Pt].g-100),We=!1;else try{$c(Nt,le,"req"+Le+"_")}catch{I&&I(Nt)}}if(We){I=le.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,I}function Oi(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Te||ae(),G||(Te(),G=!0),ue.add(_,h),h.v=0}}function Wo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Wn(x(h.Fa,h),qc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,zc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Wn(x(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Zn(this),zc(this))};function Vl(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function zc(h){h.g=new Kn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=xn(h.qa);Qe(_,"RID","rpc"),Qe(_,"SID",h.K),Qe(_,"AID",h.T),Qe(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Qe(_,"TO",h.ja),Qe(_,"TYPE","xmlhttp"),Qr(h,_),h.m&&h.o&&Cs(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Ps(xn(_)),E.m=null,E.P=!0,Al(E,h)}n.Za=function(){this.C!=null&&(this.C=null,Zn(this),Wo(this),ft(19))};function Ho(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Go(h,_){var E=null;if(h.g==_){Ho(h),Vl(h),h.g=null;var I=2}else if(sn(h.h,_))E=_.D,jc(h.h,_),I=1;else return;if(h.G!=0){if(_.o)if(I==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var B=h.B;I=Si(),It(I,new No(I,E)),wr(h)}else Oi(h);else if(B=_.s,B==3||B==0&&0<_.X||!(I==1&&Mf(h,_)||I==2&&Wo(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),B){case 1:Yr(h,5);break;case 4:Yr(h,10);break;case 3:Yr(h,6);break;default:Yr(h,2)}}}function qc(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Yr(h,_){if(h.j.info("Error code "+_),_==2){var E=x(h.fb,h),I=h.Xa;const B=!I;I=new Hr(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ni(I,"https"),Ps(I),B?Df(I.toString(),E):Fc(I.toString(),E)}else ft(2);h.G=0,h.l&&h.l.sa(_),Wc(h),zo(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Wc(h){if(h.G=0,h.ka=[],h.l){const _=Oc(h.h);(_.length!=0||h.i.length!=0)&&(P(h.ka,_),P(h.ka,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.ra()}}function Hc(h,_,E){var I=E instanceof Hr?xn(E):new Hr(E);if(I.g!="")_&&(I.g=_+"."+I.g),Ss(I,I.s);else{var B=c.location;I=B.protocol,_=_?_+"."+B.hostname:B.hostname,B=+B.port;var Q=new Hr(null);I&&Ni(Q,I),_&&(Q.g=_),B&&Ss(Q,B),E&&(Q.l=E),I=Q}return E=h.D,_=h.ya,E&&_&&Qe(I,E,_),Qe(I,"VER",h.la),Qr(h,I),I}function Gc(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new it(new Gr({eb:E})):new it(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ll(){}n=Ll.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ko(){}Ko.prototype.g=function(h,_){return new on(h,_)};function on(h,_){St.call(this),this.g=new Ml(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!H(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!H(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new xr(this)}k(on,St),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Ft(this.g)},on.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=xl(h),h=E);_.i.push(new Nc(_.Ya++,h)),_.G==3&&wr(_)},on.prototype.N=function(){this.g.l=null,delete this.j,Ft(this.g),delete this.g,on.aa.N.call(this)};function Kc(h){mr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}k(Kc,mr);function Qc(){Ro.call(this),this.status=1}k(Qc,Ro);function xr(h){this.g=h}k(xr,Ll),xr.prototype.ua=function(){It(this.g,"a")},xr.prototype.ta=function(h){It(this.g,new Kc(h))},xr.prototype.sa=function(h){It(this.g,new Qc)},xr.prototype.ra=function(){It(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,Vb=function(){return new Ko},Mb=function(){return Si()},Ob=gr,ng={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jo.NO_ERROR=0,jo.TIMEOUT=8,jo.HTTP_ERROR=6,dh=jo,kc.COMPLETE="complete",jb=kc,Co.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",St.prototype.listen=St.prototype.K,vu=Co,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,Db=it}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});const C0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Gg("@firebase/firestore");function uu(){return po.logLevel}function me(n,...e){if(po.logLevel<=Me.DEBUG){const t=e.map(ay);po.debug(`Firestore (${ol}): ${n}`,...t)}}function gs(n,...e){if(po.logLevel<=Me.ERROR){const t=e.map(ay);po.error(`Firestore (${ol}): ${n}`,...t)}}function za(n,...e){if(po.logLevel<=Me.WARN){const t=e.map(ay);po.warn(`Firestore (${ol}): ${n}`,...t)}}function ay(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n="Unexpected state"){const e=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: `+n;throw gs(e),new Error(e)}function Ge(n,e){n||Se()}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Fr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(en.UNAUTHENTICATED))}shutdown(){}}class F2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $2{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cs,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},c=d=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cs)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string"),new Lb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new en(e)}}class B2{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z2{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new B2(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ge(this.o===void 0);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge(typeof t.token=="string"),this.R=t.token,new q2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=H2(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%e.length))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function qa(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new vt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new vt(0,0))}static max(){return new Ie(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(),r===void 0?r=e.length-t:r>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return qu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=e.get(s),l=t.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nt extends qu{construct(e,t,r){return new nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new nt(t)}static emptyPath(){return new nt([])}}const G2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends qu{construct(e,t,r){return new Wt(e,t,r)}static isValidIdentifier(e){return G2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(nt.fromString(e))}static fromName(e){return new ve(nt.fromString(e).popFirst(5))}static empty(){return new ve(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new nt(e.slice()))}}function K2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(r===1e9?new vt(t+1,0):new vt(t,r));return new ui(s,ve.empty(),e)}function Q2(n){return new ui(n.readTime,n.key,-1)}class ui{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ui(Ie.min(),ve.empty(),-1)}static max(){return new ui(Ie.max(),ve.empty(),-1)}}function Y2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==X2)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&t()},d=>r(d))}),l=!0,o===s&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(s=>s?re.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new re((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next(m=>{l[f]=m,++c,c===o&&r(l)},m=>s(m))}})}static doWhile(e,t){return new re((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function Z2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ly.oe=-1;function nf(n){return n==null}function Ch(n){return n===0&&1/n==-1/0}function eD(n){return typeof n=="number"&&Number.isInteger(n)&&!Ch(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Fb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=o??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new qt(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,r,s,o){return this}insert(e,t,r){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new N0(this.data.getIterator())}getIteratorFrom(e){return new N0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class N0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new kn([])}unionWith(e){let t=new Ht(Wt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $b("Invalid base64 string: "+o):o}}(e);return new Gt(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const tD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ci(n){if(Ge(!!n),typeof n=="string"){let e=0;const t=tD.exec(n);if(Ge(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(n.seconds),nanos:gt(n.nanos)}}function gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mo(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function cy(n){const e=n.mapValue.fields.__previous_value__;return uy(e)?cy(e):e}function Wu(n){const e=ci(n.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t,r,s,o,l,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f}}class Hu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd={mapValue:{}};function go(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uy(n)?4:sD(n)?9007199254740991:rD(n)?10:11:Se()}function Vr(n,e){if(n===e)return!0;const t=go(n);if(t!==go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wu(n).isEqual(Wu(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ci(s.timestampValue),c=ci(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return mo(s.bytesValue).isEqual(mo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return gt(s.geoPointValue.latitude)===gt(o.geoPointValue.latitude)&&gt(s.geoPointValue.longitude)===gt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return gt(s.integerValue)===gt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=gt(s.doubleValue),c=gt(o.doubleValue);return l===c?Ch(l)===Ch(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(R0(l)!==R0(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!Vr(l[d],c[d])))return!1;return!0}(n,e);default:return Se()}}function Gu(n,e){return(n.values||[]).find(t=>Vr(t,e))!==void 0}function Wa(n,e){if(n===e)return 0;const t=go(n),r=go(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=gt(o.integerValue||o.doubleValue),d=gt(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return D0(n.timestampValue,e.timestampValue);case 4:return D0(Wu(n),Wu(e));case 5:return Be(n.stringValue,e.stringValue);case 6:return function(o,l){const c=mo(o),d=mo(l);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),d=l.split("/");for(let f=0;f<c.length&&f<d.length;f++){const m=Be(c[f],d[f]);if(m!==0)return m}return Be(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=Be(gt(o.latitude),gt(l.latitude));return c!==0?c:Be(gt(o.longitude),gt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return j0(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,d,f,m;const v=o.fields||{},x=l.fields||{},b=(c=v.value)===null||c===void 0?void 0:c.arrayValue,k=(d=x.value)===null||d===void 0?void 0:d.arrayValue,C=Be(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((m=k==null?void 0:k.values)===null||m===void 0?void 0:m.length)||0);return C!==0?C:j0(b,k)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===Hd.mapValue&&l===Hd.mapValue)return 0;if(o===Hd.mapValue)return 1;if(l===Hd.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=l.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let v=0;v<d.length&&v<m.length;++v){const x=Be(d[v],m[v]);if(x!==0)return x;const b=Wa(c[d[v]],f[m[v]]);if(b!==0)return b}return Be(d.length,m.length)}(n.mapValue,e.mapValue);default:throw Se()}}function D0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=ci(n),r=ci(e),s=Be(t.seconds,r.seconds);return s!==0?s:Be(t.nanos,r.nanos)}function j0(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Wa(t[s],r[s]);if(o)return o}return Be(t.length,r.length)}function Ha(n){return rg(n)}function rg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ci(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return mo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ve.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=rg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${rg(t.fields[l])}`;return s+"}"}(n.mapValue):Se()}function O0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sg(n){return!!n&&"integerValue"in n}function dy(n){return!!n&&"arrayValue"in n}function M0(n){return!!n&&"nullValue"in n}function V0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hh(n){return!!n&&"mapValue"in n}function rD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Pu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}setAll(e){let t=Wt.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=Pu(l):s.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];hh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){vo(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new _n(Pu(this.value))}}function Bb(n){const e=[];return vo(n.fields,(t,r)=>{const s=new Wt([t]);if(hh(r)){const o=Bb(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new tn(e,0,Ie.min(),Ie.min(),Ie.min(),_n.empty(),0)}static newFoundDocument(e,t,r,s){return new tn(e,1,t,Ie.min(),r,s,0)}static newNoDocument(e,t){return new tn(e,2,t,Ie.min(),Ie.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new tn(e,3,t,Ie.min(),Ie.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this.position=e,this.inclusive=t}}function L0(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=ve.comparator(ve.fromName(l.referenceValue),t.key):r=Wa(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function U0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function iD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{}class bt extends zb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new aD(e,t,r):t==="array-contains"?new cD(e,r):t==="in"?new dD(e,r):t==="not-in"?new hD(e,r):t==="array-contains-any"?new fD(e,r):new bt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lD(e,r):new uD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Wa(t,this.value)):t!==null&&go(this.value)===go(t)&&this.matchesComparison(Wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends zb{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new fr(e,t)}matches(e){return qb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qb(n){return n.op==="and"}function Wb(n){return oD(n)&&qb(n)}function oD(n){for(const e of n.filters)if(e instanceof fr)return!1;return!0}function ig(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+Ha(n.value);if(Wb(n))return n.filters.map(e=>ig(e)).join(",");{const e=n.filters.map(t=>ig(t)).join(",");return`${n.op}(${e})`}}function Hb(n,e){return n instanceof bt?function(r,s){return s instanceof bt&&r.op===s.op&&r.field.isEqual(s.field)&&Vr(r.value,s.value)}(n,e):n instanceof fr?function(r,s){return s instanceof fr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,c)=>o&&Hb(l,s.filters[c]),!0):!1}(n,e):void Se()}function Gb(n){return n instanceof bt?function(t){return`${t.field.canonicalString()} ${t.op} ${Ha(t.value)}`}(n):n instanceof fr?function(t){return t.op.toString()+" {"+t.getFilters().map(Gb).join(" ,")+"}"}(n):"Filter"}class aD extends bt{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class lD extends bt{constructor(e,t){super(e,"in",t),this.keys=Kb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class uD extends bt{constructor(e,t){super(e,"not-in",t),this.keys=Kb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Kb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ve.fromName(r.referenceValue))}class cD extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dy(t)&&Gu(t.arrayValue,this.value)}}class dD extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gu(this.value.arrayValue,t)}}class hD extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Gu(this.value.arrayValue,t)}}class fD extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.ue=null}}function F0(n,e=null,t=[],r=[],s=null,o=null,l=null){return new pD(n,e,t,r,s,o,l)}function hy(n){const e=Pe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ig(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ha(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ha(r)).join(",")),e.ue=t}return e.ue}function fy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!U0(n.startAt,e.startAt)&&U0(n.endAt,e.endAt)}function og(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mD(n,e,t,r,s,o,l,c){return new al(n,e,t,r,s,o,l,c)}function py(n){return new al(n)}function $0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Qb(n){return n.collectionGroup!==null}function ku(n){const e=Pe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ht(Wt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ku(o,r))}),t.has(Wt.keyField().canonicalString())||e.ce.push(new Ku(Wt.keyField(),r))}return e.ce}function Nr(n){const e=Pe(n);return e.le||(e.le=gD(e,ku(n))),e.le}function gD(n,e){if(n.limitType==="F")return F0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Ku(s.field,o)});const t=n.endAt?new Rh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rh(n.startAt.position,n.startAt.inclusive):null;return F0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ag(n,e){const t=n.filters.concat([e]);return new al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lg(n,e,t){return new al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rf(n,e){return fy(Nr(n),Nr(e))&&n.limitType===e.limitType}function Yb(n){return`${hy(Nr(n))}|lt:${n.limitType}`}function Sa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>Gb(s)).join(", ")}]`),nf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Ha(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Ha(s)).join(",")),`Target(${r})`}(Nr(n))}; limitType=${n.limitType})`}function sf(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ve.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of ku(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,c,d){const f=L0(l,c,d);return l.inclusive?f<=0:f<0}(r.startAt,ku(r),s)||r.endAt&&!function(l,c,d){const f=L0(l,c,d);return l.inclusive?f>=0:f>0}(r.endAt,ku(r),s))}(n,e)}function yD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Xb(n){return(e,t)=>{let r=!1;for(const s of ku(n)){const o=vD(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function vD(n,e,t){const r=n.field.isKeyField()?ve.comparator(e.key,t.key):function(o,l,c){const d=l.data.field(o),f=c.data.field(o);return d!==null&&f!==null?Wa(d,f):Se()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Fb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new ct(ve.comparator);function ys(){return _D}const Jb=new ct(ve.comparator);function _u(...n){let e=Jb;for(const t of n)e=e.insert(t.key,t);return e}function Zb(n){let e=Jb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function oo(){return Au()}function eS(){return Au()}function Au(){return new ll(n=>n.toString(),(n,e)=>n.isEqual(e))}const wD=new ct(ve.comparator),xD=new Ht(ve.comparator);function Ne(...n){let e=xD;for(const t of n)e=e.add(t);return e}const ED=new Ht(Be);function TD(){return ED}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function tS(n){return{integerValue:""+n}}function nS(n,e){return eD(e)?tS(e):my(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this._=void 0}}function bD(n,e,t){return n instanceof Qu?function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&uy(o)&&(o=cy(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Yu?sS(n,e):n instanceof Xu?iS(n,e):function(s,o){const l=rS(s,o),c=B0(l)+B0(s.Pe);return sg(l)&&sg(s.Pe)?tS(c):my(s.serializer,c)}(n,e)}function SD(n,e,t){return n instanceof Yu?sS(n,e):n instanceof Xu?iS(n,e):t}function rS(n,e){return n instanceof Ju?function(r){return sg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Qu extends of{}class Yu extends of{constructor(e){super(),this.elements=e}}function sS(n,e){const t=oS(e);for(const r of n.elements)t.some(s=>Vr(s,r))||t.push(r);return{arrayValue:{values:t}}}class Xu extends of{constructor(e){super(),this.elements=e}}function iS(n,e){let t=oS(e);for(const r of n.elements)t=t.filter(s=>!Vr(s,r));return{arrayValue:{values:t}}}class Ju extends of{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function B0(n){return gt(n.integerValue||n.doubleValue)}function oS(n){return dy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t){this.field=e,this.transform=t}}function ID(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Yu&&s instanceof Yu||r instanceof Xu&&s instanceof Xu?qa(r.elements,s.elements,Vr):r instanceof Ju&&s instanceof Ju?Vr(r.Pe,s.Pe):r instanceof Qu&&s instanceof Qu}(n.transform,e.transform)}class PD{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class af{}function lS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cS(n.key,hr.none()):new mc(n.key,n.data,hr.none());{const t=n.data,r=_n.empty();let s=new Ht(Wt.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new vi(n.key,r,new kn(s.toArray()),hr.none())}}function kD(n,e,t){n instanceof mc?function(s,o,l){const c=s.value.clone(),d=q0(s.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof vi?function(s,o,l){if(!fh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=q0(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(uS(s)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Cu(n,e,t,r){return n instanceof mc?function(o,l,c,d){if(!fh(o.precondition,l))return c;const f=o.value.clone(),m=W0(o.fieldTransforms,d,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof vi?function(o,l,c,d){if(!fh(o.precondition,l))return c;const f=W0(o.fieldTransforms,d,l),m=l.data;return m.setAll(uS(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,l,c){return fh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function AD(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=rS(r.transform,s||null);o!=null&&(t===null&&(t=_n.empty()),t.set(r.field,o))}return t||null}function z0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&qa(r,s,(o,l)=>ID(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class mc extends af{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class vi extends af{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function uS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function q0(n,e,t){const r=new Map;Ge(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,SD(l,c,t[s]))}return r}function W0(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,bD(o,l,e))}return r}class cS extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CD extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&kD(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eS();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const d=lS(l,c);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(t,r)=>z0(t,r))&&qa(this.baseMutations,e.baseMutations,(t,r)=>z0(t,r))}}class gy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ge(e.mutations.length===r.length);let s=function(){return wD}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new gy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Ue;function jD(n){switch(n){default:return Se();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function dS(n){if(n===void 0)return gs("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Tt.OK:return ee.OK;case Tt.CANCELLED:return ee.CANCELLED;case Tt.UNKNOWN:return ee.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return ee.INTERNAL;case Tt.UNAVAILABLE:return ee.UNAVAILABLE;case Tt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Tt.NOT_FOUND:return ee.NOT_FOUND;case Tt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Tt.ABORTED:return ee.ABORTED;case Tt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Tt.DATA_LOSS:return ee.DATA_LOSS;default:return Se()}}(Ue=Tt||(Tt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=new lo([4294967295,4294967295],0);function H0(n){const e=OD().encode(n),t=new Nb;return t.update(e),new Uint8Array(t.digest())}function G0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new lo([t,r],0),new lo([s,o],0)]}class yy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wu(`Invalid padding: ${t}`);if(r<0)throw new wu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=lo.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(lo.fromNumber(r)));return s.compare(MD)===1&&(s=new lo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=H0(e),[r,s]=G0(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);if(!this.de(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new yy(o,s,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Ie===0)return;const t=H0(e),[r,s]=G0(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,s,o);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,gc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lf(Ie.min(),s,new ct(Be),ys(),Ne())}}class gc{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gc(r,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class hS{constructor(e,t){this.targetId=e,this.me=t}}class fS{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class K0{constructor(){this.fe=0,this.ge=Y0(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ne(),t=Ne(),r=Ne();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Se()}}),new gc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Y0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VD{constructor(e){this.Le=e,this.Be=new Map,this.ke=ys(),this.qe=Q0(),this.Qe=new ct(Be)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Se()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.ze(s)&&t(s)})}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const o=s.target;if(og(o))if(r===0){const l=new ve(o.path);this.Ue(t,l,tn.newNoDocument(l,Ie.min()))}else Ge(r===1);else{const l=this.Ye(t);if(l!==r){const c=this.Ze(e),d=c?this.Xe(c,e,l):1;if(d!==0){this.je(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=mo(r).toUint8Array()}catch(d){if(d instanceof $b)return za("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new yy(l,s,o)}catch(d){return za(d instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const l=this.Le.tt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,o,null),s++)}),s}rt(e){const t=new Map;this.Be.forEach((o,l)=>{const c=this.Je(l);if(c){if(o.current&&og(c.target)){const d=new ve(c.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,tn.newNoDocument(d,e))}o.be&&(t.set(l,o.ve()),o.Ce())}});let r=Ne();this.qe.forEach((o,l)=>{let c=!0;l.forEachWhile(d=>{const f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const s=new lf(e,t,this.Qe,this.ke,r);return this.ke=ys(),this.qe=Q0(),this.Qe=new ct(Be),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new K0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ht(Be),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new K0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Q0(){return new ct(ve.comparator)}function Y0(){return new ct(ve.comparator)}const LD={asc:"ASCENDING",desc:"DESCENDING"},UD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FD={and:"AND",or:"OR"};class $D{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ug(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function Nh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function BD(n,e){return Nh(n,e.toTimestamp())}function Dr(n){return Ge(!!n),Ie.fromTimestamp(function(t){const r=ci(t);return new vt(r.seconds,r.nanos)}(n))}function vy(n,e){return cg(n,e).canonicalString()}function cg(n,e){const t=function(s){return new nt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function mS(n){const e=nt.fromString(n);return Ge(wS(e)),e}function dg(n,e){return vy(n.databaseId,e.path)}function mm(n,e){const t=mS(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(yS(t))}function gS(n,e){return vy(n.databaseId,e)}function zD(n){const e=mS(n);return e.length===4?nt.emptyPath():yS(e)}function hg(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yS(n){return Ge(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function X0(n,e,t){return{name:dg(n,e),fields:t.value.mapValue.fields}}function qD(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Ge(m===void 0||typeof m=="string"),Gt.fromBase64String(m||"")):(Ge(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Gt.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const m=f.code===void 0?ee.UNKNOWN:dS(f.code);return new de(m,f.message||"")}(l);t=new fS(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mm(n,r.document.name),o=Dr(r.document.updateTime),l=r.document.createTime?Dr(r.document.createTime):Ie.min(),c=new _n({mapValue:{fields:r.document.fields}}),d=tn.newFoundDocument(s,o,l,c),f=r.targetIds||[],m=r.removedTargetIds||[];t=new ph(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mm(n,r.document),o=r.readTime?Dr(r.readTime):Ie.min(),l=tn.newNoDocument(s,o),c=r.removedTargetIds||[];t=new ph([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mm(n,r.document),o=r.removedTargetIds||[];t=new ph([],o,s,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new DD(s,o),c=r.targetId;t=new hS(c,l)}}return t}function WD(n,e){let t;if(e instanceof mc)t={update:X0(n,e.key,e.value)};else if(e instanceof cS)t={delete:dg(n,e.key)};else if(e instanceof vi)t={update:X0(n,e.key,e.data),updateMask:ej(e.fieldMask)};else{if(!(e instanceof CD))return Se();t={verify:dg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Qu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ju)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw Se()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:BD(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se()}(n,e.precondition)),t}function HD(n,e){return n&&n.length>0?(Ge(e!==void 0),n.map(t=>function(s,o){let l=s.updateTime?Dr(s.updateTime):Dr(o);return l.isEqual(Ie.min())&&(l=Dr(o)),new PD(l,s.transformResults||[])}(t,e))):[]}function GD(n,e){return{documents:[gS(n,e.path)]}}function KD(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gS(n,s);const o=function(f){if(f.length!==0)return _S(fr.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(m=>function(x){return{field:Ia(x.field),direction:XD(x.dir)}}(m))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=ug(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:t,parent:s}}function QD(n){let e=zD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ge(r===1);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(v){const x=vS(v);return x instanceof fr&&Wb(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(x=>function(k){return new Ku(Pa(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(x))}(t.orderBy));let c=null;t.limit&&(c=function(v){let x;return x=typeof v=="object"?v.value:v,nf(x)?null:x}(t.limit));let d=null;t.startAt&&(d=function(v){const x=!!v.before,b=v.values||[];return new Rh(b,x)}(t.startAt));let f=null;return t.endAt&&(f=function(v){const x=!v.before,b=v.values||[];return new Rh(b,x)}(t.endAt)),mD(e,s,l,o,c,"F",d,f)}function YD(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Pa(t.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Pa(t.unaryFilter.field);return bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Pa(t.unaryFilter.field);return bt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Pa(t.unaryFilter.field);return bt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(n):n.fieldFilter!==void 0?function(t){return bt.create(Pa(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fr.create(t.compositeFilter.filters.map(r=>vS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se()}}(t.compositeFilter.op))}(n):Se()}function XD(n){return LD[n]}function JD(n){return UD[n]}function ZD(n){return FD[n]}function Ia(n){return{fieldPath:n.canonicalString()}}function Pa(n){return Wt.fromServerFormat(n.fieldPath)}function _S(n){return n instanceof bt?function(t){if(t.op==="=="){if(V0(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NAN"}};if(M0(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(V0(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NOT_NAN"}};if(M0(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ia(t.field),op:JD(t.op),value:t.value}}}(n):n instanceof fr?function(t){const r=t.getFilters().map(s=>_S(s));return r.length===1?r[0]:{compositeFilter:{op:ZD(t.op),filters:r}}}(n):Se()}function ej(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,t,r,s,o=Ie.min(),l=Ie.min(),c=Gt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.ct=e}}function nj(n){const e=QD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.un=new sj}addToCollectionParentIndex(e,t){return this.un.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ui.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ui.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class sj{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ht(nt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ht(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ga(0)}static kn(){return new Ga(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.changes=new ll(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Cu(r.mutation,s,kn.empty(),vt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ne()){const s=oo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let l=_u();return o.forEach((c,d)=>{l=l.insert(c,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=oo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ne()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,s){let o=ys();const l=Au(),c=function(){return Au()}();return t.forEach((d,f)=>{const m=r.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof vi)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),Cu(m.mutation,f,m.mutation.getFieldMask(),vt.now())):l.set(f.key,kn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,m)=>l.set(f,m)),t.forEach((f,m)=>{var v;return c.set(f,new oj(m,(v=l.get(f))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Au();let s=new ct((l,c)=>l-c),o=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(d=>{const f=t.get(d);if(f===null)return;let m=r.get(d)||kn.empty();m=c.applyToLocalView(f,m),r.set(d,m);const v=(s.get(c.batchId)||Ne()).add(d);s=s.insert(c.batchId,v)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,m=d.value,v=eS();m.forEach(x=>{if(!o.has(x)){const b=lS(t.get(x),r.get(x));b!==null&&v.set(x,b),o=o.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return ve.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):re.resolve(oo());let c=-1,d=o;return l.next(f=>re.forEach(f,(m,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(m)?re.resolve():this.remoteDocumentCache.getEntry(e,m).next(x=>{d=d.insert(m,x)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,Ne())).next(m=>({batchId:c,changes:Zb(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(r=>{let s=_u();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=_u();return this.indexManager.getCollectionParents(e,o).next(c=>re.forEach(c,d=>{const f=function(v,x){return new al(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(m=>{m.forEach((v,x)=>{l=l.insert(v,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(l=>{o.forEach((d,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,tn.newInvalidDocument(m)))});let c=_u();return l.forEach((d,f)=>{const m=o.get(d);m!==void 0&&Cu(m.mutation,f,kn.empty(),vt.now()),sf(t,f)&&(c=c.insert(d,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return re.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Dr(s.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(s){return{name:s.name,query:nj(s.bundledQuery),readTime:Dr(s.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this.overlays=new ct(ve.comparator),this.Ir=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=oo();return re.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.ht(e,t,o)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const s=oo(),o=t.length+1,l=new ve(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new ct((f,m)=>f-m);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=oo(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=oo(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=s)););return re.resolve(c)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ND(t,r));let o=this.Ir.get(t);o===void 0&&(o=Ne(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.Tr=new Ht(Lt.Er),this.dr=new Ht(Lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Lt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Lt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new ve(new nt([])),r=new Lt(t,e),s=new Lt(t,e+1),o=[];return this.dr.forEachInRange([r,s],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ve(new nt([])),r=new Lt(t,e),s=new Lt(t,e+1);let o=Ne();return this.dr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Lt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ve.comparator(e.key,t.key)||Be(e.wr,t.wr)}static Ar(e,t){return Be(e.wr,t.wr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ht(Lt.Er)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new RD(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.br=this.br.add(new Lt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,t){return re.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.vr(r),o=s<0?0:s;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Lt(t,0),s=new Lt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],l=>{const c=this.Dr(l.wr);o.push(c)}),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ht(Be);return t.forEach(s=>{const o=new Lt(s,0),l=new Lt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],c=>{r=r.add(c.wr)})}),re.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;ve.isDocumentKey(o)||(o=o.child(""));const l=new Lt(new ve(o),0);let c=new Ht(Be);return this.br.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(d.wr)),!0)},l),re.resolve(this.Cr(c))}Cr(e){const t=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ge(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return re.forEach(t.mutations,s=>{const o=new Lt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Lt(t,0),s=this.br.firstAfterOrEqual(r);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.Mr=e,this.docs=function(){return new ct(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(t))}getEntries(e,t){let r=ys();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():tn.newInvalidDocument(s))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=ys();const l=t.path,c=new ve(l.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||Y2(Q2(m),r)<=0||(s.has(m.key)||sf(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Se()}Or(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fj(this)}getSize(e){return re.resolve(this.size)}}class fj extends ij{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.persistence=e,this.Nr=new ll(t=>hy(t),fy),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _y,this.targetCount=0,this.kr=Ga.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,s)=>t(s)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),re.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ga(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Kn(t),re.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Nr.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),re.waitFor(o).next(()=>s)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),re.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ly(0),this.Kr=!1,this.Kr=!0,this.$r=new cj,this.referenceDelegate=e(this),this.Ur=new pj(this),this.indexManager=new rj,this.remoteDocumentCache=function(s){return new hj(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tj(t),this.Gr=new lj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new dj(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const s=new gj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,t){return re.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class gj extends J2{constructor(e){super(),this.currentSequenceNumber=e}}class wy{constructor(e){this.persistence=e,this.Jr=new _y,this.Yr=null}static Zr(e){return new wy(e)}get Xr(){if(this.Yr)return this.Yr;throw Se()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),re.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xr,r=>{const s=ve.fromPath(r);return this.ei(e,s).next(o=>{o||t.removeEntry(s,Ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return re.or([()=>re.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=s}static Wi(e,t){let r=Ne(),s=Ne();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new xy(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tC()?8:Z2(rn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.Yi(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,t,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new yj;return this.Xi(e,t,l).next(c=>{if(o.result=c,this.zi)return this.es(e,t,l,c.size)})}).next(()=>o.result)}es(e,t,r,s){return r.documentReadCount<this.ji?(uu()<=Me.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Sa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),re.resolve()):(uu()<=Me.DEBUG&&me("QueryEngine","Query:",Sa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(uu()<=Me.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Sa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(t))):re.resolve())}Yi(e,t){if($0(t))return re.resolve(null);let r=Nr(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=lg(t,null,"F"),r=Nr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ne(...o);return this.Ji.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.ts(t,c);return this.ns(t,f,l,d.readTime)?this.Yi(e,lg(t,null,"F")):this.rs(e,f,t,d)}))})))}Zi(e,t,r,s){return $0(t)||s.isEqual(Ie.min())?re.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const l=this.ts(t,o);return this.ns(t,l,r,s)?re.resolve(null):(uu()<=Me.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sa(t)),this.rs(e,l,t,K2(s,-1)).next(c=>c))})}ts(e,t){let r=new Ht(Xb(e));return t.forEach((s,o)=>{sf(e,o)&&(r=r.add(o))}),r}ns(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,t,r){return uu()<=Me.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Sa(t)),this.Ji.getDocumentsMatchingQuery(e,t,ui.min(),r)}rs(e,t,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,t,r,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new ct(Be),this._s=new ll(o=>hy(o),fy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function wj(n,e,t,r){return new _j(n,e,t,r)}async function xS(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let d=Ne();for(const f of s){l.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next(f=>({hs:f,removedBatchIds:l,addedBatchIds:c}))})})}function xj(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,m){const v=f.batch,x=v.keys();let b=re.resolve();return x.forEach(k=>{b=b.next(()=>m.getEntry(d,k)).next(C=>{const P=f.docVersions.get(k);Ge(P!==null),C.version.compareTo(P)<0&&(v.applyToRemoteDocument(C,f),C.isValidDocument()&&(C.setReadTime(f.commitVersion),m.addEntry(C)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(d,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Ne();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function ES(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Ej(n,e){const t=Pe(n),r=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const c=[];e.targetChanges.forEach((m,v)=>{const x=s.get(v);if(!x)return;c.push(t.Ur.removeMatchingKeys(o,m.removedDocuments,v).next(()=>t.Ur.addMatchingKeys(o,m.addedDocuments,v)));let b=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Gt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),s=s.insert(v,b),function(C,P,U){return C.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(x,b,m)&&c.push(t.Ur.updateTargetData(o,b))});let d=ys(),f=Ne();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(Tj(o,l,e.documentUpdates).next(m=>{d=m.Ps,f=m.Is})),!r.isEqual(Ie.min())){const m=t.Ur.getLastRemoteSnapshotVersion(o).next(v=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return re.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(t.os=s,o))}function Tj(n,e,t){let r=Ne(),s=Ne();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=ys();return t.forEach((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Ie.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):me("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{Ps:l,Is:s}})}function bj(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sj(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Ur.getTargetData(r,e).next(o=>o?(s=o,re.resolve(s)):t.Ur.allocateTargetId(r).next(l=>(s=new ri(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function fg(n,e,t){const r=Pe(n),s=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!pc(l))throw l;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function J0(n,e,t){const r=Pe(n);let s=Ie.min(),o=Ne();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,f,m){const v=Pe(d),x=v._s.get(m);return x!==void 0?re.resolve(v.os.get(x)):v.Ur.getTargetData(f,m)}(r,l,Nr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,c.targetId).next(d=>{o=d})}).next(()=>r.ss.getDocumentsMatchingQuery(l,e,t?s:Ie.min(),t?o:Ne())).next(c=>(Ij(r,yD(e),c),{documents:c,Ts:o})))}function Ij(n,e,t){let r=n.us.get(e)||Ie.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}class Z0{constructor(){this.activeTargetIds=TD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pj{constructor(){this.so=new Z0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Z0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd=null;function gm(){return Gd===null?Gd=function(){return 268435456+Math.round(2147483648*Math.random())}():Gd++,"0x"+Gd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class Rj extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(t,r,s,o,l){const c=gm(),d=this.xo(t,r.toUriEncodedString());me("RestConnection",`Sending RPC '${t}' ${c}:`,d,s);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,l),this.No(t,d,f,s).then(m=>(me("RestConnection",`Received RPC '${t}' ${c}: `,m),m),m=>{throw za("RestConnection",`RPC '${t}' ${c} failed with error: `,m,"url: ",d,"request:",s),m})}Lo(t,r,s,o,l,c){return this.Mo(t,r,s,o,l)}Oo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ol}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,l)=>t[l]=o),s&&s.headers.forEach((o,l)=>t[l]=o)}xo(t,r){const s=Aj[t];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,s){const o=gm();return new Promise((l,c)=>{const d=new Db;d.setWithCredentials(!0),d.listenOnce(jb.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case dh.NO_ERROR:const m=d.getResponseJson();me(Jt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case dh.TIMEOUT:me(Jt,`RPC '${e}' ${o} timed out`),c(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:const v=d.getStatus();if(me(Jt,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const b=x==null?void 0:x.error;if(b&&b.status&&b.message){const k=function(P){const U=P.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(U)>=0?U:ee.UNKNOWN}(b.status);c(new de(k,b.message))}else c(new de(ee.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new de(ee.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{me(Jt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);me(Jt,`RPC '${e}' ${o} sending request:`,s),d.send(t,"POST",f,r,15)})}Bo(e,t,r){const s=gm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Vb(),c=Mb(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=o.join("");me(Jt,`Creating RPC '${e}' stream ${s}: ${m}`,d);const v=l.createWebChannel(m,d);let x=!1,b=!1;const k=new Cj({Io:P=>{b?me(Jt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(x||(me(Jt,`Opening RPC '${e}' stream ${s} transport.`),v.open(),x=!0),me(Jt,`RPC '${e}' stream ${s} sending:`,P),v.send(P))},To:()=>v.close()}),C=(P,U,H)=>{P.listen(U,z=>{try{H(z)}catch(X){setTimeout(()=>{throw X},0)}})};return C(v,vu.EventType.OPEN,()=>{b||(me(Jt,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),C(v,vu.EventType.CLOSE,()=>{b||(b=!0,me(Jt,`RPC '${e}' stream ${s} transport closed`),k.So())}),C(v,vu.EventType.ERROR,P=>{b||(b=!0,za(Jt,`RPC '${e}' stream ${s} transport errored:`,P),k.So(new de(ee.UNAVAILABLE,"The operation could not be completed")))}),C(v,vu.EventType.MESSAGE,P=>{var U;if(!b){const H=P.data[0];Ge(!!H);const z=H,X=z.error||((U=z[0])===null||U===void 0?void 0:U.error);if(X){me(Jt,`RPC '${e}' stream ${s} received error:`,X);const J=X.status;let ie=function(A){const j=Tt[A];if(j!==void 0)return dS(j)}(J),D=X.message;ie===void 0&&(ie=ee.INTERNAL,D="Unknown error status: "+J+" with message "+X.message),b=!0,k.So(new de(ie,D)),v.close()}else me(Jt,`RPC '${e}' stream ${s} received:`,H),k.bo(H)}}),C(c,Ob.STAT_EVENT,P=>{P.stat===ng.PROXY?me(Jt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===ng.NOPROXY&&me(Jt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){return new $D(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,r=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-r);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,t,r,s,o,l,c,d){this.ui=e,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new TS(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(gs(t.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===t&&this.P_(r,s)},r=>{e(()=>{const s=new de(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Nj extends bS{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=qD(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ie.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ie.min():l.readTime?Dr(l.readTime):Ie.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=hg(this.serializer),t.addTarget=function(o,l){let c;const d=l.target;if(c=og(d)?{documents:GD(o,d)}:{query:KD(o,d)._t},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=pS(o,l.resumeToken);const f=ug(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(Ie.min())>0){c.readTime=Nh(o,l.snapshotVersion.toTimestamp());const f=ug(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=YD(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=hg(this.serializer),t.removeTarget=e,this.a_(t)}}class Dj extends bS{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=HD(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=hg(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>WD(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,cg(t,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(ee.UNKNOWN,o.toString())})}Lo(e,t,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Lo(e,cg(t,r),s,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ee.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Oj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gs(t),this.D_=!1):me("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{r.enqueueAndForget(async()=>{_o(this)&&(me("RemoteStore","Restarting streams for network reachability change."),await async function(d){const f=Pe(d);f.L_.add(4),await yc(f),f.q_.set("Unknown"),f.L_.delete(4),await cf(f)}(this))})}),this.q_=new Oj(r,s)}}async function cf(n){if(_o(n))for(const e of n.B_)await e(!0)}async function yc(n){for(const e of n.B_)await e(!1)}function SS(n,e){const t=Pe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Sy(t)?by(t):ul(t).r_()&&Ty(t,e))}function Ey(n,e){const t=Pe(n),r=ul(t);t.N_.delete(e),r.r_()&&IS(t,e),t.N_.size===0&&(r.r_()?r.o_():_o(t)&&t.q_.set("Unknown"))}function Ty(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ul(n).A_(e)}function IS(n,e){n.Q_.xe(e),ul(n).R_(e)}function by(n){n.Q_=new VD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ul(n).start(),n.q_.v_()}function Sy(n){return _o(n)&&!ul(n).n_()&&n.N_.size>0}function _o(n){return Pe(n).L_.size===0}function PS(n){n.Q_=void 0}async function Vj(n){n.q_.set("Online")}async function Lj(n){n.N_.forEach((e,t)=>{Ty(n,e)})}async function Uj(n,e){PS(n),Sy(n)?(n.q_.M_(e),by(n)):n.q_.set("Unknown")}async function Fj(n,e,t){if(n.q_.set("Online"),e instanceof fS&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const c of o.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.N_.delete(c),s.Q_.removeTarget(c))}(n,e)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dh(n,r)}else if(e instanceof ph?n.Q_.Ke(e):e instanceof hS?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ie.min()))try{const r=await ES(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.Q_.rt(l);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.N_.get(f);m&&o.N_.set(f,m.withResumeToken(d.resumeToken,l))}}),c.targetMismatches.forEach((d,f)=>{const m=o.N_.get(d);if(!m)return;o.N_.set(d,m.withResumeToken(Gt.EMPTY_BYTE_STRING,m.snapshotVersion)),IS(o,d);const v=new ri(m.target,d,f,m.sequenceNumber);Ty(o,v)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){me("RemoteStore","Failed to raise snapshot:",r),await Dh(n,r)}}async function Dh(n,e,t){if(!pc(e))throw e;n.L_.add(1),await yc(n),n.q_.set("Offline"),t||(t=()=>ES(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await cf(n)})}function kS(n,e){return e().catch(t=>Dh(n,t,e))}async function df(n){const e=Pe(n),t=di(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$j(e);)try{const s=await bj(e.localStore,r);if(s===null){e.O_.length===0&&t.o_();break}r=s.batchId,Bj(e,s)}catch(s){await Dh(e,s)}AS(e)&&CS(e)}function $j(n){return _o(n)&&n.O_.length<10}function Bj(n,e){n.O_.push(e);const t=di(n);t.r_()&&t.V_&&t.m_(e.mutations)}function AS(n){return _o(n)&&!di(n).n_()&&n.O_.length>0}function CS(n){di(n).start()}async function zj(n){di(n).p_()}async function qj(n){const e=di(n);for(const t of n.O_)e.m_(t.mutations)}async function Wj(n,e,t){const r=n.O_.shift(),s=gy.from(r,e,t);await kS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await df(n)}async function Hj(n,e){e&&di(n).V_&&await async function(r,s){if(function(l){return jD(l)&&l!==ee.ABORTED}(s.code)){const o=r.O_.shift();di(r).s_(),await kS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await df(r)}}(n,e),AS(n)&&CS(n)}async function tx(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=_o(t);t.L_.add(3),await yc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await cf(t)}async function Gj(n,e){const t=Pe(n);e?(t.L_.delete(2),await cf(t)):e||(t.L_.add(2),await yc(t),t.q_.set("Unknown"))}function ul(n){return n.K_||(n.K_=function(t,r,s){const o=Pe(t);return o.w_(),new Nj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Eo:Vj.bind(null,n),Ro:Lj.bind(null,n),mo:Uj.bind(null,n),d_:Fj.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Sy(n)?by(n):n.q_.set("Unknown")):(await n.K_.stop(),PS(n))})),n.K_}function di(n){return n.U_||(n.U_=function(t,r,s){const o=Pe(t);return o.w_(),new Dj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zj.bind(null,n),mo:Hj.bind(null,n),f_:qj.bind(null,n),g_:Wj.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await df(n)):(await n.U_.stop(),n.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new Iy(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(n,e){if(gs("AsyncQueue",`${e}: ${n}`),pc(n))return new de(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=_u(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new Ua(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ua)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.W_=new ct(ve.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Se():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ka{constructor(e,t,r,s,o,l,c,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Ka(e,t,Ua.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Qj{constructor(){this.queries=rx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const s=Pe(t),o=s.queries;s.queries=rx(),o.forEach((l,c)=>{for(const d of c.j_)d.onError(r)})})(this,new de(ee.ABORTED,"Firestore shutting down"))}}function rx(){return new ll(n=>Yb(n),rf)}async function RS(n,e){const t=Pe(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.H_()&&e.J_()&&(r=2):(o=new Kj,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await t.onListen(s,!0);break;case 1:o.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=Py(l,`Initialization of query '${Sa(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&ky(t)}async function NS(n,e){const t=Pe(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Yj(n,e){const t=Pe(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.j_)c.X_(s)&&(r=!0);l.z_=s}}r&&ky(t)}function Xj(n,e,t){const r=Pe(n),s=r.queries.get(e);if(s)for(const o of s.j_)o.onError(t);r.queries.delete(e)}function ky(n){n.Y_.forEach(e=>{e.next()})}var pg,sx;(sx=pg||(pg={})).ea="default",sx.Cache="cache";class DS{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.key=e}}class OS{constructor(e){this.key=e}}class Jj{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ne(),this.mutatedKeys=Ne(),this.Aa=Xb(e),this.Ra=new Ua(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new nx,s=t?t.Ra:this.Ra;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,v)=>{const x=s.get(m),b=sf(this.query,v)?v:null,k=!!x&&this.mutatedKeys.has(x.key),C=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let P=!1;x&&b?x.data.isEqual(b.data)?k!==C&&(r.track({type:3,doc:b}),P=!0):this.ga(x,b)||(r.track({type:2,doc:b}),P=!0,(d&&this.Aa(b,d)>0||f&&this.Aa(b,f)<0)&&(c=!0)):!x&&b?(r.track({type:0,doc:b}),P=!0):x&&!b&&(r.track({type:1,doc:x}),P=!0,(d||f)&&(c=!0)),P&&(b?(l=l.add(b),o=C?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{Ra:l,fa:r,ns:c,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((m,v)=>function(b,k){const C=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return C(b)-C(k)}(m.type,v.type)||this.Aa(m.doc,v.doc)),this.pa(r),s=s!=null&&s;const c=t&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,f=d!==this.Ea;return this.Ea=d,l.length!==0||f?{snapshot:new Ka(this.query,e.Ra,o,l,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new OS(r))}),this.da.forEach(r=>{e.has(r)||t.push(new jS(r))}),t}ba(e){this.Ta=e.Ts,this.da=Ne();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ka.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Zj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eO{constructor(e){this.key=e,this.va=!1}}class tO{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new ll(c=>Yb(c),rf),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(ve.comparator),this.Na=new Map,this.La=new _y,this.Ba={},this.ka=new Map,this.qa=Ga.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nO(n,e,t=!0){const r=$S(n);let s;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await MS(r,e,t,!0),s}async function rO(n,e){const t=$S(n);await MS(t,e,!0,!1)}async function MS(n,e,t,r){const s=await Sj(n.localStore,Nr(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await sO(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&SS(n.remoteStore,s),c}async function sO(n,e,t,r,s){n.Ka=(v,x,b)=>async function(C,P,U,H){let z=P.view.ma(U);z.ns&&(z=await J0(C.localStore,P.query,!1).then(({documents:D})=>P.view.ma(D,z)));const X=H&&H.targetChanges.get(P.targetId),J=H&&H.targetMismatches.get(P.targetId)!=null,ie=P.view.applyChanges(z,C.isPrimaryClient,X,J);return ox(C,P.targetId,ie.wa),ie.snapshot}(n,v,x,b);const o=await J0(n.localStore,e,!0),l=new Jj(e,o.Ts),c=l.ma(o.documents),d=gc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),f=l.applyChanges(c,n.isPrimaryClient,d);ox(n,t,f.wa);const m=new Zj(e,t,l);return n.Fa.set(e,m),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot}async function iO(n,e,t){const r=Pe(n),s=r.Fa.get(e),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter(l=>!rf(l,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await fg(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Ey(r.remoteStore,s.targetId),mg(r,s.targetId)}).catch(fc)):(mg(r,s.targetId),await fg(r.localStore,s.targetId,!0))}async function oO(n,e){const t=Pe(n),r=t.Fa.get(e),s=t.Ma.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ey(t.remoteStore,r.targetId))}async function aO(n,e,t){const r=pO(n);try{const s=await function(l,c){const d=Pe(l),f=vt.now(),m=c.reduce((b,k)=>b.add(k.key),Ne());let v,x;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=ys(),C=Ne();return d.cs.getEntries(b,m).next(P=>{k=P,k.forEach((U,H)=>{H.isValidDocument()||(C=C.add(U))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,k)).next(P=>{v=P;const U=[];for(const H of c){const z=AD(H,v.get(H.key).overlayedDocument);z!=null&&U.push(new vi(H.key,z,Bb(z.value.mapValue),hr.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,U,c)}).next(P=>{x=P;const U=P.applyToLocalDocumentSet(v,C);return d.documentOverlayCache.saveOverlays(b,P.batchId,U)})}).then(()=>({batchId:x.batchId,changes:Zb(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,c,d){let f=l.Ba[l.currentUser.toKey()];f||(f=new ct(Be)),f=f.insert(c,d),l.Ba[l.currentUser.toKey()]=f}(r,s.batchId,t),await vc(r,s.changes),await df(r.remoteStore)}catch(s){const o=Py(s,"Failed to persist write");t.reject(o)}}async function VS(n,e){const t=Pe(n);try{const r=await Ej(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Na.get(o);l&&(Ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Ge(l.va):s.removedDocuments.size>0&&(Ge(l.va),l.va=!1))}),await vc(t,r,e)}catch(r){await fc(r)}}function ix(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Fa.forEach((o,l)=>{const c=l.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(l,c){const d=Pe(l);d.onlineState=c;let f=!1;d.queries.forEach((m,v)=>{for(const x of v.j_)x.Z_(c)&&(f=!0)}),f&&ky(d)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lO(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Na.get(e),o=s&&s.key;if(o){let l=new ct(ve.comparator);l=l.insert(o,tn.newNoDocument(o,Ie.min()));const c=Ne().add(o),d=new lf(Ie.min(),new Map,new ct(Be),l,c);await VS(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),Ay(r)}else await fg(r.localStore,e,!1).then(()=>mg(r,e,t)).catch(fc)}async function uO(n,e){const t=Pe(n),r=e.batch.batchId;try{const s=await xj(t.localStore,e);US(t,r,null),LS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vc(t,s)}catch(s){await fc(s)}}async function cO(n,e,t){const r=Pe(n);try{const s=await function(l,c){const d=Pe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,c).next(v=>(Ge(v!==null),m=v.keys(),d.mutationQueue.removeMutationBatch(f,v))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(r.localStore,e);US(r,e,t),LS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vc(r,s)}catch(s){await fc(s)}}function LS(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function US(n,e,t){const r=Pe(n);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function mg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||FS(n,r)})}function FS(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Ey(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Ay(n))}function ox(n,e,t){for(const r of t)r instanceof jS?(n.La.addReference(r.key,e),dO(n,r)):r instanceof OS?(me("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||FS(n,r.key)):Se()}function dO(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(me("SyncEngine","New document in limbo: "+t),n.xa.add(r),Ay(n))}function Ay(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ve(nt.fromString(e)),r=n.qa.next();n.Na.set(r,new eO(t)),n.Oa=n.Oa.insert(t,r),SS(n.remoteStore,new ri(Nr(py(t.path)),r,"TargetPurposeLimboResolution",ly.oe))}}async function vc(n,e,t){const r=Pe(n),s=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach((c,d)=>{l.push(r.Ka(d,e,t).then(f=>{var m;if((f||t)&&r.isPrimaryClient){const v=f?!f.fromCache:(m=t==null?void 0:t.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){s.push(f);const v=xy.Wi(d.targetId,f);o.push(v)}}))}),await Promise.all(l),r.Ca.d_(s),await async function(d,f){const m=Pe(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>re.forEach(f,x=>re.forEach(x.$i,b=>m.persistence.referenceDelegate.addReference(v,x.targetId,b)).next(()=>re.forEach(x.Ui,b=>m.persistence.referenceDelegate.removeReference(v,x.targetId,b)))))}catch(v){if(!pc(v))throw v;me("LocalStore","Failed to update sequence numbers: "+v)}for(const v of f){const x=v.targetId;if(!v.fromCache){const b=m.os.get(x),k=b.snapshotVersion,C=b.withLastLimboFreeSnapshotVersion(k);m.os=m.os.insert(x,C)}}}(r.localStore,o))}async function hO(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const r=await xS(t.localStore,e);t.currentUser=e,function(o,l){o.ka.forEach(c=>{c.forEach(d=>{d.reject(new de(ee.CANCELLED,l))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vc(t,r.hs)}}function fO(n,e){const t=Pe(n),r=t.Na.get(e);if(r&&r.va)return Ne().add(r.key);{let s=Ne();const o=t.Ma.get(e);if(!o)return s;for(const l of o){const c=t.Fa.get(l);s=s.unionWith(c.view.Va)}return s}}function $S(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lO.bind(null,e),e.Ca.d_=Yj.bind(null,e.eventManager),e.Ca.$a=Xj.bind(null,e.eventManager),e}function pO(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cO.bind(null,e),e}class jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return wj(this.persistence,new vj,e.initialUser,this.serializer)}Ga(e){return new mj(wy.Zr,this.serializer)}Wa(e){return new Pj}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jh.provider={build:()=>new jh};class gg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ix(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hO.bind(null,this.syncEngine),await Gj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Qj}()}createDatastore(e){const t=uf(e.databaseInfo.databaseId),r=function(o){return new Rj(o)}(e.databaseInfo);return function(o,l,c,d){return new jj(o,l,c,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,l,c){return new Mj(r,s,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>ix(this.syncEngine,t,0),function(){return ex.D()?new ex:new kj}())}createSyncEngine(e,t){return function(s,o,l,c,d,f,m){const v=new tO(s,o,l,c,d,f);return m&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=Pe(s);me("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await yc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}gg.provider={build:()=>new gg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=en.UNAUTHENTICATED,this.clientId=Ub.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{me("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(me("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Py(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vm(n,e){n.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await xS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ax(n,e){n.asyncQueue.verifyOperationInProgress();const t=await gO(n);me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>tx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>tx(e.remoteStore,s)),n._onlineComponents=e}async function gO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{await vm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;za("Error using user provided cache. Falling back to memory cache: "+t),await vm(n,new jh)}}else me("FirestoreClient","Using default OfflineComponentProvider"),await vm(n,new jh);return n._offlineComponents}async function zS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),await ax(n,n._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),await ax(n,new gg))),n._onlineComponents}function yO(n){return zS(n).then(e=>e.syncEngine)}async function qS(n){const e=await zS(n),t=e.eventManager;return t.onListen=nO.bind(null,e.syncEngine),t.onUnlisten=iO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oO.bind(null,e.syncEngine),t}function vO(n,e,t={}){const r=new cs;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,d,f){const m=new BS({next:x=>{m.Za(),l.enqueueAndForget(()=>NS(o,v));const b=x.docs.has(c);!b&&x.fromCache?f.reject(new de(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&x.fromCache&&d&&d.source==="server"?f.reject(new de(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),v=new DS(py(c.path),m,{includeMetadataChanges:!0,_a:!0});return RS(o,v)}(await qS(n),n.asyncQueue,e,t,r)),r.promise}function _O(n,e,t={}){const r=new cs;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,d,f){const m=new BS({next:x=>{m.Za(),l.enqueueAndForget(()=>NS(o,v)),x.fromCache&&d.source==="server"?f.reject(new de(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),v=new DS(c,m,{includeMetadataChanges:!0,_a:!0});return RS(o,v)}(await qS(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(n,e,t){if(!t)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wO(n,e,t,r){if(e===!0&&r===!0)throw new de(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ux(n){if(!ve.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cx(n){if(ve.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se()}function Lr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hf(n);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new U2;switch(r.type){case"firstParty":return new z2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=lx.get(t);r&&(me("ComponentProvider","Removing Datastore"),lx.delete(t),r.terminate())}(this),Promise.resolve()}}function xO(n,e,t,r={}){var s;const o=(n=Lr(n,ff))._getSettings(),l=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=en.MOCK_USER;else{c=WT(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new en(f)}n._authCredentials=new F2(new Lb(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wo(this.firestore,e,this._query)}}class un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class ai extends wo{constructor(e,t,r){super(e,t,py(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new ve(e))}withConverter(e){return new ai(this.firestore,e,this._path)}}function GS(n,e,...t){if(n=Ct(n),HS("collection","path",e),n instanceof ff){const r=nt.fromString(e,...t);return cx(r),new ai(n,null,r)}{if(!(n instanceof un||n instanceof ai))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return cx(r),new ai(n.firestore,null,r)}}function pf(n,e,...t){if(n=Ct(n),arguments.length===1&&(e=Ub.newId()),HS("doc","path",e),n instanceof ff){const r=nt.fromString(e,...t);return ux(r),new un(n,null,new ve(r))}{if(!(n instanceof un||n instanceof ai))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return ux(r),new un(n.firestore,n instanceof ai?n.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new TS(this,"async_queue_retry"),this.Vu=()=>{const r=ym();r&&me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=ym();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=ym();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new cs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pc(e))throw e;me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw gs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=Iy.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&Se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class cl extends ff{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new hx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hx(e),this._firestoreClient=void 0,await e}}}function EO(n,e){const t=typeof n=="object"?n:Qg(),r=typeof n=="string"?n:"(default)",s=Jh(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=BT("firestore");o&&xO(s,...o)}return s}function Cy(n){if(n._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||TO(n),n._firestoreClient}function TO(n){var e,t,r;const s=n._freezeSettings(),o=function(c,d,f,m){return new nD(c,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,WS(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new mO(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qa(Gt.fromBase64String(e))}catch(t){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qa(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=/^__.*__$/;class SO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new mc(e,this.data,t,this.fieldTransforms)}}class KS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class Dy{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Oh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QS(this.Cu)&&bO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class IO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||uf(e)}Qu(e,t,r,s=!1){return new Dy({Cu:e,methodName:t,qu:r,path:Wt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gf(n){const e=n._freezeSettings(),t=uf(n._databaseId);return new IO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YS(n,e,t,r,s,o={}){const l=n.Qu(o.merge||o.mergeFields?2:0,e,t,s);My("Data must be an object, but it was:",l,r);const c=XS(r,l);let d,f;if(o.merge)d=new kn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const v of o.mergeFields){const x=yg(e,v,t);if(!l.contains(x))throw new de(ee.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);ZS(m,x)||m.push(x)}d=new kn(m),f=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,f=l.fieldTransforms;return new SO(new _n(c),d,f)}class yf extends _c{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yf}}class jy extends _c{_toFieldTransform(e){return new aS(e.path,new Qu)}isEqual(e){return e instanceof jy}}class Oy extends _c{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Ju(e.serializer,nS(e.serializer,this.$u));return new aS(e.path,t)}isEqual(e){return e instanceof Oy&&this.$u===e.$u}}function PO(n,e,t,r){const s=n.Qu(1,e,t);My("Data must be an object, but it was:",s,r);const o=[],l=_n.empty();vo(r,(d,f)=>{const m=Vy(e,d,t);f=Ct(f);const v=s.Nu(m);if(f instanceof yf)o.push(m);else{const x=wc(f,v);x!=null&&(o.push(m),l.set(m,x))}});const c=new kn(o);return new KS(l,c,s.fieldTransforms)}function kO(n,e,t,r,s,o){const l=n.Qu(1,e,t),c=[yg(e,r,t)],d=[s];if(o.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)c.push(yg(e,o[x])),d.push(o[x+1]);const f=[],m=_n.empty();for(let x=c.length-1;x>=0;--x)if(!ZS(f,c[x])){const b=c[x];let k=d[x];k=Ct(k);const C=l.Nu(b);if(k instanceof yf)f.push(b);else{const P=wc(k,C);P!=null&&(f.push(b),m.set(b,P))}}const v=new kn(f);return new KS(m,v,l.fieldTransforms)}function AO(n,e,t,r=!1){return wc(t,n.Qu(r?4:3,e))}function wc(n,e){if(JS(n=Ct(n)))return My("Unsupported field value:",e,n),XS(n,e);if(n instanceof _c)return function(r,s){if(!QS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const c of r){let d=wc(c,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=vt.fromDate(r);return{timestampValue:Nh(s.serializer,o)}}if(r instanceof vt){const o=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nh(s.serializer,o)}}if(r instanceof Ry)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qa)return{bytesValue:pS(s.serializer,r._byteString)};if(r instanceof un){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ny)return function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return my(c.serializer,d)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${hf(r)}`)}(n,e)}function XS(n,e){const t={};return Fb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(n,(r,s)=>{const o=wc(s,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function JS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof Ry||n instanceof Qa||n instanceof un||n instanceof _c||n instanceof Ny)}function My(n,e,t){if(!JS(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=hf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function yg(n,e,t){if((e=Ct(e))instanceof mf)return e._internalPath;if(typeof e=="string")return Vy(n,e);throw Oh("Field path arguments must be of type string or ",n,!1,void 0,t)}const CO=new RegExp("[~\\*/\\[\\]]");function Vy(n,e,t){if(e.search(CO)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mf(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Oh(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new de(ee.INVALID_ARGUMENT,c+n+d)}function ZS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RO extends e1{data(){return super.data()}}function vf(n,e){return typeof e=="string"?Vy(n,e):e instanceof mf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ly{}class t1 extends Ly{}function DO(n,e,...t){let r=[];e instanceof Ly&&r.push(e),r=r.concat(t),function(o){const l=o.filter(d=>d instanceof Uy).length,c=o.filter(d=>d instanceof _f).length;if(l>1||l>0&&c>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class _f extends t1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _f(e,t,r)}_apply(e){const t=this._parse(e);return n1(e._query,t),new wo(e.firestore,e.converter,ag(e._query,t))}_parse(e){const t=gf(e.firestore);return function(o,l,c,d,f,m,v){let x;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){px(v,m);const b=[];for(const k of v)b.push(fx(d,o,k));x={arrayValue:{values:b}}}else x=fx(d,o,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||px(v,m),x=AO(c,l,v,m==="in"||m==="not-in");return bt.create(f,m,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function jO(n,e,t){const r=e,s=vf("where",n);return _f._create(s,r,t)}class Uy extends Ly{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let l=s;const c=o.getFlattenedFilters();for(const d of c)n1(l,d),l=ag(l,d)}(e._query,t),new wo(e.firestore,e.converter,ag(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fy extends t1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fy(e,t)}_apply(e){const t=function(s,o,l){if(s.startAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ku(o,l)}(e._query,this._field,this._direction);return new wo(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new al(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function OO(n,e="asc"){const t=e,r=vf("orderBy",n);return Fy._create(r,t)}function fx(n,e,t){if(typeof(t=Ct(t))=="string"){if(t==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qb(e)&&t.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nt.fromString(t));if(!ve.isDocumentKey(r))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return O0(n,new ve(r))}if(t instanceof un)return O0(n,t._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hf(t)}.`)}function px(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n1(n,e){const t=function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class MO{convertValue(e,t="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return vo(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>gt(l.doubleValue));return new Ny(o)}convertGeoPoint(e){return new Ry(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const t=ci(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nt.fromString(e);Ge(wS(r));const s=new Hu(r.get(1),r.get(3)),o=new ve(r.popFirst(5));return s.isEqual(t)||gs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class s1 extends e1{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class mh extends s1{data(e={}){return super.data(e)}}class VO{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new xu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new mh(this._firestore,this._userDataWriter,r.key,r,new xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const d=new mh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new xu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const d=new mh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new xu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:LO(c.type),doc:d,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function LO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n){n=Lr(n,un);const e=Lr(n.firestore,cl);return vO(Cy(e),n._key).then(t=>BO(e,n,t))}class i1 extends MO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}}function UO(n){n=Lr(n,wo);const e=Lr(n.firestore,cl),t=Cy(e),r=new i1(e);return NO(n._query),_O(t,n._query).then(s=>new VO(e,r,n,s))}function mx(n,e,t){n=Lr(n,un);const r=Lr(n.firestore,cl),s=r1(n.converter,e,t);return By(r,[YS(gf(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,hr.none())])}function FO(n,e,t,...r){n=Lr(n,un);const s=Lr(n.firestore,cl),o=gf(s);let l;return l=typeof(e=Ct(e))=="string"||e instanceof mf?kO(o,"updateDoc",n._key,e,t,r):PO(o,"updateDoc",n._key,e),By(s,[l.toMutation(n._key,hr.exists(!0))])}function $O(n,e){const t=Lr(n.firestore,cl),r=pf(n),s=r1(n.converter,e);return By(t,[YS(gf(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}function By(n,e){return function(r,s){const o=new cs;return r.asyncQueue.enqueueAndForget(async()=>aO(await yO(r),s,o)),o.promise}(Cy(n),e)}function BO(n,e,t){const r=t.docs.get(e._key),s=new i1(n);return new s1(n,s,e._key,r,new xu(t.hasPendingWrites,t.fromCache),e.converter)}function _m(){return new jy("serverTimestamp")}function zO(n){return new Oy("increment",n)}(function(e,t=!0){(function(s){ol=s})(yo),co(new li("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new cl(new $2(r.getProvider("auth-internal")),new W2(r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(f.options.projectId,m)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Cr(C0,"4.7.3",e),Cr(C0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="firebasestorage.googleapis.com",qO="storageBucket",WO=2*60*1e3,HO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i=class a1 extends Fr{constructor(e,t,r=0){super(wm(e),`Firebase Storage: ${t} (${wm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,a1.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Ur;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ur||(Ur={}));function wm(n){return"storage/"+n}function GO(){const n="An unknown error occurred, please check the error payload for server response.";return new _i(Ur.UNKNOWN,n)}function KO(){return new _i(Ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QO(){return new _i(Ur.CANCELED,"User canceled the upload/download.")}function YO(n){return new _i(Ur.INVALID_URL,"Invalid URL '"+n+"'.")}function XO(n){return new _i(Ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gx(n){return new _i(Ur.INVALID_ARGUMENT,n)}function l1(){return new _i(Ur.APP_DELETED,"The Firebase app was deleted.")}function JO(n){return new _i(Ur.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=cr.makeFromUrl(e,t)}catch{return new cr(e,"")}if(r.path==="")return r;throw XO(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function f(X){X.path_=decodeURIComponent(X.path)}const m="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${m}/b/${s}/o${x}`,"i"),k={bucket:1,path:3},C=t===o1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",U=new RegExp(`^https?://${C}/${s}/${P}`,"i"),z=[{regex:c,indices:d,postModify:o},{regex:b,indices:k,postModify:f},{regex:U,indices:{bucket:1,path:2},postModify:f}];for(let X=0;X<z.length;X++){const J=z[X],ie=J.regex.exec(e);if(ie){const D=ie[J.indices.bucket];let S=ie[J.indices.path];S||(S=""),r=new cr(D,S),J.postModify(r);break}}if(r==null)throw YO(e);return r}}class ZO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(n,e,t){let r=1,s=null,o=null,l=!1,c=0;function d(){return c===2}let f=!1;function m(...P){f||(f=!0,e.apply(null,P))}function v(P){s=setTimeout(()=>{s=null,n(b,d())},P)}function x(){o&&clearTimeout(o)}function b(P,...U){if(f){x();return}if(P){x(),m.call(null,P,...U);return}if(d()||l){x(),m.call(null,P,...U);return}r<64&&(r*=2);let z;c===1?(c=2,z=0):z=(r+Math.random())*1e3,v(z)}let k=!1;function C(P){k||(k=!0,x(),!f&&(s!==null?(P||(c=2),clearTimeout(s),v(0)):P||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,C(!0)},t),C}function tM(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(n){return n!==void 0}function yx(n,e,t,r){if(r<e)throw gx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw gx(`Invalid value for '${n}'. Expected ${t} or less.`)}function rM(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Mh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Mh||(Mh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t,r,s,o,l,c,d,f,m,v,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=v,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,k)=>{this.resolve_=b,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Kd(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Mh.NO_ERROR,d=o.getStatus();if(!c||sM(d,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Mh.ABORT;r(!1,new Kd(!1,null,m));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new Kd(f,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());nM(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=GO();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(s.canceled){const d=this.appDelete_?l1():QO();l(d)}else{const d=KO();l(d)}};this.canceled_?t(!1,new Kd(!1,null,!0)):this.backoffId_=eM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function oM(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function aM(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lM(n,e){e&&(n["X-Firebase-GMPID"]=e)}function uM(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function cM(n,e,t,r,s,o,l=!0){const c=rM(n.urlParams),d=n.url+c,f=Object.assign({},n.headers);return lM(f,e),oM(f,t),aM(f,o),uM(f,r),new iM(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function hM(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this._service=e,t instanceof cr?this._location=t:this._location=cr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vh(e,t)}get root(){const e=new cr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hM(this._location.path)}get storage(){return this._service}get parent(){const e=dM(this._location.path);if(e===null)return null;const t=new cr(this._location.bucket,e);return new Vh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw JO(e)}}function vx(n,e){const t=e==null?void 0:e[qO];return t==null?null:cr.makeFromBucketSpec(t,n)}function fM(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:WT(s,n.app.options.projectId))}class pM{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=o1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WO,this._maxUploadRetryTime=HO,this._requests=new Set,s!=null?this._bucket=cr.makeFromBucketSpec(s,this._host):this._bucket=vx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cr.makeFromBucketSpec(this._url,e):this._bucket=vx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vh(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new ZO(l1());{const l=cM(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const _x="@firebase/storage",wx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="storage";function mM(n=Qg(),e){n=Ct(n);const r=Jh(n,u1).getImmediate({identifier:e}),s=BT("storage");return s&&gM(r,...s),r}function gM(n,e,t,r={}){fM(n,e,t,r)}function yM(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new pM(t,r,s,e,yo)}function vM(){co(new li(u1,yM,"PUBLIC").setMultipleInstances(!0)),Cr(_x,wx,""),Cr(_x,wx,"esm2017")}vM();const _M={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},zy=KT(_M),rt=R2(zy),xc=EO(zy);mM(zy);async function Lh(n,e){try{const t=pf(xc,"users",n),r=await $y(t);if(r.exists()){const s=r.data();await mx(t,{...s,uid:n,email:e.email||s.email,displayName:e.displayName||s.displayName,updatedAt:_m()},{merge:!0}),console.log("Documento do usuário atualizado com sucesso")}else await mx(t,{uid:n,email:e.email||"",displayName:e.displayName||"",credits:10,createdAt:_m(),updatedAt:_m()}),console.log("Novo documento do usuário criado com sucesso");return!0}catch(t){return console.error("Erro ao criar/atualizar documento do usuário:",t),!1}}const qy=L.createContext({});function Wy(n){const e=L.useRef(null);return e.current===null&&(e.current=n()),e.current}const wf=L.createContext(null),Hy=L.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class wM extends L.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function xM({children:n,isPresent:e}){const t=L.useId(),r=L.useRef(null),s=L.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=L.useContext(Hy);return L.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:f}=s.current;if(e||!r.current||!l||!c)return;r.current.dataset.motionPopId=t;const m=document.createElement("style");return o&&(m.nonce=o),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),y.jsx(wM,{isPresent:e,childRef:r,sizeRef:s,children:L.cloneElement(n,{ref:r})})}const EM=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l})=>{const c=Wy(TM),d=L.useId(),f=L.useCallback(v=>{c.set(v,!0);for(const x of c.values())if(!x)return;r&&r()},[c,r]),m=L.useMemo(()=>({id:d,initial:e,isPresent:t,custom:s,onExitComplete:f,register:v=>(c.set(v,!1),()=>c.delete(v))}),o?[Math.random(),f]:[t,f]);return L.useMemo(()=>{c.forEach((v,x)=>c.set(x,!1))},[t]),L.useEffect(()=>{!t&&!c.size&&r&&r()},[t]),l==="popLayout"&&(n=y.jsx(xM,{isPresent:t,children:n})),y.jsx(wf.Provider,{value:m,children:n})};function TM(){return new Map}function c1(n=!0){const e=L.useContext(wf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,o=L.useId();L.useEffect(()=>{n&&s(o)},[n]);const l=L.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}const Qd=n=>n.key||"";function xx(n){const e=[];return L.Children.forEach(n,t=>{L.isValidElement(t)&&e.push(t)}),e}const Gy=typeof window<"u",d1=Gy?L.useLayoutEffect:L.useEffect,jr=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1})=>{const[c,d]=c1(l),f=L.useMemo(()=>xx(n),[n]),m=l&&!c?[]:f.map(Qd),v=L.useRef(!0),x=L.useRef(f),b=Wy(()=>new Map),[k,C]=L.useState(f),[P,U]=L.useState(f);d1(()=>{v.current=!1,x.current=f;for(let X=0;X<P.length;X++){const J=Qd(P[X]);m.includes(J)?b.delete(J):b.get(J)!==!0&&b.set(J,!1)}},[P,m.length,m.join("-")]);const H=[];if(f!==k){let X=[...f];for(let J=0;J<P.length;J++){const ie=P[J],D=Qd(ie);m.includes(D)||(X.splice(J,0,ie),H.push(ie))}o==="wait"&&H.length&&(X=H),U(xx(X)),C(f);return}const{forceRender:z}=L.useContext(qy);return y.jsx(y.Fragment,{children:P.map(X=>{const J=Qd(X),ie=l&&!c?!1:f===P||m.includes(J),D=()=>{if(b.has(J))b.set(J,!0);else return;let S=!0;b.forEach(A=>{A||(S=!1)}),S&&(z==null||z(),U(x.current),l&&(d==null||d()),r&&r())};return y.jsx(EM,{isPresent:ie,initial:!v.current||t?void 0:!1,custom:ie?void 0:e,presenceAffectsLayout:s,mode:o,onExitComplete:ie?void 0:D,children:X},J)})})},An=n=>n;let h1=An;function Ky(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ya=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},ds=n=>n*1e3,hs=n=>n/1e3,bM={useManualTiming:!1};function SM(n){let e=new Set,t=new Set,r=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(f){o.has(f)&&(d.schedule(f),n()),f(l)}const d={schedule:(f,m=!1,v=!1)=>{const b=v&&r?e:t;return m&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{t.delete(f),o.delete(f)},process:f=>{if(l=f,r){s=!0;return}r=!0,[e,t]=[t,e],e.forEach(c),e.clear(),r=!1,s&&(s=!1,d.process(f))}};return d}const Yd=["read","resolveKeyframes","update","preRender","render","postRender"],IM=40;function f1(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Yd.reduce((U,H)=>(U[H]=SM(o),U),{}),{read:c,resolveKeyframes:d,update:f,preRender:m,render:v,postRender:x}=l,b=()=>{const U=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(U-s.timestamp,IM),1),s.timestamp=U,s.isProcessing=!0,c.process(s),d.process(s),f.process(s),m.process(s),v.process(s),x.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(b))},k=()=>{t=!0,r=!0,s.isProcessing||n(b)};return{schedule:Yd.reduce((U,H)=>{const z=l[H];return U[H]=(X,J=!1,ie=!1)=>(t||k(),z.schedule(X,J,ie)),U},{}),cancel:U=>{for(let H=0;H<Yd.length;H++)l[Yd[H]].cancel(U)},state:s,steps:l}}const{schedule:st,cancel:hi,state:zt,steps:xm}=f1(typeof requestAnimationFrame<"u"?requestAnimationFrame:An,!0),p1=L.createContext({strict:!1}),Ex={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xa={};for(const n in Ex)Xa[n]={isEnabled:e=>Ex[n].some(t=>!!e[t])};function PM(n){for(const e in n)Xa[e]={...Xa[e],...n[e]}}const kM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||kM.has(n)}let m1=n=>!Uh(n);function AM(n){n&&(m1=e=>e.startsWith("on")?!Uh(e):n(e))}try{AM(require("@emotion/is-prop-valid").default)}catch{}function CM(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(m1(s)||t===!0&&Uh(s)||!e&&!Uh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function RM(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const xf=L.createContext({});function Zu(n){return typeof n=="string"||Array.isArray(n)}function Ef(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Qy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yy=["initial",...Qy];function Tf(n){return Ef(n.animate)||Yy.some(e=>Zu(n[e]))}function g1(n){return!!(Tf(n)||n.variants)}function NM(n,e){if(Tf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Zu(t)?t:void 0,animate:Zu(r)?r:void 0}}return n.inherit!==!1?e:{}}function DM(n){const{initial:e,animate:t}=NM(n,L.useContext(xf));return L.useMemo(()=>({initial:e,animate:t}),[Tx(e),Tx(t)])}function Tx(n){return Array.isArray(n)?n.join(" "):n}const jM=Symbol.for("motionComponentSymbol");function Ra(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function OM(n,e,t){return L.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ra(t)&&(t.current=r))},[e])}const Xy=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),MM="framerAppearId",y1="data-"+Xy(MM),{schedule:Jy}=f1(queueMicrotask,!1),v1=L.createContext({});function VM(n,e,t,r,s){var o,l;const{visualElement:c}=L.useContext(xf),d=L.useContext(p1),f=L.useContext(wf),m=L.useContext(Hy).reducedMotion,v=L.useRef(null);r=r||d.renderer,!v.current&&r&&(v.current=r(n,{visualState:e,parent:c,props:t,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const x=v.current,b=L.useContext(v1);x&&!x.projection&&s&&(x.type==="html"||x.type==="svg")&&LM(v.current,t,s,b);const k=L.useRef(!1);L.useInsertionEffect(()=>{x&&k.current&&x.update(t,f)});const C=t[y1],P=L.useRef(!!C&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,C))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,C)));return d1(()=>{x&&(k.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),Jy.render(x.render),P.current&&x.animationState&&x.animationState.animateChanges())}),L.useEffect(()=>{x&&(!P.current&&x.animationState&&x.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var U;(U=window.MotionHandoffMarkAsComplete)===null||U===void 0||U.call(window,C)}),P.current=!1))}),x}function LM(n,e,t,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:f}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:_1(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&Ra(c),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:f})}function _1(n){if(n)return n.options.allowProjection!==!1?n.projection:_1(n.parent)}function UM({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){var o,l;n&&PM(n);function c(f,m){let v;const x={...L.useContext(Hy),...f,layoutId:FM(f)},{isStatic:b}=x,k=DM(f),C=r(f,b);if(!b&&Gy){$M();const P=BM(x);v=P.MeasureLayout,k.visualElement=VM(s,C,x,e,P.ProjectionNode)}return y.jsxs(xf.Provider,{value:k,children:[v&&k.visualElement?y.jsx(v,{visualElement:k.visualElement,...x}):null,t(s,f,OM(C,k.visualElement,m),C,b,k.visualElement)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${(l=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&l!==void 0?l:""})`}`;const d=L.forwardRef(c);return d[jM]=s,d}function FM({layoutId:n}){const e=L.useContext(qy).id;return e&&n!==void 0?e+"-"+n:n}function $M(n,e){L.useContext(p1).strict}function BM(n){const{drag:e,layout:t}=Xa;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const zM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zy(n){return typeof n!="string"||n.includes("-")?!1:!!(zM.indexOf(n)>-1||/[A-Z]/u.test(n))}function bx(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function ev(n,e,t,r){if(typeof e=="function"){const[s,o]=bx(r);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=bx(r);e=e(t!==void 0?t:n.custom,s,o)}return e}const vg=n=>Array.isArray(n),qM=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),WM=n=>vg(n)?n[n.length-1]||0:n,nn=n=>!!(n&&n.getVelocity);function gh(n){const e=nn(n)?n.get():n;return qM(e)?e.toValue():e}function HM({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,s,o){const l={latestValues:GM(r,s,o,n),renderState:e()};return t&&(l.onMount=c=>t({props:r,current:c,...l}),l.onUpdate=c=>t(c)),l}const w1=n=>(e,t)=>{const r=L.useContext(xf),s=L.useContext(wf),o=()=>HM(n,e,r,s);return t?o():Wy(o)};function GM(n,e,t,r){const s={},o=r(n,{});for(const x in o)s[x]=gh(o[x]);let{initial:l,animate:c}=n;const d=Tf(n),f=g1(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let m=t?t.initial===!1:!1;m=m||l===!1;const v=m?c:l;if(v&&typeof v!="boolean"&&!Ef(v)){const x=Array.isArray(v)?v:[v];for(let b=0;b<x.length;b++){const k=ev(n,x[b]);if(k){const{transitionEnd:C,transition:P,...U}=k;for(const H in U){let z=U[H];if(Array.isArray(z)){const X=m?z.length-1:0;z=z[X]}z!==null&&(s[H]=z)}for(const H in C)s[H]=C[H]}}}return s}const dl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xo=new Set(dl),x1=n=>e=>typeof e=="string"&&e.startsWith(n),E1=x1("--"),KM=x1("var(--"),tv=n=>KM(n)?QM.test(n.split("/*")[0].trim()):!1,QM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,T1=(n,e)=>e&&typeof n=="number"?e.transform(n):n,vs=(n,e,t)=>t>e?e:t<n?n:t,hl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ec={...hl,transform:n=>vs(0,1,n)},Xd={...hl,default:1},Ec=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ks=Ec("deg"),Or=Ec("%"),xe=Ec("px"),YM=Ec("vh"),XM=Ec("vw"),Sx={...Or,parse:n=>Or.parse(n)/100,transform:n=>Or.transform(n*100)},JM={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,backgroundPositionX:xe,backgroundPositionY:xe},ZM={rotate:Ks,rotateX:Ks,rotateY:Ks,rotateZ:Ks,scale:Xd,scaleX:Xd,scaleY:Xd,scaleZ:Xd,skew:Ks,skewX:Ks,skewY:Ks,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:ec,originX:Sx,originY:Sx,originZ:xe},Ix={...hl,transform:Math.round},nv={...JM,...ZM,zIndex:Ix,size:xe,fillOpacity:ec,strokeOpacity:ec,numOctaves:Ix},eV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tV=dl.length;function nV(n,e,t){let r="",s=!0;for(let o=0;o<tV;o++){const l=dl[o],c=n[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const f=T1(c,nv[l]);if(!d){s=!1;const m=eV[l]||l;r+=`${m}(${f}) `}t&&(e[l]=f)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function rv(n,e,t){const{style:r,vars:s,transformOrigin:o}=n;let l=!1,c=!1;for(const d in e){const f=e[d];if(xo.has(d)){l=!0;continue}else if(E1(d)){s[d]=f;continue}else{const m=T1(f,nv[d]);d.startsWith("origin")?(c=!0,o[d]=m):r[d]=m}}if(e.transform||(l||t?r.transform=nV(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:m=0}=o;r.transformOrigin=`${d} ${f} ${m}`}}const rV={offset:"stroke-dashoffset",array:"stroke-dasharray"},sV={offset:"strokeDashoffset",array:"strokeDasharray"};function iV(n,e,t=1,r=0,s=!0){n.pathLength=1;const o=s?rV:sV;n[o.offset]=xe.transform(-r);const l=xe.transform(e),c=xe.transform(t);n[o.array]=`${l} ${c}`}function Px(n,e,t){return typeof n=="string"?n:xe.transform(e+t*n)}function oV(n,e,t){const r=Px(e,n.x,n.width),s=Px(t,n.y,n.height);return`${r} ${s}`}function sv(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...f},m,v){if(rv(n,f,v),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:x,style:b,dimensions:k}=n;x.transform&&(k&&(b.transform=x.transform),delete x.transform),k&&(s!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=oV(k,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(x.x=e),t!==void 0&&(x.y=t),r!==void 0&&(x.scale=r),l!==void 0&&iV(x,l,c,d,!1)}const iv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),b1=()=>({...iv(),attrs:{}}),ov=n=>typeof n=="string"&&n.toLowerCase()==="svg";function S1(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const o in t)n.style.setProperty(o,t[o])}const I1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function P1(n,e,t,r){S1(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(I1.has(s)?s:Xy(s),e.attrs[s])}const Fh={};function aV(n){Object.assign(Fh,n)}function k1(n,{layout:e,layoutId:t}){return xo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Fh[n]||n==="opacity")}function av(n,e,t){var r;const{style:s}=n,o={};for(const l in s)(nn(s[l])||e.style&&nn(e.style[l])||k1(l,n)||((r=t==null?void 0:t.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[l]=s[l]);return o}function A1(n,e,t){const r=av(n,e,t);for(const s in n)if(nn(n[s])||nn(e[s])){const o=dl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=n[s]}return r}function lV(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const kx=["x","y","width","height","cx","cy","r"],uV={useVisualState:w1({scrapeMotionValuesFromProps:A1,createRenderState:b1,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:s})=>{if(!t)return;let o=!!n.drag;if(!o){for(const c in s)if(xo.has(c)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let c=0;c<kx.length;c++){const d=kx[c];n[d]!==e[d]&&(l=!0)}l&&st.read(()=>{lV(t,r),st.render(()=>{sv(r,s,ov(t.tagName),n.transformTemplate),P1(t,r)})})}})},cV={useVisualState:w1({scrapeMotionValuesFromProps:av,createRenderState:iv})};function C1(n,e,t){for(const r in e)!nn(e[r])&&!k1(r,t)&&(n[r]=e[r])}function dV({transformTemplate:n},e){return L.useMemo(()=>{const t=iv();return rv(t,e,n),Object.assign({},t.vars,t.style)},[e])}function hV(n,e){const t=n.style||{},r={};return C1(r,t,n),Object.assign(r,dV(n,e)),r}function fV(n,e){const t={},r=hV(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function pV(n,e,t,r){const s=L.useMemo(()=>{const o=b1();return sv(o,e,ov(r),n.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};C1(o,n.style,n),s.style={...o,...s.style}}return s}function mV(n=!1){return(t,r,s,{latestValues:o},l)=>{const d=(Zy(t)?pV:fV)(r,o,l,t),f=CM(r,typeof t=="string",n),m=t!==L.Fragment?{...f,...d,ref:s}:{},{children:v}=r,x=L.useMemo(()=>nn(v)?v.get():v,[v]);return L.createElement(t,{...m,children:x})}}function gV(n,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...Zy(r)?uV:cV,preloadedFeatures:n,useRender:mV(s),createVisualElement:e,Component:r};return UM(l)}}function R1(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function bf(n,e,t){const r=n.getProps();return ev(r,e,t!==void 0?t:r.custom,n)}const yV=Ky(()=>window.ScrollTimeline!==void 0);class vV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(s=>{if(yV()&&s.attachTimeline)return s.attachTimeline(e);if(typeof t=="function")return t(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class _V extends vV{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function lv(n,e){return n?n[e]||n.default||n:void 0}const _g=2e4;function N1(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<_g;)e+=t,r=n.next(e);return e>=_g?1/0:e}function uv(n){return typeof n=="function"}function Ax(n,e){n.timeline=e,n.onfinish=null}const cv=n=>Array.isArray(n)&&typeof n[0]=="number",wV={linearEasing:void 0};function xV(n,e){const t=Ky(n);return()=>{var r;return(r=wV[e])!==null&&r!==void 0?r:t()}}const $h=xV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),D1=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)r+=n(Ya(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function j1(n){return!!(typeof n=="function"&&$h()||!n||typeof n=="string"&&(n in wg||$h())||cv(n)||Array.isArray(n)&&n.every(j1))}const Eu=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,wg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Eu([0,.65,.55,1]),circOut:Eu([.55,0,1,.45]),backIn:Eu([.31,.01,.66,-.59]),backOut:Eu([.33,1.53,.69,.99])};function O1(n,e){if(n)return typeof n=="function"&&$h()?D1(n,e):cv(n)?Eu(n):Array.isArray(n)?n.map(t=>O1(t,e)||wg.easeOut):wg[n]}const or={x:!1,y:!1};function M1(){return or.x||or.y}function EV(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}function V1(n,e){const t=EV(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function Cx(n){return e=>{e.pointerType==="touch"||M1()||n(e)}}function TV(n,e,t={}){const[r,s,o]=V1(n,t),l=Cx(c=>{const{target:d}=c,f=e(c);if(typeof f!="function"||!d)return;const m=Cx(v=>{f(v),d.removeEventListener("pointerleave",m)});d.addEventListener("pointerleave",m,s)});return r.forEach(c=>{c.addEventListener("pointerenter",l,s)}),o}const L1=(n,e)=>e?n===e?!0:L1(n,e.parentElement):!1,dv=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,bV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function SV(n){return bV.has(n.tagName)||n.tabIndex!==-1}const Tu=new WeakSet;function Rx(n){return e=>{e.key==="Enter"&&n(e)}}function Em(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const IV=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=Rx(()=>{if(Tu.has(t))return;Em(t,"down");const s=Rx(()=>{Em(t,"up")}),o=()=>Em(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function Nx(n){return dv(n)&&!M1()}function PV(n,e,t={}){const[r,s,o]=V1(n,t),l=c=>{const d=c.currentTarget;if(!Nx(c)||Tu.has(d))return;Tu.add(d);const f=e(c),m=(b,k)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",x),!(!Nx(b)||!Tu.has(d))&&(Tu.delete(d),typeof f=="function"&&f(b,{success:k}))},v=b=>{m(b,t.useGlobalTarget||L1(d,b.target))},x=b=>{m(b,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",x,s)};return r.forEach(c=>{!SV(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),c.addEventListener("focus",f=>IV(f,s),s)}),o}function kV(n){return n==="x"||n==="y"?or[n]?null:(or[n]=!0,()=>{or[n]=!1}):or.x||or.y?null:(or.x=or.y=!0,()=>{or.x=or.y=!1})}const U1=new Set(["width","height","top","left","right","bottom",...dl]);let yh;function AV(){yh=void 0}const Mr={now:()=>(yh===void 0&&Mr.set(zt.isProcessing||bM.useManualTiming?zt.timestamp:performance.now()),yh),set:n=>{yh=n,queueMicrotask(AV)}};function hv(n,e){n.indexOf(e)===-1&&n.push(e)}function fv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class pv{constructor(){this.subscriptions=[]}add(e){return hv(this.subscriptions,e),()=>fv(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function F1(n,e){return e?n*(1e3/e):0}const Dx=30,CV=n=>!isNaN(parseFloat(n));class RV{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Mr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Mr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=CV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new pv);const r=this.events[e].add(t);return e==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Dx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Dx);return F1(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tc(n,e){return new RV(n,e)}function NV(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,tc(t))}function DV(n,e){const t=bf(n,e);let{transitionEnd:r={},transition:s={},...o}=t||{};o={...o,...r};for(const l in o){const c=WM(o[l]);NV(n,l,c)}}function jV(n){return!!(nn(n)&&n.add)}function xg(n,e){const t=n.getValue("willChange");if(jV(t))return t.add(e)}function $1(n){return n.props[y1]}const B1=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,OV=1e-7,MV=12;function VV(n,e,t,r,s){let o,l,c=0;do l=e+(t-e)/2,o=B1(l,r,s)-n,o>0?t=l:e=l;while(Math.abs(o)>OV&&++c<MV);return l}function Tc(n,e,t,r){if(n===e&&t===r)return An;const s=o=>VV(o,0,1,n,t);return o=>o===0||o===1?o:B1(s(o),e,r)}const z1=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,q1=n=>e=>1-n(1-e),W1=Tc(.33,1.53,.69,.99),mv=q1(W1),H1=z1(mv),G1=n=>(n*=2)<1?.5*mv(n):.5*(2-Math.pow(2,-10*(n-1))),gv=n=>1-Math.sin(Math.acos(n)),K1=q1(gv),Q1=z1(gv),Y1=n=>/^0[^.\s]+$/u.test(n);function LV(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Y1(n):!0}const Ru=n=>Math.round(n*1e5)/1e5,yv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UV(n){return n==null}const FV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vv=(n,e)=>t=>!!(typeof t=="string"&&FV.test(t)&&t.startsWith(n)||e&&!UV(t)&&Object.prototype.hasOwnProperty.call(t,e)),X1=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(yv);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},$V=n=>vs(0,255,n),Tm={...hl,transform:n=>Math.round($V(n))},ao={test:vv("rgb","red"),parse:X1("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Tm.transform(n)+", "+Tm.transform(e)+", "+Tm.transform(t)+", "+Ru(ec.transform(r))+")"};function BV(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Eg={test:vv("#"),parse:BV,transform:ao.transform},Na={test:vv("hsl","hue"),parse:X1("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Or.transform(Ru(e))+", "+Or.transform(Ru(t))+", "+Ru(ec.transform(r))+")"},Zt={test:n=>ao.test(n)||Eg.test(n)||Na.test(n),parse:n=>ao.test(n)?ao.parse(n):Na.test(n)?Na.parse(n):Eg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ao.transform(n):Na.transform(n)},zV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qV(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(yv))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(zV))===null||t===void 0?void 0:t.length)||0)>0}const J1="number",Z1="color",WV="var",HV="var(",jx="${}",GV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nc(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(GV,d=>(Zt.test(d)?(r.color.push(o),s.push(Z1),t.push(Zt.parse(d))):d.startsWith(HV)?(r.var.push(o),s.push(WV),t.push(d)):(r.number.push(o),s.push(J1),t.push(parseFloat(d))),++o,jx)).split(jx);return{values:t,split:c,indexes:r,types:s}}function eI(n){return nc(n).values}function tI(n){const{split:e,types:t}=nc(n),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=t[l];c===J1?o+=Ru(s[l]):c===Z1?o+=Zt.transform(s[l]):o+=s[l]}return o}}const KV=n=>typeof n=="number"?0:n;function QV(n){const e=eI(n);return tI(n)(e.map(KV))}const fi={test:qV,parse:eI,createTransformer:tI,getAnimatableNone:QV},YV=new Set(["brightness","contrast","saturate","opacity"]);function XV(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(yv)||[];if(!r)return n;const s=t.replace(r,"");let o=YV.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+s+")"}const JV=/\b([a-z-]*)\(.*?\)/gu,Tg={...fi,getAnimatableNone:n=>{const e=n.match(JV);return e?e.map(XV).join(" "):n}},ZV={...nv,color:Zt,backgroundColor:Zt,outlineColor:Zt,fill:Zt,stroke:Zt,borderColor:Zt,borderTopColor:Zt,borderRightColor:Zt,borderBottomColor:Zt,borderLeftColor:Zt,filter:Tg,WebkitFilter:Tg},_v=n=>ZV[n];function nI(n,e){let t=_v(n);return t!==Tg&&(t=fi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const eL=new Set(["auto","none","0"]);function tL(n,e,t){let r=0,s;for(;r<n.length&&!s;){const o=n[r];typeof o=="string"&&!eL.has(o)&&nc(o).values.length&&(s=n[r]),r++}if(s&&t)for(const o of e)n[o]=nI(t,s)}const Ox=n=>n===hl||n===xe,Mx=(n,e)=>parseFloat(n.split(", ")[e]),Vx=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Mx(s[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?Mx(o[1],n):0}},nL=new Set(["x","y","z"]),rL=dl.filter(n=>!nL.has(n));function sL(n){const e=[];return rL.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Ja={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Vx(4,13),y:Vx(5,14)};Ja.translateX=Ja.x;Ja.translateY=Ja.y;const uo=new Set;let bg=!1,Sg=!1;function rI(){if(Sg){const n=Array.from(uo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=sL(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([o,l])=>{var c;(c=r.getValue(o))===null||c===void 0||c.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Sg=!1,bg=!1,uo.forEach(n=>n.complete()),uo.clear()}function sI(){uo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Sg=!0)})}function iL(){sI(),rI()}class wv{constructor(e,t,r,s,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(uo.add(this),bg||(bg=!0,st.read(sI),st.resolveKeyframes(rI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=s==null?void 0:s.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const d=r.readValue(t,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),s&&l===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),uo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,uo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const iI=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),oL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function aL(n){const e=oL.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function oI(n,e,t=1){const[r,s]=aL(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return iI(l)?parseFloat(l):l}return tv(s)?oI(s,e,t+1):s}const aI=n=>e=>e.test(n),lL={test:n=>n==="auto",parse:n=>n},lI=[hl,xe,Or,Ks,XM,YM,lL],Lx=n=>lI.find(aI(n));class uI extends wv{constructor(e,t,r,s,o){super(e,t,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),tv(f))){const m=oI(f,t.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!U1.has(r)||e.length!==2)return;const[s,o]=e,l=Lx(s),c=Lx(o);if(l!==c)if(Ox(l)&&Ox(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)LV(e[s])&&r.push(s);r.length&&tL(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ja[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const o=t.getValue(r);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=Ja[r](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,f])=>{t.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const Ux=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(fi.test(n)||n==="0")&&!n.startsWith("url("));function uL(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function cL(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=Ux(s,e),c=Ux(o,e);return!l||!c?!1:uL(n)||(t==="spring"||uv(t))&&r}const dL=n=>n!==null;function Sf(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(dL),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const hL=40;class cI{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Mr.now(),this.options={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>hL?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&iL(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Mr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:l,onComplete:c,onUpdate:d,isGenerator:f}=this.options;if(!f&&!cL(e,r,s,o))if(l)this.options.duration=0;else{d&&d(Sf(e,this.options,t)),c&&c(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,t);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...m},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ut=(n,e,t)=>n+(e-n)*t;function bm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function fL({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;s=bm(d,c,n+1/3),o=bm(d,c,n),l=bm(d,c,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function Bh(n,e){return t=>t>0?e:n}const Sm=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},pL=[Eg,ao,Na],mL=n=>pL.find(e=>e.test(n));function Fx(n){const e=mL(n);if(!e)return!1;let t=e.parse(n);return e===Na&&(t=fL(t)),t}const $x=(n,e)=>{const t=Fx(n),r=Fx(e);if(!t||!r)return Bh(n,e);const s={...t};return o=>(s.red=Sm(t.red,r.red,o),s.green=Sm(t.green,r.green,o),s.blue=Sm(t.blue,r.blue,o),s.alpha=ut(t.alpha,r.alpha,o),ao.transform(s))},gL=(n,e)=>t=>e(n(t)),bc=(...n)=>n.reduce(gL),Ig=new Set(["none","hidden"]);function yL(n,e){return Ig.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function vL(n,e){return t=>ut(n,e,t)}function xv(n){return typeof n=="number"?vL:typeof n=="string"?tv(n)?Bh:Zt.test(n)?$x:xL:Array.isArray(n)?dI:typeof n=="object"?Zt.test(n)?$x:_L:Bh}function dI(n,e){const t=[...n],r=t.length,s=n.map((o,l)=>xv(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=s[l](o);return t}}function _L(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=xv(n[s])(n[s],e[s]));return s=>{for(const o in r)t[o]=r[o](s);return t}}function wL(n,e){var t;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=n.indexes[l][s[l]],d=(t=n.values[c])!==null&&t!==void 0?t:0;r[o]=d,s[l]++}return r}const xL=(n,e)=>{const t=fi.createTransformer(e),r=nc(n),s=nc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Ig.has(n)&&!s.values.length||Ig.has(e)&&!r.values.length?yL(n,e):bc(dI(wL(r,s),s.values),t):Bh(n,e)};function hI(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ut(n,e,t):xv(n)(n,e)}const EL=5;function fI(n,e,t){const r=Math.max(e-EL,0);return F1(t-n(r),e-r)}const ht={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bx=.001;function TL({duration:n=ht.duration,bounce:e=ht.bounce,velocity:t=ht.velocity,mass:r=ht.mass}){let s,o,l=1-e;l=vs(ht.minDamping,ht.maxDamping,l),n=vs(ht.minDuration,ht.maxDuration,hs(n)),l<1?(s=f=>{const m=f*l,v=m*n,x=m-t,b=Pg(f,l),k=Math.exp(-v);return Bx-x/b*k},o=f=>{const v=f*l*n,x=v*t+t,b=Math.pow(l,2)*Math.pow(f,2)*n,k=Math.exp(-v),C=Pg(Math.pow(f,2),l);return(-s(f)+Bx>0?-1:1)*((x-b)*k)/C}):(s=f=>{const m=Math.exp(-f*n),v=(f-t)*n+1;return-.001+m*v},o=f=>{const m=Math.exp(-f*n),v=(t-f)*(n*n);return m*v});const c=5/n,d=SL(s,o,c);if(n=ds(n),isNaN(d))return{stiffness:ht.stiffness,damping:ht.damping,duration:n};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:n}}}const bL=12;function SL(n,e,t){let r=t;for(let s=1;s<bL;s++)r=r-n(r)/e(r);return r}function Pg(n,e){return n*Math.sqrt(1-e*e)}const IL=["duration","bounce"],PL=["stiffness","damping","mass"];function zx(n,e){return e.some(t=>n[t]!==void 0)}function kL(n){let e={velocity:ht.velocity,stiffness:ht.stiffness,damping:ht.damping,mass:ht.mass,isResolvedFromDuration:!1,...n};if(!zx(n,PL)&&zx(n,IL))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,o=2*vs(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:ht.mass,stiffness:s,damping:o}}else{const t=TL(n);e={...e,...t,mass:ht.mass},e.isResolvedFromDuration=!0}return e}function pI(n=ht.visualDuration,e=ht.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:f,mass:m,duration:v,velocity:x,isResolvedFromDuration:b}=kL({...t,velocity:-hs(t.velocity||0)}),k=x||0,C=f/(2*Math.sqrt(d*m)),P=l-o,U=hs(Math.sqrt(d/m)),H=Math.abs(P)<5;r||(r=H?ht.restSpeed.granular:ht.restSpeed.default),s||(s=H?ht.restDelta.granular:ht.restDelta.default);let z;if(C<1){const J=Pg(U,C);z=ie=>{const D=Math.exp(-C*U*ie);return l-D*((k+C*U*P)/J*Math.sin(J*ie)+P*Math.cos(J*ie))}}else if(C===1)z=J=>l-Math.exp(-U*J)*(P+(k+U*P)*J);else{const J=U*Math.sqrt(C*C-1);z=ie=>{const D=Math.exp(-C*U*ie),S=Math.min(J*ie,300);return l-D*((k+C*U*P)*Math.sinh(S)+J*P*Math.cosh(S))/J}}const X={calculatedDuration:b&&v||null,next:J=>{const ie=z(J);if(b)c.done=J>=v;else{let D=0;C<1&&(D=J===0?ds(k):fI(z,J,ie));const S=Math.abs(D)<=r,A=Math.abs(l-ie)<=s;c.done=S&&A}return c.value=c.done?l:ie,c},toString:()=>{const J=Math.min(N1(X),_g),ie=D1(D=>X.next(J*D).value,J,30);return J+"ms "+ie}};return X}function qx({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:f=.5,restSpeed:m}){const v=n[0],x={done:!1,value:v},b=S=>c!==void 0&&S<c||d!==void 0&&S>d,k=S=>c===void 0?d:d===void 0||Math.abs(c-S)<Math.abs(d-S)?c:d;let C=t*e;const P=v+C,U=l===void 0?P:l(P);U!==P&&(C=U-v);const H=S=>-C*Math.exp(-S/r),z=S=>U+H(S),X=S=>{const A=H(S),j=z(S);x.done=Math.abs(A)<=f,x.value=x.done?U:j};let J,ie;const D=S=>{b(x.value)&&(J=S,ie=pI({keyframes:[x.value,k(x.value)],velocity:fI(z,S,x.value),damping:s,stiffness:o,restDelta:f,restSpeed:m}))};return D(0),{calculatedDuration:null,next:S=>{let A=!1;return!ie&&J===void 0&&(A=!0,X(S),D(S)),J!==void 0&&S>=J?ie.next(S-J):(!A&&X(S),x)}}}const AL=Tc(.42,0,1,1),CL=Tc(0,0,.58,1),mI=Tc(.42,0,.58,1),RL=n=>Array.isArray(n)&&typeof n[0]!="number",NL={linear:An,easeIn:AL,easeInOut:mI,easeOut:CL,circIn:gv,circInOut:Q1,circOut:K1,backIn:mv,backInOut:H1,backOut:W1,anticipate:G1},Wx=n=>{if(cv(n)){h1(n.length===4);const[e,t,r,s]=n;return Tc(e,t,r,s)}else if(typeof n=="string")return NL[n];return n};function DL(n,e,t){const r=[],s=t||hI,o=n.length-1;for(let l=0;l<o;l++){let c=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||An:e;c=bc(d,c)}r.push(c)}return r}function jL(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const o=n.length;if(h1(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=DL(e,r,s),d=c.length,f=m=>{if(l&&m<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(m<n[v+1]);v++);const x=Ya(n[v],n[v+1],m);return c[v](x)};return t?m=>f(vs(n[0],n[o-1],m)):f}function OL(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Ya(0,e,r);n.push(ut(t,1,s))}}function ML(n){const e=[0];return OL(e,n.length-1),e}function VL(n,e){return n.map(t=>t*e)}function LL(n,e){return n.map(()=>e||mI).splice(0,n.length-1)}function zh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=RL(r)?r.map(Wx):Wx(r),o={done:!1,value:e[0]},l=VL(t&&t.length===e.length?t:ML(e),n),c=jL(l,e,{ease:Array.isArray(s)?s:LL(e,s)});return{calculatedDuration:n,next:d=>(o.value=c(d),o.done=d>=n,o)}}const UL=n=>{const e=({timestamp:t})=>n(t);return{start:()=>st.update(e,!0),stop:()=>hi(e),now:()=>zt.isProcessing?zt.timestamp:Mr.now()}},FL={decay:qx,inertia:qx,tween:zh,keyframes:zh,spring:pI},$L=n=>n/100;class Ev extends cI{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:t,motionValue:r,element:s,keyframes:o}=this.options,l=(s==null?void 0:s.KeyframeResolver)||wv,c=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new l(o,c,t,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=this.options,c=uv(t)?t:FL[t]||zh;let d,f;c!==zh&&typeof e[0]!="number"&&(d=bc($L,hI(e[0],e[1])),e=[0,100]);const m=c({...this.options,keyframes:e});o==="mirror"&&(f=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=N1(m));const{calculatedDuration:v}=m,x=v+s,b=x*(r+1)-s;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:x,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:d,calculatedDuration:f,totalDuration:m,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:x,repeat:b,repeatType:k,repeatDelay:C,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const U=this.currentTime-x*(this.speed>=0?1:-1),H=this.speed>=0?U<0:U>m;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let z=this.currentTime,X=o;if(b){const S=Math.min(this.currentTime,m)/v;let A=Math.floor(S),j=S%1;!j&&S>=1&&(j=1),j===1&&A--,A=Math.min(A,b+1),!!(A%2)&&(k==="reverse"?(j=1-j,C&&(j-=C/v)):k==="mirror"&&(X=l)),z=vs(0,1,j)*v}const J=H?{done:!1,value:d[0]}:X.next(z);c&&(J.value=c(J.value));let{done:ie}=J;!H&&f!==null&&(ie=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ie);return D&&s!==void 0&&(J.value=Sf(d,this.options,s)),P&&P(J.value),D&&this.finish(),J}get duration(){const{resolved:e}=this;return e?hs(e.calculatedDuration):0}get time(){return hs(this.currentTime)}set time(e){e=ds(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=hs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=UL,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),t&&t();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const BL=new Set(["opacity","clipPath","filter","transform"]);function zL(n,e,t,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:d}={}){const f={[e]:t};d&&(f.offset=d);const m=O1(c,s);return Array.isArray(m)&&(f.easing=m),n.animate(f,{delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const qL=Ky(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),qh=10,WL=2e4;function HL(n){return uv(n.type)||n.type==="spring"||!j1(n.ease)}function GL(n,e){const t=new Ev({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const s=[];let o=0;for(;!r.done&&o<WL;)r=t.sample(o),s.push(r.value),o+=qh;return{times:void 0,keyframes:s,duration:o-qh,ease:"linear"}}const gI={anticipate:G1,backInOut:H1,circInOut:Q1};function KL(n){return n in gI}class Hx extends cI{constructor(e){super(e);const{name:t,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new uI(o,(l,c)=>this.onKeyframesResolved(l,c),t,r,s),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:s,ease:o,type:l,motionValue:c,name:d,startTime:f}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof o=="string"&&$h()&&KL(o)&&(o=gI[o]),HL(this.options)){const{onComplete:v,onUpdate:x,motionValue:b,element:k,...C}=this.options,P=GL(e,C);e=P.keyframes,e.length===1&&(e[1]=e[0]),r=P.duration,s=P.times,o=P.ease,l="keyframes"}const m=zL(c.owner.current,d,e,{...this.options,duration:r,times:s,ease:o});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(Ax(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:v}=this.options;c.set(Sf(e,this.options,t)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:r,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return hs(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return hs(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=ds(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return An;const{animation:r}=t;Ax(r,e)}return An}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:s,type:o,ease:l,times:c}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:v,element:x,...b}=this.options,k=new Ev({...b,keyframes:r,duration:s,type:o,ease:l,times:c,isGenerator:!0}),C=ds(this.time);f.setWithVelocity(k.sample(C-qh).value,k.sample(C).value,qh)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:s,repeatType:o,damping:l,type:c}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return qL()&&r&&BL.has(r)&&!d&&!f&&!s&&o!=="mirror"&&l!==0&&c!=="inertia"}}const QL={type:"spring",stiffness:500,damping:25,restSpeed:10},YL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),XL={type:"keyframes",duration:.8},JL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ZL=(n,{keyframes:e})=>e.length>2?XL:xo.has(n)?n.startsWith("scale")?YL(e[1]):QL:JL;function e4({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const Tv=(n,e,t,r={},s,o)=>l=>{const c=lv(r,n)||{},d=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-ds(d);let m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:o?void 0:s};e4(c)||(m={...m,...ZL(n,m)}),m.duration&&(m.duration=ds(m.duration)),m.repeatDelay&&(m.repeatDelay=ds(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let v=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const x=Sf(m.keyframes,c);if(x!==void 0)return st.update(()=>{m.onUpdate(x),m.onComplete()}),new _V([])}return!o&&Hx.supports(m)?new Hx(m):new Ev(m)};function t4({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function yI(n,e,{delay:t=0,transitionOverride:r,type:s}={}){var o;let{transition:l=n.getDefaultTransition(),transitionEnd:c,...d}=e;r&&(l=r);const f=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const v in d){const x=n.getValue(v,(o=n.latestValues[v])!==null&&o!==void 0?o:null),b=d[v];if(b===void 0||m&&t4(m,v))continue;const k={delay:t,...lv(l||{},v)};let C=!1;if(window.MotionHandoffAnimation){const U=$1(n);if(U){const H=window.MotionHandoffAnimation(U,v,st);H!==null&&(k.startTime=H,C=!0)}}xg(n,v),x.start(Tv(v,x,b,n.shouldReduceMotion&&U1.has(v)?{type:!1}:k,n,C));const P=x.animation;P&&f.push(P)}return c&&Promise.all(f).then(()=>{st.update(()=>{c&&DV(n,c)})}),f}function kg(n,e,t={}){var r;const s=bf(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(o=t.transitionOverride);const l=s?()=>Promise.all(yI(n,s,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:v,staggerDirection:x}=o;return n4(n,e,m+f,v,x,t)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,m]=d==="beforeChildren"?[l,c]:[c,l];return f().then(()=>m())}else return Promise.all([l(),c(t.delay)])}function n4(n,e,t=0,r=0,s=1,o){const l=[],c=(n.variantChildren.size-1)*r,d=s===1?(f=0)=>f*r:(f=0)=>c-f*r;return Array.from(n.variantChildren).sort(r4).forEach((f,m)=>{f.notify("AnimationStart",e),l.push(kg(f,e,{...o,delay:t+d(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function r4(n,e){return n.sortNodePosition(e)}function s4(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>kg(n,o,t));r=Promise.all(s)}else if(typeof e=="string")r=kg(n,e,t);else{const s=typeof e=="function"?bf(n,e,t.custom):e;r=Promise.all(yI(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const i4=Yy.length;function vI(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?vI(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<i4;t++){const r=Yy[t],s=n.props[r];(Zu(s)||s===!1)&&(e[r]=s)}return e}const o4=[...Qy].reverse(),a4=Qy.length;function l4(n){return e=>Promise.all(e.map(({animation:t,options:r})=>s4(n,t,r)))}function u4(n){let e=l4(n),t=Gx(),r=!0;const s=d=>(f,m)=>{var v;const x=bf(n,m,d==="exit"?(v=n.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(x){const{transition:b,transitionEnd:k,...C}=x;f={...f,...C,...k}}return f};function o(d){e=d(n)}function l(d){const{props:f}=n,m=vI(n.parent)||{},v=[],x=new Set;let b={},k=1/0;for(let P=0;P<a4;P++){const U=o4[P],H=t[U],z=f[U]!==void 0?f[U]:m[U],X=Zu(z),J=U===d?H.isActive:null;J===!1&&(k=P);let ie=z===m[U]&&z!==f[U]&&X;if(ie&&r&&n.manuallyAnimateOnMount&&(ie=!1),H.protectedKeys={...b},!H.isActive&&J===null||!z&&!H.prevProp||Ef(z)||typeof z=="boolean")continue;const D=c4(H.prevProp,z);let S=D||U===d&&H.isActive&&!ie&&X||P>k&&X,A=!1;const j=Array.isArray(z)?z:[z];let M=j.reduce(s(U),{});J===!1&&(M={});const{prevResolvedValues:$={}}=H,N={...$,...M},Ke=Te=>{S=!0,x.has(Te)&&(A=!0,x.delete(Te)),H.needsAnimating[Te]=!0;const G=n.getValue(Te);G&&(G.liveStyle=!1)};for(const Te in N){const G=M[Te],ue=$[Te];if(b.hasOwnProperty(Te))continue;let ae=!1;vg(G)&&vg(ue)?ae=!R1(G,ue):ae=G!==ue,ae?G!=null?Ke(Te):x.add(Te):G!==void 0&&x.has(Te)?Ke(Te):H.protectedKeys[Te]=!0}H.prevProp=z,H.prevResolvedValues=M,H.isActive&&(b={...b,...M}),r&&n.blockInitialAnimation&&(S=!1),S&&(!(ie&&D)||A)&&v.push(...j.map(Te=>({animation:Te,options:{type:U}})))}if(x.size){const P={};x.forEach(U=>{const H=n.getBaseTarget(U),z=n.getValue(U);z&&(z.liveStyle=!0),P[U]=H??null}),v.push({animation:P})}let C=!!v.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(v):Promise.resolve()}function c(d,f){var m;if(t[d].isActive===f)return Promise.resolve();(m=n.variantChildren)===null||m===void 0||m.forEach(x=>{var b;return(b=x.animationState)===null||b===void 0?void 0:b.setActive(d,f)}),t[d].isActive=f;const v=l(d);for(const x in t)t[x].protectedKeys={};return v}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>t,reset:()=>{t=Gx(),r=!0}}}function c4(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!R1(e,n):!1}function Qi(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Gx(){return{animate:Qi(!0),whileInView:Qi(),whileHover:Qi(),whileTap:Qi(),whileDrag:Qi(),whileFocus:Qi(),exit:Qi()}}class wi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class d4 extends wi{constructor(e){super(e),e.animationState||(e.animationState=u4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ef(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let h4=0;class f4 extends wi{constructor(){super(...arguments),this.id=h4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const p4={animation:{Feature:d4},exit:{Feature:f4}};function rc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Sc(n){return{point:{x:n.pageX,y:n.pageY}}}const m4=n=>e=>dv(e)&&n(e,Sc(e));function Nu(n,e,t,r){return rc(n,e,m4(t),r)}const Kx=(n,e)=>Math.abs(n-e);function g4(n,e){const t=Kx(n.x,e.x),r=Kx(n.y,e.y);return Math.sqrt(t**2+r**2)}class _I{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Pm(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=g4(v.offset,{x:0,y:0})>=3;if(!x&&!b)return;const{point:k}=v,{timestamp:C}=zt;this.history.push({...k,timestamp:C});const{onStart:P,onMove:U}=this.handlers;x||(P&&P(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Im(x,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{this.end();const{onEnd:b,onSessionEnd:k,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Pm(v.type==="pointercancel"?this.lastMoveEventInfo:Im(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,P),k&&k(v,P)},!dv(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const l=Sc(e),c=Im(l,this.transformPagePoint),{point:d}=c,{timestamp:f}=zt;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=t;m&&m(e,Pm(c,this.history)),this.removeListeners=bc(Nu(this.contextWindow,"pointermove",this.handlePointerMove),Nu(this.contextWindow,"pointerup",this.handlePointerUp),Nu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),hi(this.updatePoint)}}function Im(n,e){return e?{point:e(n.point)}:n}function Qx(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Pm({point:n},e){return{point:n,delta:Qx(n,wI(e)),offset:Qx(n,y4(e)),velocity:v4(e,.1)}}function y4(n){return n[0]}function wI(n){return n[n.length-1]}function v4(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=wI(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>ds(e)));)t--;if(!r)return{x:0,y:0};const o=hs(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const xI=1e-4,_4=1-xI,w4=1+xI,EI=.01,x4=0-EI,E4=0+EI;function Cn(n){return n.max-n.min}function T4(n,e,t){return Math.abs(n-e)<=t}function Yx(n,e,t,r=.5){n.origin=r,n.originPoint=ut(e.min,e.max,n.origin),n.scale=Cn(t)/Cn(e),n.translate=ut(t.min,t.max,n.origin)-n.originPoint,(n.scale>=_4&&n.scale<=w4||isNaN(n.scale))&&(n.scale=1),(n.translate>=x4&&n.translate<=E4||isNaN(n.translate))&&(n.translate=0)}function Du(n,e,t,r){Yx(n.x,e.x,t.x,r?r.originX:void 0),Yx(n.y,e.y,t.y,r?r.originY:void 0)}function Xx(n,e,t){n.min=t.min+e.min,n.max=n.min+Cn(e)}function b4(n,e,t){Xx(n.x,e.x,t.x),Xx(n.y,e.y,t.y)}function Jx(n,e,t){n.min=e.min-t.min,n.max=n.min+Cn(e)}function ju(n,e,t){Jx(n.x,e.x,t.x),Jx(n.y,e.y,t.y)}function S4(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ut(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ut(t,n,r.max):Math.min(n,t)),n}function Zx(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function I4(n,{top:e,left:t,bottom:r,right:s}){return{x:Zx(n.x,t,s),y:Zx(n.y,e,r)}}function eE(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function P4(n,e){return{x:eE(n.x,e.x),y:eE(n.y,e.y)}}function k4(n,e){let t=.5;const r=Cn(n),s=Cn(e);return s>r?t=Ya(e.min,e.max-r,n.min):r>s&&(t=Ya(n.min,n.max-s,e.min)),vs(0,1,t)}function A4(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Ag=.35;function C4(n=Ag){return n===!1?n=0:n===!0&&(n=Ag),{x:tE(n,"left","right"),y:tE(n,"top","bottom")}}function tE(n,e,t){return{min:nE(n,e),max:nE(n,t)}}function nE(n,e){return typeof n=="number"?n:n[e]||0}const rE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Da=()=>({x:rE(),y:rE()}),sE=()=>({min:0,max:0}),mt=()=>({x:sE(),y:sE()});function zn(n){return[n("x"),n("y")]}function TI({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function R4({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function N4(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function km(n){return n===void 0||n===1}function Cg({scale:n,scaleX:e,scaleY:t}){return!km(n)||!km(e)||!km(t)}function Zi(n){return Cg(n)||bI(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function bI(n){return iE(n.x)||iE(n.y)}function iE(n){return n&&n!=="0%"}function Wh(n,e,t){const r=n-t,s=e*r;return t+s}function oE(n,e,t,r,s){return s!==void 0&&(n=Wh(n,s,r)),Wh(n,t,r)+e}function Rg(n,e=0,t=1,r,s){n.min=oE(n.min,e,t,r,s),n.max=oE(n.max,e,t,r,s)}function SI(n,{x:e,y:t}){Rg(n.x,e.translate,e.scale,e.originPoint),Rg(n.y,t.translate,t.scale,t.originPoint)}const aE=.999999999999,lE=1.0000000000001;function D4(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=t[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Oa(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,SI(n,l)),r&&Zi(o.latestValues)&&Oa(n,o.latestValues))}e.x<lE&&e.x>aE&&(e.x=1),e.y<lE&&e.y>aE&&(e.y=1)}function ja(n,e){n.min=n.min+e,n.max=n.max+e}function uE(n,e,t,r,s=.5){const o=ut(n.min,n.max,s);Rg(n,e,t,o,r)}function Oa(n,e){uE(n.x,e.x,e.scaleX,e.scale,e.originX),uE(n.y,e.y,e.scaleY,e.scale,e.originY)}function II(n,e){return TI(N4(n.getBoundingClientRect(),e))}function j4(n,e,t){const r=II(n,t),{scroll:s}=e;return s&&(ja(r.x,s.offset.x),ja(r.y,s.offset.y)),r}const PI=({current:n})=>n?n.ownerDocument.defaultView:null,O4=new WeakMap;class M4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=m=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Sc(m).point)},o=(m,v)=>{const{drag:x,dragPropagation:b,onDragStart:k}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kV(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zn(P=>{let U=this.getAxisMotionValue(P).get()||0;if(Or.test(U)){const{projection:H}=this.visualElement;if(H&&H.layout){const z=H.layout.layoutBox[P];z&&(U=Cn(z)*(parseFloat(U)/100))}}this.originPoint[P]=U}),k&&st.postRender(()=>k(m,v)),xg(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},l=(m,v)=>{const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:k,onDrag:C}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:P}=v;if(b&&this.currentDirection===null){this.currentDirection=V4(P),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",v.point,P),this.updateAxis("y",v.point,P),this.visualElement.render(),C&&C(m,v)},c=(m,v)=>this.stop(m,v),d=()=>zn(m=>{var v;return this.getAnimationState(m)==="paused"&&((v=this.getAxisMotionValue(m).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new _I(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:PI(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&st.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Jd(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=S4(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;t&&Ra(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=I4(s.layoutBox,t):this.constraints=!1,this.elastic=C4(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&zn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=A4(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ra(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=j4(r,s.root,this.visualElement.getTransformPagePoint());let l=P4(s.layout.layoutBox,o);if(t){const c=t(R4(l));this.hasMutatedConstraints=!!c,c&&(l=TI(c))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=zn(m=>{if(!Jd(m,t,this.currentDirection))return;let v=d&&d[m]||{};l&&(v={min:0,max:0});const x=s?200:1e6,b=s?40:1e7,k={type:"inertia",velocity:r?e[m]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return xg(this.visualElement,e),r.start(Tv(e,r,0,t,this.visualElement,!1))}stopAnimation(){zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zn(t=>{const{drag:r}=this.getProps();if(!Jd(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[t];o.set(e[t]-ut(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ra(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};zn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();s[l]=k4({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zn(l=>{if(!Jd(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];c.set(ut(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;O4.set(this.visualElement,this);const e=this.visualElement.current,t=Nu(e,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Ra(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),st.read(r);const l=rc(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(zn(m=>{const v=this.getAxisMotionValue(m);v&&(this.originPoint[m]+=d[m].translate,v.set(v.get()+d[m].translate))}),this.visualElement.render())});return()=>{l(),t(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Ag,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Jd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function V4(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class L4 extends wi{constructor(e){super(e),this.removeGroupControls=An,this.removeListeners=An,this.controls=new M4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||An}unmount(){this.removeGroupControls(),this.removeListeners()}}const cE=n=>(e,t)=>{n&&st.postRender(()=>n(e,t))};class U4 extends wi{constructor(){super(...arguments),this.removePointerDownListener=An}onPointerDown(e){this.session=new _I(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:cE(e),onStart:cE(t),onMove:r,onEnd:(o,l)=>{delete this.session,s&&st.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Nu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const vh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dE(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const cu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(xe.test(n))n=parseFloat(n);else return n;const t=dE(n,e.target.x),r=dE(n,e.target.y);return`${t}% ${r}%`}},F4={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=fi.parse(n);if(s.length>5)return r;const o=fi.createTransformer(n),l=typeof s[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=c,s[1+l]/=d;const f=ut(c,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}};class $4 extends L.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;aV(B4),o&&(t.group&&t.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),vh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,s||e.layoutDependency!==t||t===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||st.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Jy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kI(n){const[e,t]=c1(),r=L.useContext(qy);return y.jsx($4,{...n,layoutGroup:r,switchLayoutGroup:L.useContext(v1),isPresent:e,safeToRemove:t})}const B4={borderRadius:{...cu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cu,borderTopRightRadius:cu,borderBottomLeftRadius:cu,borderBottomRightRadius:cu,boxShadow:F4};function z4(n,e,t){const r=nn(n)?n:tc(n);return r.start(Tv("",r,e,t)),r.animation}function q4(n){return n instanceof SVGElement&&n.tagName!=="svg"}const W4=(n,e)=>n.depth-e.depth;class H4{constructor(){this.children=[],this.isDirty=!1}add(e){hv(this.children,e),this.isDirty=!0}remove(e){fv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(W4),this.isDirty=!1,this.children.forEach(e)}}function G4(n,e){const t=Mr.now(),r=({timestamp:s})=>{const o=s-t;o>=e&&(hi(r),n(o-e))};return st.read(r,!0),()=>hi(r)}const AI=["TopLeft","TopRight","BottomLeft","BottomRight"],K4=AI.length,hE=n=>typeof n=="string"?parseFloat(n):n,fE=n=>typeof n=="number"||xe.test(n);function Q4(n,e,t,r,s,o){s?(n.opacity=ut(0,t.opacity!==void 0?t.opacity:1,Y4(r)),n.opacityExit=ut(e.opacity!==void 0?e.opacity:1,0,X4(r))):o&&(n.opacity=ut(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let l=0;l<K4;l++){const c=`border${AI[l]}Radius`;let d=pE(e,c),f=pE(t,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||fE(d)===fE(f)?(n[c]=Math.max(ut(hE(d),hE(f),r),0),(Or.test(f)||Or.test(d))&&(n[c]+="%")):n[c]=f}(e.rotate||t.rotate)&&(n.rotate=ut(e.rotate||0,t.rotate||0,r))}function pE(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Y4=CI(0,.5,K1),X4=CI(.5,.95,An);function CI(n,e,t){return r=>r<n?0:r>e?1:t(Ya(n,e,r))}function mE(n,e){n.min=e.min,n.max=e.max}function Bn(n,e){mE(n.x,e.x),mE(n.y,e.y)}function gE(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function yE(n,e,t,r,s){return n-=e,n=Wh(n,1/t,r),s!==void 0&&(n=Wh(n,1/s,r)),n}function J4(n,e=0,t=1,r=.5,s,o=n,l=n){if(Or.test(e)&&(e=parseFloat(e),e=ut(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=ut(o.min,o.max,r);n===o&&(c-=e),n.min=yE(n.min,e,t,c,s),n.max=yE(n.max,e,t,c,s)}function vE(n,e,[t,r,s],o,l){J4(n,e[t],e[r],e[s],e.scale,o,l)}const Z4=["x","scaleX","originX"],eU=["y","scaleY","originY"];function _E(n,e,t,r){vE(n.x,e,Z4,t?t.x:void 0,r?r.x:void 0),vE(n.y,e,eU,t?t.y:void 0,r?r.y:void 0)}function wE(n){return n.translate===0&&n.scale===1}function RI(n){return wE(n.x)&&wE(n.y)}function xE(n,e){return n.min===e.min&&n.max===e.max}function tU(n,e){return xE(n.x,e.x)&&xE(n.y,e.y)}function EE(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function NI(n,e){return EE(n.x,e.x)&&EE(n.y,e.y)}function TE(n){return Cn(n.x)/Cn(n.y)}function bE(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class nU{constructor(){this.members=[]}add(e){hv(this.members,e),e.scheduleRender()}remove(e){if(fv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function rU(n,e,t){let r="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:m,rotateX:v,rotateY:x,skewX:b,skewY:k}=t;f&&(r=`perspective(${f}px) ${r}`),m&&(r+=`rotate(${m}deg) `),v&&(r+=`rotateX(${v}deg) `),x&&(r+=`rotateY(${x}deg) `),b&&(r+=`skewX(${b}deg) `),k&&(r+=`skewY(${k}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const eo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},bu=typeof window<"u"&&window.MotionDebug!==void 0,Am=["","X","Y","Z"],sU={visibility:"hidden"},SE=1e3;let iU=0;function Cm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function DI(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=$1(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",st,!(s||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&DI(r)}function jI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e==null?void 0:e()){this.id=iU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,bu&&(eo.totalNodes=eo.resolvedTargetDeltas=eo.recalculatedProjection=0),this.nodes.forEach(lU),this.nodes.forEach(fU),this.nodes.forEach(pU),this.nodes.forEach(uU),bu&&window.MotionDebug.record(eo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new H4)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new pv),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=q4(l),this.instance=l;const{layoutId:d,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(f||d)&&(this.isLayoutDirty=!0),n){let v;const x=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=G4(x,250),vh.hasAnimatedSinceResize&&(vh.hasAnimatedSinceResize=!1,this.nodes.forEach(PE))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||f)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:x,hasRelativeTargetChanged:b,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||m.getDefaultTransition()||_U,{onLayoutAnimationStart:P,onLayoutAnimationComplete:U}=m.getProps(),H=!this.targetLayout||!NI(this.targetLayout,k)||b,z=!x&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||z||x&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,z);const X={...lv(C,"layout"),onPlay:P,onComplete:U};(m.shouldReduceMotion||this.options.layoutRoot)&&(X.delay=0,X.type=!1),this.startAnimation(X)}else x||PE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mU),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&DI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const v=this.path[m];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(IE);return}this.isUpdating||this.nodes.forEach(dU),this.isUpdating=!1,this.nodes.forEach(hU),this.nodes.forEach(oU),this.nodes.forEach(aU),this.clearAllSnapshots();const c=Mr.now();zt.delta=vs(0,1e3/60,c-zt.timestamp),zt.timestamp=c,zt.isProcessing=!0,xm.update.process(zt),xm.preRender.process(zt),xm.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cU),this.sharedNodes.forEach(gU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!RI(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;l&&(c||Zi(this.latestValues)||m)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),wU(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return mt();const d=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(xU))){const{scroll:m}=this.root;m&&(ja(d.x,m.offset.x),ja(d.y,m.offset.y))}return d}removeElementScroll(l){var c;const d=mt();if(Bn(d,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return d;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:v,options:x}=m;m!==this.root&&v&&x.layoutScroll&&(v.wasRoot&&Bn(d,l),ja(d.x,v.offset.x),ja(d.y,v.offset.y))}return d}applyTransform(l,c=!1){const d=mt();Bn(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Oa(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Zi(m.latestValues)&&Oa(d,m.latestValues)}return Zi(this.latestValues)&&Oa(d,this.latestValues),d}removeTransform(l){const c=mt();Bn(c,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Zi(f.latestValues))continue;Cg(f.latestValues)&&f.updateSnapshot();const m=mt(),v=f.measurePageBox();Bn(m,v),_E(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Zi(this.latestValues)&&_E(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:x}=this.options;if(!(!this.layout||!(v||x))){if(this.resolvedRelativeTargetAt=zt.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),ju(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=mt(),this.targetWithTransforms=mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),b4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bn(this.target,this.layout.layoutBox),SI(this.target,this.targetDelta)):Bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),ju(this.relativeTargetOrigin,this.target,b.target),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}bu&&eo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Cg(this.parent.latestValues)||bI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||v))return;Bn(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,b=this.treeScale.y;D4(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=mt());const{target:k}=c;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gE(this.prevProjectionDelta.x,this.projectionDelta.x),gE(this.prevProjectionDelta.y,this.projectionDelta.y)),Du(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==b||!bE(this.projectionDelta.x,this.prevProjectionDelta.x)||!bE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),bu&&eo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Da(),this.projectionDelta=Da(),this.projectionDeltaWithTransform=Da()}setAnimationOrigin(l,c=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},v=Da();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=mt(),b=d?d.source:void 0,k=this.layout?this.layout.source:void 0,C=b!==k,P=this.getStack(),U=!P||P.members.length<=1,H=!!(C&&!U&&this.options.crossfade===!0&&!this.path.some(vU));this.animationProgress=0;let z;this.mixTargetDelta=X=>{const J=X/1e3;kE(v.x,l.x,J),kE(v.y,l.y,J),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ju(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yU(this.relativeTarget,this.relativeTargetOrigin,x,J),z&&tU(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=mt()),Bn(z,this.relativeTarget)),C&&(this.animationValues=m,Q4(m,f,this.latestValues,J,H,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=J},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{vh.hasAnimatedSinceResize=!0,this.currentAnimation=z4(0,SE,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:m}=l;if(!(!c||!d||!f)){if(this!==l&&this.layout&&f&&OI(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||mt();const v=Cn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const x=Cn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+x}Bn(c,d),Oa(c,m),Du(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new nU),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&Cm("z",l,f,this.animationValues);for(let m=0;m<Am.length;m++)Cm(`rotate${Am[m]}`,l,f,this.animationValues),Cm(`skew${Am[m]}`,l,f,this.animationValues);l.render();for(const m in f)l.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);l.scheduleRender()}getProjectionStyles(l){var c,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return sU;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=gh(l==null?void 0:l.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=gh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Zi(this.latestValues)&&(C.transform=m?m({},""):"none",this.hasProjected=!1),C}const x=v.animationValues||v.latestValues;this.applyTransformsToTarget(),f.transform=rU(this.projectionDeltaWithTransform,this.treeScale,x),m&&(f.transform=m(x,f.transform));const{x:b,y:k}=this.projectionDelta;f.transformOrigin=`${b.origin*100}% ${k.origin*100}% 0`,v.animationValues?f.opacity=v===this?(d=(c=x.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:f.opacity=v===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const C in Fh){if(x[C]===void 0)continue;const{correct:P,applyTo:U}=Fh[C],H=f.transform==="none"?x[C]:P(x[C],v);if(U){const z=U.length;for(let X=0;X<z;X++)f[U[X]]=H}else f[C]=H}return this.options.layoutId&&(f.pointerEvents=v===this?gh(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(IE),this.root.sharedNodes.clear()}}}function oU(n){n.updateLayout()}function aU(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:o}=n.options,l=t.source!==n.layout.source;o==="size"?zn(v=>{const x=l?t.measuredBox[v]:t.layoutBox[v],b=Cn(x);x.min=r[v].min,x.max=x.min+b}):OI(o,t.layoutBox,r)&&zn(v=>{const x=l?t.measuredBox[v]:t.layoutBox[v],b=Cn(r[v]);x.max=x.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+b)});const c=Da();Du(c,r,t.layoutBox);const d=Da();l?Du(d,n.applyTransform(s,!0),t.measuredBox):Du(d,r,t.layoutBox);const f=!RI(c);let m=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:x,layout:b}=v;if(x&&b){const k=mt();ju(k,t.layoutBox,x.layoutBox);const C=mt();ju(C,r,b.layoutBox),NI(k,C)||(m=!0),v.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=k,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function lU(n){bu&&eo.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function uU(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function cU(n){n.clearSnapshot()}function IE(n){n.clearMeasurements()}function dU(n){n.isLayoutDirty=!1}function hU(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function PE(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function fU(n){n.resolveTargetDelta()}function pU(n){n.calcProjection()}function mU(n){n.resetSkewAndRotation()}function gU(n){n.removeLeadSnapshot()}function kE(n,e,t){n.translate=ut(e.translate,0,t),n.scale=ut(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function AE(n,e,t,r){n.min=ut(e.min,t.min,r),n.max=ut(e.max,t.max,r)}function yU(n,e,t,r){AE(n.x,e.x,t.x,r),AE(n.y,e.y,t.y,r)}function vU(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const _U={duration:.45,ease:[.4,0,.1,1]},CE=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),RE=CE("applewebkit/")&&!CE("chrome/")?Math.round:An;function NE(n){n.min=RE(n.min),n.max=RE(n.max)}function wU(n){NE(n.x),NE(n.y)}function OI(n,e,t){return n==="position"||n==="preserve-aspect"&&!T4(TE(e),TE(t),.2)}function xU(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const EU=jI({attachResizeListener:(n,e)=>rc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rm={current:void 0},MI=jI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Rm.current){const n=new EU({});n.mount(window),n.setOptions({layoutScroll:!0}),Rm.current=n}return Rm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),TU={pan:{Feature:U4},drag:{Feature:L4,ProjectionNode:MI,MeasureLayout:kI}};function DE(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=r[s];o&&st.postRender(()=>o(e,Sc(e)))}class bU extends wi{mount(){const{current:e}=this.node;e&&(this.unmount=TV(e,t=>(DE(this.node,t,"Start"),r=>DE(this.node,r,"End"))))}unmount(){}}class SU extends wi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bc(rc(this.node.current,"focus",()=>this.onFocus()),rc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jE(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=r[s];o&&st.postRender(()=>o(e,Sc(e)))}class IU extends wi{mount(){const{current:e}=this.node;e&&(this.unmount=PV(e,t=>(jE(this.node,t,"Start"),(r,{success:s})=>jE(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ng=new WeakMap,Nm=new WeakMap,PU=n=>{const e=Ng.get(n.target);e&&e(n)},kU=n=>{n.forEach(PU)};function AU({root:n,...e}){const t=n||document;Nm.has(t)||Nm.set(t,{});const r=Nm.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(kU,{root:n,...e})),r[s]}function CU(n,e,t){const r=AU(e);return Ng.set(n,t),r.observe(n),()=>{Ng.delete(n),r.unobserve(n)}}const RU={some:0,all:1};class NU extends wi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:RU[s]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:v}=this.node.getProps(),x=f?m:v;x&&x(d)};return CU(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(DU(e,t))&&this.startObserver()}unmount(){}}function DU({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const jU={inView:{Feature:NU},tap:{Feature:IU},focus:{Feature:SU},hover:{Feature:bU}},OU={layout:{ProjectionNode:MI,MeasureLayout:kI}},Dg={current:null},VI={current:!1};function MU(){if(VI.current=!0,!!Gy)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dg.current=n.matches;n.addListener(e),e()}else Dg.current=!1}const VU=[...lI,Zt,fi],LU=n=>VU.find(aI(n)),OE=new WeakMap;function UU(n,e,t){for(const r in e){const s=e[r],o=t[r];if(nn(s))n.addValue(r,s);else if(nn(o))n.addValue(r,tc(s,{owner:n}));else if(o!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,tc(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const ME=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class FU{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Mr.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,st.render(this.render,!1,!0))};const{latestValues:d,renderState:f,onUpdate:m}=l;this.onUpdate=m,this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Tf(t),this.isVariantNode=g1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(t,{},this);for(const b in x){const k=x[b];d[b]!==void 0&&nn(k)&&k.set(d[b],!1)}}mount(e){this.current=e,OE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),VI.current||MU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){OE.delete(this.current),this.projection&&this.projection.unmount(),hi(this.notifyUpdate),hi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=xo.has(e),s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&st.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Xa){const t=Xa[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<ME.length;r++){const s=ME[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=UU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=tc(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(iI(s)||Y1(s))?s=parseFloat(s):!LU(s)&&fi.test(t)&&(s=nI(e,t)),this.setBaseTarget(e,nn(s)?s.get():s)),nn(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const l=ev(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);l&&(s=l[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!nn(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new pv),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class LI extends FU{constructor(){super(...arguments),this.KeyframeResolver=uI}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function $U(n){return window.getComputedStyle(n)}class BU extends LI{constructor(){super(...arguments),this.type="html",this.renderInstance=S1}readValueFromInstance(e,t){if(xo.has(t)){const r=_v(t);return r&&r.default||0}else{const r=$U(e),s=(E1(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return II(e,t)}build(e,t,r){rv(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return av(e,t,r)}}class zU extends LI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(xo.has(t)){const r=_v(t);return r&&r.default||0}return t=I1.has(t)?t:Xy(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return A1(e,t,r)}build(e,t,r){sv(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,s){P1(e,t,r,s)}mount(e){this.isSVGTag=ov(e.tagName),super.mount(e)}}const qU=(n,e)=>Zy(n)?new zU(e):new BU(e,{allowProjection:n!==L.Fragment}),WU=gV({...p4,...jU,...TU,...OU},qU),Y=RM(WU);function UI({children:n,title:e,subtitle:t}){return y.jsxs("div",{className:"min-h-screen bg-gray-900 flex",children:[y.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12",children:y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md w-full space-y-8",children:[y.jsx(ar,{to:"/",className:"block",children:y.jsxs(Y.div,{className:"flex items-center justify-center space-x-2",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[y.jsx("img",{src:"/src/Imgs/Duda_.png",alt:"Reviver Imagem Logo",className:"w-10 h-10 object-contain"}),y.jsx("span",{className:"text-2xl font-bold text-white",children:"Reviver Imagem"})]})}),y.jsxs("div",{className:"text-center",children:[y.jsx(Y.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-3xl font-bold text-white",children:e}),y.jsx(Y.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-2 text-gray-400",children:t})]}),n]})}),y.jsx(Y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8},className:"hidden lg:block relative flex-1",children:y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:y.jsxs("div",{className:"relative w-full max-w-lg mx-8",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:"/src/Imgs/Antes.png",alt:"Antes",className:"w-full rounded-lg shadow-xl"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-800/50 to-transparent"}),y.jsx("div",{className:"absolute bottom-4 left-4 text-white",children:y.jsx("span",{className:"text-sm font-medium bg-gray-900/50 px-2 py-1 rounded",children:"Antes"})})]}),y.jsxs("div",{className:"relative mt-4",children:[y.jsx("img",{src:"/src/Imgs/Depois.png",alt:"Depois",className:"w-full rounded-lg shadow-xl"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-800/50 to-transparent"}),y.jsx("div",{className:"absolute bottom-4 left-4 text-white",children:y.jsx("span",{className:"text-sm font-medium bg-gray-900/50 px-2 py-1 rounded",children:"Depois"})})]}),y.jsx("div",{className:"absolute -bottom-8 left-4 right-4 text-center",children:y.jsx("p",{className:"text-gray-400 text-sm italic",children:'"Os resultados são realmente impressionantes. Comparamos com várias pequenas fotos que foram ampliadas com um método básico de interpolação do Photoshop"'})})]})})})]})}function HU(){const[n,e]=L.useState(""),[t,r]=L.useState(""),[s,o]=L.useState(""),l=Rn(),c=async f=>{f.preventDefault(),o("");try{const m=await yN(rt,n,t);await Lh(m.user.uid,{email:m.user.email||"",displayName:m.user.displayName||""}),l("/",{replace:!0})}catch(m){o("Falha no login. Verifique suas credenciais."),console.error("Login error:",m)}},d=async()=>{o("");try{const f=new Pr,m=await Ab(rt,f);await Lh(m.user.uid,{email:m.user.email||"",displayName:m.user.displayName||""}),l("/",{replace:!0})}catch(f){o("Falha no login com Google."),console.error("Google login error:",f)}};return y.jsx(UI,{title:"Bem-vindo de volta",subtitle:"Faça login para continuar melhorando suas imagens",children:y.jsxs("div",{className:"mt-8 space-y-6",children:[s&&y.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-2 rounded-lg",children:s}),y.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-700 rounded-lg shadow-sm text-white bg-gray-800 hover:bg-gray-700 transition-colors",children:[y.jsx("img",{className:"h-5 w-5 mr-2",src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google logo"}),y.jsx("span",{children:"Continuar com Google"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-700"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"ou"})})]}),y.jsxs("form",{onSubmit:c,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email"}),y.jsx("div",{className:"mt-1",children:y.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:f=>e(f.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-lg shadow-sm bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Senha"}),y.jsx("div",{className:"mt-1",children:y.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:f=>r(f.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-lg shadow-sm bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{id:"newsletter",name:"newsletter",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-700 rounded bg-gray-800"}),y.jsx("label",{htmlFor:"newsletter",className:"ml-2 block text-sm text-gray-400",children:"Receba as novidades, descontos e atualizações"})]}),y.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Entrar"})]}),y.jsx("div",{className:"text-center text-sm",children:y.jsxs("span",{className:"text-gray-400",children:["Não tem uma conta?"," ",y.jsx(ar,{to:"/register",className:"text-blue-500 hover:text-blue-400",children:"Criar conta"})]})}),y.jsxs("div",{className:"text-center text-xs text-gray-400",children:["Ao se inscrever em uma conta, você concorda com a"," ",y.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Política de Privacidade"})," ","e os"," ",y.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Termos e Condições"}),"."]})]})})}function GU(){const[n,e]=L.useState(""),[t,r]=L.useState(""),[s,o]=L.useState(""),[l,c]=L.useState(!1),d=Rn(),f=async v=>{v.preventDefault();try{const b=(await gN(rt,n,t)).user;await vN(b),c(!0),await Lh(b.uid,{email:b.email||"",displayName:b.displayName||""}),o("Por favor, verifique seu email para ativar sua conta. Um link de verificação foi enviado.")}catch(x){switch(x.code){case"auth/email-already-in-use":o("Este email já está em uso. Por favor, use outro email ou faça login.");break;case"auth/weak-password":o("A senha é muito fraca. Use pelo menos 6 caracteres.");break;default:o("Falha no registro. Tente novamente.")}}},m=async()=>{try{const v=new Pr,x=await Ab(rt,v);await Lh(x.user.uid,{email:x.user.email||"",displayName:x.user.displayName||""}),d("/",{replace:!0})}catch{o("Falha no registro com Google.")}};return y.jsx(UI,{title:"Comece com 10 imagens grátis",subtitle:"Crie sua conta para começar",children:y.jsxs(Y.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-8 space-y-6",children:[s&&y.jsx(Y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`px-4 py-3 rounded-lg text-sm ${l?"bg-blue-500/10 border border-blue-500 text-blue-500":"bg-red-500/10 border border-red-500 text-red-500"}`,children:s}),y.jsxs(Y.button,{onClick:m,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-center px-4 py-3 border border-gray-700 rounded-lg shadow-sm text-white bg-gray-800 hover:bg-gray-700 transition-colors",children:[y.jsx("img",{className:"h-5 w-5 mr-2",src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google logo"}),y.jsx("span",{children:"Continuar com Google"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-700"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"ou"})})]}),y.jsxs("form",{onSubmit:f,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email"}),y.jsx("div",{className:"mt-1",children:y.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:v=>e(v.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-lg shadow-sm bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Senha"}),y.jsx("div",{className:"mt-1",children:y.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:t,onChange:v=>r(v.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-lg shadow-sm bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{id:"newsletter",name:"newsletter",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-700 rounded bg-gray-800"}),y.jsx("label",{htmlFor:"newsletter",className:"ml-2 block text-sm text-gray-400",children:"Receba as novidades, descontos e atualizações"})]}),y.jsx(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Criar conta"})]}),y.jsx("div",{className:"text-center text-sm",children:y.jsxs("span",{className:"text-gray-400",children:["Já tem uma conta?"," ",y.jsx(ar,{to:"/login",className:"text-blue-500 hover:text-blue-400",children:"Faça login"})]})}),y.jsxs("div",{className:"text-center text-xs text-gray-400",children:["Ao se inscrever em uma conta, você concorda com a"," ",y.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Política de Privacidade"})," ","e os"," ",y.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Termos e Condições"}),"."]})]})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),De=(n,e)=>{const t=L.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,...f},m)=>L.createElement("svg",{ref:m,...KU,width:s,height:s,stroke:r,strokeWidth:l?Number(o)*24/Number(s):o,className:["lucide",`lucide-${QU(n)}`,c].join(" "),...f},[...e.map(([v,x])=>L.createElement(v,x)),...Array.isArray(d)?d:[d]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=De("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=De("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=De("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=De("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=De("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=De("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=De("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=De("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=De("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=De("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=De("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=De("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=De("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=De("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=De("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=De("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=De("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function dF(){const[n,e]=L.useState(!1),t=Rn(),r=rt.currentUser,s=o=>{e(!1),t(o)};return y.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[y.jsxs(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/my-images"),className:"flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors",children:[y.jsx(BI,{size:18}),y.jsx("span",{children:"Minhas Imagens"})]}),y.jsxs("div",{className:"relative",children:[y.jsx(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(!n),className:"flex items-center space-x-2",children:y.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-purple-500",children:y.jsx("img",{src:(r==null?void 0:r.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${encodeURIComponent((r==null?void 0:r.email)||"default")}`,alt:"Foto de perfil",className:"w-full h-full object-cover",onError:o=>{o.target.src="https://via.placeholder.com/150"}})})}),y.jsx(jr,{children:n&&y.jsxs(Y.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg py-1 border border-gray-700",children:[y.jsxs("div",{className:"px-4 py-2 border-b border-gray-700",children:[y.jsx("p",{className:"text-sm font-medium text-white truncate",children:(r==null?void 0:r.displayName)||"Usuário"}),y.jsx("p",{className:"text-xs text-gray-400 truncate",children:r==null?void 0:r.email})]}),y.jsxs("button",{onClick:()=>s("/profile"),className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 transition-colors",children:[y.jsx(Sv,{size:16}),y.jsx("span",{children:"Perfil"})]}),y.jsxs("button",{onClick:()=>s("/settings"),className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 transition-colors",children:[y.jsx(Fa,{size:16}),y.jsx("span",{children:"Configurações"})]}),y.jsxs("button",{onClick:()=>rt.signOut(),className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-red-400 hover:bg-gray-700 transition-colors",children:[y.jsx(If,{size:16}),y.jsx("span",{children:"Sair"})]})]})})]})]})}function hF(){const[n,e]=L.useState(!1),t=Rn(),r=rt.currentUser,s=o=>{e(!1),t(o)};return y.jsxs("div",{className:"sm:hidden",children:[y.jsx(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(!n),className:"flex items-center space-x-2",children:y.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-purple-500",children:y.jsx("img",{src:(r==null?void 0:r.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${encodeURIComponent((r==null?void 0:r.email)||"default")}`,alt:"Foto de perfil",className:"w-full h-full object-cover",onError:o=>{o.target.src="https://via.placeholder.com/150"}})})}),y.jsx(jr,{children:n&&y.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:()=>e(!1),children:y.jsx(Y.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute right-0 top-0 bottom-0 w-full max-w-[320px] bg-gray-900 overflow-y-auto",onClick:o=>o.stopPropagation(),children:y.jsxs("div",{className:"p-6 space-y-6",children:[y.jsxs(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.95},onClick:()=>e(!1),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[y.jsx(Ou,{size:20}),y.jsx("span",{children:"Voltar"})]}),y.jsxs("div",{className:"flex items-center gap-4 pb-6 border-b border-gray-800",children:[y.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-2 border-purple-500",children:y.jsx("img",{src:(r==null?void 0:r.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${r==null?void 0:r.email}`,alt:"Foto de perfil",className:"w-full h-full object-cover"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.displayName)||"Usuário"}),y.jsx("p",{className:"text-sm text-gray-400",children:r==null?void 0:r.email})]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs(Y.button,{whileTap:{scale:.95},onClick:()=>s("/my-images"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg bg-purple-600 text-white",children:[y.jsx("span",{children:"Minhas Imagens"}),y.jsx(BI,{size:20})]}),y.jsxs(Y.button,{whileTap:{scale:.95},onClick:()=>s("/profile"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg bg-gray-800 text-gray-300 hover:bg-gray-700 transition-colors",children:[y.jsx("span",{children:"Perfil"}),y.jsx(Sv,{size:20})]}),y.jsxs(Y.button,{whileTap:{scale:.95},onClick:()=>s("/settings"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg bg-gray-800 text-gray-300 hover:bg-gray-700 transition-colors",children:[y.jsx("span",{children:"Configurações"}),y.jsx(Fa,{size:20})]})]}),y.jsx("div",{className:"pt-6 border-t border-gray-800",children:y.jsxs(Y.button,{whileTap:{scale:.95},onClick:()=>rt.signOut(),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:[y.jsx("span",{children:"Sair da conta"}),y.jsx(If,{size:20})]})})]})})})})]})}function HI(){const[n,e]=L.useState(!1),t=Rn(),r=rt.currentUser;return n?y.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900",children:y.jsxs(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,type:"spring"},className:"text-center",children:[y.jsx(Y.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-4xl font-bold text-white mb-4",children:"Até logo!"}),y.jsx(Y.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-gray-400",children:"Esperamos ver você em breve"})]})}):r?y.jsxs(y.Fragment,{children:[y.jsx(dF,{}),y.jsx(hF,{})]}):y.jsx("div",{className:"flex items-center space-x-4",children:y.jsx(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/login"),className:"px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors",children:"Fazer Login"})})}const fF={},LE=n=>{let e;const t=new Set,r=(m,v)=>{const x=typeof m=="function"?m(e):m;if(!Object.is(x,e)){const b=e;e=v??(typeof x!="object"||x===null)?x:Object.assign({},e,x),t.forEach(k=>k(e,b))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:m=>(t.add(m),()=>t.delete(m)),destroy:()=>{(fF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},f=e=n(r,s,d);return d},pF=n=>n?LE(n):LE;var Dm={exports:{}},jm={},Om={exports:{}},Mm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function mF(){if(UE)return Mm;UE=1;var n=oc();function e(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function c(v,x){var b=x(),k=r({inst:{value:b,getSnapshot:x}}),C=k[0].inst,P=k[1];return o(function(){C.value=b,C.getSnapshot=x,d(C)&&P({inst:C})},[v,b,x]),s(function(){return d(C)&&P({inst:C}),v(function(){d(C)&&P({inst:C})})},[v]),l(b),b}function d(v){var x=v.getSnapshot;v=v.value;try{var b=x();return!t(v,b)}catch{return!0}}function f(v,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return Mm.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Mm}var FE;function gF(){return FE||(FE=1,Om.exports=mF()),Om.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function yF(){if($E)return jm;$E=1;var n=oc(),e=gF();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return jm.useSyncExternalStoreWithSelector=function(f,m,v,x,b){var k=o(null);if(k.current===null){var C={hasValue:!1,value:null};k.current=C}else C=k.current;k=c(function(){function U(ie){if(!H){if(H=!0,z=ie,ie=x(ie),b!==void 0&&C.hasValue){var D=C.value;if(b(D,ie))return X=D}return X=ie}if(D=X,r(z,ie))return D;var S=x(ie);return b!==void 0&&b(D,S)?(z=ie,D):(z=ie,X=S)}var H=!1,z,X,J=v===void 0?null:v;return[function(){return U(m())},J===null?void 0:function(){return U(J())}]},[m,v,x,b]);var P=s(f,k[0],k[1]);return l(function(){C.hasValue=!0,C.value=P},[P]),d(P),P},jm}var BE;function vF(){return BE||(BE=1,Dm.exports=yF()),Dm.exports}var _F=vF();const wF=Qh(_F),GI={},{useDebugValue:xF}=Lu,{useSyncExternalStoreWithSelector:EF}=wF;let zE=!1;const TF=n=>n;function bF(n,e=TF,t){(GI?"production":void 0)!=="production"&&t&&!zE&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),zE=!0);const r=EF(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return xF(r),r}const qE=n=>{(GI?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?pF(n):n,t=(r,s)=>bF(e,r,s);return Object.assign(t,e),t},SF=n=>n?qE(n):qE,IF=SF(n=>({pendingUpload:null,setPendingUpload:e=>n({pendingUpload:e})}));function PF(){const[n,e]=L.useState(50),[t,r]=L.useState(!1),[s,o]=L.useState(null),l=L.useRef(null),c=Rn(),[d]=il(rt),f=IF(S=>S.setPendingUpload),[m,v]=L.useState(!1),x=S=>{S.preventDefault(),r(!0)},b=S=>{S.preventDefault(),r(!1)},k=L.useCallback(async S=>{S.preventDefault(),r(!1),o(null);const A=Array.from(S.dataTransfer.files);A.length>0&&await P(A[0])},[]),C=async S=>{o(null),S.target.files&&S.target.files.length>0&&await P(S.target.files[0])},P=async S=>{try{if(!S.type.match(/^image\/(jpeg|png|webp)$/))throw new Error("Formato de arquivo não suportado. Use JPG, PNG ou WebP.");if(S.size>50*1024*1024)throw new Error("Arquivo muito grande. O tamanho máximo é 50MB.");if(!d){c("/login");return}f(S),c("/my-images")}catch(A){o(A instanceof Error?A.message:"Erro ao fazer upload da imagem")}},U=()=>{var S;(S=l.current)==null||S.click()},H=()=>{r(!0)},z=()=>{r(!1)},X=S=>{if(t){const A=S.currentTarget.getBoundingClientRect(),M=Math.max(0,Math.min(S.clientX-A.left,A.width))/A.width*100;e(M)}},J=S=>{const A=S.touches[0],j=S.currentTarget.getBoundingClientRect(),$=Math.max(0,Math.min(A.clientX-j.left,j.width))/j.width*100;e($)},ie={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},D={animate:{transition:{staggerChildren:.1}}};return y.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[y.jsxs(Y.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:100},className:"border-b border-gray-800 fixed w-full bg-gray-900/95 backdrop-blur-sm z-50",children:[y.jsxs("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[y.jsxs(Y.div,{className:"flex items-center space-x-2",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[y.jsx("img",{src:"/Duda_.png",alt:"Reviver Imagem Logo",className:"w-8 h-8 object-contain"}),y.jsx("span",{className:"text-xl font-bold",children:"Reviver Imagem"})]}),y.jsx("div",{className:"md:hidden",children:y.jsx(Y.button,{whileTap:{scale:.95},onClick:()=>v(!m),className:"p-2",children:m?y.jsx(fs,{size:24}):y.jsx(zI,{size:24})})}),y.jsx("div",{className:"hidden md:flex items-center space-x-4",children:d?y.jsx(HI,{}):y.jsxs(y.Fragment,{children:[y.jsx(ar,{to:"/login",children:y.jsx(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-lg text-white hover:text-purple-400 transition",children:"Entrar"})}),y.jsx(ar,{to:"/register",children:y.jsx(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 transition",children:"Criar Conta"})})]})})]}),y.jsx(jr,{children:m&&y.jsx(Y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"sm:hidden bg-gray-800 border-t border-gray-700",children:y.jsxs("div",{className:"p-4 space-y-4",children:[d&&y.jsxs("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-700",children:[y.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-purple-500",children:y.jsx("img",{src:(d==null?void 0:d.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${d==null?void 0:d.email}`,alt:"Foto de perfil",className:"w-full h-full object-cover"})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-white",children:(d==null?void 0:d.displayName)||"Usuário"}),y.jsx("p",{className:"text-sm text-gray-400",children:d==null?void 0:d.email})]})]}),d?y.jsxs("div",{className:"space-y-3",children:[y.jsx(ar,{to:"/my-images",children:y.jsx(Y.button,{whileTap:{scale:.95},className:"w-full px-4 py-2 rounded-lg bg-purple-600 text-white",children:"Minhas Imagens"})}),y.jsx(ar,{to:"/settings",children:y.jsx(Y.button,{whileTap:{scale:.95},className:"w-full px-4 py-2 rounded-lg bg-gray-700 text-gray-300",children:"Configurações"})}),y.jsx(Y.button,{whileTap:{scale:.95},onClick:()=>rt.signOut(),className:"w-full px-4 py-2 rounded-lg bg-red-600/20 text-red-500",children:"Sair"})]}):y.jsxs("div",{className:"space-y-3",children:[y.jsx(ar,{to:"/login",className:"block",children:y.jsx(Y.button,{whileTap:{scale:.95},className:"w-full px-4 py-2 rounded-lg bg-gray-700 text-white",onClick:()=>v(!1),children:"Entrar"})}),y.jsx(ar,{to:"/register",className:"block",children:y.jsx(Y.button,{whileTap:{scale:.95},className:"w-full px-4 py-2 rounded-lg bg-purple-600 text-white",onClick:()=>v(!1),children:"Criar Conta"})})]})]})})})]}),y.jsx("main",{className:"pt-16",children:y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-16",children:[y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8 md:mb-16",children:[y.jsxs(Y.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8},className:"text-3xl md:text-6xl font-bold mb-6",children:["Melhore suas Imagens com",y.jsx(Y.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-purple-500",children:" IA"})]}),y.jsxs(Y.div,{variants:D,initial:"initial",animate:"animate",className:"max-w-3xl mx-auto space-y-4 text-gray-400 mb-8",children:[y.jsxs(Y.p,{variants:ie,className:"flex items-center justify-center gap-2 text-sm md:text-base",children:[y.jsx(aF,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-500"}),"Aumente a resolução da imagem e melhore a qualidade"]}),y.jsxs(Y.p,{variants:ie,className:"flex items-center justify-center gap-2 text-sm md:text-base",children:[y.jsx(Hh,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-500"}),"Transforme fotos borradas e pixeladas em imagens nítidas"]}),y.jsxs(Y.p,{variants:ie,className:"flex items-center justify-center gap-2 text-sm md:text-base",children:[y.jsx(bv,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-500"}),"Crie arte com IA em 4K, amplie até 500 MP"]})]}),y.jsx(Y.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3},className:"w-full max-w-md mx-auto mb-12",children:y.jsx(ar,{to:d?"/my-images":"/register",children:y.jsxs(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full py-4 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl font-bold text-lg shadow-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-300",children:["Começar Agora",y.jsx(Y.span,{animate:{x:[0,4,0]},transition:{duration:1.5,repeat:1/0},className:"inline-block ml-2",children:"→"})]})})}),y.jsxs(Y.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.3},onDragEnter:x,onDragOver:S=>S.preventDefault(),onDragLeave:b,onDrop:k,onClick:U,className:`relative h-48 sm:h-72 border-2 border-dashed border-gray-700 rounded-lg flex items-center justify-center transition-all duration-300 overflow-hidden cursor-pointer ${t?"border-purple-500 bg-purple-500/10":"hover:border-gray-600"}`,children:[y.jsx("input",{ref:l,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:C,className:"hidden",id:"file-upload"}),y.jsxs("div",{className:"text-center px-4",children:[y.jsx(Og,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-600 mx-auto mb-4"}),y.jsxs("p",{className:"text-gray-400 mb-2 text-sm sm:text-base",children:["Solte suas imagens aqui, ou"," ",y.jsx("span",{className:"text-purple-500",children:"procure"})]}),y.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 text-xs sm:text-sm",children:[y.jsx("span",{children:"ou importe de"}),y.jsx("button",{className:"px-3 py-1 bg-gray-800 rounded-md flex items-center gap-1 hover:bg-gray-700 transition-colors",children:y.jsx(WI,{className:"w-4 h-4"})}),y.jsx("button",{className:"px-3 py-1 bg-gray-800 rounded-md flex items-center gap-1 hover:bg-gray-700 transition-colors",children:y.jsx(FI,{className:"w-4 h-4"})})]}),y.jsx("p",{className:"text-gray-600 text-xs mt-2",children:"JPG, PNG, WebP até 50 mb"})]}),y.jsx(jr,{children:s&&y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute bottom-4 left-4 right-4 bg-red-500/10 border border-red-500 text-red-500 px-4 py-2 rounded-lg flex items-center justify-between text-sm",children:[y.jsx("span",{children:s}),y.jsx("button",{onClick:S=>{S.stopPropagation(),o(null)},className:"text-red-500 hover:text-red-400",children:y.jsx(fs,{size:20})})]})})]})]}),y.jsxs(Y.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},className:"mt-16 md:mt-32 mb-12 md:mb-24",children:[y.jsx(Y.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-2xl md:text-3xl font-bold text-center mb-8 md:mb-12",children:"Veja a Diferença"}),y.jsx("div",{className:"max-w-4xl mx-auto",children:y.jsxs(Y.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"relative h-[300px] md:h-[500px] rounded-xl overflow-hidden cursor-ew-resize shadow-2xl",onMouseDown:H,onMouseUp:z,onMouseMove:X,onMouseLeave:z,onTouchMove:J,onTouchEnd:z,children:[y.jsx("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:'url("/Depois.png")',backgroundSize:"cover",backgroundPosition:"center"}}),y.jsx("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:'url("/Antes.png")',backgroundSize:"cover",backgroundPosition:"center",clipPath:`polygon(0 0, ${n}% 0, ${n}% 100%, 0 100%)`}}),y.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white cursor-ew-resize",style:{left:`${n}%`},children:y.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center",children:y.jsx(Y.div,{animate:{rotate:t?180:0},className:"w-4 h-4 border-r-2 border-b-2 border-gray-800 transform rotate-45"})})}),y.jsx("div",{className:"absolute bottom-4 left-4 bg-black/50 px-3 py-1 rounded-full text-sm",children:"Antes"}),y.jsx("div",{className:"absolute bottom-4 right-4 bg-black/50 px-3 py-1 rounded-full text-sm",children:"Depois"})]})})]}),y.jsx(Y.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8 mb-12 md:mb-24 text-center",children:[{value:"500K+",label:"Imagens Processadas"},{value:"50K+",label:"Usuários Ativos"},{value:"99.9%",label:"Uptime"},{value:"4.9/5",label:"Avaliação Média"}].map((S,A)=>y.jsxs(Y.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:A*.1},className:"p-4",children:[y.jsx(Y.div,{initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{type:"spring",stiffness:100,delay:A*.1},className:"text-2xl md:text-4xl font-bold text-purple-500",children:S.value}),y.jsx("div",{className:"text-sm md:text-base text-gray-400 mt-2",children:S.label})]},A))}),y.jsx(Y.div,{variants:D,initial:"initial",whileInView:"animate",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8 mb-12 md:mb-24",children:[{icon:ZU,title:"Melhore Fotos",desc:"Transforme suas fotos com nossa tecnologia de IA avançada"},{icon:Hh,title:"Corrija Borrões",desc:"Diga adeus às imagens borradas e pixeladas"},{icon:lF,title:"Gere Arte",desc:"Crie arte impressionante com IA em resolução 4K"}].map((S,A)=>y.jsxs(Y.div,{variants:ie,whileHover:{scale:1.05},className:"bg-gray-800 p-4 md:p-6 rounded-xl",children:[y.jsx(Y.div,{whileHover:{rotate:360},transition:{duration:.6},className:"w-10 h-10 md:w-12 md:h-12 bg-purple-500/20 rounded-lg flex items-center justify-center mb-4",children:y.jsx(S.icon,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-500"})}),y.jsx("h3",{className:"text-base md:text-lg font-semibold mb-2",children:S.title}),y.jsx("p",{className:"text-sm md:text-base text-gray-400",children:S.desc})]},A))}),y.jsxs(Y.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},className:"mb-12 md:mb-24",children:[y.jsx(Y.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-2xl md:text-3xl font-bold text-center mb-8 md:mb-12",children:"Por que escolher Reviver Imagem?"}),y.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8",children:[{icon:Aa,title:"Rápido",desc:"Resultados em segundos"},{icon:ro,title:"Seguro",desc:"Dados sempre protegidos"},{icon:qI,title:"Alta Qualidade",desc:"Resultados profissionais"},{icon:ka,title:"Suporte 24/7",desc:"Sempre aqui para ajudar"}].map((S,A)=>y.jsxs(Y.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:A*.1},className:"text-center p-4",children:[y.jsx(Y.div,{whileHover:{scale:1.1,rotate:360},transition:{duration:.6},className:"w-10 h-10 md:w-12 md:h-12 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(S.icon,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-500"})}),y.jsx("h3",{className:"text-sm md:text-base font-semibold mb-2",children:S.title}),y.jsx("p",{className:"text-xs md:text-sm text-gray-400",children:S.desc})]},A))})]}),!d&&y.jsxs(Y.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"bg-gradient-to-r from-purple-600 to-purple-800 rounded-2xl p-6 md:p-12 text-center",children:[y.jsx(Y.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-2xl md:text-3xl font-bold mb-4 md:mb-6",children:"Comece a Melhorar suas Imagens Hoje"}),y.jsx(Y.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-base md:text-lg text-purple-100 mb-6 md:mb-8 max-w-2xl mx-auto",children:"Junte-se a milhares de usuários que já estão transformando suas imagens com IA"}),y.jsx(ar,{to:"/register",children:y.jsx(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 md:px-8 py-3 md:py-4 bg-white text-purple-600 rounded-lg font-semibold hover:bg-gray-100 transition text-sm md:text-base",children:"Criar Conta Gratuita"})})]})]})}),y.jsx("footer",{className:"border-t border-gray-800 mt-12 md:mt-24",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[y.jsx("img",{src:"/Duda_.png",alt:"Reviver Imagem Logo",className:"w-6 h-6 md:w-8 md:h-8 object-contain"}),y.jsx("span",{className:"text-lg md:text-xl font-bold",children:"Reviver Imagem"})]}),y.jsx("p",{className:"text-sm md:text-base text-gray-400",children:"Transformando imagens com o poder da IA"})]}),[{title:"Produto",items:["Recursos","Preços","API","Blog"]},{title:"Empresa",items:["Sobre","Carreiras","Contato","Imprensa"]},{title:"Legal",items:["Privacidade","Termos","Cookies","Licenças"]}].map((S,A)=>y.jsxs("div",{className:"col-span-1",children:[y.jsx("h3",{className:"text-sm md:text-base font-semibold mb-4",children:S.title}),y.jsx("ul",{className:"space-y-2 text-sm md:text-base text-gray-400",children:S.items.map((j,M)=>y.jsx("li",{className:"hover:text-white cursor-pointer",children:j},M))})]},A))]})})})]})}var KI="https://js.stripe.com/v3",kF=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var AF=function(){for(var e=document.querySelectorAll('script[src^="'.concat(KI,'"]')),t=0;t<e.length;t++){var r=e[t];if(kF.test(r.src))return r}return null},WE=function(e){var t="",r=document.createElement("script");r.src="".concat(KI).concat(t);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},du=null,eh=null,th=null,CF=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},RF=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},NF=function(e){return du!==null?du:(du=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var s=AF();if(!(s&&e)){if(!s)s=WE(e);else if(s&&th!==null&&eh!==null){var o;s.removeEventListener("load",th),s.removeEventListener("error",eh),(o=s.parentNode)===null||o===void 0||o.removeChild(s),s=WE(e)}}th=RF(t,r),eh=CF(r),s.addEventListener("load",th),s.addEventListener("error",eh)}catch(l){r(l);return}}),du.catch(function(t){return du=null,Promise.reject(t)}))},hu,DF=function(){return hu||(hu=NF(null).catch(function(e){return hu=null,Promise.reject(e)}),hu)};Promise.resolve().then(function(){return DF()}).catch(function(n){console.warn(n)});const jF=Promise.reject(new Error("Stripe public key is not configured")),QI="https://www.reviverimagem.shop/api",HE={free:{id:"free",name:"Plano Gratuito",credits:10,price:0,description:"10 créditos diários",features:["Acesso básico","10 créditos diários","Sem compromisso"]},basic:{id:"basic",name:"Plano Básico",credits:100,price:29.9,description:"100 créditos diários",features:["Acesso premium","100 créditos diários","Suporte prioritário"]},pro:{id:"pro",name:"Plano Profissional",credits:200,price:49.9,description:"200 créditos diários",features:["Acesso premium","200 créditos diários","Suporte prioritário","Recursos avançados"]},enterprise:{id:"enterprise",name:"Plano Enterprise",credits:300,price:79.9,description:"300 créditos diários",features:["Acesso premium","300 créditos diários","Suporte VIP","Recursos avançados","API access"]}};async function OF(n){try{const e=rt.currentUser;if(!e)throw new Error("User not authenticated");const t=await jF;if(!t)throw new Error("Stripe failed to initialize");const r=await fetch(`${QI}/create-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:n.id,userId:e.uid,userEmail:e.email})});if(!r.ok){const l=await r.json();throw new Error(l.error||"Failed to create subscription")}const s=await r.json(),{error:o}=await t.redirectToCheckout({sessionId:s.id});if(o)throw o}catch(e){throw console.error("Error creating subscription:",e),e}}async function MF(){try{const n=rt.currentUser;if(!n)throw new Error("User not authenticated");const e=await fetch(`${QI}/subscription-status?userId=${n.uid}`);if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to get subscription status")}return await e.json()}catch(n){throw console.error("Error getting subscription status:",n),n}}function VF(){const[n]=FA(),e=Rn(),[t,r]=L.useState("processing"),[s,o]=L.useState("");L.useEffect(()=>{(async()=>{try{if(!n.get("session_id")){r("failed"),o("Sessão de pagamento não encontrada");return}(await MF()).status==="active"?(r("success"),o("Assinatura ativada com sucesso! Seus créditos diários já estão disponíveis.")):(r("failed"),o("Falha ao ativar a assinatura")),setTimeout(()=>{e("/my-images")},3e3)}catch(f){console.error("Error verifying subscription:",f),r("failed"),o("Erro ao verificar a assinatura. Por favor, contate o suporte.")}})()},[n,e]);const c={processing:{icon:tF,color:"text-yellow-500",bgColor:"bg-yellow-500/20",borderColor:"border-yellow-500",title:"Processando assinatura"},success:{icon:eF,color:"text-green-500",bgColor:"bg-green-500/20",borderColor:"border-green-500",title:"Assinatura ativada!"},failed:{icon:fs,color:"text-red-500",bgColor:"bg-red-500/20",borderColor:"border-red-500",title:"Falha na assinatura"}}[t];return y.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:y.jsxs(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`max-w-md w-full ${c.bgColor} ${c.borderColor} border rounded-lg p-8 text-center`,children:[y.jsx(Y.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"mx-auto w-16 h-16 flex items-center justify-center rounded-full bg-gray-900",children:y.jsx(c.icon,{className:`w-8 h-8 ${c.color}`})}),y.jsx(Y.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`mt-4 text-2xl font-bold ${c.color}`,children:c.title}),y.jsx(Y.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-2 text-gray-400",children:s})]})})}async function LF(n){var e;try{const t=pf(xc,"users",n);return((e=(await $y(t)).data())==null?void 0:e.credits)||0}catch(t){return console.error("Error fetching credits:",t),0}}async function UF(n,e=1){var t;try{const r=pf(xc,"users",n);if((((t=(await $y(r)).data())==null?void 0:t.credits)||0)<e)throw new Error("Créditos insuficientes");await FO(r,{credits:zO(-e),updatedAt:vt.now()})}catch(r){throw console.error("Error using credits:",r),r}}async function FF(n){try{const e=GS(xc,"transactions"),t=DO(e,jO("userId","==",n),OO("createdAt","desc"));return(await UO(t)).docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt.toDate()}))}catch(e){return console.error("Error fetching transactions:",e),[]}}async function $F(n){try{const e=GS(xc,"refundRequests");await $O(e,{...n,status:"pending",createdAt:vt.now()})}catch(e){throw console.error("Error requesting refund:",e),e}}function BF(n){const e=new Date;return e.setDate(e.getDate()-7),new Date(n.createdAt)>e}function zF({isOpen:n,onClose:e,transaction:t}){const[r,s]=L.useState(""),[o,l]=L.useState(null),[c,d]=L.useState(!1),[f,m]=L.useState(!1),v=async x=>{if(x.preventDefault(),!f){if(!r.trim()){l("Por favor, forneça um motivo para o reembolso.");return}try{m(!0),l(null),await $F({userId:t.userId,transactionId:t.id,reason:r.trim(),amount:t.amount,credits:t.credits}),d(!0),setTimeout(()=>{e(),d(!1),s("")},2e3)}catch(b){console.error("Erro ao solicitar reembolso:",b),l("Não foi possível processar sua solicitação de reembolso. Tente novamente.")}finally{m(!1)}}};return y.jsx(jr,{children:n&&y.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:e,children:y.jsxs(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",duration:.5},className:"relative w-full max-w-md bg-gray-900 rounded-xl shadow-2xl overflow-hidden",onClick:x=>x.stopPropagation(),children:[y.jsx(Y.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:y.jsx(fs,{className:"w-6 h-6"})}),y.jsxs("div",{className:"p-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Solicitar Reembolso"}),c?y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8",children:[y.jsx(Y.div,{animate:{scale:[1,1.2,1]},transition:{duration:.5},className:"w-16 h-16 bg-green-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:y.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),y.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Solicitação Enviada!"}),y.jsx("p",{className:"text-gray-400",children:"Analisaremos seu pedido e responderemos em breve."})]}):y.jsxs("form",{onSubmit:v,className:"space-y-6",children:[y.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/50 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx(YU,{className:"w-5 h-5 text-yellow-500 mt-0.5 mr-3 flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-sm font-medium text-yellow-500",children:"Informações importantes"}),y.jsxs("ul",{className:"mt-2 text-sm text-yellow-500/80 list-disc list-inside space-y-1",children:[y.jsx("li",{children:"O reembolso pode levar até 7 dias úteis"}),y.jsx("li",{children:"Os créditos serão removidos da sua conta"}),y.jsx("li",{children:"Você receberá um email com a confirmação"})]})]})]})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Detalhes da Compra"}),y.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsx("span",{className:"text-gray-400",children:"Valor:"}),y.jsxs("span",{className:"text-white",children:["R$ ",t.amount.toFixed(2)]})]}),y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsx("span",{className:"text-gray-400",children:"Créditos:"}),y.jsx("span",{className:"text-white",children:t.credits})]}),y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsx("span",{className:"text-gray-400",children:"Data:"}),y.jsx("span",{className:"text-white",children:new Date(t.createdAt).toLocaleDateString()})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-300 mb-2",children:"Motivo do Reembolso"}),y.jsx("textarea",{id:"reason",value:r,onChange:x=>s(x.target.value),placeholder:"Descreva o motivo do seu pedido de reembolso...",rows:4,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),o&&y.jsx(Y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-500/10 border border-red-500 text-red-500 rounded-lg text-sm",children:o}),y.jsxs("div",{className:"flex justify-end space-x-3",children:[y.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Cancelar"}),y.jsx("button",{type:"submit",disabled:f,className:`px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Enviando...":"Solicitar Reembolso"})]})]})]})]})})})}function qF(){const[n]=il(rt),e=Rn(),[t,r]=L.useState(null),[s,o]=L.useState([]),[l,c]=L.useState(null),[d,f]=L.useState(!1),[m,v]=L.useState(!0);L.useEffect(()=>{(async()=>{if(n)try{const P=await FF(n.uid);o(P)}catch(P){console.error("Erro ao carregar transações:",P)}finally{v(!1)}})()},[n]);const x=[{id:"account",title:"Conta",icon:Sv,items:[{title:"Perfil",description:"Gerencie suas informações pessoais"},{title:"Email",description:"Atualize seu endereço de email"},{title:"Senha",description:"Altere sua senha de acesso"}]},{id:"payments",title:"Pagamentos e Créditos",icon:nF,items:[{title:"Histórico",description:"Veja suas transações anteriores"},{title:"Reembolsos",description:"Solicite reembolso de compras"},{title:"Métodos de Pagamento",description:"Gerencie seus cartões"}]},{id:"notifications",title:"Notificações",icon:XU,items:[{title:"Email",description:"Configure notificações por email"},{title:"Push",description:"Configure notificações no navegador"}]},{id:"security",title:"Segurança",icon:ro,items:[{title:"Verificação em duas etapas",description:"Ative a autenticação 2FA"},{title:"Dispositivos conectados",description:"Gerencie suas sessões ativas"},{title:"Histórico de login",description:"Veja acessos recentes"}]}],b=C=>{c(C),f(!0)},k=()=>{if(!t)return y.jsxs(Y.div,{initial:{opacity:0},animate:{opacity:1},className:"grid gap-6 p-6",children:[x.map(P=>y.jsxs(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(P.id),className:"flex items-center justify-between p-4 bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors",children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center",children:y.jsx(P.icon,{className:"w-5 h-5 text-purple-500"})}),y.jsxs("div",{className:"text-left",children:[y.jsx("h3",{className:"font-medium text-white",children:P.title}),y.jsxs("p",{className:"text-sm text-gray-400",children:[P.items.length," opções"]})]})]}),y.jsx(jg,{className:"w-5 h-5 text-gray-500"})]},P.id)),y.jsx(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>rt.signOut(),className:"flex items-center justify-between p-4 bg-red-500/10 rounded-xl hover:bg-red-500/20 transition-colors",children:y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center",children:y.jsx(If,{className:"w-5 h-5 text-red-500"})}),y.jsxs("div",{className:"text-left",children:[y.jsx("h3",{className:"font-medium text-red-500",children:"Sair"}),y.jsx("p",{className:"text-sm text-red-400/70",children:"Encerrar sessão"})]})]})})]});const C=x.find(P=>P.id===t);return C?t==="payments"?y.jsxs("div",{className:"p-6",children:[y.jsxs(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(null),className:"flex items-center text-gray-400 hover:text-white mb-6",children:[y.jsx(Ou,{className:"w-5 h-5 mr-2"}),y.jsx("span",{children:"Voltar"})]}),y.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Pagamentos e Créditos"}),m?y.jsxs("div",{className:"text-center py-8",children:[y.jsx(Pf,{className:"w-8 h-8 text-purple-500 animate-spin mx-auto mb-4"}),y.jsx("p",{className:"text-gray-400",children:"Carregando transações..."})]}):s.length>0?y.jsx("div",{className:"space-y-4",children:s.map(P=>y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-lg p-4",children:[y.jsxs("div",{className:"flex justify-between items-start mb-2",children:[y.jsxs("div",{children:[y.jsxs("h3",{className:"text-white font-medium",children:[P.credits," créditos"]}),y.jsx("p",{className:"text-sm text-gray-400",children:new Date(P.createdAt).toLocaleDateString()})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("p",{className:"text-white font-medium",children:["R$ ",P.amount.toFixed(2)]}),y.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P.status==="completed"?"bg-green-500/20 text-green-500":P.status==="refunded"?"bg-yellow-500/20 text-yellow-500":"bg-gray-500/20 text-gray-500"}`,children:P.status==="completed"?"Concluído":P.status==="refunded"?"Reembolsado":"Pendente"})]})]}),P.status==="completed"&&BF(P)&&y.jsx(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b(P),className:"w-full mt-2 py-2 text-sm text-purple-500 hover:text-purple-400 transition-colors",children:"Solicitar reembolso"})]},P.id))}):y.jsxs("div",{className:"text-center py-8",children:[y.jsx(iF,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-400",children:"Nenhuma transação encontrada"})]})]}):y.jsxs("div",{className:"p-6",children:[y.jsxs(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(null),className:"flex items-center text-gray-400 hover:text-white mb-6",children:[y.jsx(Ou,{className:"w-5 h-5 mr-2"}),y.jsx("span",{children:"Voltar"})]}),y.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:C.title}),y.jsx("div",{className:"space-y-4",children:C.items.map((P,U)=>y.jsxs(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-between p-4 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:[y.jsxs("div",{className:"text-left",children:[y.jsx("h3",{className:"font-medium text-white",children:P.title}),y.jsx("p",{className:"text-sm text-gray-400",children:P.description})]}),y.jsx(jg,{className:"w-5 h-5 text-gray-500"})]},U))})]}):null};return y.jsxs("div",{className:"p-6 sm:p-8 min-h-screen bg-gray-900 text-white",children:[y.jsxs("button",{onClick:()=>e("/"),className:"flex items-center text-gray-400 hover:text-white mb-6",children:[y.jsx(Ou,{size:18,className:"mr-2"})," Voltar para Home"]}),y.jsx("header",{className:"bg-gray-900 border-b border-gray-800",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsx("div",{className:"h-16 flex items-center",children:y.jsx("h1",{className:"text-xl font-bold text-white",children:"Configurações"})})})}),y.jsx("main",{className:"max-w-7xl mx-auto mt-6",children:k()}),l&&y.jsx(zF,{isOpen:d,onClose:()=>{f(!1),c(null)},transaction:l})]})}const WF="modulepreload",HF=function(n){return"/"+n},GE={},Za=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(t.map(d=>{if(d=HF(d),d in GE)return;GE[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":WF,f||(v.as="script"),v.crossOrigin="",v.href=d,c&&v.setAttribute("nonce",c),document.head.appendChild(v),f)return new Promise((x,b)=>{v.addEventListener("load",x),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},GF=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Za(async()=>{const{default:r}=await Promise.resolve().then(()=>fl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Iv extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class KF extends Iv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class QF extends Iv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class YF extends Iv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Mg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Mg||(Mg={}));var XF=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{f(r.next(m))}catch(v){l(v)}}function d(m){try{f(r.throw(m))}catch(v){l(v)}}function f(m){m.done?o(m.value):s(m.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};class JF{constructor(e,{headers:t={},customFetch:r,region:s=Mg.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=GF(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return XF(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=t;let c={},{region:d}=t;d||(d=this.region),d&&d!=="any"&&(c["x-region"]=d);let f;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",f=l):typeof l=="string"?(c["Content-Type"]="text/plain",f=l):typeof FormData<"u"&&l instanceof FormData?f=l:(c["Content-Type"]="application/json",f=JSON.stringify(l)));const m=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:f}).catch(k=>{throw new KF(k)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new QF(m);if(!m.ok)throw new YF(m);let x=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield m.json():x==="application/octet-stream"?b=yield m.blob():x==="text/event-stream"?b=m:x==="multipart/form-data"?b=yield m.formData():b=yield m.text(),{data:b,error:null}}catch(s){return{data:null,error:s}}})}}var Mt={},ga={},ya={},va={},_a={},wa={},ZF=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},el=ZF();const e5=el.fetch,YI=el.fetch.bind(el),XI=el.Headers,t5=el.Request,n5=el.Response,fl=Object.freeze(Object.defineProperty({__proto__:null,Headers:XI,Request:t5,Response:n5,default:YI,fetch:e5},Symbol.toStringTag,{value:"Module"})),r5=Ik(fl);var nh={},KE;function JI(){if(KE)return nh;KE=1,Object.defineProperty(nh,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return nh.default=n,nh}var QE;function ZI(){if(QE)return wa;QE=1;var n=wa&&wa.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(wa,"__esModule",{value:!0});const e=n(r5),t=n(JI());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var m,v,x;let b=null,k=null,C=null,P=f.status,U=f.statusText;if(f.ok){if(this.method!=="HEAD"){const J=await f.text();J===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=J:k=JSON.parse(J))}const z=(m=this.headers.Prefer)===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),X=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");z&&X&&X.length>1&&(C=parseInt(X[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(b={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,C=null,P=406,U="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const z=await f.text();try{b=JSON.parse(z),Array.isArray(b)&&f.status===404&&(k=[],b=null,P=200,U="OK")}catch{f.status===404&&z===""?(P=204,U="No Content"):b={message:z}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,P=200,U="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:k,count:C,status:P,statusText:U}});return this.shouldThrowOnError||(d=d.catch(f=>{var m,v,x;return{error:{message:`${(m=f==null?void 0:f.name)!==null&&m!==void 0?m:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(v=f==null?void 0:f.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(x=f==null?void 0:f.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),d.then(o,l)}}return wa.default=r,wa}var YE;function eP(){if(YE)return _a;YE=1;var n=_a&&_a.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_a,"__esModule",{value:!0});const e=n(ZI());class t extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(f,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:c=!1,wal:d=!1,format:f="text"}={}){var m;const v=[s?"analyze":null,o?"verbose":null,l?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),x=(m=this.headers.Accept)!==null&&m!==void 0?m:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${x}"; options=${v};`,f==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return _a.default=t,_a}var XE;function Pv(){if(XE)return va;XE=1;var n=va&&va.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(va,"__esModule",{value:!0});const e=n(eP());class t extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${f}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return va.default=t,va}var JE;function tP(){if(JE)return ya;JE=1;var n=ya&&ya.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ya,"__esModule",{value:!0});const e=n(Pv());class t{constructor(s,{headers:o={},schema:l,fetch:c}){this.url=s,this.headers=o,this.schema=l,this.fetch=c}select(s,{head:o=!1,count:l}={}){const c=o?"HEAD":"GET";let d=!1;const f=(s??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:l=!0}={}){const c="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(s)){const f=s.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(f.length>0){const m=[...new Set(f)].map(v=>`"${v}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:c,defaultToNull:d=!0}={}){const f="POST",m=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&m.push(this.headers.Prefer),c&&m.push(`count=${c}`),d||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(s)){const v=s.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(v.length>0){const x=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const l="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),this.headers.Prefer=c.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ya.default=t,ya}var fu={},pu={},ZE;function s5(){return ZE||(ZE=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.version=void 0,pu.version="0.0.0-automated"),pu}var eT;function i5(){if(eT)return fu;eT=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.DEFAULT_HEADERS=void 0;const n=s5();return fu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},fu}var tT;function o5(){if(tT)return ga;tT=1;var n=ga&&ga.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ga,"__esModule",{value:!0});const e=n(tP()),t=n(Pv()),r=i5();class s{constructor(l,{headers:c={},schema:d,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=d,this.fetch=f}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:f=!1,count:m}={}){let v;const x=new URL(`${this.url}/rpc/${l}`);let b;d||f?(v=d?"HEAD":"GET",Object.entries(c).filter(([C,P])=>P!==void 0).map(([C,P])=>[C,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([C,P])=>{x.searchParams.append(C,P)})):(v="POST",b=c);const k=Object.assign({},this.headers);return m&&(k.Prefer=`count=${m}`),new t.default({method:v,url:x,headers:k,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return ga.default=s,ga}var nT;function a5(){if(nT)return Mt;nT=1;var n=Mt&&Mt.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.PostgrestError=Mt.PostgrestBuilder=Mt.PostgrestTransformBuilder=Mt.PostgrestFilterBuilder=Mt.PostgrestQueryBuilder=Mt.PostgrestClient=void 0;const e=n(o5());Mt.PostgrestClient=e.default;const t=n(tP());Mt.PostgrestQueryBuilder=t.default;const r=n(Pv());Mt.PostgrestFilterBuilder=r.default;const s=n(eP());Mt.PostgrestTransformBuilder=s.default;const o=n(ZI());Mt.PostgrestBuilder=o.default;const l=n(JI());return Mt.PostgrestError=l.default,Mt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:l.default},Mt}var l5=a5();const u5=Qh(l5),{PostgrestClient:c5,PostgrestQueryBuilder:a6,PostgrestFilterBuilder:l6,PostgrestTransformBuilder:u6,PostgrestBuilder:c6,PostgrestError:d6}=u5,d5="2.11.2",h5={"X-Client-Info":`realtime-js/${d5}`},f5="1.0.0",nP=1e4,p5=1e3;var $a;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})($a||($a={}));var Pn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Pn||(Pn={}));var lr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(lr||(lr={}));var Vg;(function(n){n.websocket="websocket"})(Vg||(Vg={}));var so;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(so||(so={}));class m5{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),o=t.getUint8(2);let l=this.HEADER_LENGTH+2;const c=r.decode(e.slice(l,l+s));l=l+s;const d=r.decode(e.slice(l,l+o));l=l+o;const f=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:d,payload:f}}}class rP{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ze||(Ze={}));const rT=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,l)=>(o[l]=g5(l,n,e,s),o),{})},g5=(n,e,t,r)=>{const s=e.find(c=>c.name===n),o=s==null?void 0:s.type,l=t[n];return o&&!r.includes(o)?sP(o,l):Lg(l)},sP=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return w5(e,t)}switch(n){case Ze.bool:return y5(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return v5(e);case Ze.json:case Ze.jsonb:return _5(e);case Ze.timestamp:return x5(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Lg(e);default:return Lg(e)}},Lg=n=>n,y5=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},v5=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},_5=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},w5=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const l=n.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(c=>sP(e,c))}return n},x5=n=>typeof n=="string"?n.replace(" ","T"):n,iP=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Vm{constructor(e,t,r={},s=nP){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var sT;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(sT||(sT={}));class Mu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mu.syncState(this.state,s,o,l),this.pendingDiffs.forEach(d=>{this.state=Mu.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Mu.syncDiff(this.state,s,o,l),c())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const o=this.cloneDeep(e),l=this.transformState(t),c={},d={};return this.map(o,(f,m)=>{l[f]||(d[f]=m)}),this.map(l,(f,m)=>{const v=o[f];if(v){const x=m.map(P=>P.presence_ref),b=v.map(P=>P.presence_ref),k=m.filter(P=>b.indexOf(P.presence_ref)<0),C=v.filter(P=>x.indexOf(P.presence_ref)<0);k.length>0&&(c[f]=k),C.length>0&&(d[f]=C)}else c[f]=m}),this.syncDiff(o,{joins:c,leaves:d},r,s)}static syncDiff(e,t,r,s){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(c,d)=>{var f;const m=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(d),m.length>0){const v=e[c].map(b=>b.presence_ref),x=m.filter(b=>v.indexOf(b.presence_ref)<0);e[c].unshift(...x)}r(c,m,d)}),this.map(l,(c,d)=>{let f=e[c];if(!f)return;const m=d.map(v=>v.presence_ref);f=f.filter(v=>m.indexOf(v.presence_ref)<0),e[c]=f,s(c,f,d),f.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var iT;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(iT||(iT={}));var oT;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(oT||(oT={}));var is;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(is||(is={}));class kv{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vm(this,lr.join,this.params,this.timeout),this.rejoinTimer=new rP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Mu(this),this.broadcastEndpointURL=iP(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:c}}=this.params;this._onError(m=>e==null?void 0:e(is.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(is.CLOSED));const d={},f={broadcast:o,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){e==null||e(is.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,k=[];for(let C=0;C<b;C++){const P=x[C],{filter:{event:U,schema:H,table:z,filter:X}}=P,J=m&&m[C];if(J&&J.event===U&&J.schema===H&&J.table===z&&J.filter===X)k.push(Object.assign(Object.assign({},P),{id:J.id}));else{this.unsubscribe(),e==null||e(is.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(is.SUBSCRIBED);return}}).receive("error",m=>{e==null||e(is.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(is.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Vm(this,lr.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Vm(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,o;const l=e.toLocaleLowerCase(),{close:c,error:d,leave:f,join:m}=lr;if(r&&[c,d,f,m].indexOf(l)>=0&&r!==this._joinRef())return;let x=this._onMessage(l,t,r);if(t&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var k,C,P;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(C=b.filter)===null||C===void 0?void 0:C.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===l}).map(b=>b.callback(x,r)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var k,C,P,U,H,z;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const X=b.id,J=(k=b.filter)===null||k===void 0?void 0:k.event;return X&&((C=t.ids)===null||C===void 0?void 0:C.includes(X))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===((P=t.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const X=(H=(U=b==null?void 0:b.filter)===null||U===void 0?void 0:U.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return X==="*"||X===((z=t==null?void 0:t.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:C,table:P,commit_timestamp:U,type:H,errors:z}=k;x=Object.assign(Object.assign({},{schema:C,table:P,commit_timestamp:U,eventType:H,new:{},old:{},errors:z}),this._getPayloadRecords(k))}b.callback(x,r)})}_isClosed(){return this.state===Pn.closed}_isJoined(){return this.state===Pn.joined}_isJoining(){return this.state===Pn.joining}_isLeaving(){return this.state===Pn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&kv.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(lr.close,{},e)}_onError(e){this._on(lr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=rT(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=rT(e.columns,e.old_record)),t}}const E5=()=>{},T5=typeof WebSocket<"u",b5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class S5{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=h5,this.params={},this.timeout=nP,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=E5,this.conn=null,this.sendBuffer=[],this.serializer=new m5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...c)=>Za(async()=>{const{default:d}=await Promise.resolve().then(()=>fl);return{default:d}},void 0).then(({default:d})=>d(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${e}/${Vg.websocket}`,this.httpEndpoint=iP(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(o,l)=>l(JSON.stringify(o)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rP(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(T5){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new I5(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Za(async()=>{const{default:e}=await import("./browser-CI4zLIwj.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:f5}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $a.connecting:return so.Connecting;case $a.open:return so.Open;case $a.closing:return so.Closing;default:return so.Closed}}isConnected(){return this.connectionState()===so.Open}channel(e,t={config:{}}){const r=new kv(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(lr.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(p5,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:o,ref:l}=t;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,o),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,o,l)),this.stateChangeCallbacks.message.forEach(c=>c(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(lr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([b5],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class I5{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=$a.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Av extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class P5 extends Av{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ug extends Av{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var k5=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{f(r.next(m))}catch(v){l(v)}}function d(m){try{f(r.throw(m))}catch(v){l(v)}}function f(m){m.done?o(m.value):s(m.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};const oP=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Za(async()=>{const{default:r}=await Promise.resolve().then(()=>fl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},A5=()=>k5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Za(()=>Promise.resolve().then(()=>fl),void 0)).Response:Response}),Fg=n=>{if(Array.isArray(n))return n.map(t=>Fg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Fg(r)}),e};var Eo=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{f(r.next(m))}catch(v){l(v)}}function d(m){try{f(r.throw(m))}catch(v){l(v)}}function f(m){m.done?o(m.value):s(m.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};const Lm=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),C5=(n,e,t)=>Eo(void 0,void 0,void 0,function*(){const r=yield A5();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new P5(Lm(s),n.status||500))}).catch(s=>{e(new Ug(Lm(s),s))}):e(new Ug(Lm(n),n))}),R5=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function Ic(n,e,t,r,s,o){return Eo(this,void 0,void 0,function*(){return new Promise((l,c)=>{n(t,R5(e,r,s,o)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>C5(d,c,r))})})}function Gh(n,e,t,r){return Eo(this,void 0,void 0,function*(){return Ic(n,"GET",e,t,r)})}function Xs(n,e,t,r,s){return Eo(this,void 0,void 0,function*(){return Ic(n,"POST",e,r,s,t)})}function N5(n,e,t,r,s){return Eo(this,void 0,void 0,function*(){return Ic(n,"PUT",e,r,s,t)})}function D5(n,e,t,r){return Eo(this,void 0,void 0,function*(){return Ic(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function aP(n,e,t,r,s){return Eo(this,void 0,void 0,function*(){return Ic(n,"DELETE",e,r,s,t)})}var vn=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{f(r.next(m))}catch(v){l(v)}}function d(m){try{f(r.throw(m))}catch(v){l(v)}}function f(m){m.done?o(m.value):s(m.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};const j5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},aT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class O5{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=oP(s)}uploadOrUpdate(e,t,r,s){return vn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},aT),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d))):(o=r,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const f=this._removeEmptyFolders(t),m=this._getFinalPath(f),v=yield this.fetch(`${this.url}/object/${m}`,Object.assign({method:e,body:o,headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{})),x=yield v.json();return v.ok?{data:{path:f,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}upload(e,t,r){return vn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return vn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",t);try{let d;const f=Object.assign({upsert:aT.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl)):(d=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const v=yield this.fetch(c.toString(),{method:"PUT",body:d,headers:m}),x=yield v.json();return v.ok?{data:{path:o,fullPath:x.Key},error:null}:{data:null,error:x}}catch(d){if(Vt(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return vn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const o=yield Xs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+o.url),c=l.searchParams.get("token");if(!c)throw new Av("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}})}update(e,t,r){return vn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return vn(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}copy(e,t,r){return vn(this,void 0,void 0,function*(){try{return{data:{path:(yield Xs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return vn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield Xs(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return vn(this,void 0,void 0,function*(){try{const s=yield Xs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}download(e,t){return vn(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=o?`?${o}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Gh(this.fetch,`${this.url}/${s}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(Vt(c))return{data:null,error:c};throw c}})}info(e){return vn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Gh(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Fg(r),error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}})}exists(e){return vn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield D5(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Vt(r)&&r instanceof Ug){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&s.push(o);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&s.push(d);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${f}`)}}}remove(e){return vn(this,void 0,void 0,function*(){try{return{data:yield aP(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Vt(t))return{data:null,error:t};throw t}})}list(e,t,r){return vn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},j5),t),{prefix:e||""});return{data:yield Xs(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const M5="2.7.1",V5={"X-Client-Info":`storage-js/${M5}`};var xa=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{f(r.next(m))}catch(v){l(v)}}function d(m){try{f(r.throw(m))}catch(v){l(v)}}function f(m){m.done?o(m.value):s(m.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};class L5{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},V5),t),this.fetch=oP(r)}listBuckets(){return xa(this,void 0,void 0,function*(){try{return{data:yield Gh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Vt(e))return{data:null,error:e};throw e}})}getBucket(e){return xa(this,void 0,void 0,function*(){try{return{data:yield Gh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Vt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return xa(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return xa(this,void 0,void 0,function*(){try{return{data:yield N5(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return xa(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Vt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xa(this,void 0,void 0,function*(){try{return{data:yield aP(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Vt(t))return{data:null,error:t};throw t}})}}class U5 extends L5{constructor(e,t={},r){super(e,t,r)}from(e){return new O5(this.url,this.headers,e,this.fetch)}}const F5="2.48.1";let Su="";typeof Deno<"u"?Su="deno":typeof document<"u"?Su="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Su="react-native":Su="node";const $5={"X-Client-Info":`supabase-js-${Su}/${F5}`},B5={headers:$5},z5={schema:"public"},q5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},W5={};var H5=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{f(r.next(m))}catch(v){l(v)}}function d(m){try{f(r.throw(m))}catch(v){l(v)}}function f(m){m.done?o(m.value):s(m.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};const G5=n=>{let e;return n?e=n:typeof fetch>"u"?e=YI:e=fetch,(...t)=>e(...t)},K5=()=>typeof Headers>"u"?XI:Headers,Q5=(n,e,t)=>{const r=G5(t),s=K5();return(o,l)=>H5(void 0,void 0,void 0,function*(){var c;const d=(c=yield e())!==null&&c!==void 0?c:n;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(o,Object.assign(Object.assign({},l),{headers:f}))})};var Y5=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{f(r.next(m))}catch(v){l(v)}}function d(m){try{f(r.throw(m))}catch(v){l(v)}}function f(m){m.done?o(m.value):s(m.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};function X5(n){return n.replace(/\/$/,"")}function J5(n,e){const{db:t,auth:r,realtime:s,global:o}=n,{db:l,auth:c,realtime:d,global:f}=e,m={db:Object.assign(Object.assign({},l),t),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign({},f),o),accessToken:()=>Y5(this,void 0,void 0,function*(){return""})};return n.accessToken?m.accessToken=n.accessToken:delete m.accessToken,m}const lP="2.67.3",Z5="http://localhost:9999",e3="supabase.auth.token",t3={"X-Client-Info":`gotrue-js/${lP}`},lT=10,$g="X-Supabase-Api-Version",uP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function n3(n){return Math.round(Date.now()/1e3)+n}function r3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Ir=()=>typeof window<"u"&&typeof document<"u",Yi={tested:!1,writable:!1},Vu=()=>{if(!Ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yi.tested)return Yi.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Yi.tested=!0,Yi.writable=!0}catch{Yi.tested=!0,Yi.writable=!1}return Yi.writable};function s3(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const cP=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Za(async()=>{const{default:r}=await Promise.resolve().then(()=>fl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},i3=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",dP=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},rh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},sh=async(n,e)=>{await n.removeItem(e)};function o3(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,o,l,c,d,f,m=0;for(n=n.replace("-","+").replace("_","/");m<n.length;)l=e.indexOf(n.charAt(m++)),c=e.indexOf(n.charAt(m++)),d=e.indexOf(n.charAt(m++)),f=e.indexOf(n.charAt(m++)),r=l<<2|c>>4,s=(c&15)<<4|d>>2,o=(d&3)<<6|f,t=t+String.fromCharCode(r),d!=64&&s!=0&&(t=t+String.fromCharCode(s)),f!=64&&o!=0&&(t=t+String.fromCharCode(o));return t}class kf{constructor(){this.promise=new kf.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}kf.promiseConstructor=Promise;function uT(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(o3(r))}async function a3(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function l3(n,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await n(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function u3(n){return("0"+n.toString(16)).substr(-2)}function c3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let o=0;o<56;o++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,u3).join("")}async function d3(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}function h3(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function f3(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await d3(n);return h3(t)}async function Ea(n,e,t=!1){const r=c3();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await dP(n,`${e}-code-verifier`,s);const o=await f3(r);return[o,r===o?"plain":"s256"]}const p3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function m3(n){const e=n.headers.get($g);if(!e||!e.match(p3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Cv extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ke(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class g3 extends Cv{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function y3(n){return ke(n)&&n.name==="AuthApiError"}class hP extends Cv{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class To extends Cv{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Qs extends To{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function v3(n){return ke(n)&&n.name==="AuthSessionMissingError"}class Um extends To{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ih extends To{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class oh extends To{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _3(n){return ke(n)&&n.name==="AuthImplicitGrantRedirectError"}class cT extends To{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bg extends To{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Fm(n){return ke(n)&&n.name==="AuthRetryableFetchError"}class dT extends To{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var w3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const to=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),x3=[502,503,504];async function hT(n){var e;if(!i3(n))throw new Bg(to(n),0);if(x3.includes(n.status))throw new Bg(to(n),n.status);let t;try{t=await n.json()}catch(o){throw new hP(to(o),o)}let r;const s=m3(n);if(s&&s.getTime()>=uP["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new dT(to(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Qs}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new dT(to(t),n.status,t.weak_password.reasons);throw new g3(to(t),n.status||500,r)}const E3=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Oe(n,e,t,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[$g]||(o[$g]=uP["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await T3(n,e,t+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function T3(n,e,t,r,s,o){const l=E3(e,r,s,o);let c;try{c=await n(t,Object.assign({},l))}catch(d){throw console.error(d),new Bg(to(d),0)}if(c.ok||await hT(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(d){await hT(d)}}function Ys(n){var e;let t=null;P3(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=n3(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function fT(n){const e=Ys(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ti(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function b3(n){return{data:n,error:null}}function S3(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o}=n,l=w3(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o},d=Object.assign({},l);return{data:{properties:c,user:d},error:null}}function I3(n){return n}function P3(n){return n.access_token&&n.refresh_token&&n.expires_in}var k3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class A3{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=cP(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ti})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=k3(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:S3,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ke(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ti})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,o,l,c,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:I3});if(m.error)throw m.error;const v=await m.json(),x=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(k=>{const C=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);f[`${P}Page`]=C}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(ke(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ti})}catch(t){if(ke(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ti})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ti})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}}const C3={getItem:n=>Vu()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Vu()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Vu()&&globalThis.localStorage.removeItem(n)}};function pT(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function R3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ta={debug:!!(globalThis&&Vu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fP extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class N3 extends fP{}async function D3(n,e,t){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new N3(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ta.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}R3();const j3={url:Z5,storageKey:e3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:t3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},mu=30*1e3,mT=3;async function gT(n,e,t){return await t()}class sc{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=sc.nextInstanceID,sc.nextInstanceID+=1,this.instanceID>0&&Ir()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},j3),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new A3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=cP(s.fetch),this.lock=s.lock||gT,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ir()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=D3:this.lock=gT,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Vu()?this.storage=C3:(this.memoryStorage={},this.storage=pT(this.memoryStorage)):(this.memoryStorage={},this.storage=pT(this.memoryStorage)),Ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lP}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=s3(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Ir()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),_3(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ke(t)?{error:t}:{error:new hP("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ys}),{data:l,error:c}=o;if(c||!l)return{data:{user:null,session:null},error:c};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(ke(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,s;try{let o;if("email"in e){const{email:m,password:v,options:x}=e;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await Ea(this.storage,this.storageKey)),o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:m,password:v,data:(t=x==null?void 0:x.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:k},xform:Ys})}else if("phone"in e){const{phone:m,password:v,options:x}=e;o=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:v,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Ys})}else throw new ih("You must provide either an email or phone number and a password");const{data:l,error:c}=o;if(c||!l)return{data:{user:null,session:null},error:c};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(ke(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:c}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:fT})}else if("phone"in e){const{phone:o,password:l,options:c}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:fT})}else throw new ih("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Um}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(ke(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await rh(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:o,error:l}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ys});if(await sh(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Um}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(ke(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:o,nonce:l}=e,c=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ys}),{data:d,error:f}=c;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Um}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(t){if(ke(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,o,l;try{if("email"in e){const{email:c,options:d}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Ea(this.storage,this.storageKey));const{error:v}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:c,options:d}=e,{data:f,error:m}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new ih("You must provide either an email or phone number.")}catch(c){if(ke(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Ys});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(s){if(ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Ea(this.storage,this.storageKey)),await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:b3})}catch(o){if(ke(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Qs;const{error:s}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:c}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new ih("You must provide either an email or phone number and a type")}catch(t){if(ke(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await rh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,m)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,m))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ti}):await this._useSession(async t=>{var r,s,o;const{data:l,error:c}=t;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qs}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:ti})})}catch(t){if(ke(t))return v3(t)&&(await this._removeSession(),await sh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Qs;const l=s.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Ea(this.storage,this.storageKey));const{data:f,error:m}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:ti});if(m)throw m;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return uT(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qs;const t=Date.now()/1e3;let r=t,s=!0,o=null;const l=uT(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){const{session:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(ke(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:c}=t;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Qs;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ke(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ir())throw new oh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new oh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new cT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new oh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new cT("No code detected.");const{data:H,error:z}=await this._exchangeCodeForSession(e.code);if(z)throw z;const X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:c,expires_at:d,token_type:f}=e;if(!o||!c||!l||!f)throw new oh("No session defined in URL");const m=Math.round(Date.now()/1e3),v=parseInt(c);let x=m+v;d&&(x=parseInt(d));const b=x-m;b*1e3<=mu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const k=x-v;m-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,m):m-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,m);const{data:C,error:P}=await this._getUser(o);if(P)throw P;const U={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:v,expires_at:x,refresh_token:l,token_type:f,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:U,redirectType:e.type},error:null}}catch(r){if(ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await rh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{error:o};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(y3(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await sh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=r3(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:o},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ea(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(ke(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ke(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async o=>{var l,c,d,f,m;const{data:v,error:x}=o;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(f=v.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return Ir()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ke(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)throw l;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await l3(async s=>(s>0&&await a3(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ys})),(s,o)=>{const l=200*Math.pow(2,s);return o&&Fm(o)&&Date.now()+l-r<mu})}catch(r){if(this._debug(t,"error",r),ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ir()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await rh(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),o=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+lT;if(this._debug(t,`session has${o?"":" not"} expired with margin of ${lT}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:l}=await this._callRefreshToken(r.refresh_token);l&&(console.error(l),Fm(l)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Qs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new kf;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Qs;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(s,"error",o),ke(o)){const l={session:null,error:o};return Fm(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await dP(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await sh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ir()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),mu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/mu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${mu}ms, refresh threshold is ${mT} ticks`),s<=mT&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fP)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ir()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Ea(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(ke(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:c}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(t){if(ke(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ke(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(s.access_token);let c=null;l.aal&&(c=l.aal);let d=c;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const m=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}}sc.nextInstanceID=0;const O3=sc;class M3 extends O3{constructor(e){super(e)}}var V3=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{f(r.next(m))}catch(v){l(v)}}function d(m){try{f(r.throw(m))}catch(v){l(v)}}function f(m){m.done?o(m.value):s(m.value).then(c,d)}f((r=r.apply(n,e||[])).next())})};class L3{constructor(e,t,r){var s,o,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=X5(e);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:z5,realtime:W5,auth:Object.assign(Object.assign({},q5),{storageKey:d}),global:B5},m=J5(r??{},f);this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(v,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,m.global.fetch),this.fetch=Q5(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new c5(`${c}/rest/v1`,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new JF(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new U5(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return V3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:o,flowType:l,lock:c,debug:d},f,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M3({url:this.authUrl,headers:Object.assign(Object.assign({},v),f),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:l,lock:c,debug:d,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new S5(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const U3=(n,e,t)=>new L3(n,e,t),F3="https://mlqpxbepbdriuyrimbrs.supabase.co",$3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scXB4YmVwYmRyaXV5cmltYnJzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkwNTM5MDIsImV4cCI6MjA1NDYyOTkwMn0.mIlE8aaqoB_elfQqDUGrqUpMF27QBbD39_ybszojPGI",_h=U3(F3,$3,{auth:{persistSession:!0,autoRefreshToken:!0},db:{schema:"public"}});function yT(n){return n.replace(/[^a-zA-Z0-9-_/.]/g,"_")}async function B3(n,e){try{if(!rt.currentUser)throw new Error("User not authenticated");if(!n.type.startsWith("image/"))throw new Error("O arquivo enviado não é uma imagem válida");const t=new FormData;t.append("file",n),t.append("user_id",rt.currentUser.uid),t.append("version",e.version),t.append("bg_upsampler",e.bgUpsampler),t.append("real_esrgan",e.realEsrgan),t.append("upscale",e.upscale.toString()),console.log("Sending request to process image...");const r=await fetch("https://api.reviverimagem.shop/upload",{method:"POST",body:t});if(!r.ok){const x=await r.json();throw new Error(x.error||"Failed to process image")}const s=await r.json();if(!s.processedImage)throw new Error("Server did not return a processed image URL");const o=Date.now(),l=yT(rt.currentUser.uid),c=yT(n.name),d=`${l}/${o}_${c}`,{error:f}=await _h.storage.from("processed-images").upload(d,n,{contentType:n.type,cacheControl:"3600"});if(f)throw console.error("Error uploading original image:",f),new Error("Failed to upload original image");const{data:m}=_h.storage.from("processed-images").getPublicUrl(d),{error:v}=await _h.from("processed_images").insert({firebase_user_id:rt.currentUser.uid,url_original:m.publicUrl,url_processada:s.processedImage,tamanho_do_arquivo:n.size,tipo_de_arquivo:n.type,configuracoes:e,criado_em:new Date().toISOString()});if(v)throw console.error("Error saving to Supabase:",v),new Error("Failed to save processed image metadata");return await UF(rt.currentUser.uid),s.processedImage}catch(t){throw console.error("Error in processImage:",t),t instanceof Error?t:new Error("Failed to process image")}}async function z3(n){if(!n)return console.error("No user ID provided to getProcessedImages"),[];try{console.log("Fetching images for user:",n);const{data:e,error:t}=await _h.from("processed_images").select("*").eq("firebase_user_id",n).order("criado_em",{ascending:!1});if(t)throw console.error("Error fetching processed images:",t),t;return e?(console.log("Found images:",e.length),e.map(r=>({id:r.id,userId:r.firebase_user_id,originalUrl:r.url_original,processedUrl:r.url_processada,createdAt:new Date(r.criado_em)}))):(console.log("No images found for user"),[])}catch(e){return console.error("Error in getProcessedImages:",e),[]}}function q3(){const[n]=il(rt),[e,t]=L.useState(null),[r,s]=L.useState(!0);return L.useEffect(()=>{async function o(){if(n)try{const l=await LF(n.uid);t(l)}catch(l){console.error("Erro ao carregar créditos:",l)}finally{s(!1)}}o()},[n]),!n||r?null:y.jsxs(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm",children:[e," créditos restantes"]})}function W3(){const[n]=il(rt),[e,t]=Lu.useState(!1),[r,s]=Lu.useState(null),o=Rn(),l=async d=>{if(n)try{t(!0),s(null);const f=HE[d];if(!f)throw new Error("Invalid plan");await OF(f)}catch(f){console.error("Error initiating subscription:",f),s("Failed to initiate subscription. Please try again.")}finally{t(!1)}},c={free:{icon:qI,gradient:"from-gray-600 to-gray-500",benefits:[{icon:Aa,text:"10 créditos diários"},{icon:ro,text:"Acesso básico"},{icon:ka,text:"Suporte por email"}]},basic:{icon:Hh,gradient:"from-purple-600 to-blue-600",benefits:[{icon:Aa,text:"100 créditos diários"},{icon:ro,text:"Acesso premium"},{icon:ka,text:"Suporte prioritário"}]},pro:{icon:rF,gradient:"from-yellow-600 to-orange-600",benefits:[{icon:Aa,text:"200 créditos diários"},{icon:ro,text:"Recursos avançados"},{icon:ka,text:"Suporte VIP"}]},enterprise:{icon:uF,gradient:"from-blue-600 to-cyan-600",benefits:[{icon:Aa,text:"300 créditos diários"},{icon:ro,text:"API access"},{icon:ka,text:"Suporte dedicado"}]}};return y.jsx("div",{className:"bg-gradient-to-b from-gray-900 to-black p-4 sm:p-6 md:p-8",children:y.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[y.jsxs("div",{className:"flex flex-col items-center text-center mb-8 sm:mb-12",children:[y.jsxs(Y.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"inline-flex items-center gap-2 px-4 py-1.5 bg-purple-500/10 rounded-full text-purple-400 text-sm font-medium mb-4",children:[y.jsx(Hh,{className:"w-4 h-4"}),y.jsx("span",{children:"Escolha o plano ideal para você"})]}),y.jsx(Y.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Planos para todas as necessidades"}),y.jsx(Y.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-gray-400 max-w-2xl mx-auto",children:"Comece gratuitamente e atualize conforme sua demanda crescer. Cancele a qualquer momento."})]}),r&&y.jsx(Y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"max-w-md mx-auto mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500 text-sm text-center",children:r}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 justify-center",children:Object.entries(HE).map(([d,f])=>{const m=c[d],v=m.icon,b=d==="free";return y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:`relative rounded-2xl overflow-hidden ${b?"bg-gradient-to-br from-purple-600 to-purple-800":"bg-gray-800/50 backdrop-blur-sm hover:bg-gray-800/80"} border border-gray-700/50`,children:[y.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${m.gradient} opacity-10`}),y.jsxs("div",{className:"relative p-6 flex flex-col h-full items-center text-center",children:[y.jsxs("div",{className:"flex flex-col items-center mb-6 w-full",children:[y.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center bg-gradient-to-br ${m.gradient} mb-2`,children:y.jsx(v,{className:"w-6 h-6 text-white"})}),b&&y.jsx("span",{className:"text-xs font-medium bg-white/20 px-3 py-1 rounded-full text-white mt-2",children:"Seu plano atual"})]}),y.jsxs("div",{className:"mb-6 text-center",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:f.name}),y.jsx("div",{className:"flex items-baseline justify-center gap-2",children:f.price>0?y.jsxs(y.Fragment,{children:[y.jsxs("span",{className:"text-3xl font-bold text-white",children:["R$",f.price.toFixed(2)]}),y.jsx("span",{className:"text-sm text-gray-400",children:"/mês"})]}):y.jsx("span",{className:"text-3xl font-bold text-white",children:"Grátis"})})]}),y.jsx("div",{className:"space-y-4 flex-grow w-full",children:m.benefits.map((k,C)=>y.jsxs("div",{className:"flex items-center justify-center gap-3",children:[y.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center bg-gradient-to-br ${m.gradient} bg-opacity-20`,children:y.jsx(k.icon,{className:"w-4 h-4 text-white"})}),y.jsx("span",{className:"text-sm text-gray-300",children:k.text})]},C))}),y.jsx("div",{className:"mt-8 w-full",children:b?y.jsxs(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o("/settings"),className:"w-full py-3 bg-white/20 hover:bg-white/30 rounded-xl text-white font-medium transition-colors flex items-center justify-center gap-2",children:[y.jsx(Fa,{className:"w-5 h-5"}),y.jsx("span",{children:"Gerenciar Plano"}),y.jsx(jg,{className:"w-5 h-5"})]}):y.jsx(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(d),disabled:e,className:`w-full py-3 rounded-xl font-medium transition-all flex items-center justify-center ${e?"opacity-50 cursor-not-allowed":f.price===0?"bg-gray-700 hover:bg-gray-600 text-white":`bg-gradient-to-r ${m.gradient} text-white hover:opacity-90`}`,children:e?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx(Pf,{className:"w-5 h-5 animate-spin"}),"Processando..."]}):y.jsx("span",{children:"Assinar Plano"})})})]})]},d)})}),y.jsxs(Y.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center mt-8 sm:mt-12 space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-400",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(ro,{className:"w-4 h-4 text-purple-500"}),y.jsx("span",{children:"Pagamento seguro"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(ka,{className:"w-4 h-4 text-purple-500"}),y.jsx("span",{children:"Suporte 24/7"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Aa,{className:"w-4 h-4 text-purple-500"}),y.jsx("span",{children:"Cancele quando quiser"})]})]}),y.jsx("p",{className:"text-xs text-gray-500",children:"Todos os planos incluem atualizações gratuitas e novas funcionalidades"})]})]})})}function H3({isOpen:n,onClose:e}){return y.jsx(jr,{children:n&&y.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start justify-center bg-black/50 backdrop-blur-sm overflow-y-auto",onClick:e,children:y.jsxs(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",duration:.5},className:"relative w-full max-w-4xl bg-gray-900 rounded-xl shadow-2xl m-4",onClick:t=>t.stopPropagation(),children:[y.jsx(Y.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white z-10",children:y.jsx(fs,{className:"w-6 h-6"})}),y.jsx("div",{className:"max-h-[90vh] overflow-y-auto",children:y.jsx(W3,{})})]})})})}function vT({settings:n,setSettings:e,onProcess:t,onClose:r,isProcessing:s}){const o=f=>{e(m=>({...m,version:f}))},l=f=>{e(m=>({...m,bgUpsampler:f}))},c=f=>{e(m=>({...m,realEsrgan:f}))},d=f=>{e(m=>({...m,upscale:f}))};return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"text-xs font-medium",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("span",{children:"Configurações de processamento"}),y.jsx("span",{className:"text-purple-500 cursor-pointer hover:text-purple-400 transition-colors",children:"Predefinições"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center justify-between mb-2",children:y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{children:"Versão do Modelo"}),y.jsxs("div",{className:"cursor-help group relative",children:[y.jsx(Zd,{className:"w-3 h-3 text-gray-500"}),y.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-xs text-gray-300 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48",children:"Escolha a versão do modelo de IA para processamento"})]})]})}),y.jsx("div",{className:"grid grid-cols-2 gap-2",children:["1.2","1.3","1.4","RestoreFormer"].map(f=>y.jsxs("button",{onClick:()=>o(f),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${n.version===f?"bg-purple-600":"bg-gray-800 hover:bg-gray-700"}`,children:["v",f]},f))})]}),y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center justify-between mb-2",children:y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{children:"Background Upsampler"}),y.jsxs("div",{className:"cursor-help group relative",children:[y.jsx(Zd,{className:"w-3 h-3 text-gray-500"}),y.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-xs text-gray-300 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48",children:"Método de processamento do fundo da imagem"})]})]})}),y.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"none",label:"Nenhum"},{value:"realesrgan",label:"RealESRGAN"}].map(f=>y.jsx("button",{onClick:()=>l(f.value),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${n.bgUpsampler===f.value?"bg-purple-600":"bg-gray-800 hover:bg-gray-700"}`,children:f.label},f.value))})]}),y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center justify-between mb-2",children:y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{children:"Modelo RealESRGAN"}),y.jsxs("div",{className:"cursor-help group relative",children:[y.jsx(Zd,{className:"w-3 h-3 text-gray-500"}),y.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-xs text-gray-300 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48",children:"Versão do modelo RealESRGAN para upscaling"})]})]})}),y.jsx("div",{className:"grid grid-cols-3 gap-2",children:["x2","x4","x8"].map(f=>y.jsx("button",{onClick:()=>c(f),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${n.realEsrgan===f?"bg-purple-600":"bg-gray-800 hover:bg-gray-700"}`,children:f},f))})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{children:"Fator de Ampliação"}),y.jsxs("div",{className:"cursor-help group relative",children:[y.jsx(Zd,{className:"w-3 h-3 text-gray-500"}),y.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-xs text-gray-300 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48",children:"Quanto a imagem será ampliada"})]})]}),y.jsxs("span",{className:"text-xs text-gray-400",children:[n.upscale,"x"]})]}),y.jsx("input",{type:"range",min:"2",max:"8",step:"2",value:n.upscale,onChange:f=>d(Number(f.target.value)),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[y.jsx("span",{children:"2x"}),y.jsx("span",{children:"8x"})]})]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,disabled:s,className:`w-full py-2 bg-purple-600 text-sm rounded-lg hover:bg-purple-700 transition-all ${s?"opacity-50 cursor-not-allowed":""}`,children:s?"Processando...":"Iniciar processamento"}),r&&y.jsx(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,className:"w-full py-2 bg-gray-800 text-sm rounded-lg hover:bg-gray-700 transition-all lg:hidden",children:"Fechar"})]})]})}const pP=6048e5,G3=864e5,_T=Symbol.for("constructDateFrom");function pi(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&_T in n?n[_T](e):n instanceof Date?new n.constructor(e):new Date(e)}function pr(n,e){return pi(e||n,n)}let K3={};function Af(){return K3}function ic(n,e){var c,d,f,m;const t=Af(),r=(e==null?void 0:e.weekStartsOn)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??t.weekStartsOn??((m=(f=t.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,s=pr(n,e==null?void 0:e.in),o=s.getDay(),l=(o<r?7:0)+o-r;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function Kh(n,e){return ic(n,{...e,weekStartsOn:1})}function mP(n,e){const t=pr(n,e==null?void 0:e.in),r=t.getFullYear(),s=pi(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const o=Kh(s),l=pi(t,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const c=Kh(l);return t.getTime()>=o.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function wT(n){const e=pr(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Q3(n,...e){const t=pi.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function xT(n,e){const t=pr(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function Y3(n,e,t){const[r,s]=Q3(t==null?void 0:t.in,n,e),o=xT(r),l=xT(s),c=+o-wT(o),d=+l-wT(l);return Math.round((c-d)/G3)}function X3(n,e){const t=mP(n,e),r=pi(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Kh(r)}function J3(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Z3(n){return!(!J3(n)&&typeof n!="number"||isNaN(+pr(n)))}function e$(n,e){const t=pr(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const t$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n$=(n,e,t)=>{let r;const s=t$[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Ba(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const r$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},s$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},i$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},o$={date:Ba({formats:r$,defaultWidth:"full"}),time:Ba({formats:s$,defaultWidth:"full"}),dateTime:Ba({formats:i$,defaultWidth:"full"})},a$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},l$=(n,e,t,r)=>a$[n];function kr(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,c=t!=null&&t.width?String(t.width):l;s=n.formattingValues[c]||n.formattingValues[l]}else{const l=n.defaultWidth,c=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[c]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(e):e;return s[o]}}const u$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},c$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},d$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},h$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},f$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},p$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},m$=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},g$={ordinalNumber:m$,era:kr({values:u$,defaultWidth:"wide"}),quarter:kr({values:c$,defaultWidth:"wide",argumentCallback:n=>n-1}),month:kr({values:d$,defaultWidth:"wide"}),day:kr({values:h$,defaultWidth:"wide"}),dayPeriod:kr({values:f$,defaultWidth:"wide",formattingValues:p$,defaultFormattingWidth:"wide"})};function Ar(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(s);if(!o)return null;const l=o[0],c=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(c)?v$(c,v=>v.test(l)):y$(c,v=>v.test(l));let f;f=n.valueCallback?n.valueCallback(d):d,f=t.valueCallback?t.valueCallback(f):f;const m=e.slice(l.length);return{value:f,rest:m}}}function y$(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function v$(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function gP(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],o=e.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=t.valueCallback?t.valueCallback(l):l;const c=e.slice(s.length);return{value:l,rest:c}}}const _$=/^(\d+)(th|st|nd|rd)?/i,w$=/\d+/i,x$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},E$={any:[/^b/i,/^(a|c)/i]},T$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},b$={any:[/1/i,/2/i,/3/i,/4/i]},S$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},I$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},P$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},k$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},A$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},C$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},R$={ordinalNumber:gP({matchPattern:_$,parsePattern:w$,valueCallback:n=>parseInt(n,10)}),era:Ar({matchPatterns:x$,defaultMatchWidth:"wide",parsePatterns:E$,defaultParseWidth:"any"}),quarter:Ar({matchPatterns:T$,defaultMatchWidth:"wide",parsePatterns:b$,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ar({matchPatterns:S$,defaultMatchWidth:"wide",parsePatterns:I$,defaultParseWidth:"any"}),day:Ar({matchPatterns:P$,defaultMatchWidth:"wide",parsePatterns:k$,defaultParseWidth:"any"}),dayPeriod:Ar({matchPatterns:A$,defaultMatchWidth:"any",parsePatterns:C$,defaultParseWidth:"any"})},N$={code:"en-US",formatDistance:n$,formatLong:o$,formatRelative:l$,localize:g$,match:R$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function D$(n,e){const t=pr(n,e==null?void 0:e.in);return Y3(t,e$(t))+1}function j$(n,e){const t=pr(n,e==null?void 0:e.in),r=+Kh(t)-+X3(t);return Math.round(r/pP)+1}function yP(n,e){var m,v,x,b;const t=pr(n,e==null?void 0:e.in),r=t.getFullYear(),s=Af(),o=(e==null?void 0:e.firstWeekContainsDate)??((v=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(x=s.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,l=pi((e==null?void 0:e.in)||n,0);l.setFullYear(r+1,0,o),l.setHours(0,0,0,0);const c=ic(l,e),d=pi((e==null?void 0:e.in)||n,0);d.setFullYear(r,0,o),d.setHours(0,0,0,0);const f=ic(d,e);return+t>=+c?r+1:+t>=+f?r:r-1}function O$(n,e){var c,d,f,m;const t=Af(),r=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??t.firstWeekContainsDate??((m=(f=t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,s=yP(n,e),o=pi((e==null?void 0:e.in)||n,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),ic(o,e)}function M$(n,e){const t=pr(n,e==null?void 0:e.in),r=+ic(t,e)-+O$(t,e);return Math.round(r/pP)+1}function He(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Gs={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return He(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):He(t+1,2)},d(n,e){return He(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return He(n.getHours()%12||12,e.length)},H(n,e){return He(n.getHours(),e.length)},m(n,e){return He(n.getMinutes(),e.length)},s(n,e){return He(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return He(s,e.length)}},ba={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ET={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return Gs.y(n,e)},Y:function(n,e,t,r){const s=yP(n,r),o=s>0?s:1-s;if(e==="YY"){const l=o%100;return He(l,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):He(o,e.length)},R:function(n,e){const t=mP(n);return He(t,e.length)},u:function(n,e){const t=n.getFullYear();return He(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return He(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return He(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Gs.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return He(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=M$(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):He(s,e.length)},I:function(n,e,t){const r=j$(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):He(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Gs.d(n,e)},D:function(n,e,t){const r=D$(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):He(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return He(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return He(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return He(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=ba.noon:r===0?s=ba.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=ba.evening:r>=12?s=ba.afternoon:r>=4?s=ba.morning:s=ba.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Gs.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Gs.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):He(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):He(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Gs.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Gs.s(n,e)},S:function(n,e){return Gs.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return bT(r);case"XXXX":case"XX":return no(r);case"XXXXX":case"XXX":default:return no(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return bT(r);case"xxxx":case"xx":return no(r);case"xxxxx":case"xxx":default:return no(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+TT(r,":");case"OOOO":default:return"GMT"+no(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+TT(r,":");case"zzzz":default:return"GMT"+no(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return He(r,e.length)},T:function(n,e,t){return He(+n,e.length)}};function TT(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),o=r%60;return o===0?t+String(s):t+String(s)+e+He(o,2)}function bT(n,e){return n%60===0?(n>0?"-":"+")+He(Math.abs(n)/60,2):no(n,e)}function no(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=He(Math.trunc(r/60),2),o=He(r%60,2);return t+s+e+o}const ST=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vP=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},V$=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return ST(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",ST(r,e)).replace("{{time}}",vP(s,e))},L$={p:vP,P:V$},U$=/^D+$/,F$=/^Y+$/,$$=["D","DD","YY","YYYY"];function B$(n){return U$.test(n)}function z$(n){return F$.test(n)}function q$(n,e,t){const r=W$(n,e,t);if(console.warn(r),$$.includes(n))throw new RangeError(r)}function W$(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const H$=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,G$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,K$=/^'([^]*?)'?$/,Q$=/''/g,Y$=/[a-zA-Z]/;function X$(n,e,t){var m,v,x,b,k,C,P,U;const r=Af(),s=(t==null?void 0:t.locale)??r.locale??N$,o=(t==null?void 0:t.firstWeekContainsDate)??((v=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??r.firstWeekContainsDate??((b=(x=r.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,l=(t==null?void 0:t.weekStartsOn)??((C=(k=t==null?void 0:t.locale)==null?void 0:k.options)==null?void 0:C.weekStartsOn)??r.weekStartsOn??((U=(P=r.locale)==null?void 0:P.options)==null?void 0:U.weekStartsOn)??0,c=pr(n,t==null?void 0:t.in);if(!Z3(c))throw new RangeError("Invalid time value");let d=e.match(G$).map(H=>{const z=H[0];if(z==="p"||z==="P"){const X=L$[z];return X(H,s.formatLong)}return H}).join("").match(H$).map(H=>{if(H==="''")return{isToken:!1,value:"'"};const z=H[0];if(z==="'")return{isToken:!1,value:J$(H)};if(ET[z])return{isToken:!0,value:H};if(z.match(Y$))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return{isToken:!1,value:H}});s.localize.preprocessor&&(d=s.localize.preprocessor(c,d));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:s};return d.map(H=>{if(!H.isToken)return H.value;const z=H.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&z$(z)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&B$(z))&&q$(z,e,String(n));const X=ET[z[0]];return X(c,z,s.localize,f)}).join("")}function J$(n){const e=n.match(K$);return e?e[1].replace(Q$,"'"):n}const Z$={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},eB=(n,e,t)=>{let r;const s=Z$[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"em "+r:"há "+r:r},tB={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},nB={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},rB={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sB={date:Ba({formats:tB,defaultWidth:"full"}),time:Ba({formats:nB,defaultWidth:"full"}),dateTime:Ba({formats:rB,defaultWidth:"full"})},iB={lastWeek:n=>{const e=n.getDay();return"'"+(e===0||e===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},oB=(n,e,t,r)=>{const s=iB[n];return typeof s=="function"?s(e):s},aB={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},lB={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},uB={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},cB={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},dB={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},hB={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},fB=(n,e)=>{const t=Number(n);return(e==null?void 0:e.unit)==="week"?t+"ª":t+"º"},pB={ordinalNumber:fB,era:kr({values:aB,defaultWidth:"wide"}),quarter:kr({values:lB,defaultWidth:"wide",argumentCallback:n=>n-1}),month:kr({values:uB,defaultWidth:"wide"}),day:kr({values:cB,defaultWidth:"wide"}),dayPeriod:kr({values:dB,defaultWidth:"wide",formattingValues:hB,defaultFormattingWidth:"wide"})},mB=/^(\d+)[ºªo]?/i,gB=/\d+/i,yB={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},vB={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},_B={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},wB={any:[/1/i,/2/i,/3/i,/4/i]},xB={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},EB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},TB={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},bB={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},SB={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},IB={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},PB={ordinalNumber:gP({matchPattern:mB,parsePattern:gB,valueCallback:n=>parseInt(n,10)}),era:Ar({matchPatterns:yB,defaultMatchWidth:"wide",parsePatterns:vB,defaultParseWidth:"any"}),quarter:Ar({matchPatterns:_B,defaultMatchWidth:"wide",parsePatterns:wB,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ar({matchPatterns:xB,defaultMatchWidth:"wide",parsePatterns:EB,defaultParseWidth:"any"}),day:Ar({matchPatterns:TB,defaultMatchWidth:"wide",parsePatterns:bB,defaultParseWidth:"any"}),dayPeriod:Ar({matchPatterns:SB,defaultMatchWidth:"any",parsePatterns:IB,defaultParseWidth:"any"})},kB={code:"pt-BR",formatDistance:eB,formatLong:sB,formatRelative:oB,localize:pB,match:PB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function AB(n){if(n===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,r)).toFixed(2))+" "+t[r]}function CB({isOpen:n,onClose:e,imageUrl:t,fileName:r,fileSize:s,createdAt:o,onDelete:l}){return n?y.jsx(jr,{children:y.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,children:y.jsxs(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-7xl mx-auto flex flex-col lg:flex-row gap-4 lg:gap-8 max-h-[90vh] overflow-hidden",onClick:c=>c.stopPropagation(),children:[y.jsx("div",{className:"flex-1 relative bg-black/50 rounded-lg overflow-hidden flex items-center justify-center",children:y.jsx("div",{className:"relative w-full h-full max-h-[70vh] lg:max-h-[90vh]",children:y.jsx("img",{src:t,alt:r,className:"w-full h-full object-contain",style:{maxHeight:"100%",maxWidth:"100%"}})})}),y.jsxs("div",{className:"w-full lg:w-80 bg-gray-900 rounded-lg p-4 lg:p-6 flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsx("h3",{className:"text-lg lg:text-xl font-bold text-white truncate flex-1 mr-2",children:r}),y.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-800 rounded-lg transition-colors flex-shrink-0",children:y.jsx(fs,{className:"w-5 h-5"})})]}),y.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[y.jsx(JU,{className:"w-5 h-5 flex-shrink-0"}),y.jsx("span",{className:"text-sm",children:X$(o,"d 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:kB})})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[y.jsx($I,{className:"w-5 h-5 flex-shrink-0"}),y.jsx("span",{className:"text-sm truncate",children:r})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[y.jsx(sF,{className:"w-5 h-5 flex-shrink-0"}),y.jsx("span",{className:"text-sm",children:AB(s)})]})]}),y.jsxs("div",{className:"flex flex-col gap-3 pt-4 mt-4 border-t border-gray-800",children:[y.jsxs(Y.a,{href:t,download:!0,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[y.jsx(bv,{className:"w-5 h-5"}),y.jsx("span",{children:"Download"})]}),l&&y.jsxs(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:l,className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500/20 transition-colors",children:[y.jsx(cF,{className:"w-5 h-5"}),y.jsx("span",{children:"Excluir imagem"})]})]})]})]})})}):null}function IT({originalUrl:n,processedUrl:e,isProcessing:t=!1,fileName:r="image.jpg",fileSize:s=0,createdAt:o=new Date,onDelete:l}){const[c,d]=L.useState(!1);return e&&!t?y.jsxs(y.Fragment,{children:[y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative aspect-square rounded-lg overflow-hidden bg-gray-800 cursor-pointer",onClick:()=>d(!0),children:[y.jsx("img",{src:e,alt:"Processed",className:"w-full h-full object-cover"}),y.jsxs(Y.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity hidden sm:flex items-center justify-center gap-4",children:[y.jsx(Y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:f=>{f.stopPropagation(),d(!0)},className:"p-2 bg-purple-600 rounded-full",children:y.jsx(VE,{className:"w-6 h-6"})}),y.jsx(Y.a,{href:e,download:!0,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:f=>f.stopPropagation(),className:"p-2 bg-purple-600 rounded-full",children:y.jsx(bv,{className:"w-6 h-6"})})]}),y.jsx("div",{className:"absolute bottom-2 right-2 sm:hidden",children:y.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center",children:y.jsx(VE,{className:"w-5 h-5"})})})]}),y.jsx(CB,{isOpen:c,onClose:()=>d(!1),imageUrl:e,fileName:r,fileSize:s,createdAt:o,onDelete:l})]}):t?y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative aspect-square rounded-lg overflow-hidden bg-gray-800",children:[y.jsx("img",{src:n,alt:"Processing",className:"w-full h-full object-cover blur-sm"}),y.jsxs(Y.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 flex flex-col items-center justify-center",children:[y.jsx(Y.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:y.jsx(Pf,{className:"w-8 h-8 text-purple-500"})}),y.jsx("p",{className:"text-sm text-white mt-2",children:"Processando..."})]})]}):null}function RB(n){if(n===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,r)).toFixed(2))+" "+t[r]}function NB(){const[n]=il(rt),e=Rn(),t=L.useRef(null),[r,s]=L.useState(!1),[o,l]=L.useState(null),[c,d]=L.useState(null),[f,m]=L.useState(!1),[v,x]=L.useState(!1),[b,k]=L.useState(!1),[C,P]=L.useState(!1),[U,H]=L.useState([]),[z,X]=L.useState(!0),[J,ie]=L.useState({}),[D,S]=L.useState({version:"1.4",bgUpsampler:"none",realEsrgan:"x4",upscale:4});L.useEffect(()=>{async function G(){if(n)try{X(!0);const ue=await z3(n.uid);H(ue)}catch(ue){console.error("Error loading processed images:",ue)}finally{X(!1)}}G()},[n]);const A=G=>{G.preventDefault(),s(!0)},j=G=>{G.preventDefault(),s(!1)},M=L.useCallback(async G=>{G.preventDefault(),s(!1),l(null);const ue=Array.from(G.dataTransfer.files);ue.length>0&&await Ke(ue[0])},[]),$=async G=>{l(null),G.target.files&&G.target.files.length>0&&await Ke(G.target.files[0])},N=G=>new Promise(ue=>{const ae=new Image;ae.onload=()=>{ue({width:ae.width,height:ae.height})},ae.src=URL.createObjectURL(G)}),Ke=async G=>{try{if(!G.type.match(/^image\/(jpeg|png|webp)$/))throw new Error("Formato de arquivo não suportado. Use JPG, PNG ou WebP.");if(G.size>50*1024*1024)throw new Error("Arquivo muito grande. O tamanho máximo é 50MB.");const ue=await N(G),ae=URL.createObjectURL(G);d({file:G,preview:ae,dimensions:ue})}catch(ue){l(ue instanceof Error?ue.message:"Erro ao fazer upload da imagem"),d(null)}},_t=()=>{var G;(G=t.current)==null||G.click()},wt=()=>{c&&URL.revokeObjectURL(c.preview),d(null),l(null),t.current&&(t.current.value="")},Te=async()=>{if(!(!c||C))try{P(!0),l(null);const G=Date.now().toString();ie(F=>({...F,[G]:{originalUrl:c.preview}}));const ue=await B3(c.file,D),ae={id:G,userId:(n==null?void 0:n.uid)||"",originalUrl:c.preview,processedUrl:ue,createdAt:new Date};H(F=>[ae,...F]),ie(F=>{const{[G]:Z,...ye}=F;return ye}),wt(),b&&k(!1)}catch(G){console.error("Error processing image:",G),l(G instanceof Error&&G.message==="Créditos insuficientes"?"Você não tem créditos suficientes para processar esta imagem":G instanceof Error?G.message:"Falha ao processar imagem. Tente novamente."),ie(ue=>{const ae={...ue},F=Object.keys(ae).find(Z=>!ae[Z].processedUrl);return F&&delete ae[F],ae})}finally{P(!1)}};return L.useEffect(()=>()=>{Object.values(J).forEach(G=>{URL.revokeObjectURL(G.originalUrl),G.processedUrl&&URL.revokeObjectURL(G.processedUrl)})},[J]),y.jsxs("div",{className:"flex flex-col min-h-screen bg-[#1C1C1E] text-white",children:[y.jsx("header",{className:"fixed top-0 left-0 right-0 bg-[#1C1C1E] border-b border-gray-800 z-50",children:y.jsx("div",{className:"max-w-full mx-auto px-4",children:y.jsxs("div",{className:"h-16 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e("/"),className:"p-2 rounded-lg bg-white-800 hover:bg-gray-700 transition-colors",children:y.jsx(oF,{size:16})}),y.jsx(Y.img,{whileHover:{scale:1.1,rotate:360},transition:{duration:.6},src:"Duda_.png",alt:"Logo",className:"w-8 h-8"})]}),y.jsx("div",{className:"hidden md:flex space-x-4 text-sm",children:["Aprimorador","Gerador","Novo"].map((G,ue)=>y.jsx(Y.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:ue*.1},className:G==="Aprimorador"?"text-white font-medium":"text-gray-400",children:G},G))}),y.jsxs("div",{className:"flex items-center",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(q3,{}),y.jsx(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>m(!0),className:"text-sm text-gray-400 hover:text-white transition-colors whitespace-nowrap",children:"Planos"})]}),y.jsx("div",{className:"hidden sm:block ml-4",children:y.jsx(HI,{})}),y.jsx(Y.button,{whileHover:{scale:1.05},whileTap:{scale:1.95},onClick:()=>x(!v),className:"sm:hidden ml-4 p-2",children:y.jsx(zI,{size:20})})]})]})})}),y.jsxs("div",{className:"flex flex-1 pt-16",children:[y.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:y.jsxs("div",{className:"max-w-6xl mx-auto",children:[y.jsxs("div",{className:"text-xs text-gray-400 font-medium mb-2 flex items-center justify-between",children:[y.jsx("span",{children:"IMAGENS PARA PROCESSAR"}),y.jsxs(Y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>k(!0),className:"lg:hidden flex items-center gap-2 text-purple-500",children:[y.jsx(Fa,{size:14}),y.jsx("span",{children:"Configurações"})]})]}),y.jsxs(Y.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.3},onDragEnter:A,onDragOver:G=>G.preventDefault(),onDragLeave:j,onDrop:M,className:`relative h-48 sm:h-72 border-2 border-dashed border-gray-700 rounded-lg flex items-center justify-center transition-all duration-300 overflow-hidden ${r?"border-purple-500 bg-purple-500/10":"hover:border-gray-600"}`,children:[y.jsx("input",{ref:t,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:$,className:"hidden",id:"file-upload"}),c?y.jsxs(Y.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"relative w-full h-full group",children:[y.jsx("img",{src:c.preview,alt:"Preview",className:"w-full h-full object-contain"}),y.jsxs(Y.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center",children:[y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-900/80 p-4 rounded-lg mb-4 text-sm",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2 text-purple-400",children:[y.jsx($I,{size:16}),y.jsx("span",{className:"font-medium",children:c.file.name})]}),y.jsxs("div",{className:"space-y-1 text-gray-300",children:[y.jsxs("p",{children:["Tamanho: ",RB(c.file.size)]}),c.dimensions&&y.jsxs("p",{children:["Dimensões: ",c.dimensions.width," x ",c.dimensions.height,"px"]}),y.jsxs("p",{children:["Tipo: ",c.file.type.split("/")[1].toUpperCase()]})]})]}),y.jsx(Y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:wt,className:"bg-red-500 text-white p-2 rounded-full",children:y.jsx(fs,{size:24})})]})]}):y.jsxs("div",{className:"text-center px-4",children:[y.jsx(Og,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-600 mx-auto mb-4"}),y.jsxs("p",{className:"text-gray-400 mb-2 text-sm sm:text-base",children:["Solte suas imagens aqui, ou"," ",y.jsx("button",{onClick:_t,className:"text-purple-500 hover:text-purple-400 transition-colors",children:"procure"})]}),y.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 text-xs sm:text-sm",children:[y.jsx("span",{children:"ou importe de"}),y.jsx("button",{onClick:_t,className:"px-3 py-1 bg-gray-800 rounded-md flex items-center gap-1 hover:bg-gray-700 transition-colors",children:y.jsx(WI,{className:"w-4 h-4"})}),y.jsx("button",{className:"px-3 py-1 bg-gray-800 rounded-md flex items-center gap-1 hover:bg-gray-700 transition-colors",children:y.jsx(FI,{className:"w-4 h-4"})})]}),y.jsx("p",{className:"text-gray-600 text-xs mt-2",children:"JPG, PNG, WebP até 50 mb"})]}),y.jsx(jr,{children:o&&y.jsxs(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute bottom-4 left-4 right-4 bg-red-500/10 border border-red-500 text-red-500 px-4 py-2 rounded-lg flex items-center justify-between text-sm",children:[y.jsx("span",{children:o}),y.jsx("button",{onClick:()=>l(null),className:"text-red-500 hover:text-red-400",children:y.jsx(fs,{size:20})})]})})]}),y.jsxs("div",{className:"mt-8",children:[y.jsx("div",{className:"text-xs text-gray-400 font-medium mb-4 flex justify-between items-center",children:y.jsx("span",{children:"IMAGENS PROCESSADAS"})}),y.jsx("div",{className:"space-y-4",children:z?y.jsxs("div",{className:"text-center py-8",children:[y.jsx(Pf,{className:"w-8 h-8 text-purple-500 animate-spin mx-auto mb-4"}),y.jsx("p",{className:"text-gray-400",children:"Carregando imagens..."})]}):U.length>0||Object.keys(J).length>0?y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[Object.entries(J).map(([G,ue])=>y.jsx(IT,{originalUrl:ue.originalUrl,processedUrl:ue.processedUrl,isProcessing:!ue.processedUrl},G)),U.map(G=>y.jsx(IT,{originalUrl:G.originalUrl,processedUrl:G.processedUrl},G.id))]}):y.jsxs("div",{className:"text-center py-8 bg-gray-800/50 rounded-lg",children:[y.jsx(Og,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-400",children:"Nenhuma imagem processada ainda"}),y.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Suas imagens processadas aparecerão aqui"})]})})]})]})}),y.jsx(Y.div,{initial:{x:"100%"},animate:{x:0},className:"hidden lg:block w-80 border-l border-gray-800 overflow-y-auto",children:y.jsx("div",{className:"sticky top-0 p-4 bg-[#1C1aC1E]",children:y.jsx(vT,{settings:D,setSettings:S,onProcess:Te,isProcessing:C})})})]}),y.jsx(jr,{children:v&&y.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:()=>x(!1),children:y.jsx(Y.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-[#1C1C1E] overflow-y-auto",onClick:G=>G.stopPropagation(),children:y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs(Y.button,{whileHover:{scale:1.02},whileTap:{scale:.95},onClick:()=>x(!1),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 rounded-lg text-white hover:bg-gray-700 transition-colors",children:[y.jsx(Ou,{className:"w-5 h-5"}),y.jsx("span",{children:"Voltar para Minhas Imagens"})]}),y.jsxs("div",{className:"flex items-center gap-4 py-4 border-t border-gray-800",children:[y.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-purple-500",children:y.jsx("img",{src:(n==null?void 0:n.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${n==null?void 0:n.email}`,alt:"Foto de perfil",className:"w-full h-full object-cover"})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-white",children:(n==null?void 0:n.displayName)||"Usuário"}),y.jsx("p",{className:"text-sm text-gray-400",children:n==null?void 0:n.email})]})]}),y.jsx("div",{className:"space-y-3 py-4 border-t border-gray-800",children:["Aprimorador","Gerador","Novo"].map(G=>y.jsx(Y.button,{whileTap:{scale:.95},className:`w-full px-4 py-3 rounded-lg ${G==="Aprimorador"?"bg-purple-600 text-white":"bg-gray-800 text-gray-300"}`,children:G},G))}),y.jsxs("div",{className:"space-y-3 py-4 border-t border-gray-800",children:[y.jsxs(Y.button,{whileTap:{scale:.95},onClick:()=>{x(!1),e("/settings")},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 rounded-lg text-gray-300",children:[y.jsx(Fa,{className:"w-5 h-5"}),y.jsx("span",{children:"Configurações"})]}),y.jsxs(Y.button,{whileTap:{scale:.95},onClick:()=>rt.signOut(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500/10 rounded-lg text-red-500",children:[y.jsx(If,{className:"w-5 h-5"}),y.jsx("span",{children:"Sair"})]})]})]})})})}),y.jsx(jr,{children:b&&y.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lg:hidden fixed inset-0 bg-black/50 z-50",onClick:()=>k(!1),children:y.jsx(Y.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-[#1C1C1E] overflow-y-auto",onClick:G=>G.stopPropagation(),children:y.jsxs("div",{className:"p-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-white",children:"Configurações"}),y.jsx(Y.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>k(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:y.jsx(fs,{size:24})})]}),y.jsx(vT,{settings:D,setSettings:S,onProcess:Te,onClose:()=>k(!1),isProcessing:C})]})})})}),y.jsx(H3,{isOpen:f,onClose:()=>m(!1)}),y.jsx(Y.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},whileTap:{scale:.95},onClick:()=>k(!0),className:"lg:hidden fixed bottom-6 right-6 w-14 h-14 rounded-full bg-purple-600 shadow-lg flex items-center justify-center z-20",children:y.jsx(Fa,{size:24})})]})}var DB="@vercel/analytics",jB="1.4.1",OB=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function _P(){return typeof window<"u"}function wP(){try{const n="production"}catch{}return"production"}function MB(n="auto"){if(n==="auto"){window.vam=wP();return}window.vam=n}function VB(){return(_P()?window.vam:wP())||"production"}function $m(){return VB()==="development"}var LB="https://va.vercel-scripts.com/v1/script.debug.js",UB="/_vercel/insights/script.js";function FB(n={debug:!0}){var e;if(!_P())return;MB(n.mode),OB(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const t=n.scriptSrc||($m()?LB:UB);if(document.head.querySelector(`script[src*="${t}"]`))return;const r=document.createElement("script");r.src=t,r.defer=!0,r.dataset.sdkn=DB+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=jB,n.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),n.endpoint&&(r.dataset.endpoint=n.endpoint),n.dsn&&(r.dataset.dsn=n.dsn),r.onerror=()=>{const s=$m()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},$m()&&n.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function $B({route:n,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:n,path:e})}function BB(n){return L.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),L.useEffect(()=>{FB({framework:n.framework||"react",...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),L.useEffect(()=>{n.route&&n.path&&$B({route:n.route,path:n.path})},[n.route,n.path]),null}function zB(){return y.jsx("div",{className:"fixed inset-0 bg-gray-900 flex items-center justify-center z-50",children:y.jsxs(Y.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.3},className:"relative",children:[y.jsx(Y.div,{className:"w-16 h-16 border-4 border-purple-500/30 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),y.jsx(Y.div,{className:"absolute top-0 left-0 w-16 h-16 border-4 border-t-purple-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})]})})}var qB="@vercel/speed-insights",WB="1.1.0",HB=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function GB(){return typeof window<"u"}function KB(){try{const n="production"}catch{}return"production"}function PT(){return KB()==="development"}var xP="https://va.vercel-scripts.com/v1/speed-insights",QB=`${xP}/script.js`,YB=`${xP}/script.debug.js`,XB="/_vercel/speed-insights/script.js";function JB(n={}){var e;if(!GB()||n.route===null)return null;HB();const r=!!n.dsn?QB:XB,s=n.scriptSrc||(PT()?YB:r);if(document.head.querySelector(`script[src*="${s}"]`))return null;n.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",n.beforeSend));const o=document.createElement("script");return o.src=s,o.defer=!0,o.dataset.sdkn=qB+(n.framework?`/${n.framework}`:""),o.dataset.sdkv=WB,n.sampleRate&&(o.dataset.sampleRate=n.sampleRate.toString()),n.route&&(o.dataset.route=n.route),n.endpoint&&(o.dataset.endpoint=n.endpoint),n.dsn&&(o.dataset.dsn=n.dsn),PT()&&n.debug===!1&&(o.dataset.debug="false"),o.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${s}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(o),{setRoute:l=>{o.dataset.route=l??void 0}}}function ZB(n){L.useEffect(()=>{var t;n.beforeSend&&((t=window.si)==null||t.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]);const e=L.useRef(null);return L.useEffect(()=>{if(e.current)n.route&&e.current(n.route);else{const t=JB({framework:n.framework||"react",...n});t&&(e.current=t.setRoute)}},[n.route]),null}function Bm({children:n}){const[e,t]=il(rt);return t?y.jsx(zB,{}):e?y.jsx(y.Fragment,{children:n}):y.jsx(IA,{to:"/login",replace:!0})}function e6(){return y.jsxs(y.Fragment,{children:[y.jsx(ZB,{})," ",y.jsx(BB,{})," ",y.jsxs(kA,{children:[y.jsx(Xi,{path:"/",element:y.jsx(PF,{})}),y.jsx(Xi,{path:"/login",element:y.jsx(HU,{})}),y.jsx(Xi,{path:"/register",element:y.jsx(GU,{})}),y.jsx(Xi,{path:"/my-images",element:y.jsx(Bm,{children:y.jsx(NB,{})})}),y.jsx(Xi,{path:"/payment/*",element:y.jsx(Bm,{children:y.jsx(VF,{})})}),y.jsx(Xi,{path:"/settings",element:y.jsx(Bm,{children:y.jsx(qF,{})})})]})]})}Mk.createRoot(document.getElementById("root")).render(y.jsx(Lu.StrictMode,{children:y.jsx(MA,{children:y.jsx(e6,{})})}));export{Qh as g};
