function oR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function f1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aR(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var p1={exports:{}},Ph={},m1={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=Symbol.for("react.element"),lR=Symbol.for("react.portal"),cR=Symbol.for("react.fragment"),uR=Symbol.for("react.strict_mode"),hR=Symbol.for("react.profiler"),dR=Symbol.for("react.provider"),fR=Symbol.for("react.context"),pR=Symbol.for("react.forward_ref"),mR=Symbol.for("react.suspense"),gR=Symbol.for("react.memo"),yR=Symbol.for("react.lazy"),O0=Symbol.iterator;function vR(t){return t===null||typeof t!="object"?null:(t=O0&&t[O0]||t["@@iterator"],typeof t=="function"?t:null)}var g1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y1=Object.assign,v1={};function To(t,e,n){this.props=t,this.context=e,this.refs=v1,this.updater=n||g1}To.prototype.isReactComponent={};To.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};To.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _1(){}_1.prototype=To.prototype;function Zm(t,e,n){this.props=t,this.context=e,this.refs=v1,this.updater=n||g1}var eg=Zm.prototype=new _1;eg.constructor=Zm;y1(eg,To.prototype);eg.isPureReactComponent=!0;var j0=Array.isArray,w1=Object.prototype.hasOwnProperty,tg={current:null},E1={key:!0,ref:!0,__self:!0,__source:!0};function x1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)w1.call(e,r)&&!E1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Dl,type:t,key:s,ref:o,props:i,_owner:tg.current}}function _R(t,e){return{$$typeof:Dl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ng(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dl}function wR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var V0=/\/+/g;function Xd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wR(""+t.key):e.toString(36)}function ru(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dl:case lR:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xd(o,0):r,j0(i)?(n="",t!=null&&(n=t.replace(V0,"$&/")+"/"),ru(i,e,n,"",function(c){return c})):i!=null&&(ng(i)&&(i=_R(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(V0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",j0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Xd(s,a);o+=ru(s,e,n,l,i)}else if(l=vR(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Xd(s,a++),o+=ru(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tc(t,e,n){if(t==null)return t;var r=[],i=0;return ru(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ER(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},iu={transition:null},xR={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:iu,ReactCurrentOwner:tg};function T1(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Tc,forEach:function(t,e,n){Tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tc(t,function(){e++}),e},toArray:function(t){return Tc(t,function(e){return e})||[]},only:function(t){if(!ng(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=To;ne.Fragment=cR;ne.Profiler=hR;ne.PureComponent=Zm;ne.StrictMode=uR;ne.Suspense=mR;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xR;ne.act=T1;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=y1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=tg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)w1.call(e,l)&&!E1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Dl,type:t.type,key:i,ref:s,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:fR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dR,_context:t},t.Consumer=t};ne.createElement=x1;ne.createFactory=function(t){var e=x1.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:pR,render:t}};ne.isValidElement=ng;ne.lazy=function(t){return{$$typeof:yR,_payload:{_status:-1,_result:t},_init:ER}};ne.memo=function(t,e){return{$$typeof:gR,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=iu.transition;iu.transition={};try{t()}finally{iu.transition=e}};ne.unstable_act=T1;ne.useCallback=function(t,e){return St.current.useCallback(t,e)};ne.useContext=function(t){return St.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return St.current.useDeferredValue(t)};ne.useEffect=function(t,e){return St.current.useEffect(t,e)};ne.useId=function(){return St.current.useId()};ne.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return St.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};ne.useRef=function(t){return St.current.useRef(t)};ne.useState=function(t){return St.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return St.current.useTransition()};ne.version="18.3.1";m1.exports=ne;var N=m1.exports;const Ka=f1(N),TR=oR({__proto__:null,default:Ka},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bR=N,SR=Symbol.for("react.element"),IR=Symbol.for("react.fragment"),PR=Object.prototype.hasOwnProperty,kR=bR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AR={key:!0,ref:!0,__self:!0,__source:!0};function b1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PR.call(e,r)&&!AR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:SR,type:t,key:s,ref:o,props:i,_owner:kR.current}}Ph.Fragment=IR;Ph.jsx=b1;Ph.jsxs=b1;p1.exports=Ph;var f=p1.exports,sp={},S1={exports:{}},Wt={},I1={exports:{}},P1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,W){var K=V.length;V.push(W);e:for(;0<K;){var ce=K-1>>>1,de=V[ce];if(0<i(de,W))V[ce]=W,V[K]=de,K=ce;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],K=V.pop();if(K!==W){V[0]=K;e:for(var ce=0,de=V.length,Pe=de>>>1;ce<Pe;){var zn=2*(ce+1)-1,Wn=V[zn],qn=zn+1,Hn=V[qn];if(0>i(Wn,K))qn<de&&0>i(Hn,Wn)?(V[ce]=Hn,V[qn]=K,ce=qn):(V[ce]=Wn,V[zn]=K,ce=zn);else if(qn<de&&0>i(Hn,K))V[ce]=Hn,V[qn]=K,ce=qn;else break e}}return W}function i(V,W){var K=V.sortIndex-W.sortIndex;return K!==0?K:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,m=3,y=!1,E=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(V){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=V)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function C(V){if(S=!1,T(V),!E)if(n(l)!==null)E=!0,Bn(O);else{var W=n(c);W!==null&&ge(C,W.startTime-V)}}function O(V,W){E=!1,S&&(S=!1,w(v),v=-1),y=!0;var K=m;try{for(T(W),d=n(l);d!==null&&(!(d.expirationTime>W)||V&&!R());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,m=d.priorityLevel;var de=ce(d.expirationTime<=W);W=t.unstable_now(),typeof de=="function"?d.callback=de:d===n(l)&&r(l),T(W)}else r(l);d=n(l)}if(d!==null)var Pe=!0;else{var zn=n(c);zn!==null&&ge(C,zn.startTime-W),Pe=!1}return Pe}finally{d=null,m=K,y=!1}}var U=!1,P=null,v=-1,I=5,k=-1;function R(){return!(t.unstable_now()-k<I)}function D(){if(P!==null){var V=t.unstable_now();k=V;var W=!0;try{W=P(!0,V)}finally{W?A():(U=!1,P=null)}}else U=!1}var A;if(typeof _=="function")A=function(){_(D)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,rn=Ge.port2;Ge.port1.onmessage=D,A=function(){rn.postMessage(null)}}else A=function(){b(D,0)};function Bn(V){P=V,U||(U=!0,A())}function ge(V,W){v=b(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){E||y||(E=!0,Bn(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var K=m;m=W;try{return V()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=m;m=V;try{return W()}finally{m=K}},t.unstable_scheduleCallback=function(V,W,K){var ce=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ce+K:ce):K=ce,V){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=K+de,V={id:h++,callback:W,priorityLevel:V,startTime:K,expirationTime:de,sortIndex:-1},K>ce?(V.sortIndex=K,e(c,V),n(l)===null&&V===n(c)&&(S?(w(v),v=-1):S=!0,ge(C,K-ce))):(V.sortIndex=de,e(l,V),E||y||(E=!0,Bn(O))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var W=m;return function(){var K=m;m=W;try{return V.apply(this,arguments)}finally{m=K}}}})(P1);I1.exports=P1;var RR=I1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR=N,Bt=RR;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k1=new Set,Qa={};function ns(t,e){no(t,e),no(t+"Capture",e)}function no(t,e){for(Qa[t]=e,t=0;t<e.length;t++)k1.add(e[t])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),op=Object.prototype.hasOwnProperty,NR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M0={},L0={};function DR(t){return op.call(L0,t)?!0:op.call(M0,t)?!1:NR.test(t)?L0[t]=!0:(M0[t]=!0,!1)}function OR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jR(t,e,n,r){if(e===null||typeof e>"u"||OR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var rg=/[\-:]([a-z])/g;function ig(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rg,ig);st[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rg,ig);st[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rg,ig);st[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function sg(t,e,n,r){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jR(e,n,i,r)&&(n=null),r||i===null?DR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vr=CR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bc=Symbol.for("react.element"),Ss=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),og=Symbol.for("react.strict_mode"),ap=Symbol.for("react.profiler"),A1=Symbol.for("react.provider"),R1=Symbol.for("react.context"),ag=Symbol.for("react.forward_ref"),lp=Symbol.for("react.suspense"),cp=Symbol.for("react.suspense_list"),lg=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),C1=Symbol.for("react.offscreen"),U0=Symbol.iterator;function Zo(t){return t===null||typeof t!="object"?null:(t=U0&&t[U0]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Zd;function fa(t){if(Zd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zd=e&&e[1]||""}return`
`+Zd+t}var ef=!1;function tf(t,e){if(!t||ef)return"";ef=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ef=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fa(t):""}function VR(t){switch(t.tag){case 5:return fa(t.type);case 16:return fa("Lazy");case 13:return fa("Suspense");case 19:return fa("SuspenseList");case 0:case 2:case 15:return t=tf(t.type,!1),t;case 11:return t=tf(t.type.render,!1),t;case 1:return t=tf(t.type,!0),t;default:return""}}function up(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case Ss:return"Portal";case ap:return"Profiler";case og:return"StrictMode";case lp:return"Suspense";case cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R1:return(t.displayName||"Context")+".Consumer";case A1:return(t._context.displayName||"Context")+".Provider";case ag:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lg:return e=t.displayName||null,e!==null?e:up(t.type)||"Memo";case Rr:e=t._payload,t=t._init;try{return up(t(e))}catch{}}return null}function MR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return up(e);case 8:return e===og?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ti(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LR(t){var e=N1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sc(t){t._valueTracker||(t._valueTracker=LR(t))}function D1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=N1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ku(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hp(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function F0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ti(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function O1(t,e){e=e.checked,e!=null&&sg(t,"checked",e,!1)}function dp(t,e){O1(t,e);var n=ti(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fp(t,e.type,n):e.hasOwnProperty("defaultValue")&&fp(t,e.type,ti(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fp(t,e,n){(e!=="number"||ku(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pa=Array.isArray;function zs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ti(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(pa(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ti(n)}}function j1(t,e){var n=ti(e.value),r=ti(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function z0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ic,M1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UR=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(t){UR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pa[e]=Pa[t]})});function L1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pa.hasOwnProperty(t)&&Pa[t]?(""+e).trim():e+"px"}function U1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=L1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var FR=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gp(t,e){if(e){if(FR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vp=null;function cg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _p=null,Ws=null,qs=null;function W0(t){if(t=Vl(t)){if(typeof _p!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Nh(e),_p(t.stateNode,t.type,e))}}function F1(t){Ws?qs?qs.push(t):qs=[t]:Ws=t}function $1(){if(Ws){var t=Ws,e=qs;if(qs=Ws=null,W0(t),e)for(t=0;t<e.length;t++)W0(e[t])}}function B1(t,e){return t(e)}function z1(){}var nf=!1;function W1(t,e,n){if(nf)return t(e,n);nf=!0;try{return B1(t,e,n)}finally{nf=!1,(Ws!==null||qs!==null)&&(z1(),$1())}}function Ja(t,e){var n=t.stateNode;if(n===null)return null;var r=Nh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var wp=!1;if(cr)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){wp=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{wp=!1}function $R(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ka=!1,Au=null,Ru=!1,Ep=null,BR={onError:function(t){ka=!0,Au=t}};function zR(t,e,n,r,i,s,o,a,l){ka=!1,Au=null,$R.apply(BR,arguments)}function WR(t,e,n,r,i,s,o,a,l){if(zR.apply(this,arguments),ka){if(ka){var c=Au;ka=!1,Au=null}else throw Error(B(198));Ru||(Ru=!0,Ep=c)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function q1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q0(t){if(rs(t)!==t)throw Error(B(188))}function qR(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return q0(i),t;if(s===r)return q0(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function H1(t){return t=qR(t),t!==null?G1(t):null}function G1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G1(t);if(e!==null)return e;t=t.sibling}return null}var K1=Bt.unstable_scheduleCallback,H0=Bt.unstable_cancelCallback,HR=Bt.unstable_shouldYield,GR=Bt.unstable_requestPaint,Le=Bt.unstable_now,KR=Bt.unstable_getCurrentPriorityLevel,ug=Bt.unstable_ImmediatePriority,Q1=Bt.unstable_UserBlockingPriority,Cu=Bt.unstable_NormalPriority,QR=Bt.unstable_LowPriority,Y1=Bt.unstable_IdlePriority,kh=null,An=null;function YR(t){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(kh,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:ZR,JR=Math.log,XR=Math.LN2;function ZR(t){return t>>>=0,t===0?32:31-(JR(t)/XR|0)|0}var Pc=64,kc=4194304;function ma(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ma(a):(s&=o,s!==0&&(r=ma(s)))}else o=n&~i,o!==0?r=ma(o):s!==0&&(r=ma(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mn(e),i=1<<n,r|=t[n],e&=~i;return r}function eC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-mn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=eC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function xp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function J1(){var t=Pc;return Pc<<=1,!(Pc&4194240)&&(Pc=64),t}function rf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ol(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=n}function nC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-mn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pe=0;function X1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Z1,dg,eT,tT,nT,Tp=!1,Ac=[],zr=null,Wr=null,qr=null,Xa=new Map,Za=new Map,Dr=[],rC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G0(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(e.pointerId)}}function ta(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vl(e),e!==null&&dg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iC(t,e,n,r,i){switch(e){case"focusin":return zr=ta(zr,t,e,n,r,i),!0;case"dragenter":return Wr=ta(Wr,t,e,n,r,i),!0;case"mouseover":return qr=ta(qr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Xa.set(s,ta(Xa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Za.set(s,ta(Za.get(s)||null,t,e,n,r,i)),!0}return!1}function rT(t){var e=ji(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=q1(n),e!==null){t.blockedOn=e,nT(t.priority,function(){eT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function su(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vp=r,n.target.dispatchEvent(r),vp=null}else return e=Vl(n),e!==null&&dg(e),t.blockedOn=n,!1;e.shift()}return!0}function K0(t,e,n){su(t)&&n.delete(e)}function sC(){Tp=!1,zr!==null&&su(zr)&&(zr=null),Wr!==null&&su(Wr)&&(Wr=null),qr!==null&&su(qr)&&(qr=null),Xa.forEach(K0),Za.forEach(K0)}function na(t,e){t.blockedOn===e&&(t.blockedOn=null,Tp||(Tp=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,sC)))}function el(t){function e(i){return na(i,t)}if(0<Ac.length){na(Ac[0],t);for(var n=1;n<Ac.length;n++){var r=Ac[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zr!==null&&na(zr,t),Wr!==null&&na(Wr,t),qr!==null&&na(qr,t),Xa.forEach(e),Za.forEach(e),n=0;n<Dr.length;n++)r=Dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dr.length&&(n=Dr[0],n.blockedOn===null);)rT(n),n.blockedOn===null&&Dr.shift()}var Hs=vr.ReactCurrentBatchConfig,Du=!0;function oC(t,e,n,r){var i=pe,s=Hs.transition;Hs.transition=null;try{pe=1,fg(t,e,n,r)}finally{pe=i,Hs.transition=s}}function aC(t,e,n,r){var i=pe,s=Hs.transition;Hs.transition=null;try{pe=4,fg(t,e,n,r)}finally{pe=i,Hs.transition=s}}function fg(t,e,n,r){if(Du){var i=bp(t,e,n,r);if(i===null)pf(t,e,r,Ou,n),G0(t,r);else if(iC(i,t,e,n,r))r.stopPropagation();else if(G0(t,r),e&4&&-1<rC.indexOf(t)){for(;i!==null;){var s=Vl(i);if(s!==null&&Z1(s),s=bp(t,e,n,r),s===null&&pf(t,e,r,Ou,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else pf(t,e,r,null,n)}}var Ou=null;function bp(t,e,n,r){if(Ou=null,t=cg(r),t=ji(t),t!==null)if(e=rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=q1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ou=t,null}function iT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KR()){case ug:return 1;case Q1:return 4;case Cu:case QR:return 16;case Y1:return 536870912;default:return 16}default:return 16}}var Ur=null,pg=null,ou=null;function sT(){if(ou)return ou;var t,e=pg,n=e.length,r,i="value"in Ur?Ur.value:Ur.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ou=i.slice(t,1<r?1-r:void 0)}function au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rc(){return!0}function Q0(){return!1}function qt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rc:Q0,this.isPropagationStopped=Q0,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rc)},persist:function(){},isPersistent:Rc}),e}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mg=qt(bo),jl=Ce({},bo,{view:0,detail:0}),lC=qt(jl),sf,of,ra,Ah=Ce({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ra&&(ra&&t.type==="mousemove"?(sf=t.screenX-ra.screenX,of=t.screenY-ra.screenY):of=sf=0,ra=t),sf)},movementY:function(t){return"movementY"in t?t.movementY:of}}),Y0=qt(Ah),cC=Ce({},Ah,{dataTransfer:0}),uC=qt(cC),hC=Ce({},jl,{relatedTarget:0}),af=qt(hC),dC=Ce({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),fC=qt(dC),pC=Ce({},bo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mC=qt(pC),gC=Ce({},bo,{data:0}),J0=qt(gC),yC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_C={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_C[t])?!!e[t]:!1}function gg(){return wC}var EC=Ce({},jl,{key:function(t){if(t.key){var e=yC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gg,charCode:function(t){return t.type==="keypress"?au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xC=qt(EC),TC=Ce({},Ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X0=qt(TC),bC=Ce({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gg}),SC=qt(bC),IC=Ce({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),PC=qt(IC),kC=Ce({},Ah,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AC=qt(kC),RC=[9,13,27,32],yg=cr&&"CompositionEvent"in window,Aa=null;cr&&"documentMode"in document&&(Aa=document.documentMode);var CC=cr&&"TextEvent"in window&&!Aa,oT=cr&&(!yg||Aa&&8<Aa&&11>=Aa),Z0=" ",e_=!1;function aT(t,e){switch(t){case"keyup":return RC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function NC(t,e){switch(t){case"compositionend":return lT(e);case"keypress":return e.which!==32?null:(e_=!0,Z0);case"textInput":return t=e.data,t===Z0&&e_?null:t;default:return null}}function DC(t,e){if(Ps)return t==="compositionend"||!yg&&aT(t,e)?(t=sT(),ou=pg=Ur=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oT&&e.locale!=="ko"?null:e.data;default:return null}}var OC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OC[t.type]:e==="textarea"}function cT(t,e,n,r){F1(r),e=ju(e,"onChange"),0<e.length&&(n=new mg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ra=null,tl=null;function jC(t){wT(t,0)}function Rh(t){var e=Rs(t);if(D1(e))return t}function VC(t,e){if(t==="change")return e}var uT=!1;if(cr){var lf;if(cr){var cf="oninput"in document;if(!cf){var n_=document.createElement("div");n_.setAttribute("oninput","return;"),cf=typeof n_.oninput=="function"}lf=cf}else lf=!1;uT=lf&&(!document.documentMode||9<document.documentMode)}function r_(){Ra&&(Ra.detachEvent("onpropertychange",hT),tl=Ra=null)}function hT(t){if(t.propertyName==="value"&&Rh(tl)){var e=[];cT(e,tl,t,cg(t)),W1(jC,e)}}function MC(t,e,n){t==="focusin"?(r_(),Ra=e,tl=n,Ra.attachEvent("onpropertychange",hT)):t==="focusout"&&r_()}function LC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rh(tl)}function UC(t,e){if(t==="click")return Rh(e)}function FC(t,e){if(t==="input"||t==="change")return Rh(e)}function $C(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:$C;function nl(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!op.call(e,i)||!_n(t[i],e[i]))return!1}return!0}function i_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function s_(t,e){var n=i_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i_(n)}}function dT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fT(){for(var t=window,e=ku();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ku(t.document)}return e}function vg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BC(t){var e=fT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dT(n.ownerDocument.documentElement,n)){if(r!==null&&vg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=s_(n,s);var o=s_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zC=cr&&"documentMode"in document&&11>=document.documentMode,ks=null,Sp=null,Ca=null,Ip=!1;function o_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ip||ks==null||ks!==ku(r)||(r=ks,"selectionStart"in r&&vg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ca&&nl(Ca,r)||(Ca=r,r=ju(Sp,"onSelect"),0<r.length&&(e=new mg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ks)))}function Cc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var As={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},uf={},pT={};cr&&(pT=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function Ch(t){if(uf[t])return uf[t];if(!As[t])return t;var e=As[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pT)return uf[t]=e[n];return t}var mT=Ch("animationend"),gT=Ch("animationiteration"),yT=Ch("animationstart"),vT=Ch("transitionend"),_T=new Map,a_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(t,e){_T.set(t,e),ns(e,[t])}for(var hf=0;hf<a_.length;hf++){var df=a_[hf],WC=df.toLowerCase(),qC=df[0].toUpperCase()+df.slice(1);ui(WC,"on"+qC)}ui(mT,"onAnimationEnd");ui(gT,"onAnimationIteration");ui(yT,"onAnimationStart");ui("dblclick","onDoubleClick");ui("focusin","onFocus");ui("focusout","onBlur");ui(vT,"onTransitionEnd");no("onMouseEnter",["mouseout","mouseover"]);no("onMouseLeave",["mouseout","mouseover"]);no("onPointerEnter",["pointerout","pointerover"]);no("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ga));function l_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,WR(r,e,void 0,t),t.currentTarget=null}function wT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;l_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;l_(i,a,c),s=l}}}if(Ru)throw t=Ep,Ru=!1,Ep=null,t}function Ee(t,e){var n=e[Cp];n===void 0&&(n=e[Cp]=new Set);var r=t+"__bubble";n.has(r)||(ET(e,t,2,!1),n.add(r))}function ff(t,e,n){var r=0;e&&(r|=4),ET(n,t,r,e)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function rl(t){if(!t[Nc]){t[Nc]=!0,k1.forEach(function(n){n!=="selectionchange"&&(HC.has(n)||ff(n,!1,t),ff(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nc]||(e[Nc]=!0,ff("selectionchange",!1,e))}}function ET(t,e,n,r){switch(iT(e)){case 1:var i=oC;break;case 4:i=aC;break;default:i=fg}n=i.bind(null,e,n,t),i=void 0,!wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function pf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ji(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}W1(function(){var c=s,h=cg(n),d=[];e:{var m=_T.get(t);if(m!==void 0){var y=mg,E=t;switch(t){case"keypress":if(au(n)===0)break e;case"keydown":case"keyup":y=xC;break;case"focusin":E="focus",y=af;break;case"focusout":E="blur",y=af;break;case"beforeblur":case"afterblur":y=af;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=uC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=SC;break;case mT:case gT:case yT:y=fC;break;case vT:y=PC;break;case"scroll":y=lC;break;case"wheel":y=AC;break;case"copy":case"cut":case"paste":y=mC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=X0}var S=(e&4)!==0,b=!S&&t==="scroll",w=S?m!==null?m+"Capture":null:m;S=[];for(var _=c,T;_!==null;){T=_;var C=T.stateNode;if(T.tag===5&&C!==null&&(T=C,w!==null&&(C=Ja(_,w),C!=null&&S.push(il(_,C,T)))),b)break;_=_.return}0<S.length&&(m=new y(m,E,null,n,h),d.push({event:m,listeners:S}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==vp&&(E=n.relatedTarget||n.fromElement)&&(ji(E)||E[ur]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(E=n.relatedTarget||n.toElement,y=c,E=E?ji(E):null,E!==null&&(b=rs(E),E!==b||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=c),y!==E)){if(S=Y0,C="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=X0,C="onPointerLeave",w="onPointerEnter",_="pointer"),b=y==null?m:Rs(y),T=E==null?m:Rs(E),m=new S(C,_+"leave",y,n,h),m.target=b,m.relatedTarget=T,C=null,ji(h)===c&&(S=new S(w,_+"enter",E,n,h),S.target=T,S.relatedTarget=b,C=S),b=C,y&&E)t:{for(S=y,w=E,_=0,T=S;T;T=ms(T))_++;for(T=0,C=w;C;C=ms(C))T++;for(;0<_-T;)S=ms(S),_--;for(;0<T-_;)w=ms(w),T--;for(;_--;){if(S===w||w!==null&&S===w.alternate)break t;S=ms(S),w=ms(w)}S=null}else S=null;y!==null&&c_(d,m,y,S,!1),E!==null&&b!==null&&c_(d,b,E,S,!0)}}e:{if(m=c?Rs(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var O=VC;else if(t_(m))if(uT)O=FC;else{O=LC;var U=MC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=UC);if(O&&(O=O(t,c))){cT(d,O,n,h);break e}U&&U(t,m,c),t==="focusout"&&(U=m._wrapperState)&&U.controlled&&m.type==="number"&&fp(m,"number",m.value)}switch(U=c?Rs(c):window,t){case"focusin":(t_(U)||U.contentEditable==="true")&&(ks=U,Sp=c,Ca=null);break;case"focusout":Ca=Sp=ks=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,o_(d,n,h);break;case"selectionchange":if(zC)break;case"keydown":case"keyup":o_(d,n,h)}var P;if(yg)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ps?aT(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(oT&&n.locale!=="ko"&&(Ps||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ps&&(P=sT()):(Ur=h,pg="value"in Ur?Ur.value:Ur.textContent,Ps=!0)),U=ju(c,v),0<U.length&&(v=new J0(v,t,null,n,h),d.push({event:v,listeners:U}),P?v.data=P:(P=lT(n),P!==null&&(v.data=P)))),(P=CC?NC(t,n):DC(t,n))&&(c=ju(c,"onBeforeInput"),0<c.length&&(h=new J0("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=P))}wT(d,e)})}function il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ju(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ja(t,n),s!=null&&r.unshift(il(t,s,i)),s=Ja(t,e),s!=null&&r.push(il(t,s,i))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ja(n,s),l!=null&&o.unshift(il(n,l,a))):i||(l=Ja(n,s),l!=null&&o.push(il(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GC=/\r\n?/g,KC=/\u0000|\uFFFD/g;function u_(t){return(typeof t=="string"?t:""+t).replace(GC,`
`).replace(KC,"")}function Dc(t,e,n){if(e=u_(e),u_(t)!==e&&n)throw Error(B(425))}function Vu(){}var Pp=null,kp=null;function Ap(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rp=typeof setTimeout=="function"?setTimeout:void 0,QC=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,YC=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(t){return h_.resolve(null).then(t).catch(JC)}:Rp;function JC(t){setTimeout(function(){throw t})}function mf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),el(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);el(e)}function Hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function d_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var So=Math.random().toString(36).slice(2),Sn="__reactFiber$"+So,sl="__reactProps$"+So,ur="__reactContainer$"+So,Cp="__reactEvents$"+So,XC="__reactListeners$"+So,ZC="__reactHandles$"+So;function ji(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ur]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=d_(t);t!==null;){if(n=t[Sn])return n;t=d_(t)}return e}t=n,n=t.parentNode}return null}function Vl(t){return t=t[Sn]||t[ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Nh(t){return t[sl]||null}var Np=[],Cs=-1;function hi(t){return{current:t}}function be(t){0>Cs||(t.current=Np[Cs],Np[Cs]=null,Cs--)}function _e(t,e){Cs++,Np[Cs]=t.current,t.current=e}var ni={},vt=hi(ni),Nt=hi(!1),qi=ni;function ro(t,e){var n=t.type.contextTypes;if(!n)return ni;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(t){return t=t.childContextTypes,t!=null}function Mu(){be(Nt),be(vt)}function f_(t,e,n){if(vt.current!==ni)throw Error(B(168));_e(vt,e),_e(Nt,n)}function xT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,MR(t)||"Unknown",i));return Ce({},n,r)}function Lu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ni,qi=vt.current,_e(vt,t),_e(Nt,Nt.current),!0}function p_(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=xT(t,e,qi),r.__reactInternalMemoizedMergedChildContext=t,be(Nt),be(vt),_e(vt,t)):be(Nt),_e(Nt,n)}var Jn=null,Dh=!1,gf=!1;function TT(t){Jn===null?Jn=[t]:Jn.push(t)}function eN(t){Dh=!0,TT(t)}function di(){if(!gf&&Jn!==null){gf=!0;var t=0,e=pe;try{var n=Jn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jn=null,Dh=!1}catch(i){throw Jn!==null&&(Jn=Jn.slice(t+1)),K1(ug,di),i}finally{pe=e,gf=!1}}return null}var Ns=[],Ds=0,Uu=null,Fu=0,Qt=[],Yt=0,Hi=null,Xn=1,Zn="";function Si(t,e){Ns[Ds++]=Fu,Ns[Ds++]=Uu,Uu=t,Fu=e}function bT(t,e,n){Qt[Yt++]=Xn,Qt[Yt++]=Zn,Qt[Yt++]=Hi,Hi=t;var r=Xn;t=Zn;var i=32-mn(r)-1;r&=~(1<<i),n+=1;var s=32-mn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xn=1<<32-mn(e)+i|n<<i|r,Zn=s+t}else Xn=1<<s|n<<i|r,Zn=t}function _g(t){t.return!==null&&(Si(t,1),bT(t,1,0))}function wg(t){for(;t===Uu;)Uu=Ns[--Ds],Ns[Ds]=null,Fu=Ns[--Ds],Ns[Ds]=null;for(;t===Hi;)Hi=Qt[--Yt],Qt[Yt]=null,Zn=Qt[--Yt],Qt[Yt]=null,Xn=Qt[--Yt],Qt[Yt]=null}var Ft=null,Lt=null,Ie=!1,dn=null;function ST(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function m_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ft=t,Lt=Hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ft=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hi!==null?{id:Xn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ft=t,Lt=null,!0):!1;default:return!1}}function Dp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Op(t){if(Ie){var e=Lt;if(e){var n=e;if(!m_(t,e)){if(Dp(t))throw Error(B(418));e=Hr(n.nextSibling);var r=Ft;e&&m_(t,e)?ST(r,n):(t.flags=t.flags&-4097|2,Ie=!1,Ft=t)}}else{if(Dp(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ie=!1,Ft=t}}}function g_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ft=t}function Oc(t){if(t!==Ft)return!1;if(!Ie)return g_(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ap(t.type,t.memoizedProps)),e&&(e=Lt)){if(Dp(t))throw IT(),Error(B(418));for(;e;)ST(t,e),e=Hr(e.nextSibling)}if(g_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=Hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Ft?Hr(t.stateNode.nextSibling):null;return!0}function IT(){for(var t=Lt;t;)t=Hr(t.nextSibling)}function io(){Lt=Ft=null,Ie=!1}function Eg(t){dn===null?dn=[t]:dn.push(t)}var tN=vr.ReactCurrentBatchConfig;function ia(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function jc(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function y_(t){var e=t._init;return e(t._payload)}function PT(t){function e(w,_){if(t){var T=w.deletions;T===null?(w.deletions=[_],w.flags|=16):T.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Yr(w,_),w.index=0,w.sibling=null,w}function s(w,_,T){return w.index=T,t?(T=w.alternate,T!==null?(T=T.index,T<_?(w.flags|=2,_):T):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,T,C){return _===null||_.tag!==6?(_=Tf(T,w.mode,C),_.return=w,_):(_=i(_,T),_.return=w,_)}function l(w,_,T,C){var O=T.type;return O===Is?h(w,_,T.props.children,C,T.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Rr&&y_(O)===_.type)?(C=i(_,T.props),C.ref=ia(w,_,T),C.return=w,C):(C=pu(T.type,T.key,T.props,null,w.mode,C),C.ref=ia(w,_,T),C.return=w,C)}function c(w,_,T,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=bf(T,w.mode,C),_.return=w,_):(_=i(_,T.children||[]),_.return=w,_)}function h(w,_,T,C,O){return _===null||_.tag!==7?(_=Bi(T,w.mode,C,O),_.return=w,_):(_=i(_,T),_.return=w,_)}function d(w,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Tf(""+_,w.mode,T),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bc:return T=pu(_.type,_.key,_.props,null,w.mode,T),T.ref=ia(w,null,_),T.return=w,T;case Ss:return _=bf(_,w.mode,T),_.return=w,_;case Rr:var C=_._init;return d(w,C(_._payload),T)}if(pa(_)||Zo(_))return _=Bi(_,w.mode,T,null),_.return=w,_;jc(w,_)}return null}function m(w,_,T,C){var O=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return O!==null?null:a(w,_,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case bc:return T.key===O?l(w,_,T,C):null;case Ss:return T.key===O?c(w,_,T,C):null;case Rr:return O=T._init,m(w,_,O(T._payload),C)}if(pa(T)||Zo(T))return O!==null?null:h(w,_,T,C,null);jc(w,T)}return null}function y(w,_,T,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(T)||null,a(_,w,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case bc:return w=w.get(C.key===null?T:C.key)||null,l(_,w,C,O);case Ss:return w=w.get(C.key===null?T:C.key)||null,c(_,w,C,O);case Rr:var U=C._init;return y(w,_,T,U(C._payload),O)}if(pa(C)||Zo(C))return w=w.get(T)||null,h(_,w,C,O,null);jc(_,C)}return null}function E(w,_,T,C){for(var O=null,U=null,P=_,v=_=0,I=null;P!==null&&v<T.length;v++){P.index>v?(I=P,P=null):I=P.sibling;var k=m(w,P,T[v],C);if(k===null){P===null&&(P=I);break}t&&P&&k.alternate===null&&e(w,P),_=s(k,_,v),U===null?O=k:U.sibling=k,U=k,P=I}if(v===T.length)return n(w,P),Ie&&Si(w,v),O;if(P===null){for(;v<T.length;v++)P=d(w,T[v],C),P!==null&&(_=s(P,_,v),U===null?O=P:U.sibling=P,U=P);return Ie&&Si(w,v),O}for(P=r(w,P);v<T.length;v++)I=y(P,w,v,T[v],C),I!==null&&(t&&I.alternate!==null&&P.delete(I.key===null?v:I.key),_=s(I,_,v),U===null?O=I:U.sibling=I,U=I);return t&&P.forEach(function(R){return e(w,R)}),Ie&&Si(w,v),O}function S(w,_,T,C){var O=Zo(T);if(typeof O!="function")throw Error(B(150));if(T=O.call(T),T==null)throw Error(B(151));for(var U=O=null,P=_,v=_=0,I=null,k=T.next();P!==null&&!k.done;v++,k=T.next()){P.index>v?(I=P,P=null):I=P.sibling;var R=m(w,P,k.value,C);if(R===null){P===null&&(P=I);break}t&&P&&R.alternate===null&&e(w,P),_=s(R,_,v),U===null?O=R:U.sibling=R,U=R,P=I}if(k.done)return n(w,P),Ie&&Si(w,v),O;if(P===null){for(;!k.done;v++,k=T.next())k=d(w,k.value,C),k!==null&&(_=s(k,_,v),U===null?O=k:U.sibling=k,U=k);return Ie&&Si(w,v),O}for(P=r(w,P);!k.done;v++,k=T.next())k=y(P,w,v,k.value,C),k!==null&&(t&&k.alternate!==null&&P.delete(k.key===null?v:k.key),_=s(k,_,v),U===null?O=k:U.sibling=k,U=k);return t&&P.forEach(function(D){return e(w,D)}),Ie&&Si(w,v),O}function b(w,_,T,C){if(typeof T=="object"&&T!==null&&T.type===Is&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case bc:e:{for(var O=T.key,U=_;U!==null;){if(U.key===O){if(O=T.type,O===Is){if(U.tag===7){n(w,U.sibling),_=i(U,T.props.children),_.return=w,w=_;break e}}else if(U.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Rr&&y_(O)===U.type){n(w,U.sibling),_=i(U,T.props),_.ref=ia(w,U,T),_.return=w,w=_;break e}n(w,U);break}else e(w,U);U=U.sibling}T.type===Is?(_=Bi(T.props.children,w.mode,C,T.key),_.return=w,w=_):(C=pu(T.type,T.key,T.props,null,w.mode,C),C.ref=ia(w,_,T),C.return=w,w=C)}return o(w);case Ss:e:{for(U=T.key;_!==null;){if(_.key===U)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(w,_.sibling),_=i(_,T.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=bf(T,w.mode,C),_.return=w,w=_}return o(w);case Rr:return U=T._init,b(w,_,U(T._payload),C)}if(pa(T))return E(w,_,T,C);if(Zo(T))return S(w,_,T,C);jc(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,T),_.return=w,w=_):(n(w,_),_=Tf(T,w.mode,C),_.return=w,w=_),o(w)):n(w,_)}return b}var so=PT(!0),kT=PT(!1),$u=hi(null),Bu=null,Os=null,xg=null;function Tg(){xg=Os=Bu=null}function bg(t){var e=$u.current;be($u),t._currentValue=e}function jp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gs(t,e){Bu=t,xg=Os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(xg!==t)if(t={context:t,memoizedValue:e,next:null},Os===null){if(Bu===null)throw Error(B(308));Os=t,Bu.dependencies={lanes:0,firstContext:t}}else Os=Os.next=t;return e}var Vi=null;function Sg(t){Vi===null?Vi=[t]:Vi.push(t)}function AT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sg(e)):(n.next=i.next,i.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cr=!1;function Ig(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,hr(t,n)}return i=r.interleaved,i===null?(e.next=e,Sg(r)):(e.next=i.next,i.next=e),r.interleaved=e,hr(t,n)}function lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hg(t,n)}}function v_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zu(t,e,n,r){var i=t.updateQueue;Cr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,S=a;switch(m=e,y=n,S.tag){case 1:if(E=S.payload,typeof E=="function"){d=E.call(y,d,m);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,m=typeof E=="function"?E.call(y,d,m):E,m==null)break e;d=Ce({},d,m);break e;case 2:Cr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=d):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ki|=o,t.lanes=o,t.memoizedState=d}}function __(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Ml={},Rn=hi(Ml),ol=hi(Ml),al=hi(Ml);function Mi(t){if(t===Ml)throw Error(B(174));return t}function Pg(t,e){switch(_e(al,e),_e(ol,t),_e(Rn,Ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mp(e,t)}be(Rn),_e(Rn,e)}function oo(){be(Rn),be(ol),be(al)}function CT(t){Mi(al.current);var e=Mi(Rn.current),n=mp(e,t.type);e!==n&&(_e(ol,t),_e(Rn,n))}function kg(t){ol.current===t&&(be(Rn),be(ol))}var ke=hi(0);function Wu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yf=[];function Ag(){for(var t=0;t<yf.length;t++)yf[t]._workInProgressVersionPrimary=null;yf.length=0}var cu=vr.ReactCurrentDispatcher,vf=vr.ReactCurrentBatchConfig,Gi=0,Re=null,We=null,Ye=null,qu=!1,Na=!1,ll=0,nN=0;function ut(){throw Error(B(321))}function Rg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function Cg(t,e,n,r,i,s){if(Gi=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cu.current=t===null||t.memoizedState===null?oN:aN,t=n(r,i),Na){s=0;do{if(Na=!1,ll=0,25<=s)throw Error(B(301));s+=1,Ye=We=null,e.updateQueue=null,cu.current=lN,t=n(r,i)}while(Na)}if(cu.current=Hu,e=We!==null&&We.next!==null,Gi=0,Ye=We=Re=null,qu=!1,e)throw Error(B(300));return t}function Ng(){var t=ll!==0;return ll=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Re.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function tn(){if(We===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ye===null?Re.memoizedState:Ye.next;if(e!==null)Ye=e,We=t;else{if(t===null)throw Error(B(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ye===null?Re.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function cl(t,e){return typeof e=="function"?e(t):e}function _f(t){var e=tn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Gi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Re.lanes|=h,Ki|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,_n(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Re.lanes|=s,Ki|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wf(t){var e=tn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);_n(s,e.memoizedState)||(Ct=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function NT(){}function DT(t,e){var n=Re,r=tn(),i=e(),s=!_n(r.memoizedState,i);if(s&&(r.memoizedState=i,Ct=!0),r=r.queue,Dg(VT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,ul(9,jT.bind(null,n,r,i,e),void 0,null),Je===null)throw Error(B(349));Gi&30||OT(n,e,i)}return i}function OT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jT(t,e,n,r){e.value=n,e.getSnapshot=r,MT(e)&&LT(t)}function VT(t,e,n){return n(function(){MT(e)&&LT(t)})}function MT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function LT(t){var e=hr(t,1);e!==null&&gn(e,t,1,-1)}function w_(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:t},e.queue=t,t=t.dispatch=sN.bind(null,Re,t),[e.memoizedState,t]}function ul(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function UT(){return tn().memoizedState}function uu(t,e,n,r){var i=bn();Re.flags|=t,i.memoizedState=ul(1|e,n,void 0,r===void 0?null:r)}function Oh(t,e,n,r){var i=tn();r=r===void 0?null:r;var s=void 0;if(We!==null){var o=We.memoizedState;if(s=o.destroy,r!==null&&Rg(r,o.deps)){i.memoizedState=ul(e,n,s,r);return}}Re.flags|=t,i.memoizedState=ul(1|e,n,s,r)}function E_(t,e){return uu(8390656,8,t,e)}function Dg(t,e){return Oh(2048,8,t,e)}function FT(t,e){return Oh(4,2,t,e)}function $T(t,e){return Oh(4,4,t,e)}function BT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zT(t,e,n){return n=n!=null?n.concat([t]):null,Oh(4,4,BT.bind(null,e,t),n)}function Og(){}function WT(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qT(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function HT(t,e,n){return Gi&21?(_n(n,e)||(n=J1(),Re.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function rN(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=vf.transition;vf.transition={};try{t(!1),e()}finally{pe=n,vf.transition=r}}function GT(){return tn().memoizedState}function iN(t,e,n){var r=Qr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KT(t))QT(e,n);else if(n=AT(t,e,n,r),n!==null){var i=Tt();gn(n,t,r,i),YT(n,e,r)}}function sN(t,e,n){var r=Qr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KT(t))QT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,_n(a,o)){var l=e.interleaved;l===null?(i.next=i,Sg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=AT(t,e,i,r),n!==null&&(i=Tt(),gn(n,t,r,i),YT(n,e,r))}}function KT(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function QT(t,e){Na=qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function YT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hg(t,n)}}var Hu={readContext:en,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},oN={readContext:en,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:E_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uu(4194308,4,BT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uu(4194308,4,t,e)},useInsertionEffect:function(t,e){return uu(4,2,t,e)},useMemo:function(t,e){var n=bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iN.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:w_,useDebugValue:Og,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=w_(!1),e=t[0];return t=rN.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,i=bn();if(Ie){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Je===null)throw Error(B(349));Gi&30||OT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,E_(VT.bind(null,r,s,t),[t]),r.flags|=2048,ul(9,jT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=bn(),e=Je.identifierPrefix;if(Ie){var n=Zn,r=Xn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ll++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aN={readContext:en,useCallback:WT,useContext:en,useEffect:Dg,useImperativeHandle:zT,useInsertionEffect:FT,useLayoutEffect:$T,useMemo:qT,useReducer:_f,useRef:UT,useState:function(){return _f(cl)},useDebugValue:Og,useDeferredValue:function(t){var e=tn();return HT(e,We.memoizedState,t)},useTransition:function(){var t=_f(cl)[0],e=tn().memoizedState;return[t,e]},useMutableSource:NT,useSyncExternalStore:DT,useId:GT,unstable_isNewReconciler:!1},lN={readContext:en,useCallback:WT,useContext:en,useEffect:Dg,useImperativeHandle:zT,useInsertionEffect:FT,useLayoutEffect:$T,useMemo:qT,useReducer:wf,useRef:UT,useState:function(){return wf(cl)},useDebugValue:Og,useDeferredValue:function(t){var e=tn();return We===null?e.memoizedState=t:HT(e,We.memoizedState,t)},useTransition:function(){var t=wf(cl)[0],e=tn().memoizedState;return[t,e]},useMutableSource:NT,useSyncExternalStore:DT,useId:GT,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jh={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=Qr(t),s=rr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Gr(t,s,i),e!==null&&(gn(e,t,i,r),lu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=Qr(t),s=rr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gr(t,s,i),e!==null&&(gn(e,t,i,r),lu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Qr(t),i=rr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Gr(t,i,r),e!==null&&(gn(e,t,r,n),lu(e,t,r))}};function x_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!nl(n,r)||!nl(i,s):!0}function JT(t,e,n){var r=!1,i=ni,s=e.contextType;return typeof s=="object"&&s!==null?s=en(s):(i=Dt(e)?qi:vt.current,r=e.contextTypes,s=(r=r!=null)?ro(t,i):ni),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function T_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jh.enqueueReplaceState(e,e.state,null)}function Mp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ig(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=en(s):(s=Dt(e)?qi:vt.current,i.context=ro(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jh.enqueueReplaceState(i,i.state,null),zu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ao(t,e){try{var n="",r=e;do n+=VR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ef(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cN=typeof WeakMap=="function"?WeakMap:Map;function XT(t,e,n){n=rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ku||(Ku=!0,Kp=r),Lp(t,e)},n}function ZT(t,e,n){n=rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Lp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Lp(t,e),typeof r!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function b_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=TN.bind(null,t,e,n),e.then(t,t))}function S_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function I_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rr(-1,1),e.tag=2,Gr(n,e,1))),n.lanes|=1),t)}var uN=vr.ReactCurrentOwner,Ct=!1;function xt(t,e,n,r){e.child=t===null?kT(e,null,n,r):so(e,t.child,n,r)}function P_(t,e,n,r,i){n=n.render;var s=e.ref;return Gs(e,i),r=Cg(t,e,n,r,s,i),n=Ng(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Ie&&n&&_g(e),e.flags|=1,xt(t,e,r,i),e.child)}function k_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Bg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,eb(t,e,s,r,i)):(t=pu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:nl,n(o,r)&&t.ref===e.ref)return dr(t,e,i)}return e.flags|=1,t=Yr(s,r),t.ref=e.ref,t.return=e,e.child=t}function eb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(nl(s,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,dr(t,e,i)}return Up(t,e,n,r,i)}function tb(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Vs,Mt),Mt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(Vs,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(Vs,Mt),Mt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_e(Vs,Mt),Mt|=r;return xt(t,e,i,n),e.child}function nb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Up(t,e,n,r,i){var s=Dt(n)?qi:vt.current;return s=ro(e,s),Gs(e,i),n=Cg(t,e,n,r,s,i),r=Ng(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Ie&&r&&_g(e),e.flags|=1,xt(t,e,n,i),e.child)}function A_(t,e,n,r,i){if(Dt(n)){var s=!0;Lu(e)}else s=!1;if(Gs(e,i),e.stateNode===null)hu(t,e),JT(e,n,r),Mp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=en(c):(c=Dt(n)?qi:vt.current,c=ro(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&T_(e,o,r,c),Cr=!1;var m=e.memoizedState;o.state=m,zu(e,r,o,i),l=e.memoizedState,a!==r||m!==l||Nt.current||Cr?(typeof h=="function"&&(Vp(e,n,h,r),l=e.memoizedState),(a=Cr||x_(e,n,a,r,m,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ln(e.type,a),o.props=c,d=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=en(l):(l=Dt(n)?qi:vt.current,l=ro(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==l)&&T_(e,o,r,l),Cr=!1,m=e.memoizedState,o.state=m,zu(e,r,o,i);var E=e.memoizedState;a!==d||m!==E||Nt.current||Cr?(typeof y=="function"&&(Vp(e,n,y,r),E=e.memoizedState),(c=Cr||x_(e,n,c,r,m,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Fp(t,e,n,r,s,i)}function Fp(t,e,n,r,i,s){nb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&p_(e,n,!1),dr(t,e,s);r=e.stateNode,uN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=so(e,t.child,null,s),e.child=so(e,null,a,s)):xt(t,e,a,s),e.memoizedState=r.state,i&&p_(e,n,!0),e.child}function rb(t){var e=t.stateNode;e.pendingContext?f_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f_(t,e.context,!1),Pg(t,e.containerInfo)}function R_(t,e,n,r,i){return io(),Eg(i),e.flags|=256,xt(t,e,n,r),e.child}var $p={dehydrated:null,treeContext:null,retryLane:0};function Bp(t){return{baseLanes:t,cachePool:null,transitions:null}}function ib(t,e,n){var r=e.pendingProps,i=ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(ke,i&1),t===null)return Op(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Lh(o,r,0,null),t=Bi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bp(n),e.memoizedState=$p,t):jg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Yr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Yr(a,s):(s=Bi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Bp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=$p,r}return s=t.child,t=s.sibling,r=Yr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jg(t,e){return e=Lh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vc(t,e,n,r){return r!==null&&Eg(r),so(e,t.child,null,n),t=jg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ef(Error(B(422))),Vc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Lh({mode:"visible",children:r.children},i,0,null),s=Bi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&so(e,t.child,null,o),e.child.memoizedState=Bp(o),e.memoizedState=$p,s);if(!(e.mode&1))return Vc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=Ef(s,r,void 0),Vc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ct||a){if(r=Je,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,hr(t,i),gn(r,t,i,-1))}return $g(),r=Ef(Error(B(421))),Vc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=bN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Lt=Hr(i.nextSibling),Ft=e,Ie=!0,dn=null,t!==null&&(Qt[Yt++]=Xn,Qt[Yt++]=Zn,Qt[Yt++]=Hi,Xn=t.id,Zn=t.overflow,Hi=e),e=jg(e,r.children),e.flags|=4096,e)}function C_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jp(t.return,e,n)}function xf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function sb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&C_(t,n,e);else if(t.tag===19)C_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xf(e,!0,n,null,s);break;case"together":xf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dN(t,e,n){switch(e.tag){case 3:rb(e),io();break;case 5:CT(e);break;case 1:Dt(e.type)&&Lu(e);break;case 4:Pg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e($u,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?ib(t,e,n):(_e(ke,ke.current&1),t=dr(t,e,n),t!==null?t.sibling:null);_e(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,tb(t,e,n)}return dr(t,e,n)}var ob,zp,ab,lb;ob=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zp=function(){};ab=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mi(Rn.current);var s=null;switch(n){case"input":i=hp(t,i),r=hp(t,r),s=[];break;case"select":i=Ce({},i,{value:void 0}),r=Ce({},r,{value:void 0}),s=[];break;case"textarea":i=pp(t,i),r=pp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vu)}gp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Qa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Qa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ee("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};lb=function(t,e,n,r){n!==r&&(e.flags|=4)};function sa(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fN(t,e,n){var r=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Dt(e.type)&&Mu(),ht(e),null;case 3:return r=e.stateNode,oo(),be(Nt),be(vt),Ag(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dn!==null&&(Jp(dn),dn=null))),zp(t,e),ht(e),null;case 5:kg(e);var i=Mi(al.current);if(n=e.type,t!==null&&e.stateNode!=null)ab(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return ht(e),null}if(t=Mi(Rn.current),Oc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Sn]=e,r[sl]=s,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<ga.length;i++)Ee(ga[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":F0(r,s),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",r);break;case"textarea":B0(r,s),Ee("invalid",r)}gp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Dc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Dc(r.textContent,a,t),i=["children",""+a]):Qa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Sc(r),$0(r,s,!0);break;case"textarea":Sc(r),z0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sn]=e,t[sl]=r,ob(t,e,!1,!1),e.stateNode=t;e:{switch(o=yp(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<ga.length;i++)Ee(ga[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":F0(t,r),i=hp(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ce({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":B0(t,r),i=pp(t,r),Ee("invalid",t);break;default:i=r}gp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?U1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&M1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ya(t,l):typeof l=="number"&&Ya(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ee("scroll",t):l!=null&&sg(t,s,l,o))}switch(n){case"input":Sc(t),$0(t,r,!1);break;case"textarea":Sc(t),z0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ti(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?zs(t,!!r.multiple,s,!1):r.defaultValue!=null&&zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)lb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Mi(al.current),Mi(Rn.current),Oc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sn]=e,(s=r.nodeValue!==n)&&(t=Ft,t!==null))switch(t.tag){case 3:Dc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=e,e.stateNode=r}return ht(e),null;case 13:if(be(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Lt!==null&&e.mode&1&&!(e.flags&128))IT(),io(),e.flags|=98560,s=!1;else if(s=Oc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Sn]=e}else io(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else dn!==null&&(Jp(dn),dn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?qe===0&&(qe=3):$g())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return oo(),zp(t,e),t===null&&rl(e.stateNode.containerInfo),ht(e),null;case 10:return bg(e.type._context),ht(e),null;case 17:return Dt(e.type)&&Mu(),ht(e),null;case 19:if(be(ke),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)sa(s,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wu(t),o!==null){for(e.flags|=128,sa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(ke,ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>lo&&(e.flags|=128,r=!0,sa(s,!1),e.lanes=4194304)}else{if(!r)if(t=Wu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ie)return ht(e),null}else 2*Le()-s.renderingStartTime>lo&&n!==1073741824&&(e.flags|=128,r=!0,sa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=ke.current,_e(ke,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return Fg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function pN(t,e){switch(wg(e),e.tag){case 1:return Dt(e.type)&&Mu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oo(),be(Nt),be(vt),Ag(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kg(e),null;case 13:if(be(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));io()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(ke),null;case 4:return oo(),null;case 10:return bg(e.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var Mc=!1,mt=!1,mN=typeof WeakSet=="function"?WeakSet:Set,H=null;function js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function Wp(t,e,n){try{n()}catch(r){je(t,e,r)}}var N_=!1;function gN(t,e){if(Pp=Du,t=fT(),vg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,m=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)m=d,d=y;for(;;){if(d===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++h===r&&(l=o),(y=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kp={focusedElem:t,selectionRange:n},Du=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,b=E.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?S:ln(e.type,S),b);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(C){je(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return E=N_,N_=!1,E}function Da(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Wp(e,n,s)}i=i.next}while(i!==r)}}function Vh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cb(t){var e=t.alternate;e!==null&&(t.alternate=null,cb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[sl],delete e[Cp],delete e[XC],delete e[ZC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ub(t){return t.tag===5||t.tag===3||t.tag===4}function D_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ub(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vu));else if(r!==4&&(t=t.child,t!==null))for(Hp(t,e,n),t=t.sibling;t!==null;)Hp(t,e,n),t=t.sibling}function Gp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gp(t,e,n),t=t.sibling;t!==null;)Gp(t,e,n),t=t.sibling}var Ze=null,un=!1;function br(t,e,n){for(n=n.child;n!==null;)hb(t,e,n),n=n.sibling}function hb(t,e,n){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(kh,n)}catch{}switch(n.tag){case 5:mt||js(n,e);case 6:var r=Ze,i=un;Ze=null,br(t,e,n),Ze=r,un=i,Ze!==null&&(un?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(un?(t=Ze,n=n.stateNode,t.nodeType===8?mf(t.parentNode,n):t.nodeType===1&&mf(t,n),el(t)):mf(Ze,n.stateNode));break;case 4:r=Ze,i=un,Ze=n.stateNode.containerInfo,un=!0,br(t,e,n),Ze=r,un=i;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Wp(n,e,o),i=i.next}while(i!==r)}br(t,e,n);break;case 1:if(!mt&&(js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,e,a)}br(t,e,n);break;case 21:br(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,br(t,e,n),mt=r):br(t,e,n);break;default:br(t,e,n)}}function O_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mN),e.forEach(function(r){var i=SN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ze=a.stateNode,un=!1;break e;case 3:Ze=a.stateNode.containerInfo,un=!0;break e;case 4:Ze=a.stateNode.containerInfo,un=!0;break e}a=a.return}if(Ze===null)throw Error(B(160));hb(s,o,i),Ze=null,un=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)db(e,t),e=e.sibling}function db(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),xn(t),r&4){try{Da(3,t,t.return),Vh(3,t)}catch(S){je(t,t.return,S)}try{Da(5,t,t.return)}catch(S){je(t,t.return,S)}}break;case 1:on(e,t),xn(t),r&512&&n!==null&&js(n,n.return);break;case 5:if(on(e,t),xn(t),r&512&&n!==null&&js(n,n.return),t.flags&32){var i=t.stateNode;try{Ya(i,"")}catch(S){je(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&O1(i,s),yp(a,o);var c=yp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?U1(i,d):h==="dangerouslySetInnerHTML"?M1(i,d):h==="children"?Ya(i,d):sg(i,h,d,c)}switch(a){case"input":dp(i,s);break;case"textarea":j1(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?zs(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?zs(i,!!s.multiple,s.defaultValue,!0):zs(i,!!s.multiple,s.multiple?[]:"",!1))}i[sl]=s}catch(S){je(t,t.return,S)}}break;case 6:if(on(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){je(t,t.return,S)}}break;case 3:if(on(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{el(e.containerInfo)}catch(S){je(t,t.return,S)}break;case 4:on(e,t),xn(t);break;case 13:on(e,t),xn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lg=Le())),r&4&&O_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(c=mt)||h,on(e,t),mt=c):on(e,t),xn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(d=H=h;H!==null;){switch(m=H,y=m.child,m.tag){case 0:case 11:case 14:case 15:Da(4,m,m.return);break;case 1:js(m,m.return);var E=m.stateNode;if(typeof E.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(S){je(r,n,S)}}break;case 5:js(m,m.return);break;case 22:if(m.memoizedState!==null){V_(d);continue}}y!==null?(y.return=m,H=y):V_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=L1("display",o))}catch(S){je(t,t.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){je(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:on(e,t),xn(t),r&4&&O_(t);break;case 21:break;default:on(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ub(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ya(i,""),r.flags&=-33);var s=D_(t);Gp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=D_(t);Hp(t,a,o);break;default:throw Error(B(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yN(t,e,n){H=t,fb(t)}function fb(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Mc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||mt;a=Mc;var c=mt;if(Mc=o,(mt=l)&&!c)for(H=i;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?M_(i):l!==null?(l.return=o,H=l):M_(i);for(;s!==null;)H=s,fb(s),s=s.sibling;H=i,Mc=a,mt=c}j_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):j_(t)}}function j_(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Vh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&__(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}__(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&el(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}mt||e.flags&512&&qp(e)}catch(m){je(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function V_(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function M_(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vh(4,e)}catch(l){je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){je(e,i,l)}}var s=e.return;try{qp(e)}catch(l){je(e,s,l)}break;case 5:var o=e.return;try{qp(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var vN=Math.ceil,Gu=vr.ReactCurrentDispatcher,Vg=vr.ReactCurrentOwner,Xt=vr.ReactCurrentBatchConfig,le=0,Je=null,Be=null,rt=0,Mt=0,Vs=hi(0),qe=0,hl=null,Ki=0,Mh=0,Mg=0,Oa=null,kt=null,Lg=0,lo=1/0,Qn=null,Ku=!1,Kp=null,Kr=null,Lc=!1,Fr=null,Qu=0,ja=0,Qp=null,du=-1,fu=0;function Tt(){return le&6?Le():du!==-1?du:du=Le()}function Qr(t){return t.mode&1?le&2&&rt!==0?rt&-rt:tN.transition!==null?(fu===0&&(fu=J1()),fu):(t=pe,t!==0||(t=window.event,t=t===void 0?16:iT(t.type)),t):1}function gn(t,e,n,r){if(50<ja)throw ja=0,Qp=null,Error(B(185));Ol(t,n,r),(!(le&2)||t!==Je)&&(t===Je&&(!(le&2)&&(Mh|=n),qe===4&&Or(t,rt)),Ot(t,r),n===1&&le===0&&!(e.mode&1)&&(lo=Le()+500,Dh&&di()))}function Ot(t,e){var n=t.callbackNode;tC(t,e);var r=Nu(t,t===Je?rt:0);if(r===0)n!==null&&H0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&H0(n),e===1)t.tag===0?eN(L_.bind(null,t)):TT(L_.bind(null,t)),YC(function(){!(le&6)&&di()}),n=null;else{switch(X1(r)){case 1:n=ug;break;case 4:n=Q1;break;case 16:n=Cu;break;case 536870912:n=Y1;break;default:n=Cu}n=Eb(n,pb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pb(t,e){if(du=-1,fu=0,le&6)throw Error(B(327));var n=t.callbackNode;if(Ks()&&t.callbackNode!==n)return null;var r=Nu(t,t===Je?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yu(t,r);else{e=r;var i=le;le|=2;var s=gb();(Je!==t||rt!==e)&&(Qn=null,lo=Le()+500,$i(t,e));do try{EN();break}catch(a){mb(t,a)}while(!0);Tg(),Gu.current=s,le=i,Be!==null?e=0:(Je=null,rt=0,e=qe)}if(e!==0){if(e===2&&(i=xp(t),i!==0&&(r=i,e=Yp(t,i))),e===1)throw n=hl,$i(t,0),Or(t,r),Ot(t,Le()),n;if(e===6)Or(t,r);else{if(i=t.current.alternate,!(r&30)&&!_N(i)&&(e=Yu(t,r),e===2&&(s=xp(t),s!==0&&(r=s,e=Yp(t,s))),e===1))throw n=hl,$i(t,0),Or(t,r),Ot(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Ii(t,kt,Qn);break;case 3:if(Or(t,r),(r&130023424)===r&&(e=Lg+500-Le(),10<e)){if(Nu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rp(Ii.bind(null,t,kt,Qn),e);break}Ii(t,kt,Qn);break;case 4:if(Or(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-mn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vN(r/1960))-r,10<r){t.timeoutHandle=Rp(Ii.bind(null,t,kt,Qn),r);break}Ii(t,kt,Qn);break;case 5:Ii(t,kt,Qn);break;default:throw Error(B(329))}}}return Ot(t,Le()),t.callbackNode===n?pb.bind(null,t):null}function Yp(t,e){var n=Oa;return t.current.memoizedState.isDehydrated&&($i(t,e).flags|=256),t=Yu(t,e),t!==2&&(e=kt,kt=n,e!==null&&Jp(e)),t}function Jp(t){kt===null?kt=t:kt.push.apply(kt,t)}function _N(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!_n(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Or(t,e){for(e&=~Mg,e&=~Mh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mn(e),r=1<<n;t[n]=-1,e&=~r}}function L_(t){if(le&6)throw Error(B(327));Ks();var e=Nu(t,0);if(!(e&1))return Ot(t,Le()),null;var n=Yu(t,e);if(t.tag!==0&&n===2){var r=xp(t);r!==0&&(e=r,n=Yp(t,r))}if(n===1)throw n=hl,$i(t,0),Or(t,e),Ot(t,Le()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ii(t,kt,Qn),Ot(t,Le()),null}function Ug(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(lo=Le()+500,Dh&&di())}}function Qi(t){Fr!==null&&Fr.tag===0&&!(le&6)&&Ks();var e=le;le|=1;var n=Xt.transition,r=pe;try{if(Xt.transition=null,pe=1,t)return t()}finally{pe=r,Xt.transition=n,le=e,!(le&6)&&di()}}function Fg(){Mt=Vs.current,be(Vs)}function $i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QC(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(wg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mu();break;case 3:oo(),be(Nt),be(vt),Ag();break;case 5:kg(r);break;case 4:oo();break;case 13:be(ke);break;case 19:be(ke);break;case 10:bg(r.type._context);break;case 22:case 23:Fg()}n=n.return}if(Je=t,Be=t=Yr(t.current,null),rt=Mt=e,qe=0,hl=null,Mg=Mh=Ki=0,kt=Oa=null,Vi!==null){for(e=0;e<Vi.length;e++)if(n=Vi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Vi=null}return t}function mb(t,e){do{var n=Be;try{if(Tg(),cu.current=Hu,qu){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qu=!1}if(Gi=0,Ye=We=Re=null,Na=!1,ll=0,Vg.current=null,n===null||n.return===null){qe=1,hl=e,Be=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=S_(o);if(y!==null){y.flags&=-257,I_(y,o,a,s,e),y.mode&1&&b_(s,c,e),e=y,l=c;var E=e.updateQueue;if(E===null){var S=new Set;S.add(l),e.updateQueue=S}else E.add(l);break e}else{if(!(e&1)){b_(s,c,e),$g();break e}l=Error(B(426))}}else if(Ie&&a.mode&1){var b=S_(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),I_(b,o,a,s,e),Eg(ao(l,a));break e}}s=l=ao(l,a),qe!==4&&(qe=2),Oa===null?Oa=[s]:Oa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=XT(s,l,e);v_(s,w);break e;case 1:a=l;var _=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Kr===null||!Kr.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=ZT(s,a,e);v_(s,C);break e}}s=s.return}while(s!==null)}vb(n)}catch(O){e=O,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function gb(){var t=Gu.current;return Gu.current=Hu,t===null?Hu:t}function $g(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||!(Ki&268435455)&&!(Mh&268435455)||Or(Je,rt)}function Yu(t,e){var n=le;le|=2;var r=gb();(Je!==t||rt!==e)&&(Qn=null,$i(t,e));do try{wN();break}catch(i){mb(t,i)}while(!0);if(Tg(),le=n,Gu.current=r,Be!==null)throw Error(B(261));return Je=null,rt=0,qe}function wN(){for(;Be!==null;)yb(Be)}function EN(){for(;Be!==null&&!HR();)yb(Be)}function yb(t){var e=wb(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?vb(t):Be=e,Vg.current=null}function vb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pN(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Be=null;return}}else if(n=fN(n,e,Mt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);qe===0&&(qe=5)}function Ii(t,e,n){var r=pe,i=Xt.transition;try{Xt.transition=null,pe=1,xN(t,e,n,r)}finally{Xt.transition=i,pe=r}return null}function xN(t,e,n,r){do Ks();while(Fr!==null);if(le&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nC(t,s),t===Je&&(Be=Je=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lc||(Lc=!0,Eb(Cu,function(){return Ks(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xt.transition,Xt.transition=null;var o=pe;pe=1;var a=le;le|=4,Vg.current=null,gN(t,n),db(n,t),BC(kp),Du=!!Pp,kp=Pp=null,t.current=n,yN(n),GR(),le=a,pe=o,Xt.transition=s}else t.current=n;if(Lc&&(Lc=!1,Fr=t,Qu=i),s=t.pendingLanes,s===0&&(Kr=null),YR(n.stateNode),Ot(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,t=Kp,Kp=null,t;return Qu&1&&t.tag!==0&&Ks(),s=t.pendingLanes,s&1?t===Qp?ja++:(ja=0,Qp=t):ja=0,di(),null}function Ks(){if(Fr!==null){var t=X1(Qu),e=Xt.transition,n=pe;try{if(Xt.transition=null,pe=16>t?16:t,Fr===null)var r=!1;else{if(t=Fr,Fr=null,Qu=0,le&6)throw Error(B(331));var i=le;for(le|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:Da(8,h,s)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var m=h.sibling,y=h.return;if(cb(h),h===c){H=null;break}if(m!==null){m.return=y,H=m;break}H=y}}}var E=s.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var b=S.sibling;S.sibling=null,S=b}while(S!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Da(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,H=w;break e}H=s.return}}var _=t.current;for(H=_;H!==null;){o=H;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,H=T;else e:for(o=_;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vh(9,a)}}catch(O){je(a,a.return,O)}if(a===o){H=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,H=C;break e}H=a.return}}if(le=i,di(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(kh,t)}catch{}r=!0}return r}finally{pe=n,Xt.transition=e}}return!1}function U_(t,e,n){e=ao(n,e),e=XT(t,e,1),t=Gr(t,e,1),e=Tt(),t!==null&&(Ol(t,1,e),Ot(t,e))}function je(t,e,n){if(t.tag===3)U_(t,t,n);else for(;e!==null;){if(e.tag===3){U_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kr===null||!Kr.has(r))){t=ao(n,t),t=ZT(e,t,1),e=Gr(e,t,1),t=Tt(),e!==null&&(Ol(e,1,t),Ot(e,t));break}}e=e.return}}function TN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(rt&n)===n&&(qe===4||qe===3&&(rt&130023424)===rt&&500>Le()-Lg?$i(t,0):Mg|=n),Ot(t,e)}function _b(t,e){e===0&&(t.mode&1?(e=kc,kc<<=1,!(kc&130023424)&&(kc=4194304)):e=1);var n=Tt();t=hr(t,e),t!==null&&(Ol(t,e,n),Ot(t,n))}function bN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_b(t,n)}function SN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),_b(t,n)}var wb;wb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,dN(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Ie&&e.flags&1048576&&bT(e,Fu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hu(t,e),t=e.pendingProps;var i=ro(e,vt.current);Gs(e,n),i=Cg(null,e,r,t,i,n);var s=Ng();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(s=!0,Lu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ig(e),i.updater=jh,e.stateNode=i,i._reactInternals=e,Mp(e,r,t,n),e=Fp(null,e,r,!0,s,n)):(e.tag=0,Ie&&s&&_g(e),xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=PN(r),t=ln(r,t),i){case 0:e=Up(null,e,r,t,n);break e;case 1:e=A_(null,e,r,t,n);break e;case 11:e=P_(null,e,r,t,n);break e;case 14:e=k_(null,e,r,ln(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Up(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),A_(t,e,r,i,n);case 3:e:{if(rb(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,RT(t,e),zu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ao(Error(B(423)),e),e=R_(t,e,r,n,i);break e}else if(r!==i){i=ao(Error(B(424)),e),e=R_(t,e,r,n,i);break e}else for(Lt=Hr(e.stateNode.containerInfo.firstChild),Ft=e,Ie=!0,dn=null,n=kT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(io(),r===i){e=dr(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return CT(e),t===null&&Op(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ap(r,i)?o=null:s!==null&&Ap(r,s)&&(e.flags|=32),nb(t,e),xt(t,e,o,n),e.child;case 6:return t===null&&Op(e),null;case 13:return ib(t,e,n);case 4:return Pg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=so(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),P_(t,e,r,i,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_e($u,r._currentValue),r._currentValue=o,s!==null)if(_n(s.value,o)){if(s.children===i.children&&!Nt.current){e=dr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=rr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Gs(e,n),i=en(i),r=r(i),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,i=ln(r,e.pendingProps),i=ln(r.type,i),k_(t,e,r,i,n);case 15:return eb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),hu(t,e),e.tag=1,Dt(r)?(t=!0,Lu(e)):t=!1,Gs(e,n),JT(e,r,i),Mp(e,r,i,n),Fp(null,e,r,!0,t,n);case 19:return sb(t,e,n);case 22:return tb(t,e,n)}throw Error(B(156,e.tag))};function Eb(t,e){return K1(t,e)}function IN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new IN(t,e,n,r)}function Bg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PN(t){if(typeof t=="function")return Bg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ag)return 11;if(t===lg)return 14}return 2}function Yr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Bg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Is:return Bi(n.children,i,s,e);case og:o=8,i|=8;break;case ap:return t=Jt(12,n,e,i|2),t.elementType=ap,t.lanes=s,t;case lp:return t=Jt(13,n,e,i),t.elementType=lp,t.lanes=s,t;case cp:return t=Jt(19,n,e,i),t.elementType=cp,t.lanes=s,t;case C1:return Lh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A1:o=10;break e;case R1:o=9;break e;case ag:o=11;break e;case lg:o=14;break e;case Rr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Bi(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function Lh(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=C1,t.lanes=n,t.stateNode={isHidden:!1},t}function Tf(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function bf(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rf(0),this.expirationTimes=rf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zg(t,e,n,r,i,s,o,a,l){return t=new kN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ig(s),t}function AN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ss,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xb(t){if(!t)return ni;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Dt(n))return xT(t,n,e)}return e}function Tb(t,e,n,r,i,s,o,a,l){return t=zg(n,r,!0,t,i,s,o,a,l),t.context=xb(null),n=t.current,r=Tt(),i=Qr(n),s=rr(r,i),s.callback=e??null,Gr(n,s,i),t.current.lanes=i,Ol(t,i,r),Ot(t,r),t}function Uh(t,e,n,r){var i=e.current,s=Tt(),o=Qr(i);return n=xb(n),e.context===null?e.context=n:e.pendingContext=n,e=rr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gr(i,e,o),t!==null&&(gn(t,i,o,s),lu(t,i,o)),o}function Ju(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function F_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wg(t,e){F_(t,e),(t=t.alternate)&&F_(t,e)}function RN(){return null}var bb=typeof reportError=="function"?reportError:function(t){console.error(t)};function qg(t){this._internalRoot=t}Fh.prototype.render=qg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Uh(t,e,null,null)};Fh.prototype.unmount=qg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){Uh(null,t,null,null)}),e[ur]=null}};function Fh(t){this._internalRoot=t}Fh.prototype.unstable_scheduleHydration=function(t){if(t){var e=tT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dr.length&&e!==0&&e<Dr[n].priority;n++);Dr.splice(n,0,t),n===0&&rT(t)}};function Hg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $_(){}function CN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ju(o);s.call(c)}}var o=Tb(e,r,t,0,null,!1,!1,"",$_);return t._reactRootContainer=o,t[ur]=o.current,rl(t.nodeType===8?t.parentNode:t),Qi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ju(l);a.call(c)}}var l=zg(t,0,!1,null,null,!1,!1,"",$_);return t._reactRootContainer=l,t[ur]=l.current,rl(t.nodeType===8?t.parentNode:t),Qi(function(){Uh(e,l,n,r)}),l}function Bh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ju(o);a.call(l)}}Uh(e,o,t,i)}else o=CN(n,e,t,i,r);return Ju(o)}Z1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ma(e.pendingLanes);n!==0&&(hg(e,n|1),Ot(e,Le()),!(le&6)&&(lo=Le()+500,di()))}break;case 13:Qi(function(){var r=hr(t,1);if(r!==null){var i=Tt();gn(r,t,1,i)}}),Wg(t,1)}};dg=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Tt();gn(e,t,134217728,n)}Wg(t,134217728)}};eT=function(t){if(t.tag===13){var e=Qr(t),n=hr(t,e);if(n!==null){var r=Tt();gn(n,t,e,r)}Wg(t,e)}};tT=function(){return pe};nT=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};_p=function(t,e,n){switch(e){case"input":if(dp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Nh(r);if(!i)throw Error(B(90));D1(r),dp(r,i)}}}break;case"textarea":j1(t,n);break;case"select":e=n.value,e!=null&&zs(t,!!n.multiple,e,!1)}};B1=Ug;z1=Qi;var NN={usingClientEntryPoint:!1,Events:[Vl,Rs,Nh,F1,$1,Ug]},oa={findFiberByHostInstance:ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DN={bundleType:oa.bundleType,version:oa.version,rendererPackageName:oa.rendererPackageName,rendererConfig:oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=H1(t),t===null?null:t.stateNode},findFiberByHostInstance:oa.findFiberByHostInstance||RN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uc.isDisabled&&Uc.supportsFiber)try{kh=Uc.inject(DN),An=Uc}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NN;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hg(e))throw Error(B(200));return AN(t,e,null,n)};Wt.createRoot=function(t,e){if(!Hg(t))throw Error(B(299));var n=!1,r="",i=bb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zg(t,1,!1,null,null,n,!1,r,i),t[ur]=e.current,rl(t.nodeType===8?t.parentNode:t),new qg(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=H1(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Qi(t)};Wt.hydrate=function(t,e,n){if(!$h(e))throw Error(B(200));return Bh(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Hg(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=bb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Tb(e,null,t,1,n??null,i,!1,s,o),t[ur]=e.current,rl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fh(e)};Wt.render=function(t,e,n){if(!$h(e))throw Error(B(200));return Bh(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!$h(t))throw Error(B(40));return t._reactRootContainer?(Qi(function(){Bh(null,null,t,!1,function(){t._reactRootContainer=null,t[ur]=null})}),!0):!1};Wt.unstable_batchedUpdates=Ug;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$h(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Bh(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function Sb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sb)}catch(t){console.error(t)}}Sb(),S1.exports=Wt;var ON=S1.exports,B_=ON;sp.createRoot=B_.createRoot,sp.hydrateRoot=B_.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dl.apply(this,arguments)}var $r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($r||($r={}));const z_="popstate";function jN(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Xp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xu(i)}return MN(e,n,null,t)}function Ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ib(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VN(){return Math.random().toString(36).substr(2,8)}function W_(t,e){return{usr:t.state,key:t.key,idx:e}}function Xp(t,e,n,r){return n===void 0&&(n=null),dl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Io(e):e,{state:n,key:e&&e.key||r||VN()})}function Xu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Io(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function MN(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=$r.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(dl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=$r.Pop;let b=h(),w=b==null?null:b-c;c=b,l&&l({action:a,location:S.location,delta:w})}function m(b,w){a=$r.Push;let _=Xp(S.location,b,w);c=h()+1;let T=W_(_,c),C=S.createHref(_);try{o.pushState(T,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(C)}s&&l&&l({action:a,location:S.location,delta:1})}function y(b,w){a=$r.Replace;let _=Xp(S.location,b,w);c=h();let T=W_(_,c),C=S.createHref(_);o.replaceState(T,"",C),s&&l&&l({action:a,location:S.location,delta:0})}function E(b){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof b=="string"?b:Xu(b);return _=_.replace(/ $/,"%20"),Ue(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let S={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(z_,d),l=b,()=>{i.removeEventListener(z_,d),l=null}},createHref(b){return e(i,b)},createURL:E,encodeLocation(b){let w=E(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:y,go(b){return o.go(b)}};return S}var q_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(q_||(q_={}));function LN(t,e,n){return n===void 0&&(n="/"),UN(t,e,n,!1)}function UN(t,e,n,r){let i=typeof e=="string"?Io(e):e,s=Gg(i.pathname||"/",n);if(s==null)return null;let o=Pb(t);FN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=JN(s);a=QN(o[l],c,r)}return a}function Pb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ue(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Jr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Ue(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Pb(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:GN(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of kb(s.path))i(s,o,l)}),e}function kb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=kb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function FN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:KN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $N=/^:[\w-]+$/,BN=3,zN=2,WN=1,qN=10,HN=-2,H_=t=>t==="*";function GN(t,e){let n=t.split("/"),r=n.length;return n.some(H_)&&(r+=HN),e&&(r+=zN),n.filter(i=>!H_(i)).reduce((i,s)=>i+($N.test(s)?BN:s===""?WN:qN),r)}function KN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function QN(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=G_({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=G_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Jr([s,d.pathname]),pathnameBase:t2(Jr([s,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(s=Jr([s,d.pathnameBase]))}return o}function G_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=YN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let S=a[d]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const E=a[d];return y&&!E?c[m]=void 0:c[m]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function YN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ib(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function JN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ib(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Gg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function XN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Io(t):t;return{pathname:n?n.startsWith("/")?n:ZN(n,e):e,search:n2(r),hash:r2(i)}}function ZN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function e2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Kg(t,e){let n=e2(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Io(t):(i=dl({},t),Ue(!i.pathname||!i.pathname.includes("?"),Sf("?","pathname","search",i)),Ue(!i.pathname||!i.pathname.includes("#"),Sf("#","pathname","hash",i)),Ue(!i.search||!i.search.includes("#"),Sf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;i.pathname=m.join("/")}a=d>=0?e[d]:"/"}let l=XN(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Jr=t=>t.join("/").replace(/\/\/+/g,"/"),t2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),n2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,r2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function i2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ab=["post","put","patch","delete"];new Set(Ab);const s2=["get",...Ab];new Set(s2);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fl(){return fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fl.apply(this,arguments)}const Yg=N.createContext(null),o2=N.createContext(null),fi=N.createContext(null),zh=N.createContext(null),pi=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Rb=N.createContext(null);function a2(t,e){let{relative:n}=e===void 0?{}:e;Po()||Ue(!1);let{basename:r,navigator:i}=N.useContext(fi),{hash:s,pathname:o,search:a}=Nb(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Jr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Po(){return N.useContext(zh)!=null}function ko(){return Po()||Ue(!1),N.useContext(zh).location}function Cb(t){N.useContext(fi).static||N.useLayoutEffect(t)}function Ht(){let{isDataRoute:t}=N.useContext(pi);return t?w2():l2()}function l2(){Po()||Ue(!1);let t=N.useContext(Yg),{basename:e,future:n,navigator:r}=N.useContext(fi),{matches:i}=N.useContext(pi),{pathname:s}=ko(),o=JSON.stringify(Kg(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return Cb(()=>{a.current=!0}),N.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Qg(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Jr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function Nb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(fi),{matches:i}=N.useContext(pi),{pathname:s}=ko(),o=JSON.stringify(Kg(i,r.v7_relativeSplatPath));return N.useMemo(()=>Qg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function c2(t,e){return u2(t,e)}function u2(t,e,n,r){Po()||Ue(!1);let{navigator:i,static:s}=N.useContext(fi),{matches:o}=N.useContext(pi),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=ko(),d;if(e){var m;let w=typeof e=="string"?Io(e):e;c==="/"||(m=w.pathname)!=null&&m.startsWith(c)||Ue(!1),d=w}else d=h;let y=d.pathname||"/",E=y;if(c!=="/"){let w=c.replace(/^\//,"").split("/");E="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=!s&&n&&n.matches&&n.matches.length>0?n.matches:LN(t,{pathname:E}),b=m2(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Jr([c,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Jr([c,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return e&&b?N.createElement(zh.Provider,{value:{location:fl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:$r.Pop}},b):b}function h2(){let t=_2(),e=i2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const d2=N.createElement(h2,null);class f2 extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(pi.Provider,{value:this.props.routeContext},N.createElement(Rb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function p2(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(Yg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(pi.Provider,{value:e},r)}function m2(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Ue(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:m,errors:y}=n,E=d.route.loader&&m[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,m)=>{let y,E=!1,S=null,b=null;n&&(y=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||d2,l&&(c<0&&m===0?(E=!0,b=null):c===m&&(E=!0,b=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),_=()=>{let T;return y?T=S:E?T=b:d.route.Component?T=N.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=h,N.createElement(p2,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:T})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?N.createElement(f2,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var Db=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Db||{}),Zu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zu||{});function g2(t){let e=N.useContext(Yg);return e||Ue(!1),e}function y2(t){let e=N.useContext(o2);return e||Ue(!1),e}function v2(t){let e=N.useContext(pi);return e||Ue(!1),e}function Ob(t){let e=v2(),n=e.matches[e.matches.length-1];return n.route.id||Ue(!1),n.route.id}function _2(){var t;let e=N.useContext(Rb),n=y2(Zu.UseRouteError),r=Ob(Zu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function w2(){let{router:t}=g2(Db.UseNavigateStable),e=Ob(Zu.UseNavigateStable),n=N.useRef(!1);return Cb(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,fl({fromRouteId:e},s)))},[t,e])}function E2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function x2(t){let{to:e,replace:n,state:r,relative:i}=t;Po()||Ue(!1);let{future:s,static:o}=N.useContext(fi),{matches:a}=N.useContext(pi),{pathname:l}=ko(),c=Ht(),h=Qg(e,Kg(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return N.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Pi(t){Ue(!1)}function T2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=$r.Pop,navigator:s,static:o=!1,future:a}=t;Po()&&Ue(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:fl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Io(r));let{pathname:h="/",search:d="",hash:m="",state:y=null,key:E="default"}=r,S=N.useMemo(()=>{let b=Gg(h,l);return b==null?null:{location:{pathname:b,search:d,hash:m,state:y,key:E},navigationType:i}},[l,h,d,m,y,E,i]);return S==null?null:N.createElement(fi.Provider,{value:c},N.createElement(zh.Provider,{children:n,value:S}))}function b2(t){let{children:e,location:n}=t;return c2(Zp(e),n)}new Promise(()=>{});function Zp(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,Zp(r.props.children,s));return}r.type!==Pi&&Ue(!1),!r.props.index||!r.props.children||Ue(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Zp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function em(){return em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},em.apply(this,arguments)}function S2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function I2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function P2(t,e){return t.button===0&&(!e||e==="_self")&&!I2(t)}function tm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function k2(t,e){let n=tm(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const A2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],R2="6";try{window.__reactRouterVersion=R2}catch{}const C2="startTransition",K_=TR[C2];function N2(t){let{basename:e,children:n,future:r,window:i}=t,s=N.useRef();s.current==null&&(s.current=jN({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=N.useCallback(d=>{c&&K_?K_(()=>l(d)):l(d)},[l,c]);return N.useLayoutEffect(()=>o.listen(h),[o,h]),N.useEffect(()=>E2(r),[r]),N.createElement(T2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const D2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cn=N.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,m=S2(e,A2),{basename:y}=N.useContext(fi),E,S=!1;if(typeof c=="string"&&O2.test(c)&&(E=c,D2))try{let T=new URL(window.location.href),C=c.startsWith("//")?new URL(T.protocol+c):new URL(c),O=Gg(C.pathname,y);C.origin===T.origin&&O!=null?c=O+C.search+C.hash:S=!0}catch{}let b=a2(c,{relative:i}),w=j2(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function _(T){r&&r(T),T.defaultPrevented||w(T)}return N.createElement("a",em({},m,{href:E||b,onClick:S||s?r:_,ref:n,target:l}))});var Q_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Q_||(Q_={}));var Y_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Y_||(Y_={}));function j2(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Ht(),c=ko(),h=Nb(t,{relative:o});return N.useCallback(d=>{if(P2(d,n)){d.preventDefault();let m=r!==void 0?r:Xu(c)===Xu(h);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function V2(t){let e=N.useRef(tm(t)),n=N.useRef(!1),r=ko(),i=N.useMemo(()=>k2(r.search,n.current?null:e.current),[r.search]),s=Ht(),o=N.useCallback((a,l)=>{const c=tm(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var J_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},M2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Vb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[h],n[d],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):M2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new L2;const m=s<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),d!==64){const E=c<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class L2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U2=function(t){const e=jb(t);return Vb.encodeByteArray(e,!0)},eh=function(t){return U2(t).replace(/\./g,"")},Mb=function(t){try{return Vb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=()=>F2().__FIREBASE_DEFAULTS__,B2=()=>{if(typeof process>"u"||typeof J_>"u")return;const t=J_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},z2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mb(t[1]);return e&&JSON.parse(e)},Wh=()=>{try{return $2()||B2()||z2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lb=t=>{var e,n;return(n=(e=Wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ub=t=>{const e=Lb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Fb=()=>{var t;return(t=Wh())===null||t===void 0?void 0:t.config},$b=t=>{var e;return(e=Wh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W2=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[eh(JSON.stringify(n)),eh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function H2(){var t;const e=(t=Wh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function K2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Q2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y2(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function J2(){return!H2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X2(){try{return typeof indexedDB=="object"}catch{return!1}}function Z2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="FirebaseError";class $n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eD,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?tD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new $n(i,a,r)}}function tD(t,e){return t.replace(nD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nD=/\{\$([^}]+)}/g;function rD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function th(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(X_(s)&&X_(o)){if(!th(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function X_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ya(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function va(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iD(t,e){const n=new sD(t,e);return n.subscribe.bind(n)}class sD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=If),i.error===void 0&&(i.error=If),i.complete===void 0&&(i.complete=If);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function If(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class ri{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new W2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cD(e))try{this.getOrInitializeService({instanceIdentifier:ki})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ki){return this.instances.has(e)}getOptions(e=ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ki){return this.component?this.component.multipleInstances?e:ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lD(t){return t===ki?void 0:t}function cD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const hD={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},dD=oe.INFO,fD={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},pD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=fD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jg{constructor(e){this.name=e,this._logLevel=dD,this._logHandler=pD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const mD=(t,e)=>e.some(n=>t instanceof n);let Z_,ew;function gD(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yD(){return ew||(ew=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zb=new WeakMap,nm=new WeakMap,Wb=new WeakMap,Pf=new WeakMap,Xg=new WeakMap;function vD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zb.set(n,t)}).catch(()=>{}),Xg.set(e,t),e}function _D(t){if(nm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});nm.set(t,e)}let rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wD(t){rm=t(rm)}function ED(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kf(this),e,...n);return Wb.set(r,e.sort?e.sort():[e]),Xr(r)}:yD().includes(t)?function(...e){return t.apply(kf(this),e),Xr(zb.get(this))}:function(...e){return Xr(t.apply(kf(this),e))}}function xD(t){return typeof t=="function"?ED(t):(t instanceof IDBTransaction&&_D(t),mD(t,gD())?new Proxy(t,rm):t)}function Xr(t){if(t instanceof IDBRequest)return vD(t);if(Pf.has(t))return Pf.get(t);const e=xD(t);return e!==t&&(Pf.set(t,e),Xg.set(e,t)),e}const kf=t=>Xg.get(t);function TD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Xr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xr(o.result),l.oldVersion,l.newVersion,Xr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const bD=["get","getKey","getAll","getAllKeys","count"],SD=["put","add","delete","clear"],Af=new Map;function tw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Af.get(e))return Af.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=SD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Af.set(e,s),s}wD(t=>({...t,get:(e,n,r)=>tw(e,n)||t.get(e,n,r),has:(e,n)=>!!tw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const im="@firebase/app",nw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Jg("@firebase/app"),kD="@firebase/app-compat",AD="@firebase/analytics-compat",RD="@firebase/analytics",CD="@firebase/app-check-compat",ND="@firebase/app-check",DD="@firebase/auth",OD="@firebase/auth-compat",jD="@firebase/database",VD="@firebase/data-connect",MD="@firebase/database-compat",LD="@firebase/functions",UD="@firebase/functions-compat",FD="@firebase/installations",$D="@firebase/installations-compat",BD="@firebase/messaging",zD="@firebase/messaging-compat",WD="@firebase/performance",qD="@firebase/performance-compat",HD="@firebase/remote-config",GD="@firebase/remote-config-compat",KD="@firebase/storage",QD="@firebase/storage-compat",YD="@firebase/firestore",JD="@firebase/vertexai-preview",XD="@firebase/firestore-compat",ZD="firebase",eO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="[DEFAULT]",tO={[im]:"fire-core",[kD]:"fire-core-compat",[RD]:"fire-analytics",[AD]:"fire-analytics-compat",[ND]:"fire-app-check",[CD]:"fire-app-check-compat",[DD]:"fire-auth",[OD]:"fire-auth-compat",[jD]:"fire-rtdb",[VD]:"fire-data-connect",[MD]:"fire-rtdb-compat",[LD]:"fire-fn",[UD]:"fire-fn-compat",[FD]:"fire-iid",[$D]:"fire-iid-compat",[BD]:"fire-fcm",[zD]:"fire-fcm-compat",[WD]:"fire-perf",[qD]:"fire-perf-compat",[HD]:"fire-rc",[GD]:"fire-rc-compat",[KD]:"fire-gcs",[QD]:"fire-gcs-compat",[YD]:"fire-fst",[XD]:"fire-fst-compat",[JD]:"fire-vertex","fire-js":"fire-js",[ZD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Map,nO=new Map,om=new Map;function rw(t,e){try{t.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yi(t){const e=t.name;if(om.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,t);for(const n of nh.values())rw(n,t);for(const n of nO.values())rw(n,t);return!0}function qh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new Ll("app","Firebase",rO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=eO;function qb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zr.create("bad-app-name",{appName:String(i)});if(n||(n=Fb()),!n)throw Zr.create("no-options");const s=nh.get(i);if(s){if(th(n,s.options)&&th(r,s.config))return s;throw Zr.create("duplicate-app",{appName:i})}const o=new uD(i);for(const l of om.values())o.addComponent(l);const a=new iO(n,r,o);return nh.set(i,a),a}function Zg(t=sm){const e=nh.get(t);if(!e&&t===sm&&Fb())return qb();if(!e)throw Zr.create("no-app",{appName:t});return e}function Cn(t,e,n){var r;let i=(r=tO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(a.join(" "));return}Yi(new ri(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="firebase-heartbeat-database",oO=1,pl="firebase-heartbeat-store";let Rf=null;function Hb(){return Rf||(Rf=TD(sO,oO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),Rf}async function aO(t){try{const n=(await Hb()).transaction(pl),r=await n.objectStore(pl).get(Gb(t));return await n.done,r}catch(e){if(e instanceof $n)fr.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function iw(t,e){try{const r=(await Hb()).transaction(pl,"readwrite");await r.objectStore(pl).put(e,Gb(t)),await r.done}catch(n){if(n instanceof $n)fr.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(r.message)}}}function Gb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=1024,cO=30*24*60*60*1e3;class uO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=cO}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sw(),{heartbeatsToSend:r,unsentEntries:i}=hO(this._heartbeatsCache.heartbeats),s=eh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fr.warn(n),""}}}function sw(){return new Date().toISOString().substring(0,10)}function hO(t,e=lO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ow(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ow(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X2()?Z2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return iw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ow(t){return eh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t){Yi(new ri("platform-logger",e=>new ID(e),"PRIVATE")),Yi(new ri("heartbeat",e=>new uO(e),"PRIVATE")),Cn(im,nw,t),Cn(im,nw,"esm2017"),Cn("fire-js","")}fO("");function ey(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Kb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pO=Kb,Qb=new Ll("auth","Firebase",Kb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Jg("@firebase/auth");function mO(t,...e){rh.logLevel<=oe.WARN&&rh.warn(`Auth (${is}): ${t}`,...e)}function mu(t,...e){rh.logLevel<=oe.ERROR&&rh.error(`Auth (${is}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t,...e){throw ny(t,...e)}function yn(t,...e){return ny(t,...e)}function ty(t,e,n){const r=Object.assign(Object.assign({},pO()),{[e]:n});return new Ll("auth","Firebase",r).create(e,{appName:t.name})}function ir(t){return ty(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&nn(t,"argument-error"),ty(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ny(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Qb.create(t,...e)}function J(t,e,...n){if(!t)throw ny(e,...n)}function er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mu(e),new Error(e)}function pr(t,e){t||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yO(){return aw()==="http:"||aw()==="https:"}function aw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yO()||K2()||"connection"in navigator)?navigator.onLine:!0}function _O(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,pr(n>e,"Short delay should be less than long delay!"),this.isMobile=q2()||Q2()}get(){return vO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t,e){pr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=new Fl(3e4,6e4);function _r(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wr(t,e,n,r,i={}){return Jb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ul(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return G2()||(c.referrerPolicy="no-referrer"),Yb.fetch()(Xb(t,t.config.apiHost,n,a),c)})}async function Jb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wO),e);try{const i=new TO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Fc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Fc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Fc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ty(t,h,c);nn(t,h)}}catch(i){if(i instanceof $n)throw i;nn(t,"network-request-failed",{message:String(i)})}}async function $l(t,e,n,r,i={}){const s=await wr(t,e,n,r,i);return"mfaPendingCredential"in s&&nn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Xb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ry(t.config,i):`${t.config.apiScheme}://${i}`}function xO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),EO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yn(t,e,r);return i.customData._tokenResponse=n,i}function lw(t){return t!==void 0&&t.enterprise!==void 0}class bO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function SO(t,e){return wr(t,"GET","/v2/recaptchaConfig",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t,e){return wr(t,"POST","/v1/accounts:delete",e)}async function Zb(t,e){return wr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PO(t,e=!1){const n=He(t),r=await n.getIdToken(e),i=iy(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Va(Cf(i.auth_time)),issuedAtTime:Va(Cf(i.iat)),expirationTime:Va(Cf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Cf(t){return Number(t)*1e3}function iy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Mb(n);return i?JSON.parse(i):(mu("Failed to decode base64 JWT payload"),null)}catch(i){return mu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function cw(t){const e=iy(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $n&&kO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function kO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ml(t,Zb(n,{idToken:r}));J(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?eS(s.providerUserInfo):[],a=CO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new lm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function RO(t){const e=He(t);await ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eS(t){return t.map(e=>{var{providerId:n}=e,r=ey(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e){const n=await Jb(t,{},async()=>{const r=Ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Xb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Yb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DO(t,e){return wr(t,"POST","/v2/accounts:revokeToken",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=cw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await NO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Qs;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qs,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ey(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ml(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PO(this,e)}reload(){return RO(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ih(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fn(this.auth.app))return Promise.reject(ir(this.auth));const e=await this.getIdToken();return await ml(this,IO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:C,isAnonymous:O,providerData:U,stsTokenManager:P}=n;J(T&&P,e,"internal-error");const v=Qs.fromJSON(this.name,P);J(typeof T=="string",e,"internal-error"),Sr(d,e.name),Sr(m,e.name),J(typeof C=="boolean",e,"internal-error"),J(typeof O=="boolean",e,"internal-error"),Sr(y,e.name),Sr(E,e.name),Sr(S,e.name),Sr(b,e.name),Sr(w,e.name),Sr(_,e.name);const I=new tr({uid:T,auth:e,email:m,emailVerified:C,displayName:d,isAnonymous:O,photoURL:E,phoneNumber:y,tenantId:S,stsTokenManager:v,createdAt:w,lastLoginAt:_});return U&&Array.isArray(U)&&(I.providerData=U.map(k=>Object.assign({},k))),b&&(I._redirectEventId=b),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Qs;i.updateFromServerResponse(n);const s=new tr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ih(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];J(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?eS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Qs;a.updateFromIdToken(r);const l=new tr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Map;function nr(t){pr(t instanceof Function,"Expected a class definition");let e=uw.get(t);return e?(pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tS.type="NONE";const hw=tS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ys{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=gu(this.userKey,i.apiKey,s),this.fullPersistenceKey=gu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ys(nr(hw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||nr(hw);const o=gu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=tr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ys(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ys(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aS(e))return"Blackberry";if(lS(e))return"Webos";if(rS(e))return"Safari";if((e.includes("chrome/")||iS(e))&&!e.includes("edge/"))return"Chrome";if(oS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nS(t=_t()){return/firefox\//i.test(t)}function rS(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iS(t=_t()){return/crios\//i.test(t)}function sS(t=_t()){return/iemobile/i.test(t)}function oS(t=_t()){return/android/i.test(t)}function aS(t=_t()){return/blackberry/i.test(t)}function lS(t=_t()){return/webos/i.test(t)}function sy(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OO(t=_t()){var e;return sy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jO(){return Y2()&&document.documentMode===10}function cS(t=_t()){return sy(t)||oS(t)||lS(t)||aS(t)||/windows phone/i.test(t)||sS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e=[]){let n;switch(t){case"Browser":n=dw(_t());break;case"Worker":n=`${dw(_t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${is}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(t,e={}){return wr(t,"GET","/v2/passwordPolicy",_r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=6;class UO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fw(this),this.idTokenSubscription=new fw(this),this.beforeStateQueue=new VO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ys.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zb(this,{idToken:e}),r=await tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ih(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_O()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fn(this.app))return Promise.reject(ir(this));const n=e?He(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fn(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fn(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MO(this),n=new UO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nr(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Ys.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function mi(t){return He(t)}class fw{constructor(e){this.auth=e,this.observer=null,this.addObserver=iD(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $O(t){Hh=t}function hS(t){return Hh.loadJS(t)}function BO(){return Hh.recaptchaEnterpriseScript}function zO(){return Hh.gapiScript}function WO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const qO="recaptcha-enterprise",HO="NO_RECAPTCHA";class GO{constructor(e){this.type=qO,this.auth=mi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{SO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new bO(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;lw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(HO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&lw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=BO();l.length!==0&&(l+=a),hS(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function pw(t,e,n,r=!1){const i=new GO(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function cm(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await pw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await pw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t,e){const n=qh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(th(s,e??{}))return i;nn(i,"already-initialized")}return n.initialize({options:e})}function QO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function YO(t,e,n){const r=mi(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=dS(e),{host:o,port:a}=JO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),XO()}function dS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JO(t){const e=dS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:mw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:mw(o)}}}function mw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}async function ZO(t,e){return wr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(t,e){return $l(t,"POST","/v1/accounts:signInWithPassword",_r(t,e))}async function tj(t,e){return wr(t,"POST","/v1/accounts:sendOobCode",_r(t,e))}async function nj(t,e){return tj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e){return $l(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}async function ij(t,e){return $l(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends oy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new gl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(e,n,"signInWithPassword",ej);case"emailLink":return rj(e,{email:this._email,oobCode:this._password});default:nn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(e,r,"signUpPassword",ZO);case"emailLink":return ij(e,{idToken:n,email:this._email,oobCode:this._password});default:nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e){return $l(t,"POST","/v1/accounts:signInWithIdp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="http://localhost";class Ji extends oy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ey(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ji(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){const e={requestUri:sj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ul(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aj(t){const e=ya(va(t)).link,n=e?ya(va(e)).deep_link_id:null,r=ya(va(t)).deep_link_id;return(r?ya(va(r)).link:null)||r||n||e||t}class ay{constructor(e){var n,r,i,s,o,a;const l=ya(va(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=oj((i=l.mode)!==null&&i!==void 0?i:null);J(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=aj(e);try{return new ay(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.providerId=Ao.PROVIDER_ID}static credential(e,n){return gl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ay.parseLink(n);return J(r,"argument-error"),gl._fromEmailAndCode(e,r.code,r.tenantId)}}Ao.PROVIDER_ID="password";Ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends ly{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Bl{constructor(){super("facebook.com")}static credential(e){return Ji._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends Bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ji._fromParams({providerId:In.PROVIDER_ID,signInMethod:In.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return In.credentialFromTaggedObject(e)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return In.credential(n,r)}catch{return null}}}In.GOOGLE_SIGN_IN_METHOD="google.com";In.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Bl{constructor(){super("github.com")}static credential(e){return Ji._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Bl{constructor(){super("twitter.com")}static credential(e,n){return Ji._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mr.credential(n,r)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e){return $l(t,"POST","/v1/accounts:signUp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await tr._fromIdTokenResponse(e,r,i),o=gw(r);return new Xi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=gw(r);return new Xi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function gw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends $n{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new sh(e,n,r,i)}}function fS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sh._fromErrorAndOperation(t,s,e,r):s})}async function cj(t,e,n=!1){const r=await ml(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e,n=!1){const{auth:r}=t;if(fn(r.app))return Promise.reject(ir(r));const i="reauthenticate";try{const s=await ml(t,fS(r,i,e,t),n);J(s.idToken,r,"internal-error");const o=iy(s.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),Xi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&nn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(t,e,n=!1){if(fn(t.app))return Promise.reject(ir(t));const r="signIn",i=await fS(t,r,e),s=await Xi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function hj(t,e){return pS(mi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(t){const e=mi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dj(t,e,n){if(fn(t.app))return Promise.reject(ir(t));const r=mi(t),o=await cm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lj).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&mS(t),l}),a=await Xi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function fj(t,e,n){return fn(t.app)?Promise.reject(ir(t)):hj(He(t),Ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mS(t),r})}async function pj(t,e){const n=He(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:s}=await nj(n.auth,i);s!==t.email&&await t.reload()}function mj(t,e,n,r){return He(t).onIdTokenChanged(e,n,r)}function gj(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function yj(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}const oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oh,"1"),this.storage.removeItem(oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=1e3,_j=10;class yS extends gS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);jO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_j):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},vj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yS.type="LOCAL";const wj=yS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS extends gS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vS.type="SESSION";const _S=vS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await Ej(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=cy("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const m=d;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function Tj(t){Nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function bj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Sj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ij(){return wS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firebaseLocalStorageDb",Pj=1,ah="firebaseLocalStorage",xS="fbase_key";class zl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kh(t,e){return t.transaction([ah],e?"readwrite":"readonly").objectStore(ah)}function kj(){const t=indexedDB.deleteDatabase(ES);return new zl(t).toPromise()}function um(){const t=indexedDB.open(ES,Pj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ah,{keyPath:xS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ah)?e(r):(r.close(),await kj(),e(await um()))})})}async function yw(t,e,n){const r=Kh(t,!0).put({[xS]:e,value:n});return new zl(r).toPromise()}async function Aj(t,e){const n=Kh(t,!1).get(e),r=await new zl(n).toPromise();return r===void 0?null:r.value}function vw(t,e){const n=Kh(t,!0).delete(e);return new zl(n).toPromise()}const Rj=800,Cj=3;class TS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Cj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(Ij()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await bj(),!this.activeServiceWorker)return;this.sender=new xj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Sj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await um();return await yw(e,oh,"1"),await vw(e,oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Aj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Kh(i,!1).getAll();return new zl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TS.type="LOCAL";const Nj=TS;new Fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t,e){return e?nr(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends oy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Dj(t){return pS(t.auth,new uy(t),t.bypassAuthState)}function Oj(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),uj(n,new uy(t),t.bypassAuthState)}async function jj(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),cj(n,new uy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dj;case"linkViaPopup":case"linkViaRedirect":return jj;case"reauthViaPopup":case"reauthViaRedirect":return Oj;default:nn(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=new Fl(2e3,1e4);async function IS(t,e,n){if(fn(t.app))return Promise.reject(yn(t,"operation-not-supported-in-this-environment"));const r=mi(t);gO(t,e,ly);const i=bS(r,n);return new Li(r,"signInViaPopup",e,i).executeNotNull()}class Li extends SS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Li.currentPopupAction&&Li.currentPopupAction.cancel(),Li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Vj.get())};e()}}Li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj="pendingRedirect",yu=new Map;class Lj extends SS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yu.get(this.auth._key());if(!e){try{const r=await Uj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yu.set(this.auth._key(),e)}return this.bypassAuthState||yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Uj(t,e){const n=Bj(e),r=$j(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Fj(t,e){yu.set(t._key(),e)}function $j(t){return nr(t._redirectPersistence)}function Bj(t){return gu(Mj,t.config.apiKey,t.name)}async function zj(t,e,n=!1){if(fn(t.app))return Promise.reject(ir(t));const r=mi(t),i=bS(r,e),o=await new Lj(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=10*60*1e3;class qj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Hj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!PS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wj&&this.cachedEventUids.clear(),this.cachedEventUids.has(_w(e))}saveEventToCache(e){this.cachedEventUids.add(_w(e)),this.lastProcessedEventTime=Date.now()}}function _w(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Hj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t,e={}){return wr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qj=/^https?/;async function Yj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Gj(t);for(const n of e)try{if(Jj(n))return}catch{}nn(t,"unauthorized-domain")}function Jj(t){const e=am(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Qj.test(n))return!1;if(Kj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=new Fl(3e4,6e4);function ww(){const t=Nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Zj(t){return new Promise((e,n)=>{var r,i,s;function o(){ww(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ww(),n(yn(t,"network-request-failed"))},timeout:Xj.get()})}if(!((i=(r=Nn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Nn().gapi)===null||s===void 0)&&s.load)o();else{const a=WO("iframefcb");return Nn()[a]=()=>{gapi.load?o():n(yn(t,"network-request-failed"))},hS(`${zO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw vu=null,e})}let vu=null;function eV(t){return vu=vu||Zj(t),vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=new Fl(5e3,15e3),nV="__/auth/iframe",rV="emulator/auth/iframe",iV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oV(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ry(e,rV):`https://${t.config.authDomain}/${nV}`,r={apiKey:e.apiKey,appName:t.name,v:is},i=sV.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ul(r).slice(1)}`}async function aV(t){const e=await eV(t),n=Nn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:oV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iV,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),a=Nn().setTimeout(()=>{s(o)},tV.get());function l(){Nn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cV=500,uV=600,hV="_blank",dV="http://localhost";class Ew{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fV(t,e,n,r=cV,i=uV){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},lV),{width:r.toString(),height:i.toString(),top:s,left:o}),c=_t().toLowerCase();n&&(a=iS(c)?hV:n),nS(c)&&(e=e||dV,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,E])=>`${m}${y}=${E},`,"");if(OO(c)&&a!=="_self")return pV(e||"",a),new Ew(null);const d=window.open(e||"",a,h);J(d,t,"popup-blocked");try{d.focus()}catch{}return new Ew(d)}function pV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="__/auth/handler",gV="emulator/auth/handler",yV=encodeURIComponent("fac");async function xw(t,e,n,r,i,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:is,eventId:i};if(e instanceof ly){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Bl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${yV}=${encodeURIComponent(l)}`:"";return`${vV(t)}?${Ul(a).slice(1)}${c}`}function vV({config:t}){return t.emulator?ry(t,gV):`https://${t.authDomain}/${mV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="webStorageSupport";class _V{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_S,this._completeRedirectFn=zj,this._overrideRedirectResult=Fj}async _openPopup(e,n,r,i){var s;pr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await xw(e,n,r,am(),i);return fV(e,o,cy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await xw(e,n,r,am(),i);return Tj(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(pr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await aV(e),r=new qj(e);return n.register("authEvent",i=>(J(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nf,{type:Nf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Nf];o!==void 0&&n(!!o),nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Yj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cS()||rS()||sy()}}const wV=_V;var Tw="@firebase/auth",bw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TV(t){Yi(new ri("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uS(t)},c=new FO(r,i,s,l);return QO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yi(new ri("auth-internal",e=>{const n=mi(e.getProvider("auth").getImmediate());return(r=>new EV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cn(Tw,bw,xV(t)),Cn(Tw,bw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=5*60,SV=$b("authIdTokenMaxAge")||bV;let Sw=null;const IV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>SV)return;const i=n==null?void 0:n.token;Sw!==i&&(Sw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function PV(t=Zg()){const e=qh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=KO(t,{popupRedirectResolver:wV,persistence:[Nj,wj,_S]}),r=$b("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=IV(s.toString());gj(n,o,()=>o(n.currentUser)),mj(n,a=>o(a))}}const i=Lb("auth");return i&&YO(n,`http://${i}`),n}function kV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$O({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=yn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",kV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TV("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function AV(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function RV(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ms=function(){return Ms=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ms.apply(this,arguments)},kS=function(t){return{loading:t==null,value:t}},CV=function(){return function(t,e){switch(e.type){case"error":return Ms(Ms({},t),{error:e.error,loading:!1,value:void 0});case"reset":return kS(e.defaultValue);case"value":return Ms(Ms({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},NV=function(t){var e=t?t():void 0,n=N.useReducer(CV(),kS(e)),r=n[0],i=n[1],s=N.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=N.useCallback(function(l){i({type:"error",error:l})},[]),a=N.useCallback(function(l){i({type:"value",value:l})},[]);return N.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},Ro=function(t,e){var n=NV(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return N.useEffect(function(){var l=yj(t,function(c){return AV(void 0,void 0,void 0,function(){var h;return RV(this,function(d){switch(d.label){case 0:return[3,4];case 1:return d.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return d.sent(),[3,4];case 3:return h=d.sent(),s(h),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]},DV="firebase",OV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn(DV,OV,"app");var Iw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zi,AS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,v){function I(){}I.prototype=v.prototype,P.D=v.prototype,P.prototype=new I,P.prototype.constructor=P,P.C=function(k,R,D){for(var A=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)A[Ge-2]=arguments[Ge];return v.prototype[R].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,v,I){I||(I=0);var k=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)k[R]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(R=0;16>R;++R)k[R]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=P.g[0],I=P.g[1],R=P.g[2];var D=P.g[3],A=v+(D^I&(R^D))+k[0]+3614090360&4294967295;v=I+(A<<7&4294967295|A>>>25),A=D+(R^v&(I^R))+k[1]+3905402710&4294967295,D=v+(A<<12&4294967295|A>>>20),A=R+(I^D&(v^I))+k[2]+606105819&4294967295,R=D+(A<<17&4294967295|A>>>15),A=I+(v^R&(D^v))+k[3]+3250441966&4294967295,I=R+(A<<22&4294967295|A>>>10),A=v+(D^I&(R^D))+k[4]+4118548399&4294967295,v=I+(A<<7&4294967295|A>>>25),A=D+(R^v&(I^R))+k[5]+1200080426&4294967295,D=v+(A<<12&4294967295|A>>>20),A=R+(I^D&(v^I))+k[6]+2821735955&4294967295,R=D+(A<<17&4294967295|A>>>15),A=I+(v^R&(D^v))+k[7]+4249261313&4294967295,I=R+(A<<22&4294967295|A>>>10),A=v+(D^I&(R^D))+k[8]+1770035416&4294967295,v=I+(A<<7&4294967295|A>>>25),A=D+(R^v&(I^R))+k[9]+2336552879&4294967295,D=v+(A<<12&4294967295|A>>>20),A=R+(I^D&(v^I))+k[10]+4294925233&4294967295,R=D+(A<<17&4294967295|A>>>15),A=I+(v^R&(D^v))+k[11]+2304563134&4294967295,I=R+(A<<22&4294967295|A>>>10),A=v+(D^I&(R^D))+k[12]+1804603682&4294967295,v=I+(A<<7&4294967295|A>>>25),A=D+(R^v&(I^R))+k[13]+4254626195&4294967295,D=v+(A<<12&4294967295|A>>>20),A=R+(I^D&(v^I))+k[14]+2792965006&4294967295,R=D+(A<<17&4294967295|A>>>15),A=I+(v^R&(D^v))+k[15]+1236535329&4294967295,I=R+(A<<22&4294967295|A>>>10),A=v+(R^D&(I^R))+k[1]+4129170786&4294967295,v=I+(A<<5&4294967295|A>>>27),A=D+(I^R&(v^I))+k[6]+3225465664&4294967295,D=v+(A<<9&4294967295|A>>>23),A=R+(v^I&(D^v))+k[11]+643717713&4294967295,R=D+(A<<14&4294967295|A>>>18),A=I+(D^v&(R^D))+k[0]+3921069994&4294967295,I=R+(A<<20&4294967295|A>>>12),A=v+(R^D&(I^R))+k[5]+3593408605&4294967295,v=I+(A<<5&4294967295|A>>>27),A=D+(I^R&(v^I))+k[10]+38016083&4294967295,D=v+(A<<9&4294967295|A>>>23),A=R+(v^I&(D^v))+k[15]+3634488961&4294967295,R=D+(A<<14&4294967295|A>>>18),A=I+(D^v&(R^D))+k[4]+3889429448&4294967295,I=R+(A<<20&4294967295|A>>>12),A=v+(R^D&(I^R))+k[9]+568446438&4294967295,v=I+(A<<5&4294967295|A>>>27),A=D+(I^R&(v^I))+k[14]+3275163606&4294967295,D=v+(A<<9&4294967295|A>>>23),A=R+(v^I&(D^v))+k[3]+4107603335&4294967295,R=D+(A<<14&4294967295|A>>>18),A=I+(D^v&(R^D))+k[8]+1163531501&4294967295,I=R+(A<<20&4294967295|A>>>12),A=v+(R^D&(I^R))+k[13]+2850285829&4294967295,v=I+(A<<5&4294967295|A>>>27),A=D+(I^R&(v^I))+k[2]+4243563512&4294967295,D=v+(A<<9&4294967295|A>>>23),A=R+(v^I&(D^v))+k[7]+1735328473&4294967295,R=D+(A<<14&4294967295|A>>>18),A=I+(D^v&(R^D))+k[12]+2368359562&4294967295,I=R+(A<<20&4294967295|A>>>12),A=v+(I^R^D)+k[5]+4294588738&4294967295,v=I+(A<<4&4294967295|A>>>28),A=D+(v^I^R)+k[8]+2272392833&4294967295,D=v+(A<<11&4294967295|A>>>21),A=R+(D^v^I)+k[11]+1839030562&4294967295,R=D+(A<<16&4294967295|A>>>16),A=I+(R^D^v)+k[14]+4259657740&4294967295,I=R+(A<<23&4294967295|A>>>9),A=v+(I^R^D)+k[1]+2763975236&4294967295,v=I+(A<<4&4294967295|A>>>28),A=D+(v^I^R)+k[4]+1272893353&4294967295,D=v+(A<<11&4294967295|A>>>21),A=R+(D^v^I)+k[7]+4139469664&4294967295,R=D+(A<<16&4294967295|A>>>16),A=I+(R^D^v)+k[10]+3200236656&4294967295,I=R+(A<<23&4294967295|A>>>9),A=v+(I^R^D)+k[13]+681279174&4294967295,v=I+(A<<4&4294967295|A>>>28),A=D+(v^I^R)+k[0]+3936430074&4294967295,D=v+(A<<11&4294967295|A>>>21),A=R+(D^v^I)+k[3]+3572445317&4294967295,R=D+(A<<16&4294967295|A>>>16),A=I+(R^D^v)+k[6]+76029189&4294967295,I=R+(A<<23&4294967295|A>>>9),A=v+(I^R^D)+k[9]+3654602809&4294967295,v=I+(A<<4&4294967295|A>>>28),A=D+(v^I^R)+k[12]+3873151461&4294967295,D=v+(A<<11&4294967295|A>>>21),A=R+(D^v^I)+k[15]+530742520&4294967295,R=D+(A<<16&4294967295|A>>>16),A=I+(R^D^v)+k[2]+3299628645&4294967295,I=R+(A<<23&4294967295|A>>>9),A=v+(R^(I|~D))+k[0]+4096336452&4294967295,v=I+(A<<6&4294967295|A>>>26),A=D+(I^(v|~R))+k[7]+1126891415&4294967295,D=v+(A<<10&4294967295|A>>>22),A=R+(v^(D|~I))+k[14]+2878612391&4294967295,R=D+(A<<15&4294967295|A>>>17),A=I+(D^(R|~v))+k[5]+4237533241&4294967295,I=R+(A<<21&4294967295|A>>>11),A=v+(R^(I|~D))+k[12]+1700485571&4294967295,v=I+(A<<6&4294967295|A>>>26),A=D+(I^(v|~R))+k[3]+2399980690&4294967295,D=v+(A<<10&4294967295|A>>>22),A=R+(v^(D|~I))+k[10]+4293915773&4294967295,R=D+(A<<15&4294967295|A>>>17),A=I+(D^(R|~v))+k[1]+2240044497&4294967295,I=R+(A<<21&4294967295|A>>>11),A=v+(R^(I|~D))+k[8]+1873313359&4294967295,v=I+(A<<6&4294967295|A>>>26),A=D+(I^(v|~R))+k[15]+4264355552&4294967295,D=v+(A<<10&4294967295|A>>>22),A=R+(v^(D|~I))+k[6]+2734768916&4294967295,R=D+(A<<15&4294967295|A>>>17),A=I+(D^(R|~v))+k[13]+1309151649&4294967295,I=R+(A<<21&4294967295|A>>>11),A=v+(R^(I|~D))+k[4]+4149444226&4294967295,v=I+(A<<6&4294967295|A>>>26),A=D+(I^(v|~R))+k[11]+3174756917&4294967295,D=v+(A<<10&4294967295|A>>>22),A=R+(v^(D|~I))+k[2]+718787259&4294967295,R=D+(A<<15&4294967295|A>>>17),A=I+(D^(R|~v))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+v&4294967295,P.g[1]=P.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+D&4294967295}r.prototype.u=function(P,v){v===void 0&&(v=P.length);for(var I=v-this.blockSize,k=this.B,R=this.h,D=0;D<v;){if(R==0)for(;D<=I;)i(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<v;)if(k[R++]=P.charCodeAt(D++),R==this.blockSize){i(this,k),R=0;break}}else for(;D<v;)if(k[R++]=P[D++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var v=1;v<P.length-8;++v)P[v]=0;var I=8*this.o;for(v=P.length-8;v<P.length;++v)P[v]=I&255,I/=256;for(this.u(P),P=Array(16),v=I=0;4>v;++v)for(var k=0;32>k;k+=8)P[I++]=this.g[v]>>>k&255;return P};function s(P,v){var I=a;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=v(P)}function o(P,v){this.h=v;for(var I=[],k=!0,R=P.length-1;0<=R;R--){var D=P[R]|0;k&&D==v||(I[R]=D,k=!1)}this.g=I}var a={};function l(P){return-128<=P&&128>P?s(P,function(v){return new o([v|0],0>v?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return d;if(0>P)return b(c(-P));for(var v=[],I=1,k=0;P>=I;k++)v[k]=P/I|0,I*=4294967296;return new o(v,0)}function h(P,v){if(P.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(P.charAt(0)=="-")return b(h(P.substring(1),v));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(v,8)),k=d,R=0;R<P.length;R+=8){var D=Math.min(8,P.length-R),A=parseInt(P.substring(R,R+D),v);8>D?(D=c(Math.pow(v,D)),k=k.j(D).add(c(A))):(k=k.j(I),k=k.add(c(A)))}return k}var d=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-b(this).m();for(var P=0,v=1,I=0;I<this.g.length;I++){var k=this.i(I);P+=(0<=k?k:4294967296+k)*v,v*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(E(this))return"0";if(S(this))return"-"+b(this).toString(P);for(var v=c(Math.pow(P,6)),I=this,k="";;){var R=C(I,v).g;I=w(I,R.j(v));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(P);if(I=R,E(I))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function E(P){if(P.h!=0)return!1;for(var v=0;v<P.g.length;v++)if(P.g[v]!=0)return!1;return!0}function S(P){return P.h==-1}t.l=function(P){return P=w(this,P),S(P)?-1:E(P)?0:1};function b(P){for(var v=P.g.length,I=[],k=0;k<v;k++)I[k]=~P.g[k];return new o(I,~P.h).add(m)}t.abs=function(){return S(this)?b(this):this},t.add=function(P){for(var v=Math.max(this.g.length,P.g.length),I=[],k=0,R=0;R<=v;R++){var D=k+(this.i(R)&65535)+(P.i(R)&65535),A=(D>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);k=A>>>16,D&=65535,A&=65535,I[R]=A<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(P,v){return P.add(b(v))}t.j=function(P){if(E(this)||E(P))return d;if(S(this))return S(P)?b(this).j(b(P)):b(b(this).j(P));if(S(P))return b(this.j(b(P)));if(0>this.l(y)&&0>P.l(y))return c(this.m()*P.m());for(var v=this.g.length+P.g.length,I=[],k=0;k<2*v;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<P.g.length;R++){var D=this.i(k)>>>16,A=this.i(k)&65535,Ge=P.i(R)>>>16,rn=P.i(R)&65535;I[2*k+2*R]+=A*rn,_(I,2*k+2*R),I[2*k+2*R+1]+=D*rn,_(I,2*k+2*R+1),I[2*k+2*R+1]+=A*Ge,_(I,2*k+2*R+1),I[2*k+2*R+2]+=D*Ge,_(I,2*k+2*R+2)}for(k=0;k<v;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=v;k<2*v;k++)I[k]=0;return new o(I,0)};function _(P,v){for(;(P[v]&65535)!=P[v];)P[v+1]+=P[v]>>>16,P[v]&=65535,v++}function T(P,v){this.g=P,this.h=v}function C(P,v){if(E(v))throw Error("division by zero");if(E(P))return new T(d,d);if(S(P))return v=C(b(P),v),new T(b(v.g),b(v.h));if(S(v))return v=C(P,b(v)),new T(b(v.g),v.h);if(30<P.g.length){if(S(P)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,k=v;0>=k.l(P);)I=O(I),k=O(k);var R=U(I,1),D=U(k,1);for(k=U(k,2),I=U(I,2);!E(k);){var A=D.add(k);0>=A.l(P)&&(R=R.add(I),D=A),k=U(k,1),I=U(I,1)}return v=w(P,R.j(v)),new T(R,v)}for(R=d;0<=P.l(v);){for(I=Math.max(1,Math.floor(P.m()/v.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=c(I),A=D.j(v);S(A)||0<A.l(P);)I-=k,D=c(I),A=D.j(v);E(D)&&(D=m),R=R.add(D),P=w(P,A)}return new T(R,P)}t.A=function(P){return C(this,P).h},t.and=function(P){for(var v=Math.max(this.g.length,P.g.length),I=[],k=0;k<v;k++)I[k]=this.i(k)&P.i(k);return new o(I,this.h&P.h)},t.or=function(P){for(var v=Math.max(this.g.length,P.g.length),I=[],k=0;k<v;k++)I[k]=this.i(k)|P.i(k);return new o(I,this.h|P.h)},t.xor=function(P){for(var v=Math.max(this.g.length,P.g.length),I=[],k=0;k<v;k++)I[k]=this.i(k)^P.i(k);return new o(I,this.h^P.h)};function O(P){for(var v=P.g.length+1,I=[],k=0;k<v;k++)I[k]=P.i(k)<<1|P.i(k-1)>>>31;return new o(I,P.h)}function U(P,v){var I=v>>5;v%=32;for(var k=P.g.length-I,R=[],D=0;D<k;D++)R[D]=0<v?P.i(D+I)>>>v|P.i(D+I+1)<<32-v:P.i(D+I);return new o(R,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,AS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,zi=o}).apply(typeof Iw<"u"?Iw:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RS,_a,CS,_u,hm,NS,DS,OS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var g=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var j=u[x];if(!(j in g))break e;g=g[j]}u=u[u.length-1],x=g[u],p=p(x),p!=x&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var g=0,x=!1,j={next:function(){if(!x&&g<u.length){var L=g++;return{value:p(L,u[L]),done:!1}}return x=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,x),u.apply(p,j)}}return function(){return u.apply(p,arguments)}}function m(u,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function y(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var x=g.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function E(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(x,j,L){for(var z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)z[ye-2]=arguments[ye];return p.prototype[j].apply(x,z)}}function S(u){const p=u.length;if(0<p){const g=Array(p);for(let x=0;x<p;x++)g[x]=u[x];return g}return[]}function b(u,p){for(let g=1;g<arguments.length;g++){const x=arguments[g];if(l(x)){const j=u.length||0,L=x.length||0;u.length=j+L;for(let z=0;z<L;z++)u[j+z]=x[z]}else u.push(x)}}class w{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function _(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function C(u){return C[" "](u),u}C[" "]=function(){};var O=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function U(u,p,g){for(const x in u)p.call(g,u[x],x,u)}function P(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function v(u){const p={};for(const g in u)p[g]=u[g];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let g,x;for(let j=1;j<arguments.length;j++){x=arguments[j];for(g in x)u[g]=x[g];for(let L=0;L<I.length;L++)g=I[L],Object.prototype.hasOwnProperty.call(x,g)&&(u[g]=x[g])}}function R(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function D(u){a.setTimeout(()=>{throw u},0)}function A(){var u=W;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ge{constructor(){this.h=this.g=null}add(p,g){const x=rn.get();x.set(p,g),this.h?this.h.next=x:this.g=x,this.h=x}}var rn=new w(()=>new Bn,u=>u.reset());class Bn{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,V=!1,W=new Ge,K=()=>{const u=a.Promise.resolve(void 0);ge=()=>{u.then(ce)}};var ce=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(g){D(g)}var p=rn;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}V=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var zn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function Wn(u,p){if(Pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(O){e:{try{C(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:qn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Wn.aa.h.call(this)}}E(Wn,Pe);var qn={2:"touch",3:"pen",4:"mouse"};Wn.prototype.h=function(){Wn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Hn="closure_listenable_"+(1e6*Math.random()|0),AA=0;function RA(u,p,g,x,j){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!x,this.ha=j,this.key=++AA,this.da=this.fa=!1}function sc(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function oc(u){this.src=u,this.g={},this.h=0}oc.prototype.add=function(u,p,g,x,j){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var z=Rd(u,p,x,j);return-1<z?(p=u[z],g||(p.fa=!1)):(p=new RA(p,this.src,L,!!x,j),p.fa=g,u.push(p)),p};function Ad(u,p){var g=p.type;if(g in u.g){var x=u.g[g],j=Array.prototype.indexOf.call(x,p,void 0),L;(L=0<=j)&&Array.prototype.splice.call(x,j,1),L&&(sc(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Rd(u,p,g,x){for(var j=0;j<u.length;++j){var L=u[j];if(!L.da&&L.listener==p&&L.capture==!!g&&L.ha==x)return j}return-1}var Cd="closure_lm_"+(1e6*Math.random()|0),Nd={};function jv(u,p,g,x,j){if(Array.isArray(p)){for(var L=0;L<p.length;L++)jv(u,p[L],g,x,j);return null}return g=Lv(g),u&&u[Hn]?u.K(p,g,c(x)?!!x.capture:!!x,j):CA(u,p,g,!1,x,j)}function CA(u,p,g,x,j,L){if(!p)throw Error("Invalid event type");var z=c(j)?!!j.capture:!!j,ye=Od(u);if(ye||(u[Cd]=ye=new oc(u)),g=ye.add(p,g,x,z,L),g.proxy)return g;if(x=NA(),g.proxy=x,x.src=u,x.listener=g,u.addEventListener)zn||(j=z),j===void 0&&(j=!1),u.addEventListener(p.toString(),x,j);else if(u.attachEvent)u.attachEvent(Mv(p.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return g}function NA(){function u(g){return p.call(u.src,u.listener,g)}const p=DA;return u}function Vv(u,p,g,x,j){if(Array.isArray(p))for(var L=0;L<p.length;L++)Vv(u,p[L],g,x,j);else x=c(x)?!!x.capture:!!x,g=Lv(g),u&&u[Hn]?(u=u.i,p=String(p).toString(),p in u.g&&(L=u.g[p],g=Rd(L,g,x,j),-1<g&&(sc(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete u.g[p],u.h--)))):u&&(u=Od(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Rd(p,g,x,j)),(g=-1<u?p[u]:null)&&Dd(g))}function Dd(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Hn])Ad(p.i,u);else{var g=u.type,x=u.proxy;p.removeEventListener?p.removeEventListener(g,x,u.capture):p.detachEvent?p.detachEvent(Mv(g),x):p.addListener&&p.removeListener&&p.removeListener(x),(g=Od(p))?(Ad(g,u),g.h==0&&(g.src=null,p[Cd]=null)):sc(u)}}}function Mv(u){return u in Nd?Nd[u]:Nd[u]="on"+u}function DA(u,p){if(u.da)u=!0;else{p=new Wn(p,this);var g=u.listener,x=u.ha||u.src;u.fa&&Dd(u),u=g.call(x,p)}return u}function Od(u){return u=u[Cd],u instanceof oc?u:null}var jd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lv(u){return typeof u=="function"?u:(u[jd]||(u[jd]=function(p){return u.handleEvent(p)}),u[jd])}function at(){de.call(this),this.i=new oc(this),this.M=this,this.F=null}E(at,de),at.prototype[Hn]=!0,at.prototype.removeEventListener=function(u,p,g,x){Vv(this,u,p,g,x)};function wt(u,p){var g,x=u.F;if(x)for(g=[];x;x=x.F)g.push(x);if(u=u.M,x=p.type||p,typeof p=="string")p=new Pe(p,u);else if(p instanceof Pe)p.target=p.target||u;else{var j=p;p=new Pe(x,u),k(p,j)}if(j=!0,g)for(var L=g.length-1;0<=L;L--){var z=p.g=g[L];j=ac(z,x,!0,p)&&j}if(z=p.g=u,j=ac(z,x,!0,p)&&j,j=ac(z,x,!1,p)&&j,g)for(L=0;L<g.length;L++)z=p.g=g[L],j=ac(z,x,!1,p)&&j}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],x=0;x<g.length;x++)sc(g[x]);delete u.g[p],u.h--}}this.F=null},at.prototype.K=function(u,p,g,x){return this.i.add(String(u),p,!1,g,x)},at.prototype.L=function(u,p,g,x){return this.i.add(String(u),p,!0,g,x)};function ac(u,p,g,x){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,L=0;L<p.length;++L){var z=p[L];if(z&&!z.da&&z.capture==g){var ye=z.listener,Xe=z.ha||z.src;z.fa&&Ad(u.i,z),j=ye.call(Xe,x)!==!1&&j}}return j&&!x.defaultPrevented}function Uv(u,p,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Fv(u){u.g=Uv(()=>{u.g=null,u.i&&(u.i=!1,Fv(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class OA extends de{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Fv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fo(u){de.call(this),this.h=u,this.g={}}E(Fo,de);var $v=[];function Bv(u){U(u.g,function(p,g){this.g.hasOwnProperty(g)&&Dd(p)},u),u.g={}}Fo.prototype.N=function(){Fo.aa.N.call(this),Bv(this)},Fo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vd=a.JSON.stringify,jA=a.JSON.parse,VA=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Md(){}Md.prototype.h=null;function zv(u){return u.h||(u.h=u.i())}function Wv(){}var $o={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ld(){Pe.call(this,"d")}E(Ld,Pe);function Ud(){Pe.call(this,"c")}E(Ud,Pe);var _i={},qv=null;function lc(){return qv=qv||new at}_i.La="serverreachability";function Hv(u){Pe.call(this,_i.La,u)}E(Hv,Pe);function Bo(u){const p=lc();wt(p,new Hv(p))}_i.STAT_EVENT="statevent";function Gv(u,p){Pe.call(this,_i.STAT_EVENT,u),this.stat=p}E(Gv,Pe);function Et(u){const p=lc();wt(p,new Gv(p,u))}_i.Ma="timingevent";function Kv(u,p){Pe.call(this,_i.Ma,u),this.size=p}E(Kv,Pe);function zo(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Wo(){this.g=!0}Wo.prototype.xa=function(){this.g=!1};function MA(u,p,g,x,j,L){u.info(function(){if(u.g)if(L)for(var z="",ye=L.split("&"),Xe=0;Xe<ye.length;Xe++){var ue=ye[Xe].split("=");if(1<ue.length){var lt=ue[0];ue=ue[1];var ct=lt.split("_");z=2<=ct.length&&ct[1]=="type"?z+(lt+"="+ue+"&"):z+(lt+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+x+") [attempt "+j+"]: "+p+`
`+g+`
`+z})}function LA(u,p,g,x,j,L,z){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+j+"]: "+p+`
`+g+`
`+L+" "+z})}function hs(u,p,g,x){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+FA(u,g)+(x?" "+x:"")})}function UA(u,p){u.info(function(){return"TIMEOUT: "+p})}Wo.prototype.info=function(){};function FA(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var x=g[u];if(!(2>x.length)){var j=x[1];if(Array.isArray(j)&&!(1>j.length)){var L=j[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<j.length;z++)j[z]=""}}}}return Vd(g)}catch{return p}}var cc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fd;function uc(){}E(uc,Md),uc.prototype.g=function(){return new XMLHttpRequest},uc.prototype.i=function(){return{}},Fd=new uc;function Er(u,p,g,x){this.j=u,this.i=p,this.l=g,this.R=x||1,this.U=new Fo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yv}function Yv(){this.i=null,this.g="",this.h=!1}var Jv={},$d={};function Bd(u,p,g){u.L=1,u.v=pc(Gn(p)),u.m=g,u.P=!0,Xv(u,null)}function Xv(u,p){u.F=Date.now(),hc(u),u.A=Gn(u.v);var g=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),d0(g.i,"t",x),u.C=0,g=u.j.J,u.h=new Yv,u.g=R0(u.j,g?p:null,!u.m),0<u.O&&(u.M=new OA(m(u.Y,u,u.g),u.O)),p=u.U,g=u.g,x=u.ca;var j="readystatechange";Array.isArray(j)||(j&&($v[0]=j.toString()),j=$v);for(var L=0;L<j.length;L++){var z=jv(g,j[L],x||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Bo(),MA(u.i,u.u,u.A,u.l,u.R,u.m)}Er.prototype.ca=function(u){u=u.target;const p=this.M;p&&Kn(u)==3?p.j():this.Y(u)},Er.prototype.Y=function(u){try{if(u==this.g)e:{const ct=Kn(this.g);var p=this.g.Ba();const ps=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||_0(this.g)))){this.J||ct!=4||p==7||(p==8||0>=ps?Bo(3):Bo(2)),zd(this);var g=this.g.Z();this.X=g;t:if(Zv(this)){var x=_0(this.g);u="";var j=x.length,L=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wi(this),qo(this);var z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,u+=this.h.i.decode(x[p],{stream:!(L&&p==j-1)});x.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,LA(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Xe=this.g;if((ye=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ye)){var ue=ye;break t}}ue=null}if(g=ue)hs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wd(this,g);else{this.o=!1,this.s=3,Et(12),wi(this),qo(this);break e}}if(this.P){g=!0;let sn;for(;!this.J&&this.C<z.length;)if(sn=$A(this,z),sn==$d){ct==4&&(this.s=4,Et(14),g=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Jv){this.s=4,Et(15),hs(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else hs(this.i,this.l,sn,null),Wd(this,sn);if(Zv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||z.length!=0||this.h.h||(this.s=1,Et(16),g=!1),this.o=this.o&&g,!g)hs(this.i,this.l,z,"[Invalid Chunked Response]"),wi(this),qo(this);else if(0<z.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Yd(lt),lt.M=!0,Et(11))}}else hs(this.i,this.l,z,null),Wd(this,z);ct==4&&wi(this),this.o&&!this.J&&(ct==4?I0(this.j,this):(this.o=!1,hc(this)))}else iR(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),wi(this),qo(this)}}}catch{}finally{}};function Zv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function $A(u,p){var g=u.C,x=p.indexOf(`
`,g);return x==-1?$d:(g=Number(p.substring(g,x)),isNaN(g)?Jv:(x+=1,x+g>p.length?$d:(p=p.slice(x,x+g),u.C=x+g,p)))}Er.prototype.cancel=function(){this.J=!0,wi(this)};function hc(u){u.S=Date.now()+u.I,e0(u,u.I)}function e0(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=zo(m(u.ba,u),p)}function zd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Er.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(UA(this.i,this.A),this.L!=2&&(Bo(),Et(17)),wi(this),this.s=2,qo(this)):e0(this,this.S-u)};function qo(u){u.j.G==0||u.J||I0(u.j,u)}function wi(u){zd(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Bv(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Wd(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||qd(g.h,u))){if(!u.K&&qd(g.h,u)&&g.G==3){try{var x=g.Da.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var j=x;if(j[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)wc(g),vc(g);else break e;Qd(g),Et(18)}}else g.za=j[1],0<g.za-g.T&&37500>j[2]&&g.F&&g.v==0&&!g.C&&(g.C=zo(m(g.Za,g),6e3));if(1>=r0(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else xi(g,11)}else if((u.K||g.g==u)&&wc(g),!_(p))for(j=g.Da.g.parse(p),p=0;p<j.length;p++){let ue=j[p];if(g.T=ue[0],ue=ue[1],g.G==2)if(ue[0]=="c"){g.K=ue[1],g.ia=ue[2];const lt=ue[3];lt!=null&&(g.la=lt,g.j.info("VER="+g.la));const ct=ue[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const ps=ue[5];ps!=null&&typeof ps=="number"&&0<ps&&(x=1.5*ps,g.L=x,g.j.info("backChannelRequestTimeoutMs_="+x)),x=g;const sn=u.g;if(sn){const xc=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xc){var L=x.h;L.g||xc.indexOf("spdy")==-1&&xc.indexOf("quic")==-1&&xc.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Hd(L,L.h),L.h=null))}if(x.D){const Jd=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Jd&&(x.ya=Jd,we(x.I,x.D,Jd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),x=g;var z=u;if(x.qa=A0(x,x.J?x.ia:null,x.W),z.K){i0(x.h,z);var ye=z,Xe=x.L;Xe&&(ye.I=Xe),ye.B&&(zd(ye),hc(ye)),x.g=z}else b0(x);0<g.i.length&&_c(g)}else ue[0]!="stop"&&ue[0]!="close"||xi(g,7);else g.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?xi(g,7):Kd(g):ue[0]!="noop"&&g.l&&g.l.ta(ue),g.v=0)}}Bo(4)}catch{}}var BA=class{constructor(u,p){this.g=u,this.map=p}};function t0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function n0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function r0(u){return u.h?1:u.g?u.g.size:0}function qd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Hd(u,p){u.g?u.g.add(p):u.h=p}function i0(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}t0.prototype.cancel=function(){if(this.i=s0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function s0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return S(u.i)}function zA(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,x=0;x<g;x++)p.push(u[x]);return p}p=[],g=0;for(x in u)p[g++]=u[x];return p}function WA(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const x in u)p[g++]=x;return p}}}function o0(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=WA(u),x=zA(u),j=x.length,L=0;L<j;L++)p.call(void 0,x[L],g&&g[L],u)}var a0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qA(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var x=u[g].indexOf("="),j=null;if(0<=x){var L=u[g].substring(0,x);j=u[g].substring(x+1)}else L=u[g];p(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Ei(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ei){this.h=u.h,dc(this,u.j),this.o=u.o,this.g=u.g,fc(this,u.s),this.l=u.l;var p=u.i,g=new Ko;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),l0(this,g),this.m=u.m}else u&&(p=String(u).match(a0))?(this.h=!1,dc(this,p[1]||"",!0),this.o=Ho(p[2]||""),this.g=Ho(p[3]||"",!0),fc(this,p[4]),this.l=Ho(p[5]||"",!0),l0(this,p[6]||"",!0),this.m=Ho(p[7]||"")):(this.h=!1,this.i=new Ko(null,this.h))}Ei.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Go(p,c0,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Go(p,c0,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Go(g,g.charAt(0)=="/"?KA:GA,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Go(g,YA)),u.join("")};function Gn(u){return new Ei(u)}function dc(u,p,g){u.j=g?Ho(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function fc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function l0(u,p,g){p instanceof Ko?(u.i=p,JA(u.i,u.h)):(g||(p=Go(p,QA)),u.i=new Ko(p,u.h))}function we(u,p,g){u.i.set(p,g)}function pc(u){return we(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ho(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Go(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,HA),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function HA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var c0=/[#\/\?@]/g,GA=/[#\?:]/g,KA=/[#\?]/g,QA=/[#\?@]/g,YA=/#/g;function Ko(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function xr(u){u.g||(u.g=new Map,u.h=0,u.i&&qA(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Ko.prototype,t.add=function(u,p){xr(this),this.i=null,u=ds(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function u0(u,p){xr(u),p=ds(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function h0(u,p){return xr(u),p=ds(u,p),u.g.has(p)}t.forEach=function(u,p){xr(this),this.g.forEach(function(g,x){g.forEach(function(j){u.call(p,j,x,this)},this)},this)},t.na=function(){xr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let x=0;x<p.length;x++){const j=u[x];for(let L=0;L<j.length;L++)g.push(p[x])}return g},t.V=function(u){xr(this);let p=[];if(typeof u=="string")h0(this,u)&&(p=p.concat(this.g.get(ds(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return xr(this),this.i=null,u=ds(this,u),h0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function d0(u,p,g){u0(u,p),0<g.length&&(u.i=null,u.g.set(ds(u,p),S(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var x=p[g];const L=encodeURIComponent(String(x)),z=this.V(x);for(x=0;x<z.length;x++){var j=L;z[x]!==""&&(j+="="+encodeURIComponent(String(z[x]))),u.push(j)}}return this.i=u.join("&")};function ds(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function JA(u,p){p&&!u.j&&(xr(u),u.i=null,u.g.forEach(function(g,x){var j=x.toLowerCase();x!=j&&(u0(this,x),d0(this,j,g))},u)),u.j=p}function XA(u,p){const g=new Wo;if(a.Image){const x=new Image;x.onload=y(Tr,g,"TestLoadImage: loaded",!0,p,x),x.onerror=y(Tr,g,"TestLoadImage: error",!1,p,x),x.onabort=y(Tr,g,"TestLoadImage: abort",!1,p,x),x.ontimeout=y(Tr,g,"TestLoadImage: timeout",!1,p,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else p(!1)}function ZA(u,p){const g=new Wo,x=new AbortController,j=setTimeout(()=>{x.abort(),Tr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:x.signal}).then(L=>{clearTimeout(j),L.ok?Tr(g,"TestPingServer: ok",!0,p):Tr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),Tr(g,"TestPingServer: error",!1,p)})}function Tr(u,p,g,x,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),x(g)}catch{}}function eR(){this.g=new VA}function tR(u,p,g){const x=g||"";try{o0(u,function(j,L){let z=j;c(j)&&(z=Vd(j)),p.push(x+L+"="+encodeURIComponent(z))})}catch(j){throw p.push(x+"type="+encodeURIComponent("_badmap")),j}}function mc(u){this.l=u.Ub||null,this.j=u.eb||!1}E(mc,Md),mc.prototype.g=function(){return new gc(this.l,this.j)},mc.prototype.i=function(u){return function(){return u}}({});function gc(u,p){at.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(gc,at),t=gc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Yo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Yo(this)),this.g&&(this.readyState=3,Yo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;f0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function f0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Qo(this):Yo(this),this.readyState==3&&f0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Qo(this))},t.Qa=function(u){this.g&&(this.response=u,Qo(this))},t.ga=function(){this.g&&Qo(this)};function Qo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Yo(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function Yo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function p0(u){let p="";return U(u,function(g,x){p+=x,p+=":",p+=g,p+=`\r
`}),p}function Gd(u,p,g){e:{for(x in g){var x=!1;break e}x=!0}x||(g=p0(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):we(u,p,g))}function De(u){at.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(De,at);var nR=/^https?$/i,rR=["POST","PUT"];t=De.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fd.g(),this.v=this.o?zv(this.o):zv(Fd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(L){m0(this,L);return}if(u=g||"",g=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var j in x)g.set(j,x[j]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const L of x.keys())g.set(L,x.get(L));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),j=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rR,p,void 0))||x||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of g)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{v0(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){m0(this,L)}};function m0(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,g0(u),yc(u)}function g0(u){u.A||(u.A=!0,wt(u,"complete"),wt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,wt(this,"complete"),wt(this,"abort"),yc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yc(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?y0(this):this.bb())},t.bb=function(){y0(this)};function y0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Kn(u)!=4||u.Z()!=2)){if(u.u&&Kn(u)==4)Uv(u.Ea,0,u);else if(wt(u,"readystatechange"),Kn(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var x;if(x=z===0){var j=String(u.D).match(a0)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),x=!nR.test(j?j.toLowerCase():"")}g=x}if(g)wt(u,"complete"),wt(u,"success");else{u.m=6;try{var L=2<Kn(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",g0(u)}}finally{yc(u)}}}}function yc(u,p){if(u.g){v0(u);const g=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||wt(u,"ready");try{g.onreadystatechange=x}catch{}}}function v0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Kn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),jA(p)}};function _0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function iR(u){const p={};u=(u.g&&2<=Kn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(_(u[x]))continue;var g=R(u[x]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=p[j]||[];p[j]=L,L.push(g)}P(p,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jo(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function w0(u){this.Aa=0,this.i=[],this.j=new Wo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jo("baseRetryDelayMs",5e3,u),this.cb=Jo("retryDelaySeedMs",1e4,u),this.Wa=Jo("forwardChannelMaxRetries",2,u),this.wa=Jo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new t0(u&&u.concurrentRequestLimit),this.Da=new eR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=w0.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,x){Et(0),this.W=u,this.H=p||{},g&&x!==void 0&&(this.H.OSID=g,this.H.OAID=x),this.F=this.X,this.I=A0(this,null,this.W),_c(this)};function Kd(u){if(E0(u),u.G==3){var p=u.U++,g=Gn(u.I);if(we(g,"SID",u.K),we(g,"RID",p),we(g,"TYPE","terminate"),Xo(u,g),p=new Er(u,u.j,p),p.L=2,p.v=pc(Gn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=R0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),hc(p)}k0(u)}function vc(u){u.g&&(Yd(u),u.g.cancel(),u.g=null)}function E0(u){vc(u),u.u&&(a.clearTimeout(u.u),u.u=null),wc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function _c(u){if(!n0(u.h)&&!u.s){u.s=!0;var p=u.Ga;ge||K(),V||(ge(),V=!0),W.add(p,u),u.B=0}}function sR(u,p){return r0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=zo(m(u.Ga,u,p),P0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new Er(this,this.j,u);let L=this.o;if(this.S&&(L?(L=v(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(j.H=L,L=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var x=this.i[g];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=T0(this,j,p),g=Gn(this.I),we(g,"RID",u),we(g,"CVER",22),this.D&&we(g,"X-HTTP-Session-Id",this.D),Xo(this,g),L&&(this.O?p="headers="+encodeURIComponent(String(p0(L)))+"&"+p:this.m&&Gd(g,this.m,L)),Hd(this.h,j),this.Ua&&we(g,"TYPE","init"),this.P?(we(g,"$req",p),we(g,"SID","null"),j.T=!0,Bd(j,g,null)):Bd(j,g,p),this.G=2}}else this.G==3&&(u?x0(this,u):this.i.length==0||n0(this.h)||x0(this))};function x0(u,p){var g;p?g=p.l:g=u.U++;const x=Gn(u.I);we(x,"SID",u.K),we(x,"RID",g),we(x,"AID",u.T),Xo(u,x),u.m&&u.o&&Gd(x,u.m,u.o),g=new Er(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=T0(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Hd(u.h,g),Bd(g,x,p)}function Xo(u,p){u.H&&U(u.H,function(g,x){we(p,x,g)}),u.l&&o0({},function(g,x){we(p,x,g)})}function T0(u,p,g){g=Math.min(u.i.length,g);var x=u.l?m(u.l.Na,u.l,u):null;e:{var j=u.i;let L=-1;for(;;){const z=["count="+g];L==-1?0<g?(L=j[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let ye=!0;for(let Xe=0;Xe<g;Xe++){let ue=j[Xe].g;const lt=j[Xe].map;if(ue-=L,0>ue)L=Math.max(0,j[Xe].g-100),ye=!1;else try{tR(lt,z,"req"+ue+"_")}catch{x&&x(lt)}}if(ye){x=z.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,x}function b0(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ge||K(),V||(ge(),V=!0),W.add(p,u),u.v=0}}function Qd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=zo(m(u.Fa,u),P0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,S0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=zo(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),vc(this),S0(this))};function Yd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function S0(u){u.g=new Er(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Gn(u.qa);we(p,"RID","rpc"),we(p,"SID",u.K),we(p,"AID",u.T),we(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&we(p,"TO",u.ja),we(p,"TYPE","xmlhttp"),Xo(u,p),u.m&&u.o&&Gd(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=pc(Gn(p)),g.m=null,g.P=!0,Xv(g,u)}t.Za=function(){this.C!=null&&(this.C=null,vc(this),Qd(this),Et(19))};function wc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function I0(u,p){var g=null;if(u.g==p){wc(u),Yd(u),u.g=null;var x=2}else if(qd(u.h,p))g=p.D,i0(u.h,p),x=1;else return;if(u.G!=0){if(p.o)if(x==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var j=u.B;x=lc(),wt(x,new Kv(x,g)),_c(u)}else b0(u);else if(j=p.s,j==3||j==0&&0<p.X||!(x==1&&sR(u,p)||x==2&&Qd(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),j){case 1:xi(u,5);break;case 4:xi(u,10);break;case 3:xi(u,6);break;default:xi(u,2)}}}function P0(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function xi(u,p){if(u.j.info("Error code "+p),p==2){var g=m(u.fb,u),x=u.Xa;const j=!x;x=new Ei(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dc(x,"https"),pc(x),j?XA(x.toString(),g):ZA(x.toString(),g)}else Et(2);u.G=0,u.l&&u.l.sa(p),k0(u),E0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function k0(u){if(u.G=0,u.ka=[],u.l){const p=s0(u.h);(p.length!=0||u.i.length!=0)&&(b(u.ka,p),b(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function A0(u,p,g){var x=g instanceof Ei?Gn(g):new Ei(g);if(x.g!="")p&&(x.g=p+"."+x.g),fc(x,x.s);else{var j=a.location;x=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var L=new Ei(null);x&&dc(L,x),p&&(L.g=p),j&&fc(L,j),g&&(L.l=g),x=L}return g=u.D,p=u.ya,g&&p&&we(x,g,p),we(x,"VER",u.la),Xo(u,x),x}function R0(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new De(new mc({eb:g})):new De(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function C0(){}t=C0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ec(){}Ec.prototype.g=function(u,p){return new jt(u,p)};function jt(u,p){at.call(this),this.g=new w0(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!_(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!_(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new fs(this)}E(jt,at),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){Kd(this.g)},jt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Vd(u),u=g);p.i.push(new BA(p.Ya++,u)),p.G==3&&_c(p)},jt.prototype.N=function(){this.g.l=null,delete this.j,Kd(this.g),delete this.g,jt.aa.N.call(this)};function N0(u){Ld.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}E(N0,Ld);function D0(){Ud.call(this),this.status=1}E(D0,Ud);function fs(u){this.g=u}E(fs,C0),fs.prototype.ua=function(){wt(this.g,"a")},fs.prototype.ta=function(u){wt(this.g,new N0(u))},fs.prototype.sa=function(u){wt(this.g,new D0)},fs.prototype.ra=function(){wt(this.g,"b")},Ec.prototype.createWebChannel=Ec.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,OS=function(){return new Ec},DS=function(){return lc()},NS=_i,hm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cc.NO_ERROR=0,cc.TIMEOUT=8,cc.HTTP_ERROR=6,_u=cc,Qv.COMPLETE="complete",CS=Qv,Wv.EventType=$o,$o.OPEN="a",$o.CLOSE="b",$o.ERROR="c",$o.MESSAGE="d",at.prototype.listen=at.prototype.K,_a=Wv,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,RS=De}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const Pw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new Jg("@firebase/firestore");function aa(){return Zi.logLevel}function G(t,...e){if(Zi.logLevel<=oe.DEBUG){const n=e.map(hy);Zi.debug(`Firestore (${Co}): ${t}`,...n)}}function mr(t,...e){if(Zi.logLevel<=oe.ERROR){const n=e.map(hy);Zi.error(`Firestore (${Co}): ${t}`,...n)}}function co(t,...e){if(Zi.logLevel<=oe.WARN){const n=e.map(hy);Zi.warn(`Firestore (${Co}): ${t}`,...n)}}function hy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+t;throw mr(e),new Error(e)}function me(t,e){t||X()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class VV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class MV{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new jS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new pt(e)}}class LV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new LV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $V{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new FV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=BV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function uo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Fe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Fe(0,0))}static max(){return new Z(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends yl{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const zV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends yl{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return zV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(xe.fromString(e))}static fromName(e){return new Q(xe.fromString(e).popFirst(5))}static empty(){return new Q(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new xe(e.slice()))}}function WV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new ii(i,Q.empty(),e)}function qV(t){return new ii(t.readTime,t.key,-1)}class ii{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ii(Z.min(),Q.empty(),-1)}static max(){return new ii(Z.max(),Q.empty(),-1)}}function HV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==GV)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function QV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ql(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}dy.oe=-1;function Qh(t){return t==null}function lh(t){return t===0&&1/t==-1/0}function YV(t){return typeof t=="number"&&Number.isInteger(t)&&!lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??tt.RED,this.left=i??tt.EMPTY,this.right=s??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new tt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return tt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Aw(this.data.getIterator())}getIteratorFrom(e){return new Aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class Aw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new it(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new LS("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const JV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(t){if(me(!!t),typeof t=="string"){let e=0;const n=JV.exec(t);if(me(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function es(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function py(t){const e=t.mapValue.fields.__previous_value__;return fy(e)?py(e):e}function vl(t){const e=si(t.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class _l{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _l("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fy(t)?4:eM(t)?9007199254740991:ZV(t)?10:11:X()}function Ln(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vl(t).isEqual(vl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=si(i.timestampValue),a=si(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return es(i.bytesValue).isEqual(es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Me(i.doubleValue),a=Me(s.doubleValue);return o===a?lh(o)===lh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return uo(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(kw(o)!==kw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ln(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function wl(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function ho(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Me(s.integerValue||s.doubleValue),l=Me(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Rw(t.timestampValue,e.timestampValue);case 4:return Rw(vl(t),vl(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(s,o){const a=es(s),l=es(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=he(a[c],l[c]);if(h!==0)return h}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Me(s.latitude),Me(o.latitude));return a!==0?a:he(Me(s.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},m=o.fields||{},y=(a=d.value)===null||a===void 0?void 0:a.arrayValue,E=(l=m.value)===null||l===void 0?void 0:l.arrayValue,S=he(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:Cw(y,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===zc.mapValue&&o===zc.mapValue)return 0;if(s===zc.mapValue)return 1;if(o===zc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const m=he(l[d],h[d]);if(m!==0)return m;const y=ho(a[l[d]],c[h[d]]);if(y!==0)return y}return he(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function Rw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=si(t),r=si(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function Cw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ho(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function fo(t){return dm(t)}function dm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=si(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=dm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${dm(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function Nw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fm(t){return!!t&&"integerValue"in t}function my(t){return!!t&&"arrayValue"in t}function Dw(t){return!!t&&"nullValue"in t}function Ow(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wu(t){return!!t&&"mapValue"in t}function ZV(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ma(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ma(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ma(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ma(n)}setAll(e){let n=nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ma(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ss(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Rt(Ma(this.value))}}function US(t){const e=[];return ss(t.fields,(n,r)=>{const i=new nt([n]);if(wu(r)){const s=US(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new gt(e,0,Z.min(),Z.min(),Z.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,i){return new gt(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new gt(e,2,n,Z.min(),Z.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,Z.min(),Z.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n){this.position=e,this.inclusive=n}}function jw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=ho(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n="asc"){this.field=e,this.dir=n}}function tM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{}class ze extends FS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rM(e,n,r):n==="array-contains"?new oM(e,r):n==="in"?new aM(e,r):n==="not-in"?new lM(e,r):n==="array-contains-any"?new cM(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iM(e,r):new sM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ho(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends FS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new wn(e,n)}matches(e){return $S(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $S(t){return t.op==="and"}function BS(t){return nM(t)&&$S(t)}function nM(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function pm(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(BS(t))return t.filters.map(e=>pm(e)).join(",");{const e=t.filters.map(n=>pm(n)).join(",");return`${t.op}(${e})`}}function zS(t,e){return t instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&Ln(r.value,i.value)}(t,e):t instanceof wn?function(r,i){return i instanceof wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&zS(o,i.filters[a]),!0):!1}(t,e):void X()}function WS(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(WS).join(" ,")+"}"}(t):"Filter"}class rM extends ze{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class iM extends ze{constructor(e,n){super(e,"in",n),this.keys=qS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sM extends ze{constructor(e,n){super(e,"not-in",n),this.keys=qS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class oM extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return my(n)&&wl(n.arrayValue,this.value)}}class aM extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wl(this.value.arrayValue,n)}}class lM extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wl(this.value.arrayValue,n)}}class cM extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!my(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Mw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new uM(t,e,n,r,i,s,o)}function gy(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),e.ue=n}return e.ue}function yy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vw(t.startAt,e.startAt)&&Vw(t.endAt,e.endAt)}function mm(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hM(t,e,n,r,i,s,o,a){return new No(t,e,n,r,i,s,o,a)}function vy(t){return new No(t)}function Lw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HS(t){return t.collectionGroup!==null}function La(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new it(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new El(s,r))}),n.has(nt.keyField().canonicalString())||e.ce.push(new El(nt.keyField(),r))}return e.ce}function Dn(t){const e=ee(t);return e.le||(e.le=dM(e,La(t))),e.le}function dM(t,e){if(t.limitType==="F")return Mw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new El(i.field,s)});const n=t.endAt?new ch(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ch(t.startAt.position,t.startAt.inclusive):null;return Mw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gm(t,e){const n=t.filters.concat([e]);return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ym(t,e,n){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yh(t,e){return yy(Dn(t),Dn(e))&&t.limitType===e.limitType}function GS(t){return`${gy(Dn(t))}|lt:${t.limitType}`}function ws(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>WS(i)).join(", ")}]`),Qh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fo(i)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function Jh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of La(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=jw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,La(r),i)||r.endAt&&!function(o,a,l){const c=jw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,La(r),i))}(t,e)}function fM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KS(t){return(e,n)=>{let r=!1;for(const i of La(t)){const s=pM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function pM(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ho(l,c):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ss(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return MS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=new Ne(Q.comparator);function gr(){return mM}const QS=new Ne(Q.comparator);function wa(...t){let e=QS;for(const n of t)e=e.insert(n.key,n);return e}function YS(t){let e=QS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ui(){return Ua()}function JS(){return Ua()}function Ua(){return new Do(t=>t.toString(),(t,e)=>t.isEqual(e))}const gM=new Ne(Q.comparator),yM=new it(Q.comparator);function re(...t){let e=yM;for(const n of t)e=e.add(n);return e}const vM=new it(he);function _M(){return vM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function XS(t){return{integerValue:""+t}}function ZS(t,e){return YV(e)?XS(e):_y(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this._=void 0}}function wM(t,e,n){return t instanceof xl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fy(s)&&(s=py(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Tl?tI(t,e):t instanceof bl?nI(t,e):function(i,s){const o=eI(i,s),a=Uw(o)+Uw(i.Pe);return fm(o)&&fm(i.Pe)?XS(a):_y(i.serializer,a)}(t,e)}function EM(t,e,n){return t instanceof Tl?tI(t,e):t instanceof bl?nI(t,e):n}function eI(t,e){return t instanceof Sl?function(r){return fm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class xl extends Xh{}class Tl extends Xh{constructor(e){super(),this.elements=e}}function tI(t,e){const n=rI(e);for(const r of t.elements)n.some(i=>Ln(i,r))||n.push(r);return{arrayValue:{values:n}}}class bl extends Xh{constructor(e){super(),this.elements=e}}function nI(t,e){let n=rI(e);for(const r of t.elements)n=n.filter(i=>!Ln(i,r));return{arrayValue:{values:n}}}class Sl extends Xh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Uw(t){return Me(t.integerValue||t.doubleValue)}function rI(t){return my(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.field=e,this.transform=n}}function xM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Tl&&i instanceof Tl||r instanceof bl&&i instanceof bl?uo(r.elements,i.elements,Ln):r instanceof Sl&&i instanceof Sl?Ln(r.Pe,i.Pe):r instanceof xl&&i instanceof xl}(t.transform,e.transform)}class TM{constructor(e,n){this.version=e,this.transformResults=n}}class vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zh{}function sI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new aI(t.key,vn.none()):new Hl(t.key,t.data,vn.none());{const n=t.data,r=Rt.empty();let i=new it(nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new gi(t.key,r,new Ut(i.toArray()),vn.none())}}function bM(t,e,n){t instanceof Hl?function(i,s,o){const a=i.value.clone(),l=$w(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gi?function(i,s,o){if(!Eu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=$w(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(oI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fa(t,e,n,r){return t instanceof Hl?function(s,o,a,l){if(!Eu(s.precondition,o))return a;const c=s.value.clone(),h=Bw(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof gi?function(s,o,a,l){if(!Eu(s.precondition,o))return a;const c=Bw(s.fieldTransforms,l,o),h=o.data;return h.setAll(oI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Eu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function SM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=eI(r.transform,i||null);s!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,s))}return n||null}function Fw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uo(r,i,(s,o)=>xM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hl extends Zh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class gi extends Zh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function oI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $w(t,e,n){const r=new Map;me(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,EM(o,a,n[i]))}return r}function Bw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,wM(s,o,e))}return r}class aI extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IM extends Zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&bM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=JS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=sI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,r)=>Fw(n,r))&&uo(this.baseMutations,e.baseMutations,(n,r)=>Fw(n,r))}}class wy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length);let i=function(){return gM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new wy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ae;function RM(t){switch(t){default:return X();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function lI(t){if(t===void 0)return mr("GRPC error has no .code"),F.UNKNOWN;switch(t){case $e.OK:return F.OK;case $e.CANCELLED:return F.CANCELLED;case $e.UNKNOWN:return F.UNKNOWN;case $e.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case $e.INTERNAL:return F.INTERNAL;case $e.UNAVAILABLE:return F.UNAVAILABLE;case $e.UNAUTHENTICATED:return F.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case $e.NOT_FOUND:return F.NOT_FOUND;case $e.ALREADY_EXISTS:return F.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return F.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case $e.ABORTED:return F.ABORTED;case $e.OUT_OF_RANGE:return F.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return F.UNIMPLEMENTED;case $e.DATA_LOSS:return F.DATA_LOSS;default:return X()}}(ae=$e||($e={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=new zi([4294967295,4294967295],0);function zw(t){const e=CM().encode(t),n=new AS;return n.update(e),new Uint8Array(n.digest())}function Ww(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zi([n,r],0),new zi([i,s],0)]}class Ey{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ea(`Invalid padding: ${n}`);if(r<0)throw new Ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ea(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(zi.fromNumber(r)));return i.compare(NM)===1&&(i=new zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=zw(e),[r,i]=Ww(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Ey(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=zw(e),[r,i]=Ww(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Gl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ed(Z.min(),i,new Ne(he),gr(),re())}}class Gl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gl(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class cI{constructor(e,n){this.targetId=e,this.me=n}}class uI{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class qw{constructor(){this.fe=0,this.ge=Gw(),this.pe=ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new Gl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Gw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DM{constructor(e){this.Le=e,this.Be=new Map,this.ke=gr(),this.qe=Hw(),this.Qe=new Ne(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(mm(s))if(r===0){const o=new Q(s.path);this.Ue(n,o,gt.newNoDocument(o,Z.min()))}else me(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=es(r).toUint8Array()}catch(l){if(l instanceof LS)return co("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ey(o,i,s)}catch(l){return co(l instanceof Ea?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&mm(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,gt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=re();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new ed(e,n,this.Qe,this.ke,r);return this.ke=gr(),this.qe=Hw(),this.Qe=new Ne(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new qw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new it(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Hw(){return new Ne(Q.comparator)}function Gw(){return new Ne(Q.comparator)}const OM={asc:"ASCENDING",desc:"DESCENDING"},jM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VM={and:"AND",or:"OR"};class MM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vm(t,e){return t.useProto3Json||Qh(e)?e:{value:e}}function uh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LM(t,e){return uh(t,e.toTimestamp())}function On(t){return me(!!t),Z.fromTimestamp(function(n){const r=si(n);return new Fe(r.seconds,r.nanos)}(t))}function xy(t,e){return _m(t,e).canonicalString()}function _m(t,e){const n=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dI(t){const e=xe.fromString(t);return me(yI(e)),e}function wm(t,e){return xy(t.databaseId,e.path)}function Df(t,e){const n=dI(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(pI(n))}function fI(t,e){return xy(t.databaseId,e)}function UM(t){const e=dI(t);return e.length===4?xe.emptyPath():pI(e)}function Em(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pI(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Kw(t,e,n){return{name:wm(t,e),fields:n.value.mapValue.fields}}function FM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(me(h===void 0||typeof h=="string"),ot.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:lI(c.code);return new q(h,c.message||"")}(o);n=new uI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Df(t,r.document.name),s=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):Z.min(),a=new Rt({mapValue:{fields:r.document.fields}}),l=gt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new xu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Df(t,r.document),s=r.readTime?On(r.readTime):Z.min(),o=gt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Df(t,r.document),s=r.removedTargetIds||[];n=new xu([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new AM(i,s),a=r.targetId;n=new cI(a,o)}}return n}function $M(t,e){let n;if(e instanceof Hl)n={update:Kw(t,e.key,e.value)};else if(e instanceof aI)n={delete:wm(t,e.key)};else if(e instanceof gi)n={update:Kw(t,e.key,e.data),updateMask:YM(e.fieldMask)};else{if(!(e instanceof IM))return X();n={verify:wm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof xl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Tl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:LM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function BM(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?On(i.updateTime):On(s);return o.isEqual(Z.min())&&(o=On(s)),new TM(o,i.transformResults||[])}(n,e))):[]}function zM(t,e){return{documents:[fI(t,e.path)]}}function WM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fI(t,i);const s=function(c){if(c.length!==0)return gI(wn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Es(m.field),direction:GM(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function qM(t){let e=UM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){me(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const m=mI(d);return m instanceof wn&&BS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(E){return new El(xs(E.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,Qh(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(d){const m=!!d.before,y=d.values||[];return new ch(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const m=!d.before,y=d.values||[];return new ch(y,m)}(n.endAt)),hM(e,i,o,s,a,"F",l,c)}function HM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xs(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xs(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xs(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xs(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(xs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>mI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function GM(t){return OM[t]}function KM(t){return jM[t]}function QM(t){return VM[t]}function Es(t){return{fieldPath:t.canonicalString()}}function xs(t){return nt.fromServerFormat(t.fieldPath)}function gI(t){return t instanceof ze?function(n){if(n.op==="=="){if(Ow(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(Dw(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ow(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(Dw(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:KM(n.op),value:n.value}}}(t):t instanceof wn?function(n){const r=n.getFilters().map(i=>gI(i));return r.length===1?r[0]:{compositeFilter:{op:QM(n.op),filters:r}}}(t):X()}function YM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r,i,s=Z.min(),o=Z.min(),a=ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.ct=e}}function XM(t){const e=qM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.un=new eL}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(ii.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class eL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new it(xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new po(0)}static kn(){return new po(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.changes=new Do(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fa(r.mutation,i,Ut.empty(),Fe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=Ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=wa();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=gr();const o=Ua(),a=function(){return Ua()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof gi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Fa(h.mutation,c,h.mutation.getFieldMask(),Fe.now())):o.set(c.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new nL(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ua();let i=new Ne((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Ut.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||re()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=JS();h.forEach(m=>{if(!s.has(m)){const y=sI(n.get(m),r.get(m));y!==null&&d.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(Ui());let a=-1,l=s;return o.next(c=>$.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,re())).next(h=>({batchId:a,changes:YS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=wa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=wa();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,l=>{const c=function(d,m){return new No(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,gt.newInvalidDocument(h)))});let a=wa();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Fa(h.mutation,c,Ut.empty(),Fe.now()),Jh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:XM(i.bundledQuery),readTime:On(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.overlays=new Ne(Q.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ui();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=Ui(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ui(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ui(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return $.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kM(n,r));let s=this.Ir.get(n);s===void 0&&(s=re(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.Tr=new it(Qe.Er),this.dr=new it(Qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new xe([])),r=new Qe(n,e),i=new Qe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new xe([])),r=new Qe(n,e),i=new Qe(n,e+1);let s=re();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new it(Qe.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new PM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qe(n,0),i=new Qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(he);return n.forEach(i=>{const s=new Qe(i,0),o=new Qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const o=new Qe(new Q(s),0);let a=new it(he);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),$.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,i=>{const s=new Qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Qe(n,0),i=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.Mr=e,this.docs=function(){return new Ne(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=gr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gt.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gr();const o=n.path,a=new Q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||HV(qV(h),r)<=0||(i.has(h.key)||Jh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cL(this)}getSize(e){return $.resolve(this.size)}}class cL extends tL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.persistence=e,this.Nr=new Do(n=>gy(n),yy),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ty,this.targetCount=0,this.kr=po.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new po(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n){this.qr={},this.overlays={},this.Qr=new dy(0),this.Kr=!1,this.Kr=!0,this.$r=new oL,this.referenceDelegate=e(this),this.Ur=new uL(this),this.indexManager=new ZM,this.remoteDocumentCache=function(i){return new lL(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new JM(n),this.Gr=new iL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new aL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new dL(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class dL extends KV{constructor(e){super(),this.currentSequenceNumber=e}}class by{constructor(e){this.persistence=e,this.Jr=new Ty,this.Yr=null}static Zr(e){return new by(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const i=Q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Sy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return J2()?8:QV(_t())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fL;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(aa()<=oe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(aa()<=oe.DEBUG&&G("QueryEngine","Query:",ws(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(aa()<=oe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):$.resolve())}Yi(e,n){if(Lw(n))return $.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ym(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=re(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,ym(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return Lw(n)||i.isEqual(Z.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?$.resolve(null):(aa()<=oe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ws(n)),this.rs(e,o,n,WV(i,-1)).next(a=>a))})}ts(e,n){let r=new it(KS(e));return n.forEach((i,s)=>{Jh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return aa()<=oe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",ws(n)),this.Ji.getDocumentsMatchingQuery(e,n,ii.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ne(he),this._s=new Do(s=>gy(s),yy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function gL(t,e,n,r){return new mL(t,e,n,r)}async function vI(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=re();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function yL(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,m=d.keys();let y=$.resolve();return m.forEach(E=>{y=y.next(()=>h.getEntry(l,E)).next(S=>{const b=c.docVersions.get(E);me(b!==null),S.version.compareTo(b)<0&&(d.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _I(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vL(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const m=i.get(d);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(ot.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(d,y),function(S,b,w){return S.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let l=gr(),c=re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(_L(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(Z.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function _L(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function wL(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EL(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function xm(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ql(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Qw(t,e,n){const r=ee(t);let i=Z.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ee(l),m=d._s.get(h);return m!==void 0?$.resolve(d.os.get(m)):d.Ur.getTargetData(c,h)}(r,o,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:re())).next(a=>(xL(r,fM(e),a),{documents:a,Ts:s})))}function xL(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Yw{constructor(){this.activeTargetIds=_M()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TL{constructor(){this.so=new Yw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc=null;function Of(){return Wc===null?Wc=function(){return 268435456+Math.round(2147483648*Math.random())}():Wc++,"0x"+Wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class PL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Of(),l=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(G("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw co("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=SL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Of();return new Promise((o,a)=>{const l=new RS;l.setWithCredentials(!0),l.listenOnce(CS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _u.NO_ERROR:const h=l.getResponseJson();G(dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case _u.TIMEOUT:G(dt,`RPC '${e}' ${s} timed out`),a(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case _u.HTTP_ERROR:const d=l.getStatus();if(G(dt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const E=function(b){const w=b.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(y.status);a(new q(E,y.message))}else a(new q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(F.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{G(dt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);G(dt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Of(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OS(),a=DS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");G(dt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let m=!1,y=!1;const E=new IL({Io:b=>{y?G(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(G(dt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),G(dt,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},To:()=>d.close()}),S=(b,w,_)=>{b.listen(w,T=>{try{_(T)}catch(C){setTimeout(()=>{throw C},0)}})};return S(d,_a.EventType.OPEN,()=>{y||(G(dt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),S(d,_a.EventType.CLOSE,()=>{y||(y=!0,G(dt,`RPC '${e}' stream ${i} transport closed`),E.So())}),S(d,_a.EventType.ERROR,b=>{y||(y=!0,co(dt,`RPC '${e}' stream ${i} transport errored:`,b),E.So(new q(F.UNAVAILABLE,"The operation could not be completed")))}),S(d,_a.EventType.MESSAGE,b=>{var w;if(!y){const _=b.data[0];me(!!_);const T=_,C=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(C){G(dt,`RPC '${e}' stream ${i} received error:`,C);const O=C.status;let U=function(I){const k=$e[I];if(k!==void 0)return lI(k)}(O),P=C.message;U===void 0&&(U=F.INTERNAL,P="Unknown error status: "+O+" with message "+C.message),y=!0,E.So(new q(U,P)),d.close()}else G(dt,`RPC '${e}' stream ${i} received:`,_),E.bo(_)}}),S(a,NS.STAT_EVENT,b=>{b.stat===hm.PROXY?G(dt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===hm.NOPROXY&&G(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function jf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){return new MM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kL extends EI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=FM(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?On(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Em(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=mm(l)?{documents:zM(s,l)}:{query:WM(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hI(s,o.resumeToken);const c=vm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=uh(s,o.snapshotVersion.toTimestamp());const c=vm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=HM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Em(this.serializer),n.removeTarget=e,this.a_(n)}}class AL extends EI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=BM(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Em(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$M(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,_m(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,_m(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class CL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mr(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{os(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ee(l);c.L_.add(4),await Kl(c),c.q_.set("Unknown"),c.L_.delete(4),await nd(c)}(this))})}),this.q_=new CL(r,i)}}async function nd(t){if(os(t))for(const e of t.B_)await e(!0)}async function Kl(t){for(const e of t.B_)await e(!1)}function xI(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ay(n)?ky(n):Oo(n).r_()&&Py(n,e))}function Iy(t,e){const n=ee(t),r=Oo(n);n.N_.delete(e),r.r_()&&TI(n,e),n.N_.size===0&&(r.r_()?r.o_():os(n)&&n.q_.set("Unknown"))}function Py(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oo(t).A_(e)}function TI(t,e){t.Q_.xe(e),Oo(t).R_(e)}function ky(t){t.Q_=new DM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oo(t).start(),t.q_.v_()}function Ay(t){return os(t)&&!Oo(t).n_()&&t.N_.size>0}function os(t){return ee(t).L_.size===0}function bI(t){t.Q_=void 0}async function DL(t){t.q_.set("Online")}async function OL(t){t.N_.forEach((e,n)=>{Py(t,e)})}async function jL(t,e){bI(t),Ay(t)?(t.q_.M_(e),ky(t)):t.q_.set("Unknown")}async function VL(t,e,n){if(t.q_.set("Online"),e instanceof uI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hh(t,r)}else if(e instanceof xu?t.Q_.Ke(e):e instanceof cI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await _I(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ot.EMPTY_BYTE_STRING,h.snapshotVersion)),TI(s,l);const d=new Br(h.target,l,c,h.sequenceNumber);Py(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await hh(t,r)}}async function hh(t,e,n){if(!ql(e))throw e;t.L_.add(1),await Kl(t),t.q_.set("Offline"),n||(n=()=>_I(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await nd(t)})}function SI(t,e){return e().catch(n=>hh(t,n,e))}async function rd(t){const e=ee(t),n=oi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ML(e);)try{const i=await wL(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,LL(e,i)}catch(i){await hh(e,i)}II(e)&&PI(e)}function ML(t){return os(t)&&t.O_.length<10}function LL(t,e){t.O_.push(e);const n=oi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function II(t){return os(t)&&!oi(t).n_()&&t.O_.length>0}function PI(t){oi(t).start()}async function UL(t){oi(t).p_()}async function FL(t){const e=oi(t);for(const n of t.O_)e.m_(n.mutations)}async function $L(t,e,n){const r=t.O_.shift(),i=wy.from(r,e,n);await SI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await rd(t)}async function BL(t,e){e&&oi(t).V_&&await async function(r,i){if(function(o){return RM(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();oi(r).s_(),await SI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await rd(r)}}(t,e),II(t)&&PI(t)}async function Xw(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=os(n);n.L_.add(3),await Kl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await nd(n)}async function zL(t,e){const n=ee(t);e?(n.L_.delete(2),await nd(n)):e||(n.L_.add(2),await Kl(n),n.q_.set("Unknown"))}function Oo(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new kL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:DL.bind(null,t),Ro:OL.bind(null,t),mo:jL.bind(null,t),d_:VL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ay(t)?ky(t):t.q_.set("Unknown")):(await t.K_.stop(),bI(t))})),t.K_}function oi(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new AL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UL.bind(null,t),mo:BL.bind(null,t),f_:FL.bind(null,t),g_:$L.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await rd(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ry(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cy(t,e){if(mr("AsyncQueue",`${e}: ${t}`),ql(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=wa(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Xs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.W_=new Ne(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class mo{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new mo(e,n,Xs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class qL{constructor(){this.queries=eE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=eE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new q(F.ABORTED,"Firestore shutting down"))}}function eE(){return new Do(t=>GS(t),Yh)}async function kI(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new WL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Cy(o,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ny(n)}async function AI(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HL(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Ny(n)}function GL(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Ny(t){t.Y_.forEach(e=>{e.next()})}var Tm,tE;(tE=Tm||(Tm={})).ea="default",tE.Cache="cache";class RI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.key=e}}class NI{constructor(e){this.key=e}}class KL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=KS(e),this.Ra=new Xs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Zw,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const m=i.get(h),y=Jh(this.query,d)?d:null,E=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;m&&y?m.data.isEqual(y.data)?E!==S&&(r.track({type:3,doc:y}),b=!0):this.ga(m,y)||(r.track({type:2,doc:y}),b=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),b=!0):m&&!y&&(r.track({type:1,doc:m}),b=!0,(l||c)&&(a=!0)),b&&(y?(o=o.add(y),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(y,E){const S=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return S(y)-S(E)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new mo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new NI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new CI(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class QL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YL{constructor(e){this.key=e,this.va=!1}}class JL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Do(a=>GS(a),Yh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(Q.comparator),this.Na=new Map,this.La=new Ty,this.Ba={},this.ka=new Map,this.qa=po.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function XL(t,e,n=!0){const r=LI(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await DI(r,e,n,!0),i}async function ZL(t,e){const n=LI(t);await DI(n,e,!0,!1)}async function DI(t,e,n,r){const i=await EL(t.localStore,Dn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await e4(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&xI(t.remoteStore,i),a}async function e4(t,e,n,r,i){t.Ka=(d,m,y)=>async function(S,b,w,_){let T=b.view.ma(w);T.ns&&(T=await Qw(S.localStore,b.query,!1).then(({documents:P})=>b.view.ma(P,T)));const C=_&&_.targetChanges.get(b.targetId),O=_&&_.targetMismatches.get(b.targetId)!=null,U=b.view.applyChanges(T,S.isPrimaryClient,C,O);return rE(S,b.targetId,U.wa),U.snapshot}(t,d,m,y);const s=await Qw(t.localStore,e,!0),o=new KL(e,s.Ts),a=o.ma(s.documents),l=Gl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);rE(t,n,c.wa);const h=new QL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function t4(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Yh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Iy(r.remoteStore,i.targetId),bm(r,i.targetId)}).catch(Wl)):(bm(r,i.targetId),await xm(r.localStore,i.targetId,!0))}async function n4(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Iy(n.remoteStore,r.targetId))}async function r4(t,e,n){const r=u4(t);try{const i=await function(o,a){const l=ee(o),c=Fe.now(),h=a.reduce((y,E)=>y.add(E.key),re());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=gr(),S=re();return l.cs.getEntries(y,h).next(b=>{E=b,E.forEach((w,_)=>{_.isValidDocument()||(S=S.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,E)).next(b=>{d=b;const w=[];for(const _ of a){const T=SM(_,d.get(_.key).overlayedDocument);T!=null&&w.push(new gi(_.key,T,US(T.value.mapValue),vn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,w,a)}).next(b=>{m=b;const w=b.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(y,b.batchId,w)})}).then(()=>({batchId:m.batchId,changes:YS(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ne(he)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ql(r,i.changes),await rd(r.remoteStore)}catch(i){const s=Cy(i,"Failed to persist write");n.reject(s)}}async function OI(t,e){const n=ee(t);try{const r=await vL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?me(o.va):i.removedDocuments.size>0&&(me(o.va),o.va=!1))}),await Ql(n,r,e)}catch(r){await Wl(r)}}function nE(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const m of d.j_)m.Z_(a)&&(c=!0)}),c&&Ny(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function i4(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ne(Q.comparator);o=o.insert(s,gt.newNoDocument(s,Z.min()));const a=re().add(s),l=new ed(Z.min(),new Map,new Ne(he),o,a);await OI(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Dy(r)}else await xm(r.localStore,e,!1).then(()=>bm(r,e,n)).catch(Wl)}async function s4(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await yL(n.localStore,e);VI(n,r,null),jI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ql(n,i)}catch(i){await Wl(i)}}async function o4(t,e,n){const r=ee(t);try{const i=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(me(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);VI(r,e,n),jI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ql(r,i)}catch(i){await Wl(i)}}function jI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function VI(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function bm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||MI(t,r)})}function MI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Iy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Dy(t))}function rE(t,e,n){for(const r of n)r instanceof CI?(t.La.addReference(r.key,e),a4(t,r)):r instanceof NI?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||MI(t,r.key)):X()}function a4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Dy(t))}function Dy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(xe.fromString(e)),r=t.qa.next();t.Na.set(r,new YL(n)),t.Oa=t.Oa.insert(n,r),xI(t.remoteStore,new Br(Dn(vy(n.path)),r,"TargetPurposeLimboResolution",dy.oe))}}async function Ql(t,e,n){const r=ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Sy.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(c,m=>$.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(d,m.targetId,y)).next(()=>$.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(d,m.targetId,y)))))}catch(d){if(!ql(d))throw d;G("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const y=h.os.get(m),E=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(m,S)}}}(r.localStore,s))}async function l4(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await vI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ql(n,r.hs)}}function c4(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let i=re();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function LI(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i4.bind(null,e),e.Ca.d_=HL.bind(null,e.eventManager),e.Ca.$a=GL.bind(null,e.eventManager),e}function u4(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o4.bind(null,e),e}class dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return gL(this.persistence,new pL,e.initialUser,this.serializer)}Ga(e){return new hL(by.Zr,this.serializer)}Wa(e){return new TL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dh.provider={build:()=>new dh};class Sm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=l4.bind(null,this.syncEngine),await zL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qL}()}createDatastore(e){const n=td(e.databaseInfo.databaseId),r=function(s){return new PL(s)}(e.databaseInfo);return function(s,o,a,l){return new RL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new NL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>nE(this.syncEngine,n,0),function(){return Jw.D()?new Jw:new bL}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new JL(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);G("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Kl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Sm.provider={build:()=>new Sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=VS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vf(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await d4(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Xw(e.remoteStore,i)),t._onlineComponents=e}async function d4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;co("Error using user provided cache. Falling back to memory cache: "+n),await Vf(t,new dh)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Vf(t,new dh);return t._offlineComponents}async function FI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await iE(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await iE(t,new Sm))),t._onlineComponents}function f4(t){return FI(t).then(e=>e.syncEngine)}async function $I(t){const e=await FI(t),n=e.eventManager;return n.onListen=XL.bind(null,e.syncEngine),n.onUnlisten=t4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=n4.bind(null,e.syncEngine),n}function p4(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new UI({next:m=>{h.Za(),o.enqueueAndForget(()=>AI(s,d));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new RI(vy(a.path),h,{includeMetadataChanges:!0,_a:!0});return kI(s,d)}(await $I(t),t.asyncQueue,e,n,r)),r.promise}function m4(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new UI({next:m=>{h.Za(),o.enqueueAndForget(()=>AI(s,d)),m.fromCache&&l.source==="server"?c.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new RI(a,h,{includeMetadataChanges:!0,_a:!0});return kI(s,d)}(await $I(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g4(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oE(t){if(!Q.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function aE(t){if(Q.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function id(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=id(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jV;switch(r.type){case"firstParty":return new UV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sE.get(n);r&&(G("ComponentProvider","Removing Datastore"),sE.delete(n),r.terminate())}(this),Promise.resolve()}}function y4(t,e,n,r={}){var i;const s=(t=Un(t,sd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=pt.MOCK_USER;else{a=Bb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(c)}t._authCredentials=new VV(new jS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class ei extends as{constructor(e,n,r){super(e,n,vy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new Q(e))}withConverter(e){return new ei(this.firestore,e,this._path)}}function WI(t,e,...n){if(t=He(t),zI("collection","path",e),t instanceof sd){const r=xe.fromString(e,...n);return aE(r),new ei(t,null,r)}{if(!(t instanceof bt||t instanceof ei))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return aE(r),new ei(t.firestore,null,r)}}function od(t,e,...n){if(t=He(t),arguments.length===1&&(e=VS.newId()),zI("doc","path",e),t instanceof sd){const r=xe.fromString(e,...n);return oE(r),new bt(t,null,new Q(r))}{if(!(t instanceof bt||t instanceof ei))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return oE(r),new bt(t.firestore,t instanceof ei?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wI(this,"async_queue_retry"),this.Vu=()=>{const r=jf();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=jf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=jf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ql(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw mr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ry.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class jo extends sd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new cE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cE(e),this._firestoreClient=void 0,await e}}}function v4(t,e){const n=typeof t=="object"?t:Zg(),r=typeof t=="string"?t:"(default)",i=qh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Ub("firestore");s&&y4(i,...s)}return i}function Oy(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_4(t),t._firestoreClient}function _4(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new XV(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,BI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new h4(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new go(ot.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new go(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=/^__.*__$/;class E4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hl(e,this.data,n,this.fieldTransforms)}}class qI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class My{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new My(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HI(this.Cu)&&w4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class x4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||td(e)}Qu(e,n,r,i=!1){return new My({Cu:e,methodName:n,qu:r,path:nt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ld(t){const e=t._freezeSettings(),n=td(t._databaseId);return new x4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GI(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Fy("Data must be an object, but it was:",o,r);const a=KI(r,o);let l,c;if(s.merge)l=new Ut(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const m=Im(e,d,n);if(!o.contains(m))throw new q(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);YI(h,m)||h.push(m)}l=new Ut(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new E4(new Rt(a),l,c)}class cd extends Yl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}class Ly extends Yl{_toFieldTransform(e){return new iI(e.path,new xl)}isEqual(e){return e instanceof Ly}}class Uy extends Yl{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Sl(e.serializer,ZS(e.serializer,this.$u));return new iI(e.path,n)}isEqual(e){return e instanceof Uy&&this.$u===e.$u}}function T4(t,e,n,r){const i=t.Qu(1,e,n);Fy("Data must be an object, but it was:",i,r);const s=[],o=Rt.empty();ss(r,(l,c)=>{const h=$y(e,l,n);c=He(c);const d=i.Nu(h);if(c instanceof cd)s.push(h);else{const m=Jl(c,d);m!=null&&(s.push(h),o.set(h,m))}});const a=new Ut(s);return new qI(o,a,i.fieldTransforms)}function b4(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Im(e,r,n)],l=[i];if(s.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Im(e,s[m])),l.push(s[m+1]);const c=[],h=Rt.empty();for(let m=a.length-1;m>=0;--m)if(!YI(c,a[m])){const y=a[m];let E=l[m];E=He(E);const S=o.Nu(y);if(E instanceof cd)c.push(y);else{const b=Jl(E,S);b!=null&&(c.push(y),h.set(y,b))}}const d=new Ut(c);return new qI(h,d,o.fieldTransforms)}function S4(t,e,n,r=!1){return Jl(n,t.Qu(r?4:3,e))}function Jl(t,e){if(QI(t=He(t)))return Fy("Unsupported field value:",e,t),KI(t,e);if(t instanceof Yl)return function(r,i){if(!HI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Jl(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Fe.fromDate(r);return{timestampValue:uh(i.serializer,s)}}if(r instanceof Fe){const s=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uh(i.serializer,s)}}if(r instanceof jy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof go)return{bytesValue:hI(i.serializer,r._byteString)};if(r instanceof bt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return _y(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${id(r)}`)}(t,e)}function KI(t,e){const n={};return MS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ss(t,(r,i)=>{const s=Jl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function QI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof jy||t instanceof go||t instanceof bt||t instanceof Yl||t instanceof Vy)}function Fy(t,e,n){if(!QI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=id(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Im(t,e,n){if((e=He(e))instanceof ad)return e._internalPath;if(typeof e=="string")return $y(t,e);throw fh("Field path arguments must be of type string or ",t,!1,void 0,n)}const I4=new RegExp("[~\\*/\\[\\]]");function $y(t,e,n){if(e.search(I4)>=0)throw fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ad(...e.split("."))._internalPath}catch{throw fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new q(F.INVALID_ARGUMENT,a+t+l)}function YI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new P4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ud("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class P4 extends JI{data(){return super.data()}}function ud(t,e){return typeof e=="string"?$y(t,e):e instanceof ad?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class By{}class XI extends By{}function A4(t,e,...n){let r=[];e instanceof By&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof zy).length,a=s.filter(l=>l instanceof hd).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class hd extends XI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hd(e,n,r)}_apply(e){const n=this._parse(e);return ZI(e._query,n),new as(e.firestore,e.converter,gm(e._query,n))}_parse(e){const n=ld(e.firestore);return function(s,o,a,l,c,h,d){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){hE(d,h);const y=[];for(const E of d)y.push(uE(l,s,E));m={arrayValue:{values:y}}}else m=uE(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||hE(d,h),m=S4(a,o,d,h==="in"||h==="not-in");return ze.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function R4(t,e,n){const r=e,i=ud("where",t);return hd._create(i,r,n)}class zy extends By{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)ZI(o,l),o=gm(o,l)}(e._query,n),new as(e.firestore,e.converter,gm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wy extends XI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wy(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new El(s,o)}(e._query,this._field,this._direction);return new as(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new No(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function C4(t,e="asc"){const n=e,r=ud("orderBy",t);return Wy._create(r,n)}function uE(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HS(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!Q.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nw(t,new Q(r))}if(n instanceof bt)return Nw(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(n)}.`)}function hE(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class N4{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ss(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Me(o.doubleValue));return new Vy(s)}convertGeoPoint(e){return new jy(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=py(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const n=si(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);me(yI(r));const i=new _l(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tP extends JI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ud("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Tu extends tP{data(e={}){return super.data(e)}}class D4{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new xa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tu(this._firestore,this._userDataWriter,r.key,r,new xa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Tu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Tu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:O4(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function O4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){t=Un(t,bt);const e=Un(t.firestore,jo);return p4(Oy(e),t._key).then(n=>L4(e,t,n))}class nP extends N4{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function j4(t){t=Un(t,as);const e=Un(t.firestore,jo),n=Oy(e),r=new nP(e);return k4(t._query),m4(n,t._query).then(i=>new D4(e,r,t,i))}function dE(t,e,n){t=Un(t,bt);const r=Un(t.firestore,jo),i=eP(t.converter,e,n);return Hy(r,[GI(ld(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vn.none())])}function V4(t,e,n,...r){t=Un(t,bt);const i=Un(t.firestore,jo),s=ld(i);let o;return o=typeof(e=He(e))=="string"||e instanceof ad?b4(s,"updateDoc",t._key,e,n,r):T4(s,"updateDoc",t._key,e),Hy(i,[o.toMutation(t._key,vn.exists(!0))])}function M4(t,e){const n=Un(t.firestore,jo),r=od(t),i=eP(t.converter,e);return Hy(n,[GI(ld(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vn.exists(!1))]).then(()=>r)}function Hy(t,e){return function(r,i){const s=new sr;return r.asyncQueue.enqueueAndForget(async()=>r4(await f4(r),i,s)),s.promise}(Oy(t),e)}function L4(t,e,n){const r=n.docs.get(e._key),i=new nP(t);return new tP(t,i,e._key,r,new xa(n.hasPendingWrites,n.fromCache),e.converter)}function Mf(){return new Ly("serverTimestamp")}function U4(t){return new Uy("increment",t)}(function(e,n=!0){(function(i){Co=i})(is),Yi(new ri("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new jo(new MV(r.getProvider("auth-internal")),new $V(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _l(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Cn(Pw,"4.7.3",e),Cn(Pw,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="firebasestorage.googleapis.com",F4="storageBucket",$4=2*60*1e3,B4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yi=class iP extends $n{constructor(e,n,r=0){super(Lf(e),`Firebase Storage: ${n} (${Lf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,iP.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Fn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fn||(Fn={}));function Lf(t){return"storage/"+t}function z4(){const t="An unknown error occurred, please check the error payload for server response.";return new yi(Fn.UNKNOWN,t)}function W4(){return new yi(Fn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function q4(){return new yi(Fn.CANCELED,"User canceled the upload/download.")}function H4(t){return new yi(Fn.INVALID_URL,"Invalid URL '"+t+"'.")}function G4(t){return new yi(Fn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function fE(t){return new yi(Fn.INVALID_ARGUMENT,t)}function sP(){return new yi(Fn.APP_DELETED,"The Firebase app was deleted.")}function K4(t){return new yi(Fn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=pn.makeFromUrl(e,n)}catch{return new pn(e,"")}if(r.path==="")return r;throw G4(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${d}/${h}/b/${i}/o${m}`,"i"),E={bucket:1,path:3},S=n===rP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",w=new RegExp(`^https?://${S}/${i}/${b}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:y,indices:E,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<T.length;C++){const O=T[C],U=O.regex.exec(e);if(U){const P=U[O.indices.bucket];let v=U[O.indices.path];v||(v=""),r=new pn(P,v),O.postModify(r);break}}if(r==null)throw H4(e);return r}}class Q4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...b){c||(c=!0,e.apply(null,b))}function d(b){i=setTimeout(()=>{i=null,t(y,l())},b)}function m(){s&&clearTimeout(s)}function y(b,...w){if(c){m();return}if(b){m(),h.call(null,b,...w);return}if(l()||o){m(),h.call(null,b,...w);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,d(T)}let E=!1;function S(b){E||(E=!0,m(),!c&&(i!==null?(b||(a=2),clearTimeout(i),d(0)):b||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function J4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){return t!==void 0}function pE(t,e,n,r){if(r<e)throw fE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw fE(`Invalid value for '${t}'. Expected ${n} or less.`)}function Z4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ph;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ph||(ph={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n,r,i,s,o,a,l,c,h,d,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new qc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ph.NO_ERROR,l=s.getStatus();if(!a||eU(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===ph.ABORT;r(!1,new qc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new qc(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());X4(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=z4();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?sP():q4();o(l)}else{const l=W4();o(l)}};this.canceled_?n(!1,new qc(!1,null,!0)):this.backoffId_=Y4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&J4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function nU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oU(t,e,n,r,i,s,o=!0){const a=Z4(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return iU(c,e),nU(c,n),rU(c,s),sU(c,r),new tU(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lU(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this._service=e,n instanceof pn?this._location=n:this._location=pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mh(e,n)}get root(){const e=new pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lU(this._location.path)}get storage(){return this._service}get parent(){const e=aU(this._location.path);if(e===null)return null;const n=new pn(this._location.bucket,e);return new mh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw K4(e)}}function mE(t,e){const n=e==null?void 0:e[F4];return n==null?null:pn.makeFromBucketSpec(n,t)}function cU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Bb(i,t.app.options.projectId))}class uU{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=rP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$4,this._maxUploadRetryTime=B4,this._requests=new Set,i!=null?this._bucket=pn.makeFromBucketSpec(i,this._host):this._bucket=mE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,e):this._bucket=mE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mh(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Q4(sP());{const o=oU(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const gE="@firebase/storage",yE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="storage";function hU(t=Zg(),e){t=He(t);const r=qh(t,oP).getImmediate({identifier:e}),i=Ub("storage");return i&&dU(r,...i),r}function dU(t,e,n,r={}){cU(t,e,n,r)}function fU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new uU(n,r,i,e,is)}function pU(){Yi(new ri(oP,fU,"PUBLIC").setMultipleInstances(!0)),Cn(gE,yE,""),Cn(gE,yE,"esm2017")}pU();const mU={apiKey:"AIzaSyCaUQ4J6Gr_uqiLbCpYrQ1KIhLoDr0aq74",authDomain:"reviviverimagem.firebaseapp.com",projectId:"reviviverimagem",storageBucket:"reviviverimagem.appspot.com",messagingSenderId:"245143798938",appId:"1:245143798938:web:cca91956e75b02fc20cb23",measurementId:"G-VYP3C8N5XF"},Gy=qb(mU),Te=PV(Gy),Xl=v4(Gy);hU(Gy);async function gh(t,e){try{const n=od(Xl,"users",t),r=await qy(n);if(r.exists()){const i=r.data();await dE(n,{...i,uid:t,email:e.email||i.email,displayName:e.displayName||i.displayName,updatedAt:Mf()},{merge:!0}),console.log("Documento do usuário atualizado com sucesso")}else await dE(n,{uid:t,email:e.email||"",displayName:e.displayName||"",credits:10,createdAt:Mf(),updatedAt:Mf()}),console.log("Novo documento do usuário criado com sucesso");return!0}catch(n){return console.error("Erro ao criar/atualizar documento do usuário:",n),!1}}const Ky=N.createContext({});function Qy(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const dd=N.createContext(null),Yy=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class gU extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function yU({children:t,isPresent:e}){const n=N.useId(),r=N.useRef(null),i=N.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=N.useContext(Yy);return N.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),f.jsx(gU,{isPresent:e,childRef:r,sizeRef:i,children:N.cloneElement(t,{ref:r})})}const vU=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Qy(_U),l=N.useId(),c=N.useCallback(d=>{a.set(d,!0);for(const m of a.values())if(!m)return;r&&r()},[a,r]),h=N.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return N.useMemo(()=>{a.forEach((d,m)=>a.set(m,!1))},[n]),N.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=f.jsx(yU,{isPresent:n,children:t})),f.jsx(dd.Provider,{value:h,children:t})};function _U(){return new Map}function aP(t=!0){const e=N.useContext(dd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=N.useId();N.useEffect(()=>{t&&i(s)},[t]);const o=N.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Hc=t=>t.key||"";function vE(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const Jy=typeof window<"u",lP=Jy?N.useLayoutEffect:N.useEffect,jn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=aP(o),c=N.useMemo(()=>vE(t),[t]),h=o&&!a?[]:c.map(Hc),d=N.useRef(!0),m=N.useRef(c),y=Qy(()=>new Map),[E,S]=N.useState(c),[b,w]=N.useState(c);lP(()=>{d.current=!1,m.current=c;for(let C=0;C<b.length;C++){const O=Hc(b[C]);h.includes(O)?y.delete(O):y.get(O)!==!0&&y.set(O,!1)}},[b,h.length,h.join("-")]);const _=[];if(c!==E){let C=[...c];for(let O=0;O<b.length;O++){const U=b[O],P=Hc(U);h.includes(P)||(C.splice(O,0,U),_.push(U))}s==="wait"&&_.length&&(C=_),w(vE(C)),S(c);return}const{forceRender:T}=N.useContext(Ky);return f.jsx(f.Fragment,{children:b.map(C=>{const O=Hc(C),U=o&&!a?!1:c===b||h.includes(O),P=()=>{if(y.has(O))y.set(O,!0);else return;let v=!0;y.forEach(I=>{I||(v=!1)}),v&&(T==null||T(),w(m.current),o&&(l==null||l()),r&&r())};return f.jsx(vU,{isPresent:U,initial:!d.current||n?void 0:!1,custom:U?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:U?void 0:P,children:C},O)})})},$t=t=>t;let Pm=$t;function Xy(t){let e;return()=>(e===void 0&&(e=t()),e)}const yo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},or=t=>t*1e3,ar=t=>t/1e3,wU={skipAnimations:!1,useManualTiming:!1};function EU(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,h=!1,d=!1)=>{const y=d&&r?e:n;return h&&s.add(c),y.has(c)||y.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const Gc=["read","resolveKeyframes","update","preRender","render","postRender"],xU=40;function cP(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Gc.reduce((w,_)=>(w[_]=EU(s),w),{}),{read:a,resolveKeyframes:l,update:c,preRender:h,render:d,postRender:m}=o,y=()=>{const w=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,xU),1),i.timestamp=w,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),d.process(i),m.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(y))},E=()=>{n=!0,r=!0,i.isProcessing||t(y)};return{schedule:Gc.reduce((w,_)=>{const T=o[_];return w[_]=(C,O=!1,U=!1)=>(n||E(),T.schedule(C,O,U)),w},{}),cancel:w=>{for(let _=0;_<Gc.length;_++)o[Gc[_]].cancel(w)},state:i,steps:o}}const{schedule:Se,cancel:ai,state:et,steps:Uf}=cP(typeof requestAnimationFrame<"u"?requestAnimationFrame:$t,!0),uP=N.createContext({strict:!1}),_E={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vo={};for(const t in _E)vo[t]={isEnabled:e=>_E[t].some(n=>!!e[n])};function TU(t){for(const e in t)vo[e]={...vo[e],...t[e]}}const bU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||bU.has(t)}let hP=t=>!yh(t);function SU(t){t&&(hP=e=>e.startsWith("on")?!yh(e):t(e))}try{SU(require("@emotion/is-prop-valid").default)}catch{}function IU(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(hP(i)||n===!0&&yh(i)||!e&&!yh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function PU(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const fd=N.createContext({});function Il(t){return typeof t=="string"||Array.isArray(t)}function pd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Zy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ev=["initial",...Zy];function md(t){return pd(t.animate)||ev.some(e=>Il(t[e]))}function dP(t){return!!(md(t)||t.variants)}function kU(t,e){if(md(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Il(n)?n:void 0,animate:Il(r)?r:void 0}}return t.inherit!==!1?e:{}}function AU(t){const{initial:e,animate:n}=kU(t,N.useContext(fd));return N.useMemo(()=>({initial:e,animate:n}),[wE(e),wE(n)])}function wE(t){return Array.isArray(t)?t.join(" "):t}const RU=Symbol.for("motionComponentSymbol");function Ls(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function CU(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ls(n)&&(n.current=r))},[e])}const tv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),NU="framerAppearId",fP="data-"+tv(NU),{schedule:nv,cancel:R7}=cP(queueMicrotask,!1),pP=N.createContext({});function DU(t,e,n,r,i){var s,o;const{visualElement:a}=N.useContext(fd),l=N.useContext(uP),c=N.useContext(dd),h=N.useContext(Yy).reducedMotion,d=N.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const m=d.current,y=N.useContext(pP);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&OU(d.current,n,i,y);const E=N.useRef(!1);N.useInsertionEffect(()=>{m&&E.current&&m.update(n,c)});const S=n[fP],b=N.useRef(!!S&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,S))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,S)));return lP(()=>{m&&(E.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),nv.render(m.render),b.current&&m.animationState&&m.animationState.animateChanges())}),N.useEffect(()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,S)}),b.current=!1))}),m}function OU(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:mP(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ls(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function mP(t){if(t)return t.options.allowProjection!==!1?t.projection:mP(t.parent)}function jU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&TU(t);function a(c,h){let d;const m={...N.useContext(Yy),...c,layoutId:VU(c)},{isStatic:y}=m,E=AU(c),S=r(c,y);if(!y&&Jy){MU();const b=LU(m);d=b.MeasureLayout,E.visualElement=DU(i,S,m,e,b.ProjectionNode)}return f.jsxs(fd.Provider,{value:E,children:[d&&E.visualElement?f.jsx(d,{visualElement:E.visualElement,...m}):null,n(i,c,CU(S,E.visualElement,h),S,y,E.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=N.forwardRef(a);return l[RU]=i,l}function VU({layoutId:t}){const e=N.useContext(Ky).id;return e&&t!==void 0?e+"-"+t:t}function MU(t,e){N.useContext(uP).strict}function LU(t){const{drag:e,layout:n}=vo;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const UU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rv(t){return typeof t!="string"||t.includes("-")?!1:!!(UU.indexOf(t)>-1||/[A-Z]/u.test(t))}function EE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function iv(t,e,n,r){if(typeof e=="function"){const[i,s]=EE(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=EE(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const km=t=>Array.isArray(t),FU=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),$U=t=>km(t)?t[t.length-1]||0:t,yt=t=>!!(t&&t.getVelocity);function bu(t){const e=yt(t)?t.get():t;return FU(e)?e.toValue():e}function BU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:zU(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const gP=t=>(e,n)=>{const r=N.useContext(fd),i=N.useContext(dd),s=()=>BU(t,e,r,i);return n?s():Qy(s)};function zU(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=bu(s[m]);let{initial:o,animate:a}=t;const l=md(t),c=dP(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!pd(d)){const m=Array.isArray(d)?d:[d];for(let y=0;y<m.length;y++){const E=iv(t,m[y]);if(E){const{transitionEnd:S,transition:b,...w}=E;for(const _ in w){let T=w[_];if(Array.isArray(T)){const C=h?T.length-1:0;T=T[C]}T!==null&&(i[_]=T)}for(const _ in S)i[_]=S[_]}}}return i}const Vo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ls=new Set(Vo),yP=t=>e=>typeof e=="string"&&e.startsWith(t),vP=yP("--"),WU=yP("var(--"),sv=t=>WU(t)?qU.test(t.split("/*")[0].trim()):!1,qU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,_P=(t,e)=>e&&typeof t=="number"?e.transform(t):t,yr=(t,e,n)=>n>e?e:n<t?t:n,Mo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Pl={...Mo,transform:t=>yr(0,1,t)},Kc={...Mo,default:1},Zl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pr=Zl("deg"),Vn=Zl("%"),Y=Zl("px"),HU=Zl("vh"),GU=Zl("vw"),xE={...Vn,parse:t=>Vn.parse(t)/100,transform:t=>Vn.transform(t*100)},KU={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,backgroundPositionX:Y,backgroundPositionY:Y},QU={rotate:Pr,rotateX:Pr,rotateY:Pr,rotateZ:Pr,scale:Kc,scaleX:Kc,scaleY:Kc,scaleZ:Kc,skew:Pr,skewX:Pr,skewY:Pr,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:Pl,originX:xE,originY:xE,originZ:Y},TE={...Mo,transform:Math.round},ov={...KU,...QU,zIndex:TE,size:Y,fillOpacity:Pl,strokeOpacity:Pl,numOctaves:TE},YU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JU=Vo.length;function XU(t,e,n){let r="",i=!0;for(let s=0;s<JU;s++){const o=Vo[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=_P(a,ov[o]);if(!l){i=!1;const h=YU[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function av(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ls.has(l)){o=!0;continue}else if(vP(l)){i[l]=c;continue}else{const h=_P(c,ov[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=XU(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}const ZU={offset:"stroke-dashoffset",array:"stroke-dasharray"},eF={offset:"strokeDashoffset",array:"strokeDasharray"};function tF(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?ZU:eF;t[s.offset]=Y.transform(-r);const o=Y.transform(e),a=Y.transform(n);t[s.array]=`${o} ${a}`}function bE(t,e,n){return typeof t=="string"?t:Y.transform(e+n*t)}function nF(t,e,n){const r=bE(e,t.x,t.width),i=bE(n,t.y,t.height);return`${r} ${i}`}function lv(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,d){if(av(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y,dimensions:E}=t;m.transform&&(E&&(y.transform=m.transform),delete m.transform),E&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=nF(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&tF(m,o,a,l,!1)}const cv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),wP=()=>({...cv(),attrs:{}}),uv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function EP(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const xP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TP(t,e,n,r){EP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(xP.has(i)?i:tv(i),e.attrs[i])}const vh={};function rF(t){Object.assign(vh,t)}function bP(t,{layout:e,layoutId:n}){return ls.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vh[t]||t==="opacity")}function hv(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(yt(i[o])||e.style&&yt(e.style[o])||bP(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function SP(t,e,n){const r=hv(t,e,n);for(const i in t)if(yt(t[i])||yt(e[i])){const s=Vo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function iF(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const SE=["x","y","width","height","cx","cy","r"],sF={useVisualState:gP({scrapeMotionValuesFromProps:SP,createRenderState:wP,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ls.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<SE.length;a++){const l=SE[a];t[l]!==e[l]&&(o=!0)}o&&Se.read(()=>{iF(n,r),Se.render(()=>{lv(r,i,uv(n.tagName),t.transformTemplate),TP(n,r)})})}})},oF={useVisualState:gP({scrapeMotionValuesFromProps:hv,createRenderState:cv})};function IP(t,e,n){for(const r in e)!yt(e[r])&&!bP(r,n)&&(t[r]=e[r])}function aF({transformTemplate:t},e){return N.useMemo(()=>{const n=cv();return av(n,e,t),Object.assign({},n.vars,n.style)},[e])}function lF(t,e){const n=t.style||{},r={};return IP(r,n,t),Object.assign(r,aF(t,e)),r}function cF(t,e){const n={},r=lF(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function uF(t,e,n,r){const i=N.useMemo(()=>{const s=wP();return lv(s,e,uv(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};IP(s,t.style,t),i.style={...s,...i.style}}return i}function hF(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(rv(n)?uF:cF)(r,s,o,n),c=IU(r,typeof n=="string",t),h=n!==N.Fragment?{...c,...l,ref:i}:{},{children:d}=r,m=N.useMemo(()=>yt(d)?d.get():d,[d]);return N.createElement(n,{...h,children:m})}}function dF(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...rv(r)?sF:oF,preloadedFeatures:t,useRender:hF(i),createVisualElement:e,Component:r};return jU(o)}}function PP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function gd(t,e,n){const r=t.getProps();return iv(r,e,n!==void 0?n:r.custom,t)}const fF=Xy(()=>window.ScrollTimeline!==void 0);class pF{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(fF()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class mF extends pF{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function dv(t,e){return t?t[e]||t.default||t:void 0}const Am=2e4;function kP(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Am;)e+=n,r=t.next(e);return e>=Am?1/0:e}function fv(t){return typeof t=="function"}function IE(t,e){t.timeline=e,t.onfinish=null}const pv=t=>Array.isArray(t)&&typeof t[0]=="number",gF={linearEasing:void 0};function yF(t,e){const n=Xy(t);return()=>{var r;return(r=gF[e])!==null&&r!==void 0?r:n()}}const _h=yF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),AP=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(yo(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function RP(t){return!!(typeof t=="function"&&_h()||!t||typeof t=="string"&&(t in Rm||_h())||pv(t)||Array.isArray(t)&&t.every(RP))}const Ta=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Rm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ta([0,.65,.55,1]),circOut:Ta([.55,0,1,.45]),backIn:Ta([.31,.01,.66,-.59]),backOut:Ta([.33,1.53,.69,.99])};function CP(t,e){if(t)return typeof t=="function"&&_h()?AP(t,e):pv(t)?Ta(t):Array.isArray(t)?t.map(n=>CP(n,e)||Rm.easeOut):Rm[t]}const an={x:!1,y:!1};function NP(){return an.x||an.y}function vF(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function DP(t,e){const n=vF(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function PE(t){return e=>{e.pointerType==="touch"||NP()||t(e)}}function _F(t,e,n={}){const[r,i,s]=DP(t,n),o=PE(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const h=PE(d=>{c(d),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const OP=(t,e)=>e?t===e?!0:OP(t,e.parentElement):!1,mv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,wF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EF(t){return wF.has(t.tagName)||t.tabIndex!==-1}const ba=new WeakSet;function kE(t){return e=>{e.key==="Enter"&&t(e)}}function Ff(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const xF=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=kE(()=>{if(ba.has(n))return;Ff(n,"down");const i=kE(()=>{Ff(n,"up")}),s=()=>Ff(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function AE(t){return mv(t)&&!NP()}function TF(t,e,n={}){const[r,i,s]=DP(t,n),o=a=>{const l=a.currentTarget;if(!AE(a)||ba.has(l))return;ba.add(l);const c=e(a),h=(y,E)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",m),!(!AE(y)||!ba.has(l))&&(ba.delete(l),typeof c=="function"&&c(y,{success:E}))},d=y=>{h(y,n.useGlobalTarget||OP(l,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{!EF(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>xF(c,i),i)}),s}function bF(t){return t==="x"||t==="y"?an[t]?null:(an[t]=!0,()=>{an[t]=!1}):an.x||an.y?null:(an.x=an.y=!0,()=>{an.x=an.y=!1})}const jP=new Set(["width","height","top","left","right","bottom",...Vo]);let Su;function SF(){Su=void 0}const Mn={now:()=>(Su===void 0&&Mn.set(et.isProcessing||wU.useManualTiming?et.timestamp:performance.now()),Su),set:t=>{Su=t,queueMicrotask(SF)}};function gv(t,e){t.indexOf(e)===-1&&t.push(e)}function yv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class vv{constructor(){this.subscriptions=[]}add(e){return gv(this.subscriptions,e),()=>yv(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function VP(t,e){return e?t*(1e3/e):0}const RE=30,IF=t=>!isNaN(parseFloat(t));class PF{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Mn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Mn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=IF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new vv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>RE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,RE);return VP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kl(t,e){return new PF(t,e)}function kF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,kl(n))}function AF(t,e){const n=gd(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=$U(s[o]);kF(t,o,a)}}function RF(t){return!!(yt(t)&&t.add)}function Cm(t,e){const n=t.getValue("willChange");if(RF(n))return n.add(e)}function MP(t){return t.props[fP]}const LP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,CF=1e-7,NF=12;function DF(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=LP(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>CF&&++a<NF);return o}function ec(t,e,n,r){if(t===e&&n===r)return $t;const i=s=>DF(s,0,1,t,n);return s=>s===0||s===1?s:LP(i(s),e,r)}const UP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,FP=t=>e=>1-t(1-e),$P=ec(.33,1.53,.69,.99),_v=FP($P),BP=UP(_v),zP=t=>(t*=2)<1?.5*_v(t):.5*(2-Math.pow(2,-10*(t-1))),wv=t=>1-Math.sin(Math.acos(t)),WP=FP(wv),qP=UP(wv),HP=t=>/^0[^.\s]+$/u.test(t);function OF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||HP(t):!0}const $a=t=>Math.round(t*1e5)/1e5,Ev=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jF(t){return t==null}const VF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xv=(t,e)=>n=>!!(typeof n=="string"&&VF.test(n)&&n.startsWith(t)||e&&!jF(n)&&Object.prototype.hasOwnProperty.call(n,e)),GP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Ev);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},MF=t=>yr(0,255,t),$f={...Mo,transform:t=>Math.round(MF(t))},Fi={test:xv("rgb","red"),parse:GP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+$f.transform(t)+", "+$f.transform(e)+", "+$f.transform(n)+", "+$a(Pl.transform(r))+")"};function LF(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Nm={test:xv("#"),parse:LF,transform:Fi.transform},Us={test:xv("hsl","hue"),parse:GP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Vn.transform($a(e))+", "+Vn.transform($a(n))+", "+$a(Pl.transform(r))+")"},ft={test:t=>Fi.test(t)||Nm.test(t)||Us.test(t),parse:t=>Fi.test(t)?Fi.parse(t):Us.test(t)?Us.parse(t):Nm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fi.transform(t):Us.transform(t)},UF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FF(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ev))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(UF))===null||n===void 0?void 0:n.length)||0)>0}const KP="number",QP="color",$F="var",BF="var(",CE="${}",zF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Al(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(zF,l=>(ft.test(l)?(r.color.push(s),i.push(QP),n.push(ft.parse(l))):l.startsWith(BF)?(r.var.push(s),i.push($F),n.push(l)):(r.number.push(s),i.push(KP),n.push(parseFloat(l))),++s,CE)).split(CE);return{values:n,split:a,indexes:r,types:i}}function YP(t){return Al(t).values}function JP(t){const{split:e,types:n}=Al(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===KP?s+=$a(i[o]):a===QP?s+=ft.transform(i[o]):s+=i[o]}return s}}const WF=t=>typeof t=="number"?0:t;function qF(t){const e=YP(t);return JP(t)(e.map(WF))}const li={test:FF,parse:YP,createTransformer:JP,getAnimatableNone:qF},HF=new Set(["brightness","contrast","saturate","opacity"]);function GF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ev)||[];if(!r)return t;const i=n.replace(r,"");let s=HF.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const KF=/\b([a-z-]*)\(.*?\)/gu,Dm={...li,getAnimatableNone:t=>{const e=t.match(KF);return e?e.map(GF).join(" "):t}},QF={...ov,color:ft,backgroundColor:ft,outlineColor:ft,fill:ft,stroke:ft,borderColor:ft,borderTopColor:ft,borderRightColor:ft,borderBottomColor:ft,borderLeftColor:ft,filter:Dm,WebkitFilter:Dm},Tv=t=>QF[t];function XP(t,e){let n=Tv(t);return n!==Dm&&(n=li),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const YF=new Set(["auto","none","0"]);function JF(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!YF.has(s)&&Al(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=XP(n,i)}const NE=t=>t===Mo||t===Y,DE=(t,e)=>parseFloat(t.split(", ")[e]),OE=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return DE(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?DE(s[1],t):0}},XF=new Set(["x","y","z"]),ZF=Vo.filter(t=>!XF.has(t));function e5(t){const e=[];return ZF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const _o={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:OE(4,13),y:OE(5,14)};_o.translateX=_o.x;_o.translateY=_o.y;const Wi=new Set;let Om=!1,jm=!1;function ZP(){if(jm){const t=Array.from(Wi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=e5(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}jm=!1,Om=!1,Wi.forEach(t=>t.complete()),Wi.clear()}function ek(){Wi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(jm=!0)})}function t5(){ek(),ZP()}class bv{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wi.add(this),Om||(Om=!0,Se.read(ek),Se.resolveKeyframes(ZP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const tk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),n5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function r5(t){const e=n5.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function nk(t,e,n=1){const[r,i]=r5(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return tk(o)?parseFloat(o):o}return sv(i)?nk(i,e,n+1):i}const rk=t=>e=>e.test(t),i5={test:t=>t==="auto",parse:t=>t},ik=[Mo,Y,Vn,Pr,GU,HU,i5],jE=t=>ik.find(rk(t));class sk extends bv{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),sv(c))){const h=nk(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!jP.has(r)||e.length!==2)return;const[i,s]=e,o=jE(i),a=jE(s);if(o!==a)if(NE(o)&&NE(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)OF(e[i])&&r.push(i);r.length&&JF(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_o[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=_o[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const VE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(li.test(t)||t==="0")&&!t.startsWith("url("));function s5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function o5(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=VE(i,e),a=VE(s,e);return!o||!a?!1:s5(t)||(n==="spring"||fv(n))&&r}const a5=t=>t!==null;function yd(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(a5),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const l5=40;class ok{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Mn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>l5?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&t5(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Mn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!o5(e,r,i,s))if(o)this.options.duration=0;else{l&&l(yd(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ae=(t,e,n)=>t+(e-t)*n;function Bf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function c5({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Bf(l,a,t+1/3),s=Bf(l,a,t),o=Bf(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function wh(t,e){return n=>n>0?e:t}const zf=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},u5=[Nm,Fi,Us],h5=t=>u5.find(e=>e.test(t));function ME(t){const e=h5(t);if(!e)return!1;let n=e.parse(t);return e===Us&&(n=c5(n)),n}const LE=(t,e)=>{const n=ME(t),r=ME(e);if(!n||!r)return wh(t,e);const i={...n};return s=>(i.red=zf(n.red,r.red,s),i.green=zf(n.green,r.green,s),i.blue=zf(n.blue,r.blue,s),i.alpha=Ae(n.alpha,r.alpha,s),Fi.transform(i))},d5=(t,e)=>n=>e(t(n)),tc=(...t)=>t.reduce(d5),Vm=new Set(["none","hidden"]);function f5(t,e){return Vm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function p5(t,e){return n=>Ae(t,e,n)}function Sv(t){return typeof t=="number"?p5:typeof t=="string"?sv(t)?wh:ft.test(t)?LE:y5:Array.isArray(t)?ak:typeof t=="object"?ft.test(t)?LE:m5:wh}function ak(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Sv(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function m5(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Sv(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function g5(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const y5=(t,e)=>{const n=li.createTransformer(e),r=Al(t),i=Al(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Vm.has(t)&&!i.values.length||Vm.has(e)&&!r.values.length?f5(t,e):tc(ak(g5(r,i),i.values),n):wh(t,e)};function lk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ae(t,e,n):Sv(t)(t,e)}const v5=5;function ck(t,e,n){const r=Math.max(e-v5,0);return VP(n-t(r),e-r)}const Oe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wf=.001;function _5({duration:t=Oe.duration,bounce:e=Oe.bounce,velocity:n=Oe.velocity,mass:r=Oe.mass}){let i,s,o=1-e;o=yr(Oe.minDamping,Oe.maxDamping,o),t=yr(Oe.minDuration,Oe.maxDuration,ar(t)),o<1?(i=c=>{const h=c*o,d=h*t,m=h-n,y=Mm(c,o),E=Math.exp(-d);return Wf-m/y*E},s=c=>{const d=c*o*t,m=d*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,E=Math.exp(-d),S=Mm(Math.pow(c,2),o);return(-i(c)+Wf>0?-1:1)*((m-y)*E)/S}):(i=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-Wf+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=E5(i,s,a);if(t=or(t),isNaN(l))return{stiffness:Oe.stiffness,damping:Oe.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const w5=12;function E5(t,e,n){let r=n;for(let i=1;i<w5;i++)r=r-t(r)/e(r);return r}function Mm(t,e){return t*Math.sqrt(1-e*e)}const x5=["duration","bounce"],T5=["stiffness","damping","mass"];function UE(t,e){return e.some(n=>t[n]!==void 0)}function b5(t){let e={velocity:Oe.velocity,stiffness:Oe.stiffness,damping:Oe.damping,mass:Oe.mass,isResolvedFromDuration:!1,...t};if(!UE(t,T5)&&UE(t,x5))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*yr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Oe.mass,stiffness:i,damping:s}}else{const n=_5(t);e={...e,...n,mass:Oe.mass},e.isResolvedFromDuration=!0}return e}function uk(t=Oe.visualDuration,e=Oe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:d,velocity:m,isResolvedFromDuration:y}=b5({...n,velocity:-ar(n.velocity||0)}),E=m||0,S=c/(2*Math.sqrt(l*h)),b=o-s,w=ar(Math.sqrt(l/h)),_=Math.abs(b)<5;r||(r=_?Oe.restSpeed.granular:Oe.restSpeed.default),i||(i=_?Oe.restDelta.granular:Oe.restDelta.default);let T;if(S<1){const O=Mm(w,S);T=U=>{const P=Math.exp(-S*w*U);return o-P*((E+S*w*b)/O*Math.sin(O*U)+b*Math.cos(O*U))}}else if(S===1)T=O=>o-Math.exp(-w*O)*(b+(E+w*b)*O);else{const O=w*Math.sqrt(S*S-1);T=U=>{const P=Math.exp(-S*w*U),v=Math.min(O*U,300);return o-P*((E+S*w*b)*Math.sinh(v)+O*b*Math.cosh(v))/O}}const C={calculatedDuration:y&&d||null,next:O=>{const U=T(O);if(y)a.done=O>=d;else{let P=0;S<1&&(P=O===0?or(E):ck(T,O,U));const v=Math.abs(P)<=r,I=Math.abs(o-U)<=i;a.done=v&&I}return a.value=a.done?o:U,a},toString:()=>{const O=Math.min(kP(C),Am),U=AP(P=>C.next(O*P).value,O,30);return O+"ms "+U}};return C}function FE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],m={done:!1,value:d},y=v=>a!==void 0&&v<a||l!==void 0&&v>l,E=v=>a===void 0?l:l===void 0||Math.abs(a-v)<Math.abs(l-v)?a:l;let S=n*e;const b=d+S,w=o===void 0?b:o(b);w!==b&&(S=w-d);const _=v=>-S*Math.exp(-v/r),T=v=>w+_(v),C=v=>{const I=_(v),k=T(v);m.done=Math.abs(I)<=c,m.value=m.done?w:k};let O,U;const P=v=>{y(m.value)&&(O=v,U=uk({keyframes:[m.value,E(m.value)],velocity:ck(T,v,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return P(0),{calculatedDuration:null,next:v=>{let I=!1;return!U&&O===void 0&&(I=!0,C(v),P(v)),O!==void 0&&v>=O?U.next(v-O):(!I&&C(v),m)}}}const S5=ec(.42,0,1,1),I5=ec(0,0,.58,1),hk=ec(.42,0,.58,1),P5=t=>Array.isArray(t)&&typeof t[0]!="number",$E={linear:$t,easeIn:S5,easeInOut:hk,easeOut:I5,circIn:wv,circInOut:qP,circOut:WP,backIn:_v,backInOut:BP,backOut:$P,anticipate:zP},BE=t=>{if(pv(t)){Pm(t.length===4);const[e,n,r,i]=t;return ec(e,n,r,i)}else if(typeof t=="string")return Pm($E[t]!==void 0),$E[t];return t};function k5(t,e,n){const r=[],i=n||lk,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||$t:e;a=tc(l,a)}r.push(a)}return r}function A5(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Pm(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=k5(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const m=yo(t[d],t[d+1],h);return a[d](m)};return n?h=>c(yr(t[0],t[s-1],h)):c}function R5(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=yo(0,e,r);t.push(Ae(n,1,i))}}function C5(t){const e=[0];return R5(e,t.length-1),e}function N5(t,e){return t.map(n=>n*e)}function D5(t,e){return t.map(()=>e||hk).splice(0,t.length-1)}function Eh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=P5(r)?r.map(BE):BE(r),s={done:!1,value:e[0]},o=N5(n&&n.length===e.length?n:C5(e),t),a=A5(o,e,{ease:Array.isArray(i)?i:D5(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const O5=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Se.update(e,!0),stop:()=>ai(e),now:()=>et.isProcessing?et.timestamp:Mn.now()}},j5={decay:FE,inertia:FE,tween:Eh,keyframes:Eh,spring:uk},V5=t=>t/100;class Iv extends ok{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||bv,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=fv(n)?n:j5[n]||Eh;let l,c;a!==Eh&&typeof e[0]!="number"&&(l=tc(V5,lk(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=kP(h));const{calculatedDuration:d}=h,m=d+i,y=m*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:m,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:v}=this.options;return{done:!0,value:v[v.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:m,repeat:y,repeatType:E,repeatDelay:S,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-m*(this.speed>=0?1:-1),_=this.speed>=0?w<0:w>h;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let T=this.currentTime,C=s;if(y){const v=Math.min(this.currentTime,h)/d;let I=Math.floor(v),k=v%1;!k&&v>=1&&(k=1),k===1&&I--,I=Math.min(I,y+1),!!(I%2)&&(E==="reverse"?(k=1-k,S&&(k-=S/d)):E==="mirror"&&(C=o)),T=yr(0,1,k)*d}const O=_?{done:!1,value:l[0]}:C.next(T);a&&(O.value=a(O.value));let{done:U}=O;!_&&c!==null&&(U=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return P&&i!==void 0&&(O.value=yd(l,this.options,i)),b&&b(O.value),P&&this.finish(),O}get duration(){const{resolved:e}=this;return e?ar(e.calculatedDuration):0}get time(){return ar(this.currentTime)}set time(e){e=or(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ar(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=O5,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const M5=new Set(["opacity","clipPath","filter","transform"]);function L5(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=CP(a,i);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const U5=Xy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xh=10,F5=2e4;function $5(t){return fv(t.type)||t.type==="spring"||!RP(t.ease)}function B5(t,e){const n=new Iv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<F5;)r=n.sample(s),i.push(r.value),s+=xh;return{times:void 0,keyframes:i,duration:s-xh,ease:"linear"}}const dk={anticipate:zP,backInOut:BP,circInOut:qP};function z5(t){return t in dk}class zE extends ok{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new sk(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&_h()&&z5(s)&&(s=dk[s]),$5(this.options)){const{onComplete:d,onUpdate:m,motionValue:y,element:E,...S}=this.options,b=B5(e,S);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,s=b.ease,o="keyframes"}const h=L5(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(IE(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;a.set(yd(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ar(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ar(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=or(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return $t;const{animation:r}=n;IE(r,e)}return $t}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:m,...y}=this.options,E=new Iv({...y,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),S=or(this.time);c.setWithVelocity(E.sample(S-xh).value,E.sample(S).value,xh)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return U5()&&r&&M5.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const W5={type:"spring",stiffness:500,damping:25,restSpeed:10},q5=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),H5={type:"keyframes",duration:.8},G5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},K5=(t,{keyframes:e})=>e.length>2?H5:ls.has(t)?t.startsWith("scale")?q5(e[1]):W5:G5;function Q5({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const Pv=(t,e,n,r={},i,s)=>o=>{const a=dv(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-or(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Q5(a)||(h={...h,...K5(t,h)}),h.duration&&(h.duration=or(h.duration)),h.repeatDelay&&(h.repeatDelay=or(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const m=yd(h.keyframes,a);if(m!==void 0)return Se.update(()=>{h.onUpdate(m),h.onComplete()}),new mF([])}return!s&&zE.supports(h)?new zE(h):new Iv(h)};function Y5({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function fk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const m=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),y=l[d];if(y===void 0||h&&Y5(h,d))continue;const E={delay:n,...dv(o||{},d)};let S=!1;if(window.MotionHandoffAnimation){const w=MP(t);if(w){const _=window.MotionHandoffAnimation(w,d,Se);_!==null&&(E.startTime=_,S=!0)}}Cm(t,d),m.start(Pv(d,m,y,t.shouldReduceMotion&&jP.has(d)?{type:!1}:E,t,S));const b=m.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{Se.update(()=>{a&&AF(t,a)})}),c}function Lm(t,e,n={}){var r;const i=gd(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(fk(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:m}=s;return J5(t,e,h+c,d,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function J5(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(X5).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Lm(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function X5(t,e){return t.sortNodePosition(e)}function Z5(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Lm(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Lm(t,e,n);else{const i=typeof e=="function"?gd(t,e,n.custom):e;r=Promise.all(fk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const e3=ev.length;function pk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?pk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<e3;n++){const r=ev[n],i=t.props[r];(Il(i)||i===!1)&&(e[r]=i)}return e}const t3=[...Zy].reverse(),n3=Zy.length;function r3(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Z5(t,n,r)))}function i3(t){let e=r3(t),n=WE(),r=!0;const i=l=>(c,h)=>{var d;const m=gd(t,h,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(m){const{transition:y,transitionEnd:E,...S}=m;c={...c,...S,...E}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=pk(t.parent)||{},d=[],m=new Set;let y={},E=1/0;for(let b=0;b<n3;b++){const w=t3[b],_=n[w],T=c[w]!==void 0?c[w]:h[w],C=Il(T),O=w===l?_.isActive:null;O===!1&&(E=b);let U=T===h[w]&&T!==c[w]&&C;if(U&&r&&t.manuallyAnimateOnMount&&(U=!1),_.protectedKeys={...y},!_.isActive&&O===null||!T&&!_.prevProp||pd(T)||typeof T=="boolean")continue;const P=s3(_.prevProp,T);let v=P||w===l&&_.isActive&&!U&&C||b>E&&C,I=!1;const k=Array.isArray(T)?T:[T];let R=k.reduce(i(w),{});O===!1&&(R={});const{prevResolvedValues:D={}}=_,A={...D,...R},Ge=ge=>{v=!0,m.has(ge)&&(I=!0,m.delete(ge)),_.needsAnimating[ge]=!0;const V=t.getValue(ge);V&&(V.liveStyle=!1)};for(const ge in A){const V=R[ge],W=D[ge];if(y.hasOwnProperty(ge))continue;let K=!1;km(V)&&km(W)?K=!PP(V,W):K=V!==W,K?V!=null?Ge(ge):m.add(ge):V!==void 0&&m.has(ge)?Ge(ge):_.protectedKeys[ge]=!0}_.prevProp=T,_.prevResolvedValues=R,_.isActive&&(y={...y,...R}),r&&t.blockInitialAnimation&&(v=!1),v&&(!(U&&P)||I)&&d.push(...k.map(ge=>({animation:ge,options:{type:w}})))}if(m.size){const b={};m.forEach(w=>{const _=t.getBaseTarget(w),T=t.getValue(w);T&&(T.liveStyle=!0),b[w]=_??null}),d.push({animation:b})}let S=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(d):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=WE(),r=!0}}}function s3(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!PP(e,t):!1}function Ti(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WE(){return{animate:Ti(!0),whileInView:Ti(),whileHover:Ti(),whileTap:Ti(),whileDrag:Ti(),whileFocus:Ti(),exit:Ti()}}class vi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class o3 extends vi{constructor(e){super(e),e.animationState||(e.animationState=i3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let a3=0;class l3 extends vi{constructor(){super(...arguments),this.id=a3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const c3={animation:{Feature:o3},exit:{Feature:l3}};function Rl(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function nc(t){return{point:{x:t.pageX,y:t.pageY}}}const u3=t=>e=>mv(e)&&t(e,nc(e));function Ba(t,e,n,r){return Rl(t,e,u3(n),r)}const qE=(t,e)=>Math.abs(t-e);function h3(t,e){const n=qE(t.x,e.x),r=qE(t.y,e.y);return Math.sqrt(n**2+r**2)}class mk{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Hf(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=h3(d.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:E}=d,{timestamp:S}=et;this.history.push({...E,timestamp:S});const{onStart:b,onMove:w}=this.handlers;m||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=qf(m,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:y,onSessionEnd:E,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Hf(d.type==="pointercancel"?this.lastMoveEventInfo:qf(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(d,b),E&&E(d,b)},!mv(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=nc(e),a=qf(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=et;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,Hf(a,this.history)),this.removeListeners=tc(Ba(this.contextWindow,"pointermove",this.handlePointerMove),Ba(this.contextWindow,"pointerup",this.handlePointerUp),Ba(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ai(this.updatePoint)}}function qf(t,e){return e?{point:e(t.point)}:t}function HE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Hf({point:t},e){return{point:t,delta:HE(t,gk(e)),offset:HE(t,d3(e)),velocity:f3(e,.1)}}function d3(t){return t[0]}function gk(t){return t[t.length-1]}function f3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=gk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>or(e)));)n--;if(!r)return{x:0,y:0};const s=ar(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const yk=1e-4,p3=1-yk,m3=1+yk,vk=.01,g3=0-vk,y3=0+vk;function zt(t){return t.max-t.min}function v3(t,e,n){return Math.abs(t-e)<=n}function GE(t,e,n,r=.5){t.origin=r,t.originPoint=Ae(e.min,e.max,t.origin),t.scale=zt(n)/zt(e),t.translate=Ae(n.min,n.max,t.origin)-t.originPoint,(t.scale>=p3&&t.scale<=m3||isNaN(t.scale))&&(t.scale=1),(t.translate>=g3&&t.translate<=y3||isNaN(t.translate))&&(t.translate=0)}function za(t,e,n,r){GE(t.x,e.x,n.x,r?r.originX:void 0),GE(t.y,e.y,n.y,r?r.originY:void 0)}function KE(t,e,n){t.min=n.min+e.min,t.max=t.min+zt(e)}function _3(t,e,n){KE(t.x,e.x,n.x),KE(t.y,e.y,n.y)}function QE(t,e,n){t.min=e.min-n.min,t.max=t.min+zt(e)}function Wa(t,e,n){QE(t.x,e.x,n.x),QE(t.y,e.y,n.y)}function w3(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ae(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ae(n,t,r.max):Math.min(t,n)),t}function YE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function E3(t,{top:e,left:n,bottom:r,right:i}){return{x:YE(t.x,n,i),y:YE(t.y,e,r)}}function JE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function x3(t,e){return{x:JE(t.x,e.x),y:JE(t.y,e.y)}}function T3(t,e){let n=.5;const r=zt(t),i=zt(e);return i>r?n=yo(e.min,e.max-r,t.min):r>i&&(n=yo(t.min,t.max-i,e.min)),yr(0,1,n)}function b3(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Um=.35;function S3(t=Um){return t===!1?t=0:t===!0&&(t=Um),{x:XE(t,"left","right"),y:XE(t,"top","bottom")}}function XE(t,e,n){return{min:ZE(t,e),max:ZE(t,n)}}function ZE(t,e){return typeof t=="number"?t:t[e]||0}const ex=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fs=()=>({x:ex(),y:ex()}),tx=()=>({min:0,max:0}),Ve=()=>({x:tx(),y:tx()});function Kt(t){return[t("x"),t("y")]}function _k({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function I3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function P3(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Gf(t){return t===void 0||t===1}function Fm({scale:t,scaleX:e,scaleY:n}){return!Gf(t)||!Gf(e)||!Gf(n)}function Ai(t){return Fm(t)||wk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wk(t){return nx(t.x)||nx(t.y)}function nx(t){return t&&t!=="0%"}function Th(t,e,n){const r=t-n,i=e*r;return n+i}function rx(t,e,n,r,i){return i!==void 0&&(t=Th(t,i,r)),Th(t,n,r)+e}function $m(t,e=0,n=1,r,i){t.min=rx(t.min,e,n,r,i),t.max=rx(t.max,e,n,r,i)}function Ek(t,{x:e,y:n}){$m(t.x,e.translate,e.scale,e.originPoint),$m(t.y,n.translate,n.scale,n.originPoint)}const ix=.999999999999,sx=1.0000000000001;function k3(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Bs(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Ek(t,o)),r&&Ai(s.latestValues)&&Bs(t,s.latestValues))}e.x<sx&&e.x>ix&&(e.x=1),e.y<sx&&e.y>ix&&(e.y=1)}function $s(t,e){t.min=t.min+e,t.max=t.max+e}function ox(t,e,n,r,i=.5){const s=Ae(t.min,t.max,i);$m(t,e,n,s,r)}function Bs(t,e){ox(t.x,e.x,e.scaleX,e.scale,e.originX),ox(t.y,e.y,e.scaleY,e.scale,e.originY)}function xk(t,e){return _k(P3(t.getBoundingClientRect(),e))}function A3(t,e,n){const r=xk(t,n),{scroll:i}=e;return i&&($s(r.x,i.offset.x),$s(r.y,i.offset.y)),r}const Tk=({current:t})=>t?t.ownerDocument.defaultView:null,R3=new WeakMap;class C3{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ve(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nc(h).point)},s=(h,d)=>{const{drag:m,dragPropagation:y,onDragStart:E}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=bF(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kt(b=>{let w=this.getAxisMotionValue(b).get()||0;if(Vn.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const T=_.layout.layoutBox[b];T&&(w=zt(T)*(parseFloat(w)/100))}}this.originPoint[b]=w}),E&&Se.postRender(()=>E(h,d)),Cm(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:E,onDrag:S}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:b}=d;if(y&&this.currentDirection===null){this.currentDirection=N3(b),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),S&&S(h,d)},a=(h,d)=>this.stop(h,d),l=()=>Kt(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new mk(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Tk(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Se.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Qc(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=w3(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ls(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=E3(i.layoutBox,n):this.constraints=!1,this.elastic=S3(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Kt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=b3(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ls(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=A3(r,i.root,this.visualElement.getTransformPagePoint());let o=x3(i.layout.layoutBox,s);if(n){const a=n(I3(o));this.hasMutatedConstraints=!!a,a&&(o=_k(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Kt(h=>{if(!Qc(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,E)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Cm(this.visualElement,e),r.start(Pv(e,r,0,n,this.visualElement,!1))}stopAnimation(){Kt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Kt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Kt(n=>{const{drag:r}=this.getProps();if(!Qc(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ae(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ls(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Kt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=T3({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Kt(o=>{if(!Qc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ae(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;R3.set(this.visualElement,this);const e=this.visualElement.current,n=Ba(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ls(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Se.read(r);const o=Rl(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Kt(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Um,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Qc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function N3(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class D3 extends vi{constructor(e){super(e),this.removeGroupControls=$t,this.removeListeners=$t,this.controls=new C3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$t}unmount(){this.removeGroupControls(),this.removeListeners()}}const ax=t=>(e,n)=>{t&&Se.postRender(()=>t(e,n))};class O3 extends vi{constructor(){super(...arguments),this.removePointerDownListener=$t}onPointerDown(e){this.session=new mk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Tk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ax(e),onStart:ax(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Se.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ba(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Iu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const la={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Y.test(t))t=parseFloat(t);else return t;const n=lx(t,e.target.x),r=lx(t,e.target.y);return`${n}% ${r}%`}},j3={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=li.parse(t);if(i.length>5)return r;const s=li.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Ae(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class V3 extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;rF(M3),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Iu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Se.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bk(t){const[e,n]=aP(),r=N.useContext(Ky);return f.jsx(V3,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(pP),isPresent:e,safeToRemove:n})}const M3={borderRadius:{...la,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:la,borderTopRightRadius:la,borderBottomLeftRadius:la,borderBottomRightRadius:la,boxShadow:j3};function L3(t,e,n){const r=yt(t)?t:kl(t);return r.start(Pv("",r,e,n)),r.animation}function U3(t){return t instanceof SVGElement&&t.tagName!=="svg"}const F3=(t,e)=>t.depth-e.depth;class $3{constructor(){this.children=[],this.isDirty=!1}add(e){gv(this.children,e),this.isDirty=!0}remove(e){yv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(F3),this.isDirty=!1,this.children.forEach(e)}}function B3(t,e){const n=Mn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ai(r),t(s-e))};return Se.read(r,!0),()=>ai(r)}const Sk=["TopLeft","TopRight","BottomLeft","BottomRight"],z3=Sk.length,cx=t=>typeof t=="string"?parseFloat(t):t,ux=t=>typeof t=="number"||Y.test(t);function W3(t,e,n,r,i,s){i?(t.opacity=Ae(0,n.opacity!==void 0?n.opacity:1,q3(r)),t.opacityExit=Ae(e.opacity!==void 0?e.opacity:1,0,H3(r))):s&&(t.opacity=Ae(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<z3;o++){const a=`border${Sk[o]}Radius`;let l=hx(e,a),c=hx(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||ux(l)===ux(c)?(t[a]=Math.max(Ae(cx(l),cx(c),r),0),(Vn.test(c)||Vn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ae(e.rotate||0,n.rotate||0,r))}function hx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const q3=Ik(0,.5,WP),H3=Ik(.5,.95,$t);function Ik(t,e,n){return r=>r<t?0:r>e?1:n(yo(t,e,r))}function dx(t,e){t.min=e.min,t.max=e.max}function Gt(t,e){dx(t.x,e.x),dx(t.y,e.y)}function fx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function px(t,e,n,r,i){return t-=e,t=Th(t,1/n,r),i!==void 0&&(t=Th(t,1/i,r)),t}function G3(t,e=0,n=1,r=.5,i,s=t,o=t){if(Vn.test(e)&&(e=parseFloat(e),e=Ae(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ae(s.min,s.max,r);t===s&&(a-=e),t.min=px(t.min,e,n,a,i),t.max=px(t.max,e,n,a,i)}function mx(t,e,[n,r,i],s,o){G3(t,e[n],e[r],e[i],e.scale,s,o)}const K3=["x","scaleX","originX"],Q3=["y","scaleY","originY"];function gx(t,e,n,r){mx(t.x,e,K3,n?n.x:void 0,r?r.x:void 0),mx(t.y,e,Q3,n?n.y:void 0,r?r.y:void 0)}function yx(t){return t.translate===0&&t.scale===1}function Pk(t){return yx(t.x)&&yx(t.y)}function vx(t,e){return t.min===e.min&&t.max===e.max}function Y3(t,e){return vx(t.x,e.x)&&vx(t.y,e.y)}function _x(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function kk(t,e){return _x(t.x,e.x)&&_x(t.y,e.y)}function wx(t){return zt(t.x)/zt(t.y)}function Ex(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class J3{constructor(){this.members=[]}add(e){gv(this.members,e),e.scheduleRender()}remove(e){if(yv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function X3(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:m,skewX:y,skewY:E}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),E&&(r+=`skewY(${E}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Ri={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Sa=typeof window<"u"&&window.MotionDebug!==void 0,Kf=["","X","Y","Z"],Z3={visibility:"hidden"},xx=1e3;let e$=0;function Qf(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Ak(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=MP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Se,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Ak(r)}function Rk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=e$++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Sa&&(Ri.totalNodes=Ri.resolvedTargetDeltas=Ri.recalculatedProjection=0),this.nodes.forEach(r$),this.nodes.forEach(l$),this.nodes.forEach(c$),this.nodes.forEach(i$),Sa&&window.MotionDebug.record(Ri)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new $3)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new vv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=U3(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=B3(m,250),Iu.hasAnimatedSinceResize&&(Iu.hasAnimatedSinceResize=!1,this.nodes.forEach(bx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:y,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||p$,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=h.getProps(),_=!this.targetLayout||!kk(this.targetLayout,E)||y,T=!m&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||m&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,T);const C={...dv(S,"layout"),onPlay:b,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else m||bx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ai(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(u$),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ak(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Tx);return}this.isUpdating||this.nodes.forEach(o$),this.isUpdating=!1,this.nodes.forEach(a$),this.nodes.forEach(t$),this.nodes.forEach(n$),this.clearAllSnapshots();const a=Mn.now();et.delta=yr(0,1e3/60,a-et.timestamp),et.timestamp=a,et.isProcessing=!0,Uf.update.process(et),Uf.preRender.process(et),Uf.render.process(et),et.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(s$),this.sharedNodes.forEach(h$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ve(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Pk(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Ai(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),m$(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ve();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(g$))){const{scroll:h}=this.root;h&&($s(l.x,h.offset.x),$s(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=Ve();if(Gt(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:m}=h;h!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&Gt(l,o),$s(l.x,d.offset.x),$s(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Ve();Gt(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Bs(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ai(h.latestValues)&&Bs(l,h.latestValues)}return Ai(this.latestValues)&&Bs(l,this.latestValues),l}removeTransform(o){const a=Ve();Gt(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ai(c.latestValues))continue;Fm(c.latestValues)&&c.updateSnapshot();const h=Ve(),d=c.measurePageBox();Gt(h,d),gx(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Ai(this.latestValues)&&gx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==et.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=et.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ve(),this.relativeTargetOrigin=Ve(),Wa(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Gt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ve(),this.targetWithTransforms=Ve()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gt(this.target,this.layout.layoutBox),Ek(this.target,this.targetDelta)):Gt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ve(),this.relativeTargetOrigin=Ve(),Wa(this.relativeTargetOrigin,this.target,y.target),Gt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Sa&&Ri.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Fm(this.parent.latestValues)||wk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===et.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Gt(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;k3(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ve());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fx(this.prevProjectionDelta.x,this.projectionDelta.x),fx(this.prevProjectionDelta.y,this.projectionDelta.y)),za(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!Ex(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ex(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),Sa&&Ri.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fs(),this.projectionDelta=Fs(),this.projectionDeltaWithTransform=Fs()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=Fs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Ve(),y=l?l.source:void 0,E=this.layout?this.layout.source:void 0,S=y!==E,b=this.getStack(),w=!b||b.members.length<=1,_=!!(S&&!w&&this.options.crossfade===!0&&!this.path.some(f$));this.animationProgress=0;let T;this.mixTargetDelta=C=>{const O=C/1e3;Sx(d.x,o.x,O),Sx(d.y,o.y,O),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wa(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),d$(this.relativeTarget,this.relativeTargetOrigin,m,O),T&&Y3(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Ve()),Gt(T,this.relativeTarget)),S&&(this.animationValues=h,W3(h,c,this.latestValues,O,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ai(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{Iu.hasAnimatedSinceResize=!0,this.currentAnimation=L3(0,xx,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(xx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Ck(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ve();const d=zt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const m=zt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Gt(a,l),Bs(a,h),za(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new J3),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Qf("z",o,c,this.animationValues);for(let h=0;h<Kf.length;h++)Qf(`rotate${Kf[h]}`,o,c,this.animationValues),Qf(`skew${Kf[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Z3;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=bu(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=bu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ai(this.latestValues)&&(S.transform=h?h({},""):"none",this.hasProjected=!1),S}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=X3(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:y,y:E}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${E.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const S in vh){if(m[S]===void 0)continue;const{correct:b,applyTo:w}=vh[S],_=c.transform==="none"?m[S]:b(m[S],d);if(w){const T=w.length;for(let C=0;C<T;C++)c[w[C]]=_}else c[S]=_}return this.options.layoutId&&(c.pointerEvents=d===this?bu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Tx),this.root.sharedNodes.clear()}}}function t$(t){t.updateLayout()}function n$(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Kt(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],y=zt(m);m.min=r[d].min,m.max=m.min+y}):Ck(s,n.layoutBox,r)&&Kt(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],y=zt(r[d]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+y)});const a=Fs();za(a,r,n.layoutBox);const l=Fs();o?za(l,t.applyTransform(i,!0),n.measuredBox):za(l,r,n.layoutBox);const c=!Pk(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:y}=d;if(m&&y){const E=Ve();Wa(E,n.layoutBox,m.layoutBox);const S=Ve();Wa(S,r,y.layoutBox),kk(E,S)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=E,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function r$(t){Sa&&Ri.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function i$(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function s$(t){t.clearSnapshot()}function Tx(t){t.clearMeasurements()}function o$(t){t.isLayoutDirty=!1}function a$(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function l$(t){t.resolveTargetDelta()}function c$(t){t.calcProjection()}function u$(t){t.resetSkewAndRotation()}function h$(t){t.removeLeadSnapshot()}function Sx(t,e,n){t.translate=Ae(e.translate,0,n),t.scale=Ae(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ix(t,e,n,r){t.min=Ae(e.min,n.min,r),t.max=Ae(e.max,n.max,r)}function d$(t,e,n,r){Ix(t.x,e.x,n.x,r),Ix(t.y,e.y,n.y,r)}function f$(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const p$={duration:.45,ease:[.4,0,.1,1]},Px=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),kx=Px("applewebkit/")&&!Px("chrome/")?Math.round:$t;function Ax(t){t.min=kx(t.min),t.max=kx(t.max)}function m$(t){Ax(t.x),Ax(t.y)}function Ck(t,e,n){return t==="position"||t==="preserve-aspect"&&!v3(wx(e),wx(n),.2)}function g$(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const y$=Rk({attachResizeListener:(t,e)=>Rl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yf={current:void 0},Nk=Rk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yf.current){const t=new y$({});t.mount(window),t.setOptions({layoutScroll:!0}),Yf.current=t}return Yf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),v$={pan:{Feature:O3},drag:{Feature:D3,ProjectionNode:Nk,MeasureLayout:bk}};function Rx(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Se.postRender(()=>s(e,nc(e)))}class _$ extends vi{mount(){const{current:e}=this.node;e&&(this.unmount=_F(e,n=>(Rx(this.node,n,"Start"),r=>Rx(this.node,r,"End"))))}unmount(){}}class w$ extends vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tc(Rl(this.node.current,"focus",()=>this.onFocus()),Rl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Cx(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Se.postRender(()=>s(e,nc(e)))}class E$ extends vi{mount(){const{current:e}=this.node;e&&(this.unmount=TF(e,n=>(Cx(this.node,n,"Start"),(r,{success:i})=>Cx(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Bm=new WeakMap,Jf=new WeakMap,x$=t=>{const e=Bm.get(t.target);e&&e(t)},T$=t=>{t.forEach(x$)};function b$({root:t,...e}){const n=t||document;Jf.has(n)||Jf.set(n,{});const r=Jf.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(T$,{root:t,...e})),r[i]}function S$(t,e,n){const r=b$(e);return Bm.set(t,n),r.observe(t),()=>{Bm.delete(t),r.unobserve(t)}}const I$={some:0,all:1};class P$ extends vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:I$[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),m=c?h:d;m&&m(l)};return S$(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(k$(e,n))&&this.startObserver()}unmount(){}}function k$({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const A$={inView:{Feature:P$},tap:{Feature:E$},focus:{Feature:w$},hover:{Feature:_$}},R$={layout:{ProjectionNode:Nk,MeasureLayout:bk}},zm={current:null},Dk={current:!1};function C$(){if(Dk.current=!0,!!Jy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zm.current=t.matches;t.addListener(e),e()}else zm.current=!1}const N$=[...ik,ft,li],D$=t=>N$.find(rk(t)),Nx=new WeakMap;function O$(t,e,n){for(const r in e){const i=e[r],s=n[r];if(yt(i))t.addValue(r,i);else if(yt(s))t.addValue(r,kl(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,kl(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Dx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class j${scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Mn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Se.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=o;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=md(n),this.isVariantNode=dP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in m){const E=m[y];l[y]!==void 0&&yt(E)&&E.set(l[y],!1)}}mount(e){this.current=e,Nx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Dk.current||C$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Nx.delete(this.current),this.projection&&this.projection.unmount(),ai(this.notifyUpdate),ai(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ls.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Se.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vo){const n=vo[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ve()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Dx.length;r++){const i=Dx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=O$(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=kl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(tk(i)||HP(i))?i=parseFloat(i):!D$(i)&&li.test(n)&&(i=XP(e,n)),this.setBaseTarget(e,yt(i)?i.get():i)),yt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=iv(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!yt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new vv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Ok extends j${constructor(){super(...arguments),this.KeyframeResolver=sk}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;yt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function V$(t){return window.getComputedStyle(t)}class M$ extends Ok{constructor(){super(...arguments),this.type="html",this.renderInstance=EP}readValueFromInstance(e,n){if(ls.has(n)){const r=Tv(n);return r&&r.default||0}else{const r=V$(e),i=(vP(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return xk(e,n)}build(e,n,r){av(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return hv(e,n,r)}}class L$ extends Ok{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ve}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ls.has(n)){const r=Tv(n);return r&&r.default||0}return n=xP.has(n)?n:tv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return SP(e,n,r)}build(e,n,r){lv(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){TP(e,n,r,i)}mount(e){this.isSVGTag=uv(e.tagName),super.mount(e)}}const U$=(t,e)=>rv(t)?new L$(e):new M$(e,{allowProjection:t!==N.Fragment}),F$=dF({...c3,...A$,...v$,...R$},U$),M=PU(F$);function jk({children:t,title:e,subtitle:n}){return f.jsxs("div",{className:"min-h-screen bg-gray-900 flex",children:[f.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12",children:f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md w-full space-y-8",children:[f.jsx(cn,{to:"/",className:"block",children:f.jsxs(M.div,{className:"flex items-center justify-center space-x-2",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[f.jsx("img",{src:"/src/Imgs/Duda_.png",alt:"Reviver Imagem Logo",className:"w-10 h-10 object-contain"}),f.jsx("span",{className:"text-2xl font-bold text-white",children:"Reviver Imagem"})]})}),f.jsxs("div",{className:"text-center",children:[f.jsx(M.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-3xl font-bold text-white",children:e}),f.jsx(M.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-2 text-gray-400",children:n})]}),t]})}),f.jsx(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8},className:"hidden lg:block relative flex-1",children:f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:f.jsxs("div",{className:"relative w-full max-w-lg mx-8",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:"/src/Imgs/Antes.png",alt:"Antes",className:"w-full rounded-lg shadow-xl"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-800/50 to-transparent"}),f.jsx("div",{className:"absolute bottom-4 left-4 text-white",children:f.jsx("span",{className:"text-sm font-medium bg-gray-900/50 px-2 py-1 rounded",children:"Antes"})})]}),f.jsxs("div",{className:"relative mt-4",children:[f.jsx("img",{src:"/src/Imgs/Depois.png",alt:"Depois",className:"w-full rounded-lg shadow-xl"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-800/50 to-transparent"}),f.jsx("div",{className:"absolute bottom-4 left-4 text-white",children:f.jsx("span",{className:"text-sm font-medium bg-gray-900/50 px-2 py-1 rounded",children:"Depois"})})]}),f.jsx("div",{className:"absolute -bottom-8 left-4 right-4 text-center",children:f.jsx("p",{className:"text-gray-400 text-sm italic",children:'"Os resultados são realmente impressionantes. Comparamos com várias pequenas fotos que foram ampliadas com um método básico de interpolação do Photoshop"'})})]})})})]})}function $$(){const[t,e]=N.useState(""),[n,r]=N.useState(""),[i,s]=N.useState(""),o=Ht(),a=async c=>{c.preventDefault(),s("");try{const h=await fj(Te,t,n);await gh(h.user.uid,{email:h.user.email||"",displayName:h.user.displayName||""}),o("/",{replace:!0})}catch(h){s("Falha no login. Verifique suas credenciais."),console.error("Login error:",h)}},l=async()=>{s("");try{const c=new In,h=await IS(Te,c);await gh(h.user.uid,{email:h.user.email||"",displayName:h.user.displayName||""}),o("/",{replace:!0})}catch(c){s("Falha no login com Google."),console.error("Google login error:",c)}};return f.jsx(jk,{title:"Bem-vindo de volta",subtitle:"Faça login para continuar melhorando suas imagens",children:f.jsxs("div",{className:"mt-8 space-y-6",children:[i&&f.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-2 rounded-lg",children:i}),f.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-700 rounded-lg shadow-sm text-white bg-gray-800 hover:bg-gray-700 transition-colors",children:[f.jsx("img",{className:"h-5 w-5 mr-2",src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google logo"}),f.jsx("span",{children:"Continuar com Google"})]}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"ou"})})]}),f.jsxs("form",{onSubmit:a,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:c=>e(c.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-lg shadow-sm bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Senha"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:c=>r(c.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-lg shadow-sm bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{id:"newsletter",name:"newsletter",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-700 rounded bg-gray-800"}),f.jsx("label",{htmlFor:"newsletter",className:"ml-2 block text-sm text-gray-400",children:"Receba as novidades, descontos e atualizações"})]}),f.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Entrar"})]}),f.jsx("div",{className:"text-center text-sm",children:f.jsxs("span",{className:"text-gray-400",children:["Não tem uma conta?"," ",f.jsx(cn,{to:"/register",className:"text-blue-500 hover:text-blue-400",children:"Criar conta"})]})}),f.jsxs("div",{className:"text-center text-xs text-gray-400",children:["Ao se inscrever em uma conta, você concorda com a"," ",f.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Política de Privacidade"})," ","e os"," ",f.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Termos e Condições"}),"."]})]})})}function B$(){const[t,e]=N.useState(""),[n,r]=N.useState(""),[i,s]=N.useState(""),[o,a]=N.useState(!1),l=Ht(),c=async d=>{d.preventDefault();try{const y=(await dj(Te,t,n)).user;await pj(y),a(!0),await gh(y.uid,{email:y.email||"",displayName:y.displayName||""}),s("Por favor, verifique seu email para ativar sua conta. Um link de verificação foi enviado.")}catch(m){switch(m.code){case"auth/email-already-in-use":s("Este email já está em uso. Por favor, use outro email ou faça login.");break;case"auth/weak-password":s("A senha é muito fraca. Use pelo menos 6 caracteres.");break;default:s("Falha no registro. Tente novamente.")}}},h=async()=>{try{const d=new In,m=await IS(Te,d);await gh(m.user.uid,{email:m.user.email||"",displayName:m.user.displayName||""}),l("/",{replace:!0})}catch{s("Falha no registro com Google.")}};return f.jsx(jk,{title:"Comece com 10 imagens grátis",subtitle:"Crie sua conta para começar",children:f.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-8 space-y-6",children:[i&&f.jsx(M.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`px-4 py-3 rounded-lg text-sm ${o?"bg-blue-500/10 border border-blue-500 text-blue-500":"bg-red-500/10 border border-red-500 text-red-500"}`,children:i}),f.jsxs(M.button,{onClick:h,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-center px-4 py-3 border border-gray-700 rounded-lg shadow-sm text-white bg-gray-800 hover:bg-gray-700 transition-colors",children:[f.jsx("img",{className:"h-5 w-5 mr-2",src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google logo"}),f.jsx("span",{children:"Continuar com Google"})]}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"ou"})})]}),f.jsxs("form",{onSubmit:c,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:d=>e(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-lg shadow-sm bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Senha"}),f.jsx("div",{className:"mt-1",children:f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:n,onChange:d=>r(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-700 rounded-lg shadow-sm bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{id:"newsletter",name:"newsletter",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-700 rounded bg-gray-800"}),f.jsx("label",{htmlFor:"newsletter",className:"ml-2 block text-sm text-gray-400",children:"Receba as novidades, descontos e atualizações"})]}),f.jsx(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Criar conta"})]}),f.jsx("div",{className:"text-center text-sm",children:f.jsxs("span",{className:"text-gray-400",children:["Já tem uma conta?"," ",f.jsx(cn,{to:"/login",className:"text-blue-500 hover:text-blue-400",children:"Faça login"})]})}),f.jsxs("div",{className:"text-center text-xs text-gray-400",children:["Ao se inscrever em uma conta, você concorda com a"," ",f.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Política de Privacidade"})," ","e os"," ",f.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Termos e Condições"}),"."]})]})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var z$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(t,e)=>{const n=N.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},h)=>N.createElement("svg",{ref:h,...z$,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${W$(t)}`,a].join(" "),...c},[...e.map(([d,m])=>N.createElement(d,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=ie("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=ie("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=ie("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=ie("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=ie("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=ie("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=ie("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function oB(){const[t,e]=N.useState(!1),n=Ht(),r=Te.currentUser,i=s=>{e(!1),n(s)};return f.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[f.jsxs(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/my-images"),className:"flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors",children:[f.jsx(Lk,{size:18}),f.jsx("span",{children:"Minhas Imagens"})]}),f.jsxs("div",{className:"relative",children:[f.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(!t),className:"flex items-center space-x-2",children:f.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-purple-500",children:f.jsx("img",{src:(r==null?void 0:r.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${encodeURIComponent((r==null?void 0:r.email)||"default")}`,alt:"Foto de perfil",className:"w-full h-full object-cover",onError:s=>{s.target.src="https://via.placeholder.com/150"}})})}),f.jsx(jn,{children:t&&f.jsxs(M.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg py-1 border border-gray-700",children:[f.jsxs("div",{className:"px-4 py-2 border-b border-gray-700",children:[f.jsx("p",{className:"text-sm font-medium text-white truncate",children:(r==null?void 0:r.displayName)||"Usuário"}),f.jsx("p",{className:"text-xs text-gray-400 truncate",children:r==null?void 0:r.email})]}),f.jsxs("button",{onClick:()=>i("/profile"),className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 transition-colors",children:[f.jsx(Av,{size:16}),f.jsx("span",{children:"Perfil"})]}),f.jsxs("button",{onClick:()=>i("/settings"),className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 transition-colors",children:[f.jsx(Zs,{size:16}),f.jsx("span",{children:"Configurações"})]}),f.jsxs("button",{onClick:()=>Te.signOut(),className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-red-400 hover:bg-gray-700 transition-colors",children:[f.jsx(vd,{size:16}),f.jsx("span",{children:"Sair"})]})]})})]})]})}function aB(){const[t,e]=N.useState(!1),n=Ht(),r=Te.currentUser,i=s=>{e(!1),n(s)};return f.jsxs("div",{className:"sm:hidden",children:[f.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(!t),className:"flex items-center space-x-2",children:f.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-purple-500",children:f.jsx("img",{src:(r==null?void 0:r.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${encodeURIComponent((r==null?void 0:r.email)||"default")}`,alt:"Foto de perfil",className:"w-full h-full object-cover",onError:s=>{s.target.src="https://via.placeholder.com/150"}})})}),f.jsx(jn,{children:t&&f.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:()=>e(!1),children:f.jsx(M.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute right-0 top-0 bottom-0 w-full max-w-[320px] bg-gray-900 overflow-y-auto",onClick:s=>s.stopPropagation(),children:f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsxs(M.button,{whileHover:{scale:1.02},whileTap:{scale:.95},onClick:()=>e(!1),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[f.jsx(qa,{size:20}),f.jsx("span",{children:"Voltar"})]}),f.jsxs("div",{className:"flex items-center gap-4 pb-6 border-b border-gray-800",children:[f.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-2 border-purple-500",children:f.jsx("img",{src:(r==null?void 0:r.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${r==null?void 0:r.email}`,alt:"Foto de perfil",className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium text-white",children:(r==null?void 0:r.displayName)||"Usuário"}),f.jsx("p",{className:"text-sm text-gray-400",children:r==null?void 0:r.email})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs(M.button,{whileTap:{scale:.95},onClick:()=>i("/my-images"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg bg-purple-600 text-white",children:[f.jsx("span",{children:"Minhas Imagens"}),f.jsx(Lk,{size:20})]}),f.jsxs(M.button,{whileTap:{scale:.95},onClick:()=>i("/profile"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg bg-gray-800 text-gray-300 hover:bg-gray-700 transition-colors",children:[f.jsx("span",{children:"Perfil"}),f.jsx(Av,{size:20})]}),f.jsxs(M.button,{whileTap:{scale:.95},onClick:()=>i("/settings"),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg bg-gray-800 text-gray-300 hover:bg-gray-700 transition-colors",children:[f.jsx("span",{children:"Configurações"}),f.jsx(Zs,{size:20})]})]}),f.jsx("div",{className:"pt-6 border-t border-gray-800",children:f.jsxs(M.button,{whileTap:{scale:.95},onClick:()=>Te.signOut(),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:[f.jsx("span",{children:"Sair da conta"}),f.jsx(vd,{size:20})]})})]})})})})]})}function Bk(){const[t,e]=N.useState(!1),n=Ht(),r=Te.currentUser;return t?f.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900",children:f.jsxs(M.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,type:"spring"},className:"text-center",children:[f.jsx(M.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-4xl font-bold text-white mb-4",children:"Até logo!"}),f.jsx(M.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-gray-400",children:"Esperamos ver você em breve"})]})}):r?f.jsxs(f.Fragment,{children:[f.jsx(oB,{}),f.jsx(aB,{})]}):f.jsx("div",{className:"flex items-center space-x-4",children:f.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/login"),className:"px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors",children:"Fazer Login"})})}const lB={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://www.reviverimagem.shop",VITE_FIREBASE_API_KEY:"AIzaSyCaUQ4J6Gr_uqiLbCpYrQ1KIhLoDr0aq74",VITE_FIREBASE_APP_ID:"1:245143798938:web:cca91956e75b02fc20cb23",VITE_FIREBASE_AUTH_DOMAIN:"reviviverimagem.firebaseapp.com",VITE_FIREBASE_CLIENT_EMAIL:"firebase-adminsdk-fbsvc@reviviverimagem.iam.gserviceaccount.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VYP3C8N5XF",VITE_FIREBASE_MESSAGING_SENDER_ID:"245143798938",VITE_FIREBASE_PRIVATE_KEY:`-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC0fpTovyjxBjNE
F4flI6nZ+WUmmTfJWvcpVUo+7zu5osQYuiHV3AOug1X8utvieXZGONa2VU9x3zpn
5vKA2d1IC7xXf5ieeYSWlIMOJ/xOff6NKcOpwH1anvnYWLTP3hRFEA7L9jdLZP2L
u5iIyz/c86ebtDJDhPYmU4GVOdQJFUWWHGAen7Km8aH20InYYgSawZiqL1QOQSdZ
5c4ZahT+P7lFXDc/G/f86W9jD7m3FjnAI2VJ2tXuAxj9QelFwGo0uN2U8zJt/CR6
QIVu+8RHRkFdO46/gGR7fd2L2lJp/jfr9VzlqoiU4y/PVC2Ud47AAF6IjovDryH+
/8zIMydHAgMBAAECggEABPj1xkG58YXvtKEHU+c7Hy+xOzJ+aHQymfdpD7nMhe03
hMzf8MHachzZKhjFxQP+n6miNKy9/w+czs78gFNANuNn4Ws4+6iyX+mggKvWVh0/
fYkYhF0ytuPpUy4CcTWXjl2GYtUaKeAS4h4dcitTS5WE2RPKTLTliSHE0KUis8tP
4U175XTx9y9iXNJs76hlZndkvWcuMgGWwzPpiPtigYDz51uX8UTRgrdlWRLCazg/
e4e+UT/SwomXcY9qVJ6P+lJJLrGlf5Y9RuU2ICK2mxFsJqEQCBqsm+RsYyMj3uZV
XhjmxRczjYEnmWUaGTweyeXWyLuggYWOM/zDxiilNQKBgQDeBwzcbOoI/lZKUcRn
D2jwh5rsUVM86doe+hP9vtE5PvmjFG4UdM7zOIpewHntuTpuOJ26psN04q7Qspgd
0VonomYdEj/TyIIXrk+r7OE038NY3BANg22JcJ5B0tj4yFD/bkDdh93lLYjTZxrk
6hEI7jHlegGhr8jfSx/VwDuh/QKBgQDQHKf68nVxfeD0OK4FtNzaq3YwBurAaWnU
lHgrZb0oeIblueYVDmS6iR3nYP4VcPey47lMocuXcKiUIJJqQN/Uj07sU4Jats/s
KoQGDTi6HSOYUMok1eKwJFHr5U95h0ZiwQRFzRuYLFbfV5sega0PNeQ2MXFxv6sI
I0Ex9I2fkwKBgQCb5pNvS8Lh4cUxlky0mSt0iaONAGXURdh1G+BhslUzPzcG/dd1
4bdXLYJrmfeDpyaSMor+fw6Lyog53s3VUiVd4ziUfTX4PbirbChhbomMGPsQMCXN
d1W4xi05xxW3SuElGoPNihOTUu/akXFe/8RKYwcCPTNcFxSTRirqanr0+QKBgHM4
KlhpfFRFWRJdfxtxswTuARU9/yJgOlOTj6SXQ07wy97MOXJW8bXEzGWZ8ZJ1ZO4J
3kFrIojJusun7Oge2s2YOh3lbjpDFIKwVz/yegGwuFBQClqygDr9IM31uzaRioqK
So9Kq4hopAArRJpzORk+wQawARr0/wAWZLX/q5k5AoGAALkxAHJo3qYiUq5imXja
0R+jaZ+IYmUz+v9i5qU+34XRol1kLZKOwFh2kYzM8uPl0663V5SOmMYiu80+XbhH
Pm5qS4ke0pADccaDMhJqx8R2SnGzr9dxdkF1K9Po9VCV5F//joDDOF0sPM4bSp8l
4fXS87cEftqIQtSD52cQlBI=
-----END PRIVATE KEY-----
`,VITE_FIREBASE_PROJECT_ID:"reviviverimagem",VITE_FIREBASE_STORAGE_BUCKET:"reviviverimagem.appspot.com",VITE_PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scXB4YmVwYmRyaXV5cmltYnJzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkwNTM5MDIsImV4cCI6MjA1NDYyOTkwMn0.mIlE8aaqoB_elfQqDUGrqUpMF27QBbD39_ybszojPGI",VITE_PUBLIC_SUPABASE_URL:"https://mlqpxbepbdriuyrimbrs.supabase.co",VITE_STRIPE_API_VERSION:"2025-01-27.acacia",VITE_STRIPE_PUBLIC_KEY:"pk_live_51QpQwsBDiRtDwwNc8hFpJtfBGdIVVm5noQQd27kTCtRIGE467HD4R4dzfEnKcoPEDGxFXrtY97zK7PsbGlMoNCLD00P3O0tiie",VITE_STRIPE_SECRET_KEY:"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",VITE_STRIPE_WEBHOOK_SECRET:"whsec_fb3f32eb47018c9d2269cdb90870333326a5c7253b6c79549f443a833b32e62c",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scXB4YmVwYmRyaXV5cmltYnJzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkwNTM5MDIsImV4cCI6MjA1NDYyOTkwMn0.mIlE8aaqoB_elfQqDUGrqUpMF27QBbD39_ybszojPGI",VITE_SUPABASE_SERVICE_ROLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scXB4YmVwYmRyaXV5cmltYnJzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczOTA1MzkwMiwiZXhwIjoyMDU0NjI5OTAyfQ.v3YrYhowt2HcWlpXiaue42zQbnNi3FpzSfmndw5ir2g",VITE_SUPABASE_URL:"https://mlqpxbepbdriuyrimbrs.supabase.co"},jx=t=>{let e;const n=new Set,r=(h,d)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const y=e;e=d??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(E=>E(e,y))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(lB?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},cB=t=>t?jx(t):jx;var zk={exports:{}},Wk={},qk={exports:{}},Hk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=N;function uB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hB=typeof Object.is=="function"?Object.is:uB,dB=wo.useState,fB=wo.useEffect,pB=wo.useLayoutEffect,mB=wo.useDebugValue;function gB(t,e){var n=e(),r=dB({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return pB(function(){i.value=n,i.getSnapshot=e,Xf(i)&&s({inst:i})},[t,n,e]),fB(function(){return Xf(i)&&s({inst:i}),t(function(){Xf(i)&&s({inst:i})})},[t]),mB(n),n}function Xf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hB(t,n)}catch{return!0}}function yB(t,e){return e()}var vB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yB:gB;Hk.useSyncExternalStore=wo.useSyncExternalStore!==void 0?wo.useSyncExternalStore:vB;qk.exports=Hk;var _B=qk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd=N,wB=_B;function EB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xB=typeof Object.is=="function"?Object.is:EB,TB=wB.useSyncExternalStore,bB=wd.useRef,SB=wd.useEffect,IB=wd.useMemo,PB=wd.useDebugValue;Wk.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=bB(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=IB(function(){function l(y){if(!c){if(c=!0,h=y,y=r(y),i!==void 0&&o.hasValue){var E=o.value;if(i(E,y))return d=E}return d=y}if(E=d,xB(h,y))return E;var S=r(y);return i!==void 0&&i(E,S)?(h=y,E):(h=y,d=S)}var c=!1,h,d,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,i]);var a=TB(t,s[0],s[1]);return SB(function(){o.hasValue=!0,o.value=a},[a]),PB(a),a};zk.exports=Wk;var kB=zk.exports;const AB=f1(kB),Gk={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://www.reviverimagem.shop",VITE_FIREBASE_API_KEY:"AIzaSyCaUQ4J6Gr_uqiLbCpYrQ1KIhLoDr0aq74",VITE_FIREBASE_APP_ID:"1:245143798938:web:cca91956e75b02fc20cb23",VITE_FIREBASE_AUTH_DOMAIN:"reviviverimagem.firebaseapp.com",VITE_FIREBASE_CLIENT_EMAIL:"firebase-adminsdk-fbsvc@reviviverimagem.iam.gserviceaccount.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VYP3C8N5XF",VITE_FIREBASE_MESSAGING_SENDER_ID:"245143798938",VITE_FIREBASE_PRIVATE_KEY:`-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC0fpTovyjxBjNE
F4flI6nZ+WUmmTfJWvcpVUo+7zu5osQYuiHV3AOug1X8utvieXZGONa2VU9x3zpn
5vKA2d1IC7xXf5ieeYSWlIMOJ/xOff6NKcOpwH1anvnYWLTP3hRFEA7L9jdLZP2L
u5iIyz/c86ebtDJDhPYmU4GVOdQJFUWWHGAen7Km8aH20InYYgSawZiqL1QOQSdZ
5c4ZahT+P7lFXDc/G/f86W9jD7m3FjnAI2VJ2tXuAxj9QelFwGo0uN2U8zJt/CR6
QIVu+8RHRkFdO46/gGR7fd2L2lJp/jfr9VzlqoiU4y/PVC2Ud47AAF6IjovDryH+
/8zIMydHAgMBAAECggEABPj1xkG58YXvtKEHU+c7Hy+xOzJ+aHQymfdpD7nMhe03
hMzf8MHachzZKhjFxQP+n6miNKy9/w+czs78gFNANuNn4Ws4+6iyX+mggKvWVh0/
fYkYhF0ytuPpUy4CcTWXjl2GYtUaKeAS4h4dcitTS5WE2RPKTLTliSHE0KUis8tP
4U175XTx9y9iXNJs76hlZndkvWcuMgGWwzPpiPtigYDz51uX8UTRgrdlWRLCazg/
e4e+UT/SwomXcY9qVJ6P+lJJLrGlf5Y9RuU2ICK2mxFsJqEQCBqsm+RsYyMj3uZV
XhjmxRczjYEnmWUaGTweyeXWyLuggYWOM/zDxiilNQKBgQDeBwzcbOoI/lZKUcRn
D2jwh5rsUVM86doe+hP9vtE5PvmjFG4UdM7zOIpewHntuTpuOJ26psN04q7Qspgd
0VonomYdEj/TyIIXrk+r7OE038NY3BANg22JcJ5B0tj4yFD/bkDdh93lLYjTZxrk
6hEI7jHlegGhr8jfSx/VwDuh/QKBgQDQHKf68nVxfeD0OK4FtNzaq3YwBurAaWnU
lHgrZb0oeIblueYVDmS6iR3nYP4VcPey47lMocuXcKiUIJJqQN/Uj07sU4Jats/s
KoQGDTi6HSOYUMok1eKwJFHr5U95h0ZiwQRFzRuYLFbfV5sega0PNeQ2MXFxv6sI
I0Ex9I2fkwKBgQCb5pNvS8Lh4cUxlky0mSt0iaONAGXURdh1G+BhslUzPzcG/dd1
4bdXLYJrmfeDpyaSMor+fw6Lyog53s3VUiVd4ziUfTX4PbirbChhbomMGPsQMCXN
d1W4xi05xxW3SuElGoPNihOTUu/akXFe/8RKYwcCPTNcFxSTRirqanr0+QKBgHM4
KlhpfFRFWRJdfxtxswTuARU9/yJgOlOTj6SXQ07wy97MOXJW8bXEzGWZ8ZJ1ZO4J
3kFrIojJusun7Oge2s2YOh3lbjpDFIKwVz/yegGwuFBQClqygDr9IM31uzaRioqK
So9Kq4hopAArRJpzORk+wQawARr0/wAWZLX/q5k5AoGAALkxAHJo3qYiUq5imXja
0R+jaZ+IYmUz+v9i5qU+34XRol1kLZKOwFh2kYzM8uPl0663V5SOmMYiu80+XbhH
Pm5qS4ke0pADccaDMhJqx8R2SnGzr9dxdkF1K9Po9VCV5F//joDDOF0sPM4bSp8l
4fXS87cEftqIQtSD52cQlBI=
-----END PRIVATE KEY-----
`,VITE_FIREBASE_PROJECT_ID:"reviviverimagem",VITE_FIREBASE_STORAGE_BUCKET:"reviviverimagem.appspot.com",VITE_PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scXB4YmVwYmRyaXV5cmltYnJzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkwNTM5MDIsImV4cCI6MjA1NDYyOTkwMn0.mIlE8aaqoB_elfQqDUGrqUpMF27QBbD39_ybszojPGI",VITE_PUBLIC_SUPABASE_URL:"https://mlqpxbepbdriuyrimbrs.supabase.co",VITE_STRIPE_API_VERSION:"2025-01-27.acacia",VITE_STRIPE_PUBLIC_KEY:"pk_live_51QpQwsBDiRtDwwNc8hFpJtfBGdIVVm5noQQd27kTCtRIGE467HD4R4dzfEnKcoPEDGxFXrtY97zK7PsbGlMoNCLD00P3O0tiie",VITE_STRIPE_SECRET_KEY:"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",VITE_STRIPE_WEBHOOK_SECRET:"whsec_fb3f32eb47018c9d2269cdb90870333326a5c7253b6c79549f443a833b32e62c",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scXB4YmVwYmRyaXV5cmltYnJzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkwNTM5MDIsImV4cCI6MjA1NDYyOTkwMn0.mIlE8aaqoB_elfQqDUGrqUpMF27QBbD39_ybszojPGI",VITE_SUPABASE_SERVICE_ROLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scXB4YmVwYmRyaXV5cmltYnJzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczOTA1MzkwMiwiZXhwIjoyMDU0NjI5OTAyfQ.v3YrYhowt2HcWlpXiaue42zQbnNi3FpzSfmndw5ir2g",VITE_SUPABASE_URL:"https://mlqpxbepbdriuyrimbrs.supabase.co"},{useDebugValue:RB}=Ka,{useSyncExternalStoreWithSelector:CB}=AB;let Vx=!1;const NB=t=>t;function DB(t,e=NB,n){(Gk?"production":void 0)!=="production"&&n&&!Vx&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Vx=!0);const r=CB(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return RB(r),r}const Mx=t=>{(Gk?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?cB(t):t,n=(r,i)=>DB(e,r,i);return Object.assign(n,e),n},OB=t=>t?Mx(t):Mx,jB=OB(t=>({pendingUpload:null,setPendingUpload:e=>t({pendingUpload:e})}));function VB(){const[t,e]=N.useState(50),[n,r]=N.useState(!1),[i,s]=N.useState(null),o=N.useRef(null),a=Ht(),[l]=Ro(Te),c=jB(v=>v.setPendingUpload),[h,d]=N.useState(!1),m=v=>{v.preventDefault(),r(!0)},y=v=>{v.preventDefault(),r(!1)},E=N.useCallback(async v=>{v.preventDefault(),r(!1),s(null);const I=Array.from(v.dataTransfer.files);I.length>0&&await b(I[0])},[]),S=async v=>{s(null),v.target.files&&v.target.files.length>0&&await b(v.target.files[0])},b=async v=>{try{if(!v.type.match(/^image\/(jpeg|png|webp)$/))throw new Error("Formato de arquivo não suportado. Use JPG, PNG ou WebP.");if(v.size>50*1024*1024)throw new Error("Arquivo muito grande. O tamanho máximo é 50MB.");if(!l){a("/login");return}c(v),a("/my-images")}catch(I){s(I instanceof Error?I.message:"Erro ao fazer upload da imagem")}},w=()=>{var v;(v=o.current)==null||v.click()},_=()=>{r(!0)},T=()=>{r(!1)},C=v=>{if(n){const I=v.currentTarget.getBoundingClientRect(),R=Math.max(0,Math.min(v.clientX-I.left,I.width))/I.width*100;e(R)}},O=v=>{const I=v.touches[0],k=v.currentTarget.getBoundingClientRect(),D=Math.max(0,Math.min(I.clientX-k.left,k.width))/k.width*100;e(D)},U={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},P={animate:{transition:{staggerChildren:.1}}};return f.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[f.jsxs(M.header,{initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:100},className:"border-b border-gray-800 fixed w-full bg-gray-900/95 backdrop-blur-sm z-50",children:[f.jsxs("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[f.jsxs(M.div,{className:"flex items-center space-x-2",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[f.jsx("img",{src:"/Duda_.png",alt:"Reviver Imagem Logo",className:"w-8 h-8 object-contain"}),f.jsx("span",{className:"text-xl font-bold",children:"Reviver Imagem"})]}),f.jsx("div",{className:"md:hidden",children:f.jsx(M.button,{whileTap:{scale:.95},onClick:()=>d(!h),className:"p-2",children:h?f.jsx(lr,{size:24}):f.jsx(Uk,{size:24})})}),f.jsx("div",{className:"hidden md:flex items-center space-x-4",children:l?f.jsx(Bk,{}):f.jsxs(f.Fragment,{children:[f.jsx(cn,{to:"/login",children:f.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-lg text-white hover:text-purple-400 transition",children:"Entrar"})}),f.jsx(cn,{to:"/register",children:f.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 transition",children:"Criar Conta"})})]})})]}),f.jsx(jn,{children:h&&f.jsx(M.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"sm:hidden bg-gray-800 border-t border-gray-700",children:f.jsxs("div",{className:"p-4 space-y-4",children:[l&&f.jsxs("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-700",children:[f.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-purple-500",children:f.jsx("img",{src:(l==null?void 0:l.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${l==null?void 0:l.email}`,alt:"Foto de perfil",className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-white",children:(l==null?void 0:l.displayName)||"Usuário"}),f.jsx("p",{className:"text-sm text-gray-400",children:l==null?void 0:l.email})]})]}),l?f.jsxs("div",{className:"space-y-3",children:[f.jsx(cn,{to:"/my-images",children:f.jsx(M.button,{whileTap:{scale:.95},className:"w-full px-4 py-2 rounded-lg bg-purple-600 text-white",children:"Minhas Imagens"})}),f.jsx(cn,{to:"/settings",children:f.jsx(M.button,{whileTap:{scale:.95},className:"w-full px-4 py-2 rounded-lg bg-gray-700 text-gray-300",children:"Configurações"})}),f.jsx(M.button,{whileTap:{scale:.95},onClick:()=>Te.signOut(),className:"w-full px-4 py-2 rounded-lg bg-red-600/20 text-red-500",children:"Sair"})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsx(cn,{to:"/login",className:"block",children:f.jsx(M.button,{whileTap:{scale:.95},className:"w-full px-4 py-2 rounded-lg bg-gray-700 text-white",onClick:()=>d(!1),children:"Entrar"})}),f.jsx(cn,{to:"/register",className:"block",children:f.jsx(M.button,{whileTap:{scale:.95},className:"w-full px-4 py-2 rounded-lg bg-purple-600 text-white",onClick:()=>d(!1),children:"Criar Conta"})})]})]})})})]}),f.jsx("main",{className:"pt-16",children:f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-16",children:[f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8 md:mb-16",children:[f.jsxs(M.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8},className:"text-3xl md:text-6xl font-bold mb-6",children:["Melhore suas Imagens com",f.jsx(M.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-purple-500",children:" IA"})]}),f.jsxs(M.div,{variants:P,initial:"initial",animate:"animate",className:"max-w-3xl mx-auto space-y-4 text-gray-400 mb-8",children:[f.jsxs(M.p,{variants:U,className:"flex items-center justify-center gap-2 text-sm md:text-base",children:[f.jsx(nB,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-500"}),"Aumente a resolução da imagem e melhore a qualidade"]}),f.jsxs(M.p,{variants:U,className:"flex items-center justify-center gap-2 text-sm md:text-base",children:[f.jsx(bh,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-500"}),"Transforme fotos borradas e pixeladas em imagens nítidas"]}),f.jsxs(M.p,{variants:U,className:"flex items-center justify-center gap-2 text-sm md:text-base",children:[f.jsx(kv,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-500"}),"Crie arte com IA em 4K, amplie até 500 MP"]})]}),f.jsx(M.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3},className:"w-full max-w-md mx-auto mb-12",children:f.jsx(cn,{to:l?"/my-images":"/register",children:f.jsxs(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full py-4 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl font-bold text-lg shadow-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-300",children:["Começar Agora",f.jsx(M.span,{animate:{x:[0,4,0]},transition:{duration:1.5,repeat:1/0},className:"inline-block ml-2",children:"→"})]})})}),f.jsxs(M.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.3},onDragEnter:m,onDragOver:v=>v.preventDefault(),onDragLeave:y,onDrop:E,onClick:w,className:`relative h-48 sm:h-72 border-2 border-dashed border-gray-700 rounded-lg flex items-center justify-center transition-all duration-300 overflow-hidden cursor-pointer ${n?"border-purple-500 bg-purple-500/10":"hover:border-gray-600"}`,children:[f.jsx("input",{ref:o,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:S,className:"hidden",id:"file-upload"}),f.jsxs("div",{className:"text-center px-4",children:[f.jsx(qm,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-600 mx-auto mb-4"}),f.jsxs("p",{className:"text-gray-400 mb-2 text-sm sm:text-base",children:["Solte suas imagens aqui, ou"," ",f.jsx("span",{className:"text-purple-500",children:"procure"})]}),f.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 text-xs sm:text-sm",children:[f.jsx("span",{children:"ou importe de"}),f.jsx("button",{className:"px-3 py-1 bg-gray-800 rounded-md flex items-center gap-1 hover:bg-gray-700 transition-colors",children:f.jsx($k,{className:"w-4 h-4"})}),f.jsx("button",{className:"px-3 py-1 bg-gray-800 rounded-md flex items-center gap-1 hover:bg-gray-700 transition-colors",children:f.jsx(Vk,{className:"w-4 h-4"})})]}),f.jsx("p",{className:"text-gray-600 text-xs mt-2",children:"JPG, PNG, WebP até 50 mb"})]}),f.jsx(jn,{children:i&&f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute bottom-4 left-4 right-4 bg-red-500/10 border border-red-500 text-red-500 px-4 py-2 rounded-lg flex items-center justify-between text-sm",children:[f.jsx("span",{children:i}),f.jsx("button",{onClick:v=>{v.stopPropagation(),s(null)},className:"text-red-500 hover:text-red-400",children:f.jsx(lr,{size:20})})]})})]})]}),f.jsxs(M.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},className:"mt-16 md:mt-32 mb-12 md:mb-24",children:[f.jsx(M.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-2xl md:text-3xl font-bold text-center mb-8 md:mb-12",children:"Veja a Diferença"}),f.jsx("div",{className:"max-w-4xl mx-auto",children:f.jsxs(M.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"relative h-[300px] md:h-[500px] rounded-xl overflow-hidden cursor-ew-resize shadow-2xl",onMouseDown:_,onMouseUp:T,onMouseMove:C,onMouseLeave:T,onTouchMove:O,onTouchEnd:T,children:[f.jsx("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:'url("/Depois.png")',backgroundSize:"cover",backgroundPosition:"center"}}),f.jsx("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:'url("/Antes.png")',backgroundSize:"cover",backgroundPosition:"center",clipPath:`polygon(0 0, ${t}% 0, ${t}% 100%, 0 100%)`}}),f.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white cursor-ew-resize",style:{left:`${t}%`},children:f.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center",children:f.jsx(M.div,{animate:{rotate:n?180:0},className:"w-4 h-4 border-r-2 border-b-2 border-gray-800 transform rotate-45"})})}),f.jsx("div",{className:"absolute bottom-4 left-4 bg-black/50 px-3 py-1 rounded-full text-sm",children:"Antes"}),f.jsx("div",{className:"absolute bottom-4 right-4 bg-black/50 px-3 py-1 rounded-full text-sm",children:"Depois"})]})})]}),f.jsx(M.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8 mb-12 md:mb-24 text-center",children:[{value:"500K+",label:"Imagens Processadas"},{value:"50K+",label:"Usuários Ativos"},{value:"99.9%",label:"Uptime"},{value:"4.9/5",label:"Avaliação Média"}].map((v,I)=>f.jsxs(M.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:I*.1},className:"p-4",children:[f.jsx(M.div,{initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{type:"spring",stiffness:100,delay:I*.1},className:"text-2xl md:text-4xl font-bold text-purple-500",children:v.value}),f.jsx("div",{className:"text-sm md:text-base text-gray-400 mt-2",children:v.label})]},I))}),f.jsx(M.div,{variants:P,initial:"initial",whileInView:"animate",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8 mb-12 md:mb-24",children:[{icon:K$,title:"Melhore Fotos",desc:"Transforme suas fotos com nossa tecnologia de IA avançada"},{icon:bh,title:"Corrija Borrões",desc:"Diga adeus às imagens borradas e pixeladas"},{icon:rB,title:"Gere Arte",desc:"Crie arte impressionante com IA em resolução 4K"}].map((v,I)=>f.jsxs(M.div,{variants:U,whileHover:{scale:1.05},className:"bg-gray-800 p-4 md:p-6 rounded-xl",children:[f.jsx(M.div,{whileHover:{rotate:360},transition:{duration:.6},className:"w-10 h-10 md:w-12 md:h-12 bg-purple-500/20 rounded-lg flex items-center justify-center mb-4",children:f.jsx(v.icon,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-500"})}),f.jsx("h3",{className:"text-base md:text-lg font-semibold mb-2",children:v.title}),f.jsx("p",{className:"text-sm md:text-base text-gray-400",children:v.desc})]},I))}),f.jsxs(M.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},className:"mb-12 md:mb-24",children:[f.jsx(M.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-2xl md:text-3xl font-bold text-center mb-8 md:mb-12",children:"Por que escolher Reviver Imagem?"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8",children:[{icon:bs,title:"Rápido",desc:"Resultados em segundos"},{icon:Di,title:"Seguro",desc:"Dados sempre protegidos"},{icon:Fk,title:"Alta Qualidade",desc:"Resultados profissionais"},{icon:Ts,title:"Suporte 24/7",desc:"Sempre aqui para ajudar"}].map((v,I)=>f.jsxs(M.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:I*.1},className:"text-center p-4",children:[f.jsx(M.div,{whileHover:{scale:1.1,rotate:360},transition:{duration:.6},className:"w-10 h-10 md:w-12 md:h-12 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(v.icon,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-500"})}),f.jsx("h3",{className:"text-sm md:text-base font-semibold mb-2",children:v.title}),f.jsx("p",{className:"text-xs md:text-sm text-gray-400",children:v.desc})]},I))})]}),!l&&f.jsxs(M.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"bg-gradient-to-r from-purple-600 to-purple-800 rounded-2xl p-6 md:p-12 text-center",children:[f.jsx(M.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-2xl md:text-3xl font-bold mb-4 md:mb-6",children:"Comece a Melhorar suas Imagens Hoje"}),f.jsx(M.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-base md:text-lg text-purple-100 mb-6 md:mb-8 max-w-2xl mx-auto",children:"Junte-se a milhares de usuários que já estão transformando suas imagens com IA"}),f.jsx(cn,{to:"/register",children:f.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 md:px-8 py-3 md:py-4 bg-white text-purple-600 rounded-lg font-semibold hover:bg-gray-100 transition text-sm md:text-base",children:"Criar Conta Gratuita"})})]})]})}),f.jsx("footer",{className:"border-t border-gray-800 mt-12 md:mt-24",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[f.jsx("img",{src:"/Duda_.png",alt:"Reviver Imagem Logo",className:"w-6 h-6 md:w-8 md:h-8 object-contain"}),f.jsx("span",{className:"text-lg md:text-xl font-bold",children:"Reviver Imagem"})]}),f.jsx("p",{className:"text-sm md:text-base text-gray-400",children:"Transformando imagens com o poder da IA"})]}),[{title:"Produto",items:["Recursos","Preços","API","Blog"]},{title:"Empresa",items:["Sobre","Carreiras","Contato","Imprensa"]},{title:"Legal",items:["Privacidade","Termos","Cookies","Licenças"]}].map((v,I)=>f.jsxs("div",{className:"col-span-1",children:[f.jsx("h3",{className:"text-sm md:text-base font-semibold mb-4",children:v.title}),f.jsx("ul",{className:"space-y-2 text-sm md:text-base text-gray-400",children:v.items.map((k,R)=>f.jsx("li",{className:"hover:text-white cursor-pointer",children:k},R))})]},I))]})})})]})}var Kk="https://js.stripe.com/v3",MB=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Lx="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",LB=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Kk,'"]')),n=0;n<e.length;n++){var r=e[n];if(MB.test(r.src))return r}return null},Ux=function(e){var n="",r=document.createElement("script");r.src="".concat(Kk).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},UB=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},ca=null,Jc=null,Xc=null,FB=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},$B=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},BB=function(e){return ca!==null?ca:(ca=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(Lx),window.Stripe){n(window.Stripe);return}try{var i=LB();if(i&&e)console.warn(Lx);else if(!i)i=Ux(e);else if(i&&Xc!==null&&Jc!==null){var s;i.removeEventListener("load",Xc),i.removeEventListener("error",Jc),(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=Ux(e)}Xc=$B(n,r),Jc=FB(r),i.addEventListener("load",Xc),i.addEventListener("error",Jc)}catch(o){r(o);return}}),ca.catch(function(n){return ca=null,Promise.reject(n)}))},zB=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return UB(i,r),i},ua,Qk=!1,Yk=function(){return ua||(ua=BB(null).catch(function(e){return ua=null,Promise.reject(e)}),ua)};Promise.resolve().then(function(){return Yk()}).catch(function(t){Qk||console.warn(t)});var WB=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Qk=!0;var i=Date.now();return Yk().then(function(s){return zB(s,n,i)})};const qB="pk_live_51QpQwsBDiRtDwwNc8hFpJtfBGdIVVm5noQQd27kTCtRIGE467HD4R4dzfEnKcoPEDGxFXrtY97zK7PsbGlMoNCLD00P3O0tiie",HB=WB(qB),Jk="https://www.reviverimagem.shop",Fx={free:{id:"free",name:"Plano Gratuito",credits:10,price:0,description:"10 créditos diários",features:["Acesso básico","10 créditos diários","Sem compromisso"]},basic:{id:"basic",name:"Plano Básico",credits:100,price:29.9,description:"100 créditos diários",features:["Acesso premium","100 créditos diários","Suporte prioritário"]},pro:{id:"pro",name:"Plano Profissional",credits:200,price:49.9,description:"200 créditos diários",features:["Acesso premium","200 créditos diários","Suporte prioritário","Recursos avançados"]},enterprise:{id:"enterprise",name:"Plano Enterprise",credits:300,price:79.9,description:"300 créditos diários",features:["Acesso premium","300 créditos diários","Suporte VIP","Recursos avançados","API access"]}};async function GB(t){try{const e=Te.currentUser;if(!e)throw new Error("User not authenticated");const n=await HB;if(!n)throw new Error("Stripe failed to initialize");const r=await fetch(`${Jk}/create-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t.id,userId:e.uid,userEmail:e.email})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to create subscription")}const i=await r.json(),{error:s}=await n.redirectToCheckout({sessionId:i.id});if(s)throw s}catch(e){throw console.error("Error creating subscription:",e),e}}async function KB(){try{const t=Te.currentUser;if(!t)throw new Error("User not authenticated");const e=await fetch(`${Jk}/subscription-status?userId=${t.uid}`);if(!e.ok){const n=await e.json();throw new Error(n.error||"Failed to get subscription status")}return await e.json()}catch(t){throw console.error("Error getting subscription status:",t),t}}function QB(){const[t]=V2(),e=Ht(),[n,r]=N.useState("processing"),[i,s]=N.useState("");N.useEffect(()=>{(async()=>{try{if(!t.get("session_id")){r("failed"),s("Sessão de pagamento não encontrada");return}(await KB()).status==="active"?(r("success"),s("Assinatura ativada com sucesso! Seus créditos diários já estão disponíveis.")):(r("failed"),s("Falha ao ativar a assinatura")),setTimeout(()=>{e("/my-images")},3e3)}catch(c){console.error("Error verifying subscription:",c),r("failed"),s("Erro ao verificar a assinatura. Por favor, contate o suporte.")}})()},[t,e]);const a={processing:{icon:Y$,color:"text-yellow-500",bgColor:"bg-yellow-500/20",borderColor:"border-yellow-500",title:"Processando assinatura"},success:{icon:Q$,color:"text-green-500",bgColor:"bg-green-500/20",borderColor:"border-green-500",title:"Assinatura ativada!"},failed:{icon:lr,color:"text-red-500",bgColor:"bg-red-500/20",borderColor:"border-red-500",title:"Falha na assinatura"}}[n];return f.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:f.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`max-w-md w-full ${a.bgColor} ${a.borderColor} border rounded-lg p-8 text-center`,children:[f.jsx(M.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"mx-auto w-16 h-16 flex items-center justify-center rounded-full bg-gray-900",children:f.jsx(a.icon,{className:`w-8 h-8 ${a.color}`})}),f.jsx(M.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`mt-4 text-2xl font-bold ${a.color}`,children:a.title}),f.jsx(M.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-2 text-gray-400",children:i})]})})}async function YB(t){var e;try{const n=od(Xl,"users",t);return((e=(await qy(n)).data())==null?void 0:e.credits)||0}catch(n){return console.error("Error fetching credits:",n),0}}async function JB(t,e=1){var n;try{const r=od(Xl,"users",t);if((((n=(await qy(r)).data())==null?void 0:n.credits)||0)<e)throw new Error("Créditos insuficientes");await V4(r,{credits:U4(-e),updatedAt:Fe.now()})}catch(r){throw console.error("Error using credits:",r),r}}async function XB(t){try{const e=WI(Xl,"transactions"),n=A4(e,R4("userId","==",t),C4("createdAt","desc"));return(await j4(n)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt.toDate()}))}catch(e){return console.error("Error fetching transactions:",e),[]}}async function ZB(t){try{const e=WI(Xl,"refundRequests");await M4(e,{...t,status:"pending",createdAt:Fe.now()})}catch(e){throw console.error("Error requesting refund:",e),e}}function e9(t){const e=new Date;return e.setDate(e.getDate()-7),new Date(t.createdAt)>e}function t9({isOpen:t,onClose:e,transaction:n}){const[r,i]=N.useState(""),[s,o]=N.useState(null),[a,l]=N.useState(!1),[c,h]=N.useState(!1),d=async m=>{if(m.preventDefault(),!c){if(!r.trim()){o("Por favor, forneça um motivo para o reembolso.");return}try{h(!0),o(null),await ZB({userId:n.userId,transactionId:n.id,reason:r.trim(),amount:n.amount,credits:n.credits}),l(!0),setTimeout(()=>{e(),l(!1),i("")},2e3)}catch(y){console.error("Erro ao solicitar reembolso:",y),o("Não foi possível processar sua solicitação de reembolso. Tente novamente.")}finally{h(!1)}}};return f.jsx(jn,{children:t&&f.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:e,children:f.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",duration:.5},className:"relative w-full max-w-md bg-gray-900 rounded-xl shadow-2xl overflow-hidden",onClick:m=>m.stopPropagation(),children:[f.jsx(M.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white",children:f.jsx(lr,{className:"w-6 h-6"})}),f.jsxs("div",{className:"p-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Solicitar Reembolso"}),a?f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8",children:[f.jsx(M.div,{animate:{scale:[1,1.2,1]},transition:{duration:.5},className:"w-16 h-16 bg-green-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:f.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Solicitação Enviada!"}),f.jsx("p",{className:"text-gray-400",children:"Analisaremos seu pedido e responderemos em breve."})]}):f.jsxs("form",{onSubmit:d,className:"space-y-6",children:[f.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/50 rounded-lg p-4 mb-6",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx(q$,{className:"w-5 h-5 text-yellow-500 mt-0.5 mr-3 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-yellow-500",children:"Informações importantes"}),f.jsxs("ul",{className:"mt-2 text-sm text-yellow-500/80 list-disc list-inside space-y-1",children:[f.jsx("li",{children:"O reembolso pode levar até 7 dias úteis"}),f.jsx("li",{children:"Os créditos serão removidos da sua conta"}),f.jsx("li",{children:"Você receberá um email com a confirmação"})]})]})]})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Detalhes da Compra"}),f.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-gray-400",children:"Valor:"}),f.jsxs("span",{className:"text-white",children:["R$ ",n.amount.toFixed(2)]})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-gray-400",children:"Créditos:"}),f.jsx("span",{className:"text-white",children:n.credits})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-gray-400",children:"Data:"}),f.jsx("span",{className:"text-white",children:new Date(n.createdAt).toLocaleDateString()})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-300 mb-2",children:"Motivo do Reembolso"}),f.jsx("textarea",{id:"reason",value:r,onChange:m=>i(m.target.value),placeholder:"Descreva o motivo do seu pedido de reembolso...",rows:4,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s&&f.jsx(M.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-500/10 border border-red-500 text-red-500 rounded-lg text-sm",children:s}),f.jsxs("div",{className:"flex justify-end space-x-3",children:[f.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:c,className:`px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors ${c?"opacity-50 cursor-not-allowed":""}`,children:c?"Enviando...":"Solicitar Reembolso"})]})]})]})]})})})}function n9(){const[t]=Ro(Te),e=Ht(),[n,r]=N.useState(null),[i,s]=N.useState([]),[o,a]=N.useState(null),[l,c]=N.useState(!1),[h,d]=N.useState(!0);N.useEffect(()=>{(async()=>{if(t)try{const b=await XB(t.uid);s(b)}catch(b){console.error("Erro ao carregar transações:",b)}finally{d(!1)}})()},[t]);const m=[{id:"account",title:"Conta",icon:Av,items:[{title:"Perfil",description:"Gerencie suas informações pessoais"},{title:"Email",description:"Atualize seu endereço de email"},{title:"Senha",description:"Altere sua senha de acesso"}]},{id:"payments",title:"Pagamentos e Créditos",icon:J$,items:[{title:"Histórico",description:"Veja suas transações anteriores"},{title:"Reembolsos",description:"Solicite reembolso de compras"},{title:"Métodos de Pagamento",description:"Gerencie seus cartões"}]},{id:"notifications",title:"Notificações",icon:H$,items:[{title:"Email",description:"Configure notificações por email"},{title:"Push",description:"Configure notificações no navegador"}]},{id:"security",title:"Segurança",icon:Di,items:[{title:"Verificação em duas etapas",description:"Ative a autenticação 2FA"},{title:"Dispositivos conectados",description:"Gerencie suas sessões ativas"},{title:"Histórico de login",description:"Veja acessos recentes"}]}],y=S=>{a(S),c(!0)},E=()=>{if(!n)return f.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},className:"grid gap-6 p-6",children:[m.map(b=>f.jsxs(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(b.id),className:"flex items-center justify-between p-4 bg-gray-800 rounded-xl hover:bg-gray-700 transition-colors",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center",children:f.jsx(b.icon,{className:"w-5 h-5 text-purple-500"})}),f.jsxs("div",{className:"text-left",children:[f.jsx("h3",{className:"font-medium text-white",children:b.title}),f.jsxs("p",{className:"text-sm text-gray-400",children:[b.items.length," opções"]})]})]}),f.jsx(Wm,{className:"w-5 h-5 text-gray-500"})]},b.id)),f.jsx(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Te.signOut(),className:"flex items-center justify-between p-4 bg-red-500/10 rounded-xl hover:bg-red-500/20 transition-colors",children:f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center",children:f.jsx(vd,{className:"w-5 h-5 text-red-500"})}),f.jsxs("div",{className:"text-left",children:[f.jsx("h3",{className:"font-medium text-red-500",children:"Sair"}),f.jsx("p",{className:"text-sm text-red-400/70",children:"Encerrar sessão"})]})]})})]});const S=m.find(b=>b.id===n);return S?n==="payments"?f.jsxs("div",{className:"p-6",children:[f.jsxs(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(null),className:"flex items-center text-gray-400 hover:text-white mb-6",children:[f.jsx(qa,{className:"w-5 h-5 mr-2"}),f.jsx("span",{children:"Voltar"})]}),f.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Pagamentos e Créditos"}),h?f.jsxs("div",{className:"text-center py-8",children:[f.jsx(_d,{className:"w-8 h-8 text-purple-500 animate-spin mx-auto mb-4"}),f.jsx("p",{className:"text-gray-400",children:"Carregando transações..."})]}):i.length>0?f.jsx("div",{className:"space-y-4",children:i.map(b=>f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-lg p-4",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{children:[f.jsxs("h3",{className:"text-white font-medium",children:[b.credits," créditos"]}),f.jsx("p",{className:"text-sm text-gray-400",children:new Date(b.createdAt).toLocaleDateString()})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("p",{className:"text-white font-medium",children:["R$ ",b.amount.toFixed(2)]}),f.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${b.status==="completed"?"bg-green-500/20 text-green-500":b.status==="refunded"?"bg-yellow-500/20 text-yellow-500":"bg-gray-500/20 text-gray-500"}`,children:b.status==="completed"?"Concluído":b.status==="refunded"?"Reembolsado":"Pendente"})]})]}),b.status==="completed"&&e9(b)&&f.jsx(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>y(b),className:"w-full mt-2 py-2 text-sm text-purple-500 hover:text-purple-400 transition-colors",children:"Solicitar reembolso"})]},b.id))}):f.jsxs("div",{className:"text-center py-8",children:[f.jsx(eB,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-400",children:"Nenhuma transação encontrada"})]})]}):f.jsxs("div",{className:"p-6",children:[f.jsxs(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(null),className:"flex items-center text-gray-400 hover:text-white mb-6",children:[f.jsx(qa,{className:"w-5 h-5 mr-2"}),f.jsx("span",{children:"Voltar"})]}),f.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:S.title}),f.jsx("div",{className:"space-y-4",children:S.items.map((b,w)=>f.jsxs(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-between p-4 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:[f.jsxs("div",{className:"text-left",children:[f.jsx("h3",{className:"font-medium text-white",children:b.title}),f.jsx("p",{className:"text-sm text-gray-400",children:b.description})]}),f.jsx(Wm,{className:"w-5 h-5 text-gray-500"})]},w))})]}):null};return f.jsxs("div",{className:"p-6 sm:p-8 min-h-screen bg-gray-900 text-white",children:[f.jsxs("button",{onClick:()=>e("/"),className:"flex items-center text-gray-400 hover:text-white mb-6",children:[f.jsx(qa,{size:18,className:"mr-2"})," Voltar para Home"]}),f.jsx("header",{className:"bg-gray-900 border-b border-gray-800",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx("div",{className:"h-16 flex items-center",children:f.jsx("h1",{className:"text-xl font-bold text-white",children:"Configurações"})})})}),f.jsx("main",{className:"max-w-7xl mx-auto mt-6",children:E()}),o&&f.jsx(t9,{isOpen:l,onClose:()=>{c(!1),a(null)},transaction:o})]})}const r9="modulepreload",i9=function(t){return"/"+t},$x={},Eo=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=i9(l),l in $x)return;$x[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":r9,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((m,y)=>{d.addEventListener("load",m),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},s9=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Eo(async()=>{const{default:r}=await Promise.resolve().then(()=>Lo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Rv extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class o9 extends Rv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a9 extends Rv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class l9 extends Rv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Hm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Hm||(Hm={}));var c9=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class u9{constructor(e,{headers:n={},customFetch:r,region:i=Hm.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=s9(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return c9(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(E=>{throw new o9(E)}),d=h.headers.get("x-relay-error");if(d&&d==="true")throw new a9(h);if(!h.ok)throw new l9(h);let m=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield h.json():m==="application/octet-stream"?y=yield h.blob():m==="text/event-stream"?y=h:m==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null}}catch(i){return{data:null,error:i}}})}}var At={},Cv={},Ed={},rc={},xd={},Td={},h9=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xo=h9();const d9=xo.fetch,Xk=xo.fetch.bind(xo),Zk=xo.Headers,f9=xo.Request,p9=xo.Response,Lo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zk,Request:f9,Response:p9,default:Xk,fetch:d9},Symbol.toStringTag,{value:"Module"})),m9=aR(Lo);var bd={};Object.defineProperty(bd,"__esModule",{value:!0});let g9=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};bd.default=g9;var eA=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Td,"__esModule",{value:!0});const y9=eA(m9),v9=eA(bd);let _9=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=y9.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,h=null,d=null,m=s.status,y=s.statusText;if(s.ok){if(this.method!=="HEAD"){const w=await s.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=w:h=JSON.parse(w))}const S=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");S&&b&&b.length>1&&(d=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,m=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const S=await s.text();try{c=JSON.parse(S),Array.isArray(c)&&s.status===404&&(h=[],c=null,m=200,y="OK")}catch{s.status===404&&S===""?(m=204,y="No Content"):c={message:S}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,m=200,y="OK"),c&&this.shouldThrowOnError)throw new v9.default(c)}return{error:c,data:h,count:d,status:m,statusText:y}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}};Td.default=_9;var w9=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xd,"__esModule",{value:!0});const E9=w9(Td);let x9=class extends E9.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};xd.default=x9;var T9=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rc,"__esModule",{value:!0});const b9=T9(xd);let S9=class extends b9.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};rc.default=S9;var I9=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ed,"__esModule",{value:!0});const ha=I9(rc);let P9=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new ha.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ha.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){const c=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new ha.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new ha.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ha.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ed.default=P9;var Sd={},Id={};Object.defineProperty(Id,"__esModule",{value:!0});Id.version=void 0;Id.version="0.0.0-automated";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.DEFAULT_HEADERS=void 0;const k9=Id;Sd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${k9.version}`};var tA=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cv,"__esModule",{value:!0});const A9=tA(Ed),R9=tA(rc),C9=Sd;let N9=class nA{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},C9.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new A9.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new nA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{a.searchParams.append(h,d)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new R9.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Cv.default=N9;var Uo=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(At,"__esModule",{value:!0});At.PostgrestError=At.PostgrestBuilder=At.PostgrestTransformBuilder=At.PostgrestFilterBuilder=At.PostgrestQueryBuilder=At.PostgrestClient=void 0;const rA=Uo(Cv);At.PostgrestClient=rA.default;const iA=Uo(Ed);At.PostgrestQueryBuilder=iA.default;const sA=Uo(rc);At.PostgrestFilterBuilder=sA.default;const oA=Uo(xd);At.PostgrestTransformBuilder=oA.default;const aA=Uo(Td);At.PostgrestBuilder=aA.default;const lA=Uo(bd);At.PostgrestError=lA.default;var D9=At.default={PostgrestClient:rA.default,PostgrestQueryBuilder:iA.default,PostgrestFilterBuilder:sA.default,PostgrestTransformBuilder:oA.default,PostgrestBuilder:aA.default,PostgrestError:lA.default};const{PostgrestClient:O9,PostgrestQueryBuilder:M7,PostgrestFilterBuilder:L7,PostgrestTransformBuilder:U7,PostgrestBuilder:F7,PostgrestError:$7}=D9,j9="2.11.2",V9={"X-Client-Info":`realtime-js/${j9}`},M9="1.0.0",cA=1e4,L9=1e3;var eo;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(eo||(eo={}));var Vt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Vt||(Vt={}));var hn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(hn||(hn={}));var Gm;(function(t){t.websocket="websocket"})(Gm||(Gm={}));var Oi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Oi||(Oi={}));class U9{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class uA{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ve;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ve||(ve={}));const Bx=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=F9(o,t,e,i),s),{})},F9=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?hA(s,o):Km(o)},hA=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return W9(e,n)}switch(t){case ve.bool:return $9(e);case ve.float4:case ve.float8:case ve.int2:case ve.int4:case ve.int8:case ve.numeric:case ve.oid:return B9(e);case ve.json:case ve.jsonb:return z9(e);case ve.timestamp:return q9(e);case ve.abstime:case ve.date:case ve.daterange:case ve.int4range:case ve.int8range:case ve.money:case ve.reltime:case ve.text:case ve.time:case ve.timestamptz:case ve.timetz:case ve.tsrange:case ve.tstzrange:return Km(e);default:return Km(e)}},Km=t=>t,$9=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},B9=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},z9=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},W9=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>hA(e,a))}return t},q9=t=>typeof t=="string"?t.replace(" ","T"):t,dA=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Zf{constructor(e,n,r={},i=cA){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(zx||(zx={}));class Ha{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ha.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Ha.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ha.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const d=s[c];if(d){const m=h.map(b=>b.presence_ref),y=d.map(b=>b.presence_ref),E=h.filter(b=>y.indexOf(b.presence_ref)<0),S=d.filter(b=>m.indexOf(b.presence_ref)<0);E.length>0&&(a[c]=E),S.length>0&&(l[c]=S)}else a[c]=h}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const h=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),h.length>0){const d=e[a].map(y=>y.presence_ref),m=h.filter(y=>d.indexOf(y.presence_ref)<0);e[a].unshift(...m)}r(a,h,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const h=l.map(d=>d.presence_ref);c=c.filter(d=>h.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Wx||(Wx={}));var qx;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(qx||(qx={}));var Yn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Yn||(Yn={}));class Nv{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Zf(this,hn.join,this.params,this.timeout),this.rejoinTimer=new uA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hn.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ha(this),this.broadcastEndpointURL=dA(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(h=>e==null?void 0:e(Yn.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(Yn.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var d;if(this.socket.setAuth(),h===void 0){e==null||e(Yn.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(d=m==null?void 0:m.length)!==null&&d!==void 0?d:0,E=[];for(let S=0;S<y;S++){const b=m[S],{filter:{event:w,schema:_,table:T,filter:C}}=b,O=h&&h[S];if(O&&O.event===w&&O.schema===_&&O.table===T&&O.filter===C)E.push(Object.assign(Object.assign({},b),{id:O.id}));else{this.unsubscribe(),e==null||e(Yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(Yn.SUBSCRIBED);return}}).receive("error",h=>{e==null||e(Yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Zf(this,hn.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Zf(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=hn;if(r&&[a,l,c,h].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var E,S,b;return((E=y.filter)===null||E===void 0?void 0:E.event)==="*"||((b=(S=y.filter)===null||S===void 0?void 0:S.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(y=>y.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(y=>{var E,S,b,w,_,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const C=y.id,O=(E=y.filter)===null||E===void 0?void 0:E.event;return C&&((S=n.ids)===null||S===void 0?void 0:S.includes(C))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const C=(_=(w=y==null?void 0:y.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return C==="*"||C===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const E=m.data,{schema:S,table:b,commit_timestamp:w,type:_,errors:T}=E;m=Object.assign(Object.assign({},{schema:S,table:b,commit_timestamp:w,eventType:_,new:{},old:{},errors:T}),this._getPayloadRecords(E))}y.callback(m,r)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Nv.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(hn.close,{},e)}_onError(e){this._on(hn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Bx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Bx(e.columns,e.old_record)),n}}const H9=()=>{},G9=typeof WebSocket<"u",K9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Q9{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=V9,this.params={},this.timeout=cA,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=H9,this.conn=null,this.sendBuffer=[],this.serializer=new U9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Eo(async()=>{const{default:l}=await Promise.resolve().then(()=>Lo);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Gm.websocket}`,this.httpEndpoint=dA(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new uA(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(G9){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Y9(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Eo(async()=>{const{default:e}=await import("./browser-C-tEiQmR.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:M9}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case eo.connecting:return Oi.Connecting;case eo.open:return Oi.Open;case eo.closing:return Oi.Closing;default:return Oi.Closed}}isConnected(){return this.connectionState()===Oi.Open}channel(e,n={config:{}}){const r=new Nv(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(i=>{n&&i.updateJoinPayload({access_token:n}),i.joinedOnce&&i._isJoined()&&i._push(hn.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(L9,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(hn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([K9],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Y9{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=eo.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Dv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ke(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class J9 extends Dv{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Qm extends Dv{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var X9=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const fA=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Eo(async()=>{const{default:r}=await Promise.resolve().then(()=>Lo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Z9=()=>X9(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Eo(()=>Promise.resolve().then(()=>Lo),void 0)).Response:Response}),Ym=t=>{if(Array.isArray(t))return t.map(n=>Ym(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Ym(r)}),e};var cs=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const ep=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),e6=(t,e,n)=>cs(void 0,void 0,void 0,function*(){const r=yield Z9();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new J9(ep(i),t.status||500))}).catch(i=>{e(new Qm(ep(i),i))}):e(new Qm(ep(t),t))}),t6=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function ic(t,e,n,r,i,s){return cs(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,t6(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>e6(l,a,r))})})}function Sh(t,e,n,r){return cs(this,void 0,void 0,function*(){return ic(t,"GET",e,n,r)})}function Nr(t,e,n,r,i){return cs(this,void 0,void 0,function*(){return ic(t,"POST",e,r,i,n)})}function n6(t,e,n,r,i){return cs(this,void 0,void 0,function*(){return ic(t,"PUT",e,r,i,n)})}function r6(t,e,n,r){return cs(this,void 0,void 0,function*(){return ic(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function pA(t,e,n,r,i){return cs(this,void 0,void 0,function*(){return ic(t,"DELETE",e,r,i,n)})}var Pt=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const i6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class s6{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=fA(i)}uploadOrUpdate(e,n,r,i){return Pt(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Hx),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield d.json();return d.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(s){if(Ke(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Pt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Hx.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h}),m=yield d.json();return d.ok?{data:{path:s,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(Ke(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Nr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Dv("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}update(e,n,r){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Pt(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Pt(this,void 0,void 0,function*(){try{return{data:{path:(yield Nr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Pt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Nr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Pt(this,void 0,void 0,function*(){try{const i=yield Nr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}download(e,n){return Pt(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Sh(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}info(e){return Pt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Sh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ym(r),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}exists(e){return Pt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield r6(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ke(r)&&r instanceof Qm){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield pA(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}list(e,n,r){return Pt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},i6),n),{prefix:e||""});return{data:yield Nr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ke(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const o6="2.7.1",a6={"X-Client-Info":`storage-js/${o6}`};var gs=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class l6{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},a6),n),this.fetch=fA(r)}listBuckets(){return gs(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ke(e))return{data:null,error:e};throw e}})}getBucket(e){return gs(this,void 0,void 0,function*(){try{return{data:yield Sh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return gs(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return gs(this,void 0,void 0,function*(){try{return{data:yield n6(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}emptyBucket(e){return gs(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return gs(this,void 0,void 0,function*(){try{return{data:yield pA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}}class c6 extends l6{constructor(e,n={},r){super(e,n,r)}from(e){return new s6(this.url,this.headers,e,this.fetch)}}const u6="2.48.1";let Ia="";typeof Deno<"u"?Ia="deno":typeof document<"u"?Ia="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ia="react-native":Ia="node";const h6={"X-Client-Info":`supabase-js-${Ia}/${u6}`},d6={headers:h6},f6={schema:"public"},p6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},m6={};var g6=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const y6=t=>{let e;return t?e=t:typeof fetch>"u"?e=Xk:e=fetch,(...n)=>e(...n)},v6=()=>typeof Headers>"u"?Zk:Headers,_6=(t,e,n)=>{const r=y6(n),i=v6();return(s,o)=>g6(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var w6=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function E6(t){return t.replace(/\/$/,"")}function x6(t,e){const{db:n,auth:r,realtime:i,global:s}=t,{db:o,auth:a,realtime:l,global:c}=e,h={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s),accessToken:()=>w6(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const mA="2.67.3",T6="http://localhost:9999",b6="supabase.auth.token",S6={"X-Client-Info":`gotrue-js/${mA}`},Gx=10,Jm="X-Supabase-Api-Version",gA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function I6(t){return Math.round(Date.now()/1e3)+t}function P6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Tn=()=>typeof window<"u"&&typeof document<"u",bi={tested:!1,writable:!1},Ga=()=>{if(!Tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bi.tested)return bi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),bi.tested=!0,bi.writable=!0}catch{bi.tested=!0,bi.writable=!1}return bi.writable};function k6(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const yA=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Eo(async()=>{const{default:r}=await Promise.resolve().then(()=>Lo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},A6=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",vA=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Zc=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},eu=async(t,e)=>{await t.removeItem(e)};function R6(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,o,a,l,c,h=0;for(t=t.replace("-","+").replace("_","/");h<t.length;)o=e.indexOf(t.charAt(h++)),a=e.indexOf(t.charAt(h++)),l=e.indexOf(t.charAt(h++)),c=e.indexOf(t.charAt(h++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&i!=0&&(n=n+String.fromCharCode(i)),c!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Pd{constructor(){this.promise=new Pd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Pd.promiseConstructor=Promise;function Kx(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(R6(r))}async function C6(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function N6(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function D6(t){return("0"+t.toString(16)).substr(-2)}function O6(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,D6).join("")}async function j6(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function V6(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function M6(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await j6(t);return V6(n)}async function ys(t,e,n=!1){const r=O6();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await vA(t,`${e}-code-verifier`,i);const s=await M6(r);return[s,r===s?"plain":"s256"]}const L6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function U6(t){const e=t.headers.get(Jm);if(!e||!e.match(L6))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Ov extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function te(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class F6 extends Ov{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function $6(t){return te(t)&&t.name==="AuthApiError"}class _A extends Ov{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class us extends Ov{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class kr extends us{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function B6(t){return te(t)&&t.name==="AuthSessionMissingError"}class tp extends us{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class tu extends us{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class nu extends us{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function z6(t){return te(t)&&t.name==="AuthImplicitGrantRedirectError"}class Qx extends us{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xm extends us{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function np(t){return te(t)&&t.name==="AuthRetryableFetchError"}class Yx extends us{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var W6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Ci=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),q6=[502,503,504];async function Jx(t){var e;if(!A6(t))throw new Xm(Ci(t),0);if(q6.includes(t.status))throw new Xm(Ci(t),t.status);let n;try{n=await t.json()}catch(s){throw new _A(Ci(s),s)}let r;const i=U6(t);if(i&&i.getTime()>=gA["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yx(Ci(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new kr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Yx(Ci(n),t.status,n.weak_password.reasons);throw new F6(Ci(n),t.status||500,r)}const H6=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function se(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Jm]||(s[Jm]=gA["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await G6(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function G6(t,e,n,r,i,s){const o=H6(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Xm(Ci(l),0)}if(a.ok||await Jx(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Jx(l)}}function Ar(t){var e;let n=null;J6(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=I6(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Xx(t){const e=Ar(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function K6(t){return{data:t,error:null}}function Q6(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=W6(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Y6(t){return t}function J6(t){return t.access_token&&t.refresh_token&&t.expires_in}var X6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Z6{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=yA(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Lr})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=X6(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Q6,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(te(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lr})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Y6});if(h.error)throw h.error;const d=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(E=>{const S=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(E.split(";")[1].split("=")[1]);c[`${b}Page`]=S}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(te(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lr})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Lr})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Lr})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(te(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}}const ez={getItem:t=>Ga()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ga()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ga()&&globalThis.localStorage.removeItem(t)}};function Zx(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function tz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vs={debug:!!(globalThis&&Ga()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class nz extends wA{}async function rz(t,e,n){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new nz(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(vs.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}tz();const iz={url:T6,storageKey:b6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},da=30*1e3,e1=3;async function t1(t,e,n){return await n()}class Cl{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cl.nextInstanceID,Cl.nextInstanceID+=1,this.instanceID>0&&Tn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},iz),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Z6({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=yA(i.fetch),this.lock=i.lock||t1,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Tn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=rz:this.lock=t1,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Ga()?this.storage=ez:(this.memoryStorage={},this.storage=Zx(this.memoryStorage)):(this.memoryStorage={},this.storage=Zx(this.memoryStorage)),Tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${mA}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=k6(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Tn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),z6(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return te(n)?{error:n}:{error:new _A("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ar}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:h,password:d,options:m}=e;let y=null,E=null;this.flowType==="pkce"&&([y,E]=await ys(this.storage,this.storageKey)),s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:E},xform:Ar})}else if("phone"in e){const{phone:h,password:d,options:m}=e;s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ar})}else throw new tu("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xx})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xx})}else throw new tu("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new tp}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Zc(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ar});if(await eu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new tp}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(te(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ar}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new tp}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await ys(this.storage,this.storageKey));const{error:d}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:h}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new tu("You must provide either an email or phone number.")}catch(a){if(te(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ar});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await ys(this.storage,this.storageKey)),await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:K6})}catch(s){if(te(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new kr;const{error:i}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await se(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await se(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new tu("You must provide either an email or phone number and a type")}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Zc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,h)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,h))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lr}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kr}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Lr})})}catch(n){if(te(n))return B6(n)&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new kr;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ys(this.storage,this.storageKey));const{data:c,error:h}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Lr});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Kx(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kr;const n=Date.now()/1e3;let r=n,i=!0,s=null;const o=Kx(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(te(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new kr;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Tn())throw new nu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new nu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Qx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qx("No code detected.");const{data:_,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new nu("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(a);let m=h+d;l&&(m=parseInt(l));const y=m-h;y*1e3<=da&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${d}s`);const E=m-d;h-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,m,h):h-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,m,h);const{data:S,error:b}=await this._getUser(s);if(b)throw b;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:m,refresh_token:o,token_type:c,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(te(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Zc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!($6(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=P6(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ys(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(te(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,h;const{data:d,error:m}=s;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Tn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(te(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await N6(async i=>(i>0&&await C6(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ar})),(i,s)=>{const o=200*Math.pow(2,i);return s&&np(s)&&Date.now()+o-r<da})}catch(r){if(this._debug(n,"error",r),te(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Zc(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+Gx;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Gx}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),np(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Pd;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new kr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),te(s)){const o={session:null,error:s};return np(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await vA(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await eu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),da);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/da);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${da}ms, refresh threshold is ${e1} ticks`),i<=e1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof wA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await ys(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await se(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(te(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(te(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}}Cl.nextInstanceID=0;const sz=Cl;class oz extends sz{constructor(e){super(e)}}var az=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class lz{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=E6(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:f6,realtime:m6,auth:Object.assign(Object.assign({},p6),{storageKey:l}),global:d6},h=x6(r??{},c);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=_6(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new O9(`${a}/rest/v1`,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new u9(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new c6(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return az(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oz({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Q9(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cz=(t,e,n)=>new lz(t,e,n),uz="https://mlqpxbepbdriuyrimbrs.supabase.co",hz="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1scXB4YmVwYmRyaXV5cmltYnJzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkwNTM5MDIsImV4cCI6MjA1NDYyOTkwMn0.mIlE8aaqoB_elfQqDUGrqUpMF27QBbD39_ybszojPGI",Pu=cz(uz,hz,{auth:{persistSession:!0,autoRefreshToken:!0},db:{schema:"public"}});function n1(t){return t.replace(/[^a-zA-Z0-9-_/.]/g,"_")}async function dz(t,e){try{if(!Te.currentUser)throw new Error("User not authenticated");if(!t.type.startsWith("image/"))throw new Error("O arquivo enviado não é uma imagem válida");const n=new FormData;n.append("file",t),n.append("user_id",Te.currentUser.uid),n.append("version",e.version),n.append("bg_upsampler",e.bgUpsampler),n.append("real_esrgan",e.realEsrgan),n.append("upscale",e.upscale.toString()),console.log("Sending request to process image...");const r=await fetch("https://api.reviverimagem.shop/upload",{method:"POST",body:n});if(!r.ok){const m=await r.json();throw new Error(m.error||"Failed to process image")}const i=await r.json();if(!i.processedImage)throw new Error("Server did not return a processed image URL");const s=Date.now(),o=n1(Te.currentUser.uid),a=n1(t.name),l=`${o}/${s}_${a}`,{error:c}=await Pu.storage.from("processed-images").upload(l,t,{contentType:t.type,cacheControl:"3600"});if(c)throw console.error("Error uploading original image:",c),new Error("Failed to upload original image");const{data:h}=Pu.storage.from("processed-images").getPublicUrl(l),{error:d}=await Pu.from("processed_images").insert({firebase_user_id:Te.currentUser.uid,url_original:h.publicUrl,url_processada:i.processedImage,tamanho_do_arquivo:t.size,tipo_de_arquivo:t.type,configuracoes:e,criado_em:new Date().toISOString()});if(d)throw console.error("Error saving to Supabase:",d),new Error("Failed to save processed image metadata");return await JB(Te.currentUser.uid),i.processedImage}catch(n){throw console.error("Error in processImage:",n),n instanceof Error?n:new Error("Failed to process image")}}async function fz(t){if(!t)return console.error("No user ID provided to getProcessedImages"),[];try{console.log("Fetching images for user:",t);const{data:e,error:n}=await Pu.from("processed_images").select("*").eq("firebase_user_id",t).order("criado_em",{ascending:!1});if(n)throw console.error("Error fetching processed images:",n),n;return e?(console.log("Found images:",e.length),e.map(r=>({id:r.id,userId:r.firebase_user_id,originalUrl:r.url_original,processedUrl:r.url_processada,createdAt:new Date(r.criado_em)}))):(console.log("No images found for user"),[])}catch(e){return console.error("Error in getProcessedImages:",e),[]}}function pz(){const[t]=Ro(Te),[e,n]=N.useState(null),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){if(t)try{const o=await YB(t.uid);n(o)}catch(o){console.error("Erro ao carregar créditos:",o)}finally{i(!1)}}s()},[t]),!t||r?null:f.jsxs(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm",children:[e," créditos restantes"]})}function mz(){const[t]=Ro(Te),[e,n]=Ka.useState(!1),[r,i]=Ka.useState(null),s=Ht(),o=async l=>{if(t)try{n(!0),i(null);const c=Fx[l];if(!c)throw new Error("Invalid plan");await GB(c)}catch(c){console.error("Error initiating subscription:",c),i("Failed to initiate subscription. Please try again.")}finally{n(!1)}},a={free:{icon:Fk,gradient:"from-gray-600 to-gray-500",benefits:[{icon:bs,text:"10 créditos diários"},{icon:Di,text:"Acesso básico"},{icon:Ts,text:"Suporte por email"}]},basic:{icon:bh,gradient:"from-purple-600 to-blue-600",benefits:[{icon:bs,text:"100 créditos diários"},{icon:Di,text:"Acesso premium"},{icon:Ts,text:"Suporte prioritário"}]},pro:{icon:X$,gradient:"from-yellow-600 to-orange-600",benefits:[{icon:bs,text:"200 créditos diários"},{icon:Di,text:"Recursos avançados"},{icon:Ts,text:"Suporte VIP"}]},enterprise:{icon:iB,gradient:"from-blue-600 to-cyan-600",benefits:[{icon:bs,text:"300 créditos diários"},{icon:Di,text:"API access"},{icon:Ts,text:"Suporte dedicado"}]}};return f.jsx("div",{className:"bg-gradient-to-b from-gray-900 to-black p-4 sm:p-6 md:p-8",children:f.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[f.jsxs("div",{className:"flex flex-col items-center text-center mb-8 sm:mb-12",children:[f.jsxs(M.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"inline-flex items-center gap-2 px-4 py-1.5 bg-purple-500/10 rounded-full text-purple-400 text-sm font-medium mb-4",children:[f.jsx(bh,{className:"w-4 h-4"}),f.jsx("span",{children:"Escolha o plano ideal para você"})]}),f.jsx(M.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-3xl sm:text-4xl font-bold text-white mb-4",children:"Planos para todas as necessidades"}),f.jsx(M.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-gray-400 max-w-2xl mx-auto",children:"Comece gratuitamente e atualize conforme sua demanda crescer. Cancele a qualquer momento."})]}),r&&f.jsx(M.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"max-w-md mx-auto mb-6 p-4 bg-red-500/10 border border-red-500 rounded-lg text-red-500 text-sm text-center",children:r}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 justify-center",children:Object.entries(Fx).map(([l,c])=>{const h=a[l],d=h.icon,y=l==="free";return f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:`relative rounded-2xl overflow-hidden ${y?"bg-gradient-to-br from-purple-600 to-purple-800":"bg-gray-800/50 backdrop-blur-sm hover:bg-gray-800/80"} border border-gray-700/50`,children:[f.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${h.gradient} opacity-10`}),f.jsxs("div",{className:"relative p-6 flex flex-col h-full items-center text-center",children:[f.jsxs("div",{className:"flex flex-col items-center mb-6 w-full",children:[f.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center bg-gradient-to-br ${h.gradient} mb-2`,children:f.jsx(d,{className:"w-6 h-6 text-white"})}),y&&f.jsx("span",{className:"text-xs font-medium bg-white/20 px-3 py-1 rounded-full text-white mt-2",children:"Seu plano atual"})]}),f.jsxs("div",{className:"mb-6 text-center",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:c.name}),f.jsx("div",{className:"flex items-baseline justify-center gap-2",children:c.price>0?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:"text-3xl font-bold text-white",children:["R$",c.price.toFixed(2)]}),f.jsx("span",{className:"text-sm text-gray-400",children:"/mês"})]}):f.jsx("span",{className:"text-3xl font-bold text-white",children:"Grátis"})})]}),f.jsx("div",{className:"space-y-4 flex-grow w-full",children:h.benefits.map((E,S)=>f.jsxs("div",{className:"flex items-center justify-center gap-3",children:[f.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center bg-gradient-to-br ${h.gradient} bg-opacity-20`,children:f.jsx(E.icon,{className:"w-4 h-4 text-white"})}),f.jsx("span",{className:"text-sm text-gray-300",children:E.text})]},S))}),f.jsx("div",{className:"mt-8 w-full",children:y?f.jsxs(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>s("/settings"),className:"w-full py-3 bg-white/20 hover:bg-white/30 rounded-xl text-white font-medium transition-colors flex items-center justify-center gap-2",children:[f.jsx(Zs,{className:"w-5 h-5"}),f.jsx("span",{children:"Gerenciar Plano"}),f.jsx(Wm,{className:"w-5 h-5"})]}):f.jsx(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(l),disabled:e,className:`w-full py-3 rounded-xl font-medium transition-all flex items-center justify-center ${e?"opacity-50 cursor-not-allowed":c.price===0?"bg-gray-700 hover:bg-gray-600 text-white":`bg-gradient-to-r ${h.gradient} text-white hover:opacity-90`}`,children:e?f.jsxs("span",{className:"flex items-center justify-center gap-2",children:[f.jsx(_d,{className:"w-5 h-5 animate-spin"}),"Processando..."]}):f.jsx("span",{children:"Assinar Plano"})})})]})]},l)})}),f.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center mt-8 sm:mt-12 space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-400",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Di,{className:"w-4 h-4 text-purple-500"}),f.jsx("span",{children:"Pagamento seguro"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ts,{className:"w-4 h-4 text-purple-500"}),f.jsx("span",{children:"Suporte 24/7"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(bs,{className:"w-4 h-4 text-purple-500"}),f.jsx("span",{children:"Cancele quando quiser"})]})]}),f.jsx("p",{className:"text-xs text-gray-500",children:"Todos os planos incluem atualizações gratuitas e novas funcionalidades"})]})]})})}function gz({isOpen:t,onClose:e}){return f.jsx(jn,{children:t&&f.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start justify-center bg-black/50 backdrop-blur-sm overflow-y-auto",onClick:e,children:f.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",duration:.5},className:"relative w-full max-w-4xl bg-gray-900 rounded-xl shadow-2xl m-4",onClick:n=>n.stopPropagation(),children:[f.jsx(M.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white z-10",children:f.jsx(lr,{className:"w-6 h-6"})}),f.jsx("div",{className:"max-h-[90vh] overflow-y-auto",children:f.jsx(mz,{})})]})})})}function r1({settings:t,setSettings:e,onProcess:n,onClose:r,isProcessing:i}){const s=c=>{e(h=>({...h,version:c}))},o=c=>{e(h=>({...h,bgUpsampler:c}))},a=c=>{e(h=>({...h,realEsrgan:c}))},l=c=>{e(h=>({...h,upscale:c}))};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"text-xs font-medium",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("span",{children:"Configurações de processamento"}),f.jsx("span",{className:"text-purple-500 cursor-pointer hover:text-purple-400 transition-colors",children:"Predefinições"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:"Versão do Modelo"}),f.jsxs("div",{className:"cursor-help group relative",children:[f.jsx(Yc,{className:"w-3 h-3 text-gray-500"}),f.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-xs text-gray-300 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48",children:"Escolha a versão do modelo de IA para processamento"})]})]})}),f.jsx("div",{className:"grid grid-cols-2 gap-2",children:["1.2","1.3","1.4","RestoreFormer"].map(c=>f.jsxs("button",{onClick:()=>s(c),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${t.version===c?"bg-purple-600":"bg-gray-800 hover:bg-gray-700"}`,children:["v",c]},c))})]}),f.jsxs("div",{children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:"Background Upsampler"}),f.jsxs("div",{className:"cursor-help group relative",children:[f.jsx(Yc,{className:"w-3 h-3 text-gray-500"}),f.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-xs text-gray-300 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48",children:"Método de processamento do fundo da imagem"})]})]})}),f.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"none",label:"Nenhum"},{value:"realesrgan",label:"RealESRGAN"}].map(c=>f.jsx("button",{onClick:()=>o(c.value),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${t.bgUpsampler===c.value?"bg-purple-600":"bg-gray-800 hover:bg-gray-700"}`,children:c.label},c.value))})]}),f.jsxs("div",{children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:"Modelo RealESRGAN"}),f.jsxs("div",{className:"cursor-help group relative",children:[f.jsx(Yc,{className:"w-3 h-3 text-gray-500"}),f.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-xs text-gray-300 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48",children:"Versão do modelo RealESRGAN para upscaling"})]})]})}),f.jsx("div",{className:"grid grid-cols-3 gap-2",children:["x2","x4","x8"].map(c=>f.jsx("button",{onClick:()=>a(c),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${t.realEsrgan===c?"bg-purple-600":"bg-gray-800 hover:bg-gray-700"}`,children:c},c))})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:"Fator de Ampliação"}),f.jsxs("div",{className:"cursor-help group relative",children:[f.jsx(Yc,{className:"w-3 h-3 text-gray-500"}),f.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-xs text-gray-300 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48",children:"Quanto a imagem será ampliada"})]})]}),f.jsxs("span",{className:"text-xs text-gray-400",children:[t.upscale,"x"]})]}),f.jsx("input",{type:"range",min:"2",max:"8",step:"2",value:t.upscale,onChange:c=>l(Number(c.target.value)),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[f.jsx("span",{children:"2x"}),f.jsx("span",{children:"8x"})]})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,disabled:i,className:`w-full py-2 bg-purple-600 text-sm rounded-lg hover:bg-purple-700 transition-all ${i?"opacity-50 cursor-not-allowed":""}`,children:i?"Processando...":"Iniciar processamento"}),r&&f.jsx(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,className:"w-full py-2 bg-gray-800 text-sm rounded-lg hover:bg-gray-700 transition-all lg:hidden",children:"Fechar"})]})]})}const EA=6048e5,yz=864e5,i1=Symbol.for("constructDateFrom");function ci(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&i1 in t?t[i1](e):t instanceof Date?new t.constructor(e):new Date(e)}function En(t,e){return ci(e||t,t)}let vz={};function kd(){return vz}function Nl(t,e){var a,l,c,h;const n=kd(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,i=En(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Ih(t,e){return Nl(t,{...e,weekStartsOn:1})}function xA(t,e){const n=En(t,e==null?void 0:e.in),r=n.getFullYear(),i=ci(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Ih(i),o=ci(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Ih(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function s1(t){const e=En(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function _z(t,...e){const n=ci.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function o1(t,e){const n=En(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function wz(t,e,n){const[r,i]=_z(n==null?void 0:n.in,t,e),s=o1(r),o=o1(i),a=+s-s1(s),l=+o-s1(o);return Math.round((a-l)/yz)}function Ez(t,e){const n=xA(t,e),r=ci(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ih(r)}function xz(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Tz(t){return!(!xz(t)&&typeof t!="number"||isNaN(+En(t)))}function bz(t,e){const n=En(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Sz={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Iz=(t,e,n)=>{let r;const i=Sz[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function to(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Pz={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kz={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Az={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rz={date:to({formats:Pz,defaultWidth:"full"}),time:to({formats:kz,defaultWidth:"full"}),dateTime:to({formats:Az,defaultWidth:"full"})},Cz={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Nz=(t,e,n,r)=>Cz[t];function Pn(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Dz={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Oz={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jz={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vz={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Lz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Uz=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Fz={ordinalNumber:Uz,era:Pn({values:Dz,defaultWidth:"wide"}),quarter:Pn({values:Oz,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Pn({values:jz,defaultWidth:"wide"}),day:Pn({values:Vz,defaultWidth:"wide"}),dayPeriod:Pn({values:Mz,defaultWidth:"wide",formattingValues:Lz,defaultFormattingWidth:"wide"})};function kn(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Bz(a,d=>d.test(o)):$z(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(o.length);return{value:c,rest:h}}}function $z(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Bz(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function TA(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const zz=/^(\d+)(th|st|nd|rd)?/i,Wz=/\d+/i,qz={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Hz={any:[/^b/i,/^(a|c)/i]},Gz={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Kz={any:[/1/i,/2/i,/3/i,/4/i]},Qz={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Yz={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jz={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Xz={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zz={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},e8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},t8={ordinalNumber:TA({matchPattern:zz,parsePattern:Wz,valueCallback:t=>parseInt(t,10)}),era:kn({matchPatterns:qz,defaultMatchWidth:"wide",parsePatterns:Hz,defaultParseWidth:"any"}),quarter:kn({matchPatterns:Gz,defaultMatchWidth:"wide",parsePatterns:Kz,defaultParseWidth:"any",valueCallback:t=>t+1}),month:kn({matchPatterns:Qz,defaultMatchWidth:"wide",parsePatterns:Yz,defaultParseWidth:"any"}),day:kn({matchPatterns:Jz,defaultMatchWidth:"wide",parsePatterns:Xz,defaultParseWidth:"any"}),dayPeriod:kn({matchPatterns:Zz,defaultMatchWidth:"any",parsePatterns:e8,defaultParseWidth:"any"})},n8={code:"en-US",formatDistance:Iz,formatLong:Rz,formatRelative:Nz,localize:Fz,match:t8,options:{weekStartsOn:0,firstWeekContainsDate:1}};function r8(t,e){const n=En(t,e==null?void 0:e.in);return wz(n,bz(n))+1}function i8(t,e){const n=En(t,e==null?void 0:e.in),r=+Ih(n)-+Ez(n);return Math.round(r/EA)+1}function bA(t,e){var h,d,m,y;const n=En(t,e==null?void 0:e.in),r=n.getFullYear(),i=kd(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(m=i.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,o=ci((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Nl(o,e),l=ci((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Nl(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function s8(t,e){var a,l,c,h;const n=kd(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,i=bA(t,e),s=ci((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Nl(s,e)}function o8(t,e){const n=En(t,e==null?void 0:e.in),r=+Nl(n,e)-+s8(n,e);return Math.round(r/EA)+1}function fe(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ir={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return fe(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):fe(n+1,2)},d(t,e){return fe(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return fe(t.getHours()%12||12,e.length)},H(t,e){return fe(t.getHours(),e.length)},m(t,e){return fe(t.getMinutes(),e.length)},s(t,e){return fe(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return fe(i,e.length)}},_s={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},a1={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ir.y(t,e)},Y:function(t,e,n,r){const i=bA(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return fe(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):fe(s,e.length)},R:function(t,e){const n=xA(t);return fe(n,e.length)},u:function(t,e){const n=t.getFullYear();return fe(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return fe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return fe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ir.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return fe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=o8(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):fe(i,e.length)},I:function(t,e,n){const r=i8(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):fe(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ir.d(t,e)},D:function(t,e,n){const r=r8(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):fe(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return fe(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return fe(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return fe(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=_s.noon:r===0?i=_s.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=_s.evening:r>=12?i=_s.afternoon:r>=4?i=_s.morning:i=_s.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ir.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ir.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):fe(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):fe(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ir.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ir.s(t,e)},S:function(t,e){return Ir.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return c1(r);case"XXXX":case"XX":return Ni(r);case"XXXXX":case"XXX":default:return Ni(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return c1(r);case"xxxx":case"xx":return Ni(r);case"xxxxx":case"xxx":default:return Ni(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+l1(r,":");case"OOOO":default:return"GMT"+Ni(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+l1(r,":");case"zzzz":default:return"GMT"+Ni(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return fe(r,e.length)},T:function(t,e,n){return fe(+t,e.length)}};function l1(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+fe(s,2)}function c1(t,e){return t%60===0?(t>0?"-":"+")+fe(Math.abs(t)/60,2):Ni(t,e)}function Ni(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=fe(Math.trunc(r/60),2),s=fe(r%60,2);return n+i+e+s}const u1=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},SA=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},a8=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return u1(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",u1(r,e)).replace("{{time}}",SA(i,e))},l8={p:SA,P:a8},c8=/^D+$/,u8=/^Y+$/,h8=["D","DD","YY","YYYY"];function d8(t){return c8.test(t)}function f8(t){return u8.test(t)}function p8(t,e,n){const r=m8(t,e,n);if(console.warn(r),h8.includes(t))throw new RangeError(r)}function m8(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const g8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,y8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,v8=/^'([^]*?)'?$/,_8=/''/g,w8=/[a-zA-Z]/;function E8(t,e,n){var h,d,m,y,E,S,b,w;const r=kd(),i=(n==null?void 0:n.locale)??r.locale??n8,s=(n==null?void 0:n.firstWeekContainsDate)??((d=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(m=r.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((S=(E=n==null?void 0:n.locale)==null?void 0:E.options)==null?void 0:S.weekStartsOn)??r.weekStartsOn??((w=(b=r.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)??0,a=En(t,n==null?void 0:n.in);if(!Tz(a))throw new RangeError("Invalid time value");let l=e.match(y8).map(_=>{const T=_[0];if(T==="p"||T==="P"){const C=l8[T];return C(_,i.formatLong)}return _}).join("").match(g8).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const T=_[0];if(T==="'")return{isToken:!1,value:x8(_)};if(a1[T])return{isToken:!0,value:_};if(T.match(w8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:_}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(_=>{if(!_.isToken)return _.value;const T=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&f8(T)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&d8(T))&&p8(T,e,String(t));const C=a1[T[0]];return C(a,T,i.localize,c)}).join("")}function x8(t){const e=t.match(v8);return e?e[1].replace(_8,"'"):t}const T8={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},b8=(t,e,n)=>{let r;const i=T8[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"em "+r:"há "+r:r},S8={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},I8={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},P8={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},k8={date:to({formats:S8,defaultWidth:"full"}),time:to({formats:I8,defaultWidth:"full"}),dateTime:to({formats:P8,defaultWidth:"full"})},A8={lastWeek:t=>{const e=t.getDay();return"'"+(e===0||e===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},R8=(t,e,n,r)=>{const i=A8[t];return typeof i=="function"?i(e):i},C8={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},N8={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},D8={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},O8={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},j8={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},V8={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},M8=(t,e)=>{const n=Number(t);return(e==null?void 0:e.unit)==="week"?n+"ª":n+"º"},L8={ordinalNumber:M8,era:Pn({values:C8,defaultWidth:"wide"}),quarter:Pn({values:N8,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Pn({values:D8,defaultWidth:"wide"}),day:Pn({values:O8,defaultWidth:"wide"}),dayPeriod:Pn({values:j8,defaultWidth:"wide",formattingValues:V8,defaultFormattingWidth:"wide"})},U8=/^(\d+)[ºªo]?/i,F8=/\d+/i,$8={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},B8={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},z8={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},W8={any:[/1/i,/2/i,/3/i,/4/i]},q8={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},H8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},G8={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},K8={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},Q8={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},Y8={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},J8={ordinalNumber:TA({matchPattern:U8,parsePattern:F8,valueCallback:t=>parseInt(t,10)}),era:kn({matchPatterns:$8,defaultMatchWidth:"wide",parsePatterns:B8,defaultParseWidth:"any"}),quarter:kn({matchPatterns:z8,defaultMatchWidth:"wide",parsePatterns:W8,defaultParseWidth:"any",valueCallback:t=>t+1}),month:kn({matchPatterns:q8,defaultMatchWidth:"wide",parsePatterns:H8,defaultParseWidth:"any"}),day:kn({matchPatterns:G8,defaultMatchWidth:"wide",parsePatterns:K8,defaultParseWidth:"any"}),dayPeriod:kn({matchPatterns:Q8,defaultMatchWidth:"any",parsePatterns:Y8,defaultParseWidth:"any"})},X8={code:"pt-BR",formatDistance:b8,formatLong:k8,formatRelative:R8,localize:L8,match:J8,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Z8(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]}function e7({isOpen:t,onClose:e,imageUrl:n,fileName:r,fileSize:i,createdAt:s,onDelete:o}){return t?f.jsx(jn,{children:f.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,children:f.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-7xl mx-auto flex flex-col lg:flex-row gap-4 lg:gap-8 max-h-[90vh] overflow-hidden",onClick:a=>a.stopPropagation(),children:[f.jsx("div",{className:"flex-1 relative bg-black/50 rounded-lg overflow-hidden flex items-center justify-center",children:f.jsx("div",{className:"relative w-full h-full max-h-[70vh] lg:max-h-[90vh]",children:f.jsx("img",{src:n,alt:r,className:"w-full h-full object-contain",style:{maxHeight:"100%",maxWidth:"100%"}})})}),f.jsxs("div",{className:"w-full lg:w-80 bg-gray-900 rounded-lg p-4 lg:p-6 flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsx("h3",{className:"text-lg lg:text-xl font-bold text-white truncate flex-1 mr-2",children:r}),f.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-800 rounded-lg transition-colors flex-shrink-0",children:f.jsx(lr,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto",children:[f.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[f.jsx(G$,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("span",{className:"text-sm",children:E8(s,"d 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:X8})})]}),f.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[f.jsx(Mk,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("span",{className:"text-sm truncate",children:r})]}),f.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[f.jsx(Z$,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("span",{className:"text-sm",children:Z8(i)})]})]}),f.jsxs("div",{className:"flex flex-col gap-3 pt-4 mt-4 border-t border-gray-800",children:[f.jsxs(M.a,{href:n,download:!0,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[f.jsx(kv,{className:"w-5 h-5"}),f.jsx("span",{children:"Download"})]}),o&&f.jsxs(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500/20 transition-colors",children:[f.jsx(sB,{className:"w-5 h-5"}),f.jsx("span",{children:"Excluir imagem"})]})]})]})]})})}):null}function h1({originalUrl:t,processedUrl:e,isProcessing:n=!1,fileName:r="image.jpg",fileSize:i=0,createdAt:s=new Date,onDelete:o}){const[a,l]=N.useState(!1);return e&&!n?f.jsxs(f.Fragment,{children:[f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative aspect-square rounded-lg overflow-hidden bg-gray-800 cursor-pointer",onClick:()=>l(!0),children:[f.jsx("img",{src:e,alt:"Processed",className:"w-full h-full object-cover"}),f.jsxs(M.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity hidden sm:flex items-center justify-center gap-4",children:[f.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:c=>{c.stopPropagation(),l(!0)},className:"p-2 bg-purple-600 rounded-full",children:f.jsx(Ox,{className:"w-6 h-6"})}),f.jsx(M.a,{href:e,download:!0,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:c=>c.stopPropagation(),className:"p-2 bg-purple-600 rounded-full",children:f.jsx(kv,{className:"w-6 h-6"})})]}),f.jsx("div",{className:"absolute bottom-2 right-2 sm:hidden",children:f.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center",children:f.jsx(Ox,{className:"w-5 h-5"})})})]}),f.jsx(e7,{isOpen:a,onClose:()=>l(!1),imageUrl:e,fileName:r,fileSize:i,createdAt:s,onDelete:o})]}):n?f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative aspect-square rounded-lg overflow-hidden bg-gray-800",children:[f.jsx("img",{src:t,alt:"Processing",className:"w-full h-full object-cover blur-sm"}),f.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 flex flex-col items-center justify-center",children:[f.jsx(M.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:f.jsx(_d,{className:"w-8 h-8 text-purple-500"})}),f.jsx("p",{className:"text-sm text-white mt-2",children:"Processando..."})]})]}):null}function t7(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]}function n7(){const[t]=Ro(Te),e=Ht(),n=N.useRef(null),[r,i]=N.useState(!1),[s,o]=N.useState(null),[a,l]=N.useState(null),[c,h]=N.useState(!1),[d,m]=N.useState(!1),[y,E]=N.useState(!1),[S,b]=N.useState(!1),[w,_]=N.useState([]),[T,C]=N.useState(!0),[O,U]=N.useState({}),[P,v]=N.useState({version:"1.4",bgUpsampler:"none",realEsrgan:"x4",upscale:4});N.useEffect(()=>{async function V(){if(t)try{C(!0);const W=await fz(t.uid);_(W)}catch(W){console.error("Error loading processed images:",W)}finally{C(!1)}}V()},[t]);const I=V=>{V.preventDefault(),i(!0)},k=V=>{V.preventDefault(),i(!1)},R=N.useCallback(async V=>{V.preventDefault(),i(!1),o(null);const W=Array.from(V.dataTransfer.files);W.length>0&&await Ge(W[0])},[]),D=async V=>{o(null),V.target.files&&V.target.files.length>0&&await Ge(V.target.files[0])},A=V=>new Promise(W=>{const K=new Image;K.onload=()=>{W({width:K.width,height:K.height})},K.src=URL.createObjectURL(V)}),Ge=async V=>{try{if(!V.type.match(/^image\/(jpeg|png|webp)$/))throw new Error("Formato de arquivo não suportado. Use JPG, PNG ou WebP.");if(V.size>50*1024*1024)throw new Error("Arquivo muito grande. O tamanho máximo é 50MB.");const W=await A(V),K=URL.createObjectURL(V);l({file:V,preview:K,dimensions:W})}catch(W){o(W instanceof Error?W.message:"Erro ao fazer upload da imagem"),l(null)}},rn=()=>{var V;(V=n.current)==null||V.click()},Bn=()=>{a&&URL.revokeObjectURL(a.preview),l(null),o(null),n.current&&(n.current.value="")},ge=async()=>{if(!(!a||S))try{b(!0),o(null);const V=Date.now().toString();U(ce=>({...ce,[V]:{originalUrl:a.preview}}));const W=await dz(a.file,P),K={id:V,userId:(t==null?void 0:t.uid)||"",originalUrl:a.preview,processedUrl:W,createdAt:new Date};_(ce=>[K,...ce]),U(ce=>{const{[V]:de,...Pe}=ce;return Pe}),Bn(),y&&E(!1)}catch(V){console.error("Error processing image:",V),o(V instanceof Error&&V.message==="Créditos insuficientes"?"Você não tem créditos suficientes para processar esta imagem":V instanceof Error?V.message:"Falha ao processar imagem. Tente novamente."),U(W=>{const K={...W},ce=Object.keys(K).find(de=>!K[de].processedUrl);return ce&&delete K[ce],K})}finally{b(!1)}};return N.useEffect(()=>()=>{Object.values(O).forEach(V=>{URL.revokeObjectURL(V.originalUrl),V.processedUrl&&URL.revokeObjectURL(V.processedUrl)})},[O]),f.jsxs("div",{className:"flex flex-col min-h-screen bg-[#1C1C1E] text-white",children:[f.jsx("header",{className:"fixed top-0 left-0 right-0 bg-[#1C1C1E] border-b border-gray-800 z-50",children:f.jsx("div",{className:"max-w-full mx-auto px-4",children:f.jsxs("div",{className:"h-16 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e("/"),className:"p-2 rounded-lg bg-white-800 hover:bg-gray-700 transition-colors",children:f.jsx(tB,{size:16})}),f.jsx(M.img,{whileHover:{scale:1.1,rotate:360},transition:{duration:.6},src:"Duda_.png",alt:"Logo",className:"w-8 h-8"})]}),f.jsx("div",{className:"hidden md:flex space-x-4 text-sm",children:["Aprimorador","Gerador","Novo"].map((V,W)=>f.jsx(M.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:W*.1},className:V==="Aprimorador"?"text-white font-medium":"text-gray-400",children:V},V))}),f.jsxs("div",{className:"flex items-center",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(pz,{}),f.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"text-sm text-gray-400 hover:text-white transition-colors whitespace-nowrap",children:"Planos"})]}),f.jsx("div",{className:"hidden sm:block ml-4",children:f.jsx(Bk,{})}),f.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:1.95},onClick:()=>m(!d),className:"sm:hidden ml-4 p-2",children:f.jsx(Uk,{size:20})})]})]})})}),f.jsxs("div",{className:"flex flex-1 pt-16",children:[f.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"text-xs text-gray-400 font-medium mb-2 flex items-center justify-between",children:[f.jsx("span",{children:"IMAGENS PARA PROCESSAR"}),f.jsxs(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>E(!0),className:"lg:hidden flex items-center gap-2 text-purple-500",children:[f.jsx(Zs,{size:14}),f.jsx("span",{children:"Configurações"})]})]}),f.jsxs(M.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.3},onDragEnter:I,onDragOver:V=>V.preventDefault(),onDragLeave:k,onDrop:R,className:`relative h-48 sm:h-72 border-2 border-dashed border-gray-700 rounded-lg flex items-center justify-center transition-all duration-300 overflow-hidden ${r?"border-purple-500 bg-purple-500/10":"hover:border-gray-600"}`,children:[f.jsx("input",{ref:n,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:D,className:"hidden",id:"file-upload"}),a?f.jsxs(M.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"relative w-full h-full group",children:[f.jsx("img",{src:a.preview,alt:"Preview",className:"w-full h-full object-contain"}),f.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center",children:[f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-900/80 p-4 rounded-lg mb-4 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2 text-purple-400",children:[f.jsx(Mk,{size:16}),f.jsx("span",{className:"font-medium",children:a.file.name})]}),f.jsxs("div",{className:"space-y-1 text-gray-300",children:[f.jsxs("p",{children:["Tamanho: ",t7(a.file.size)]}),a.dimensions&&f.jsxs("p",{children:["Dimensões: ",a.dimensions.width," x ",a.dimensions.height,"px"]}),f.jsxs("p",{children:["Tipo: ",a.file.type.split("/")[1].toUpperCase()]})]})]}),f.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Bn,className:"bg-red-500 text-white p-2 rounded-full",children:f.jsx(lr,{size:24})})]})]}):f.jsxs("div",{className:"text-center px-4",children:[f.jsx(qm,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-600 mx-auto mb-4"}),f.jsxs("p",{className:"text-gray-400 mb-2 text-sm sm:text-base",children:["Solte suas imagens aqui, ou"," ",f.jsx("button",{onClick:rn,className:"text-purple-500 hover:text-purple-400 transition-colors",children:"procure"})]}),f.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 text-xs sm:text-sm",children:[f.jsx("span",{children:"ou importe de"}),f.jsx("button",{onClick:rn,className:"px-3 py-1 bg-gray-800 rounded-md flex items-center gap-1 hover:bg-gray-700 transition-colors",children:f.jsx($k,{className:"w-4 h-4"})}),f.jsx("button",{className:"px-3 py-1 bg-gray-800 rounded-md flex items-center gap-1 hover:bg-gray-700 transition-colors",children:f.jsx(Vk,{className:"w-4 h-4"})})]}),f.jsx("p",{className:"text-gray-600 text-xs mt-2",children:"JPG, PNG, WebP até 50 mb"})]}),f.jsx(jn,{children:s&&f.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute bottom-4 left-4 right-4 bg-red-500/10 border border-red-500 text-red-500 px-4 py-2 rounded-lg flex items-center justify-between text-sm",children:[f.jsx("span",{children:s}),f.jsx("button",{onClick:()=>o(null),className:"text-red-500 hover:text-red-400",children:f.jsx(lr,{size:20})})]})})]}),f.jsxs("div",{className:"mt-8",children:[f.jsx("div",{className:"text-xs text-gray-400 font-medium mb-4 flex justify-between items-center",children:f.jsx("span",{children:"IMAGENS PROCESSADAS"})}),f.jsx("div",{className:"space-y-4",children:T?f.jsxs("div",{className:"text-center py-8",children:[f.jsx(_d,{className:"w-8 h-8 text-purple-500 animate-spin mx-auto mb-4"}),f.jsx("p",{className:"text-gray-400",children:"Carregando imagens..."})]}):w.length>0||Object.keys(O).length>0?f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[Object.entries(O).map(([V,W])=>f.jsx(h1,{originalUrl:W.originalUrl,processedUrl:W.processedUrl,isProcessing:!W.processedUrl},V)),w.map(V=>f.jsx(h1,{originalUrl:V.originalUrl,processedUrl:V.processedUrl},V.id))]}):f.jsxs("div",{className:"text-center py-8 bg-gray-800/50 rounded-lg",children:[f.jsx(qm,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-400",children:"Nenhuma imagem processada ainda"}),f.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Suas imagens processadas aparecerão aqui"})]})})]})]})}),f.jsx(M.div,{initial:{x:"100%"},animate:{x:0},className:"hidden lg:block w-80 border-l border-gray-800 overflow-y-auto",children:f.jsx("div",{className:"sticky top-0 p-4 bg-[#1C1aC1E]",children:f.jsx(r1,{settings:P,setSettings:v,onProcess:ge,isProcessing:S})})})]}),f.jsx(jn,{children:d&&f.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:()=>m(!1),children:f.jsx(M.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-[#1C1C1E] overflow-y-auto",onClick:V=>V.stopPropagation(),children:f.jsxs("div",{className:"p-4 space-y-4",children:[f.jsxs(M.button,{whileHover:{scale:1.02},whileTap:{scale:.95},onClick:()=>m(!1),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 rounded-lg text-white hover:bg-gray-700 transition-colors",children:[f.jsx(qa,{className:"w-5 h-5"}),f.jsx("span",{children:"Voltar para Minhas Imagens"})]}),f.jsxs("div",{className:"flex items-center gap-4 py-4 border-t border-gray-800",children:[f.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-purple-500",children:f.jsx("img",{src:(t==null?void 0:t.photoURL)||`https://api.dicebear.com/7.x/avatars/svg?seed=${t==null?void 0:t.email}`,alt:"Foto de perfil",className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-white",children:(t==null?void 0:t.displayName)||"Usuário"}),f.jsx("p",{className:"text-sm text-gray-400",children:t==null?void 0:t.email})]})]}),f.jsx("div",{className:"space-y-3 py-4 border-t border-gray-800",children:["Aprimorador","Gerador","Novo"].map(V=>f.jsx(M.button,{whileTap:{scale:.95},className:`w-full px-4 py-3 rounded-lg ${V==="Aprimorador"?"bg-purple-600 text-white":"bg-gray-800 text-gray-300"}`,children:V},V))}),f.jsxs("div",{className:"space-y-3 py-4 border-t border-gray-800",children:[f.jsxs(M.button,{whileTap:{scale:.95},onClick:()=>{m(!1),e("/settings")},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 rounded-lg text-gray-300",children:[f.jsx(Zs,{className:"w-5 h-5"}),f.jsx("span",{children:"Configurações"})]}),f.jsxs(M.button,{whileTap:{scale:.95},onClick:()=>Te.signOut(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500/10 rounded-lg text-red-500",children:[f.jsx(vd,{className:"w-5 h-5"}),f.jsx("span",{children:"Sair"})]})]})]})})})}),f.jsx(jn,{children:y&&f.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lg:hidden fixed inset-0 bg-black/50 z-50",onClick:()=>E(!1),children:f.jsx(M.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute right-0 top-0 bottom-0 w-full sm:w-80 bg-[#1C1C1E] overflow-y-auto",onClick:V=>V.stopPropagation(),children:f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-lg font-semibold text-white",children:"Configurações"}),f.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>E(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:f.jsx(lr,{size:24})})]}),f.jsx(r1,{settings:P,setSettings:v,onProcess:ge,onClose:()=>E(!1),isProcessing:S})]})})})}),f.jsx(gz,{isOpen:c,onClose:()=>h(!1)}),f.jsx(M.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},whileTap:{scale:.95},onClick:()=>E(!0),className:"lg:hidden fixed bottom-6 right-6 w-14 h-14 rounded-full bg-purple-600 shadow-lg flex items-center justify-center z-20",children:f.jsx(Zs,{size:24})})]})}var r7="@vercel/analytics",i7="1.4.1",s7=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function IA(){return typeof window<"u"}function PA(){try{const t="production"}catch{}return"production"}function o7(t="auto"){if(t==="auto"){window.vam=PA();return}window.vam=t}function a7(){return(IA()?window.vam:PA())||"production"}function rp(){return a7()==="development"}var l7="https://va.vercel-scripts.com/v1/script.debug.js",c7="/_vercel/insights/script.js";function u7(t={debug:!0}){var e;if(!IA())return;o7(t.mode),s7(),t.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",t.beforeSend));const n=t.scriptSrc||(rp()?l7:c7);if(document.head.querySelector(`script[src*="${n}"]`))return;const r=document.createElement("script");r.src=n,r.defer=!0,r.dataset.sdkn=r7+(t.framework?`/${t.framework}`:""),r.dataset.sdkv=i7,t.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),t.endpoint&&(r.dataset.endpoint=t.endpoint),t.dsn&&(r.dataset.dsn=t.dsn),r.onerror=()=>{const i=rp()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${i}`)},rp()&&t.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function h7({route:t,path:e}){var n;(n=window.va)==null||n.call(window,"pageview",{route:t,path:e})}function d7(t){return N.useEffect(()=>{var e;t.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]),N.useEffect(()=>{u7({framework:t.framework||"react",...t.route!==void 0&&{disableAutoTrack:!0},...t})},[]),N.useEffect(()=>{t.route&&t.path&&h7({route:t.route,path:t.path})},[t.route,t.path]),null}function f7(){return f.jsx("div",{className:"fixed inset-0 bg-gray-900 flex items-center justify-center z-50",children:f.jsxs(M.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.3},className:"relative",children:[f.jsx(M.div,{className:"w-16 h-16 border-4 border-purple-500/30 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),f.jsx(M.div,{className:"absolute top-0 left-0 w-16 h-16 border-4 border-t-purple-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})]})})}var p7="@vercel/speed-insights",m7="1.1.0",g7=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function y7(){return typeof window<"u"}function v7(){try{const t="production"}catch{}return"production"}function d1(){return v7()==="development"}var kA="https://va.vercel-scripts.com/v1/speed-insights",_7=`${kA}/script.js`,w7=`${kA}/script.debug.js`,E7="/_vercel/speed-insights/script.js";function x7(t={}){var e;if(!y7()||t.route===null)return null;g7();const r=!!t.dsn?_7:E7,i=t.scriptSrc||(d1()?w7:r);if(document.head.querySelector(`script[src*="${i}"]`))return null;t.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",t.beforeSend));const s=document.createElement("script");return s.src=i,s.defer=!0,s.dataset.sdkn=p7+(t.framework?`/${t.framework}`:""),s.dataset.sdkv=m7,t.sampleRate&&(s.dataset.sampleRate=t.sampleRate.toString()),t.route&&(s.dataset.route=t.route),t.endpoint&&(s.dataset.endpoint=t.endpoint),t.dsn&&(s.dataset.dsn=t.dsn),d1()&&t.debug===!1&&(s.dataset.debug="false"),s.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${i}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(s),{setRoute:o=>{s.dataset.route=o??void 0}}}function T7(t){N.useEffect(()=>{var n;t.beforeSend&&((n=window.si)==null||n.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const e=N.useRef(null);return N.useEffect(()=>{if(e.current)t.route&&e.current(t.route);else{const n=x7({framework:t.framework||"react",...t});n&&(e.current=n.setRoute)}},[t.route]),null}function ip({children:t}){const[e,n]=Ro(Te);return n?f.jsx(f7,{}):e?f.jsx(f.Fragment,{children:t}):f.jsx(x2,{to:"/login",replace:!0})}function b7(){return f.jsxs(f.Fragment,{children:[f.jsx(T7,{})," ",f.jsx(d7,{})," ",f.jsxs(b2,{children:[f.jsx(Pi,{path:"/",element:f.jsx(VB,{})}),f.jsx(Pi,{path:"/login",element:f.jsx($$,{})}),f.jsx(Pi,{path:"/register",element:f.jsx(B$,{})}),f.jsx(Pi,{path:"/my-images",element:f.jsx(ip,{children:f.jsx(n7,{})})}),f.jsx(Pi,{path:"/payment/*",element:f.jsx(ip,{children:f.jsx(QB,{})})}),f.jsx(Pi,{path:"/settings",element:f.jsx(ip,{children:f.jsx(n9,{})})})]})]})}sp.createRoot(document.getElementById("root")).render(f.jsx(Ka.StrictMode,{children:f.jsx(N2,{children:f.jsx(b7,{})})}));export{f1 as g};
